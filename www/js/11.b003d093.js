(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"8cfe":function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return P}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"full-height WidgetsPage"},[i("div",{staticClass:"row no-wrap"},[i("q-toolbar",{staticClass:"paper",staticStyle:{"min-height":"56px"}},[i("q-toolbar-title",{attrs:{shrink:""}},[t._v(t._s(t.$t("Widgets"))+" ("+t._s(t.widgetsCount)+")")]),i("q-space"),i("q-btn",{attrs:{color:"primary",icon:"mdi-plus-circle",label:t.$t("Add Widget")},on:{click:t.addWidget}})],1)],1),i("widget-page",{attrs:{widgetId:t.selectedWidgetId},on:{onClose:function(e){t.selectedWidgetId=null}}}),t._l(t.groups,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.expertMode&&e.widgets.length>0,expression:"!expertMode && group.widgets.length > 0"}],key:e.id,staticClass:"row no-wrap paper"},[i("q-expansion-item",{staticClass:"full-width",attrs:{icon:e.icon,label:e.label+" ("+e.widgets.length+")"},model:{value:t.expanded[e.id],callback:function(i){t.$set(t.expanded,e.id,i)},expression:"expanded[group.id]"}},[i("widgets-table",{attrs:{widgets:e.widgets},on:{onEditWidget:t.editWidget}})],1)],1)})),i("paper",{directives:[{name:"show",rawName:"v-show",value:t.expertMode,expression:"expertMode"}],style:{height:t.pageHeight-66-16+"px"}},[i("json-editor",{attrs:{id:"widgets",json:t.json},on:{onChange:t.onJsonEditor}})],1)],2)},s=[],a=i("ed09"),n=i("a54a"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md"},[i("q-table",{attrs:{data:t.widgets,columns:t.columns,pagination:t.pagination,"rows-per-page-label":t.$t("Widgets per page")},scopedSlots:t._u([{key:"header",fn:function(e){return[i("q-tr",{attrs:{props:e}},[i("q-th",{attrs:{"auto-width":""}}),t._l(e.cols,(function(o){return i("q-th",{directives:[{name:"show",rawName:"v-show",value:"id"!==o.field,expression:"col.field !== 'id'"}],key:o.name,attrs:{props:e}},[t._v("\n\t\t\t\t\t\n\t\t\t\t\t"+t._s(o.label)+"\n\t\t\t\t")])})),i("q-th",{attrs:{"auto-width":""}})],2)]}},{key:"body",fn:function(e){return[i("q-tr",{class:{rowDeleted:t.isDeleted(e.row)},attrs:{props:e}},[i("q-td",{attrs:{"auto-width":""}},[!0!==t.isDeleted(e.row)?i("div",[i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-pencil"},on:{click:function(i){return t.onWidgetEdit(e.row)}}}),i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-content-copy"},on:{click:function(i){return t.onWidgetCopy(e.row)}}})],1):t._e()]),i("q-td",[i("div",{class:{itemDeleted:t.isDeleted(e.row)},on:{click:function(i){return t.copyToClipboard(e.cols[0].value)}}},[i("q-tooltip",[t._v("\n\t\t\t\t\t\t\tID: "+t._s(e.cols[0].value)+" ("+t._s(t.$t("click to copy to clipboard"))+")\n\t\t\t\t\t\t")]),e.cols[1].value?i("span",[t._v(t._s(e.cols[1].value))]):i("em",[t._v("("+t._s(t.$t("no title"))+")")]),e.row.label?i("span",[t._v(" ("+t._s(e.row.label)+")")]):t._e(),i("icon",{staticStyle:{"margin-left":"4px"},attrs:{name:"clipboard-text-multiple-outline",size:"xs"}})],1)]),i("q-td",[i("div",{class:{itemDeleted:t.isDeleted(e.row)}},[t._v("\n\t\t\t\t\t\t"+t._s(e.cols[2].value)+"\n\t\t\t\t\t")])]),i("q-td",[t.usage[e.row.id]?i("div",{class:{itemDeleted:t.isDeleted(e.row)}},[t._v("\n\t\t\t\t\t\t"+t._s(t.usage[e.row.id].length)+":\n\t\t\t\t\t\t"),t._l(t.usage[e.row.id],(function(o,s){var a=o.widget,n=o.tab,d=o.page;return i("q-chip",{key:e.row.id+"-"+s,attrs:{square:"",color:"primary","text-color":"white",clickable:""},on:{click:function(e){return t.goTo(d,n,a)}}},[t._v("\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t"+t._s(n.title+" ("+d.title+")")+"\n\t\t\t\t\t\t")])}))],2):i("div",{class:{itemDeleted:t.isDeleted(e.row)}})]),i("q-td",{attrs:{"auto-width":""}},[!0!==t.isDeleted(e.row)?i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-delete",color:"negative"},on:{click:function(i){return t.onWidgetRemove(e.row)}}}):t._e(),t.isDeleted(e.row)?i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-restore",color:"positive"},on:{click:function(i){return t.onWidgetRestore(e.row)}}}):t._e()],1)],1)]}}])})],1)},r=[],l=(i("ddb0"),i("cdde")),c=Object(a["c"])({name:"WidgetsTable",props:["widgets"],watch:{"$store.state.editor.layout":{deep:!0,immediate:!0,handler:function(t){this.usage={};for(const e of t){const t=e.tabs||[];for(const i of t){const t=[...i.widgetsDesktop||[],...i.widgetsSmartphone||[]];for(const o of t){const t=o.items||[];for(const s of t)this.usage[s]=this.usage[s]||[],this.usage[s].push({widget:o,tab:i,page:e})}}}}}},data(){return{pagination:{sortBy:"title",rowsPerPage:15},columns:[{name:"id",label:this.$i18n.t("ID"),field:"id",align:"left",sortable:!0},{name:"title",label:this.$i18n.t("Title")+" ("+this.$i18n.t("ID")+")",field:"title",align:"left",sortable:!0,style:{width:"20%"}},{name:"module",label:this.$i18n.t("Module"),field:"module",align:"left",sortable:!0,style:{width:"15%"}},{name:"usage",label:this.$i18n.t("Usage")+" [ #: "+this.$i18n.t("Tab")+" ("+this.$i18n.t("Page")+") ]",field:"usage",align:"left",sortable:!0,style:{width:"65%"}}]}},methods:{goTo(t,e,i){this.$store.commit("editor/set",{selectedPage:t,selectedTab:e}),this.$router.push({name:"LayoutPage"})},copyToClipboard(t){Object(l["a"])(t).then((()=>{this.$q.notify(this.$t("ID copied"))})).catch((()=>{}))},isDeleted(t){return!0===t._deleted},onWidgetEdit(t){this.$emit("onEditWidget",t)},onWidgetCopy(t){this.$store.commit("editor/copyWidget",{widget:t})},onWidgetRemove(t){this.$store.commit("editor/removeWidget",{widget:t})},onWidgetRestore(t){this.$store.commit("editor/restoreWidget",{widget:t})}}}),g=c,u=i("2877"),p=i("eaac"),h=i("bd08"),w=i("357e"),m=i("db86"),b=i("9c40"),f=i("05c0"),v=i("b047"),_=i("eebe"),W=i.n(_),$=Object(u["a"])(g,d,r,!1,null,null,null),q=$.exports;W()($,"components",{QTable:p["a"],QTr:h["a"],QTh:w["a"],QTd:m["a"],QBtn:b["a"],QTooltip:f["a"],QChip:v["a"]});var y=i("424e"),x=i("ec26"),D=i("086f"),k=Object(a["c"])({name:"WidgetsPage",components:{JsonEditor:n["a"],WidgetsTable:q,WidgetPage:y["a"]},data(){return{expanded:{},selectedWidgetId:null}},methods:{addWidget(){this.selectedWidgetId=Object(x["a"])()},editWidget(t){this.selectedWidgetId=t.id},onJsonEditor(t){t._error||this.$store.commit("editor/set",{[t.id]:JSON.parse(t.value)})}},computed:{pageHeight(){return this.$store.state.jarvis.pageHeight},groups(){return this.$store.getters["editor/getGroupedWidgets"]},widgetsCount(){return this.$store.getters["editor/getWidgetsWthoutDeletionsCount"]},json(){return this.$store.state.editor.widgets},expertMode(){var t;return null===(t=this.$store.state.editor.settings)||void 0===t?void 0:t.configExpertMode}},created(){D["default"].register(this.$i18n,D["default"].translations)}}),T=k,C=i("65c6"),Q=i("6ac5"),j=i("2c91"),E=i("3b73"),I=Object(u["a"])(T,o,s,!1,null,null,null),P=I.exports;W()(I,"components",{QToolbar:C["a"],QToolbarTitle:Q["a"],QSpace:j["a"],QBtn:b["a"],QExpansionItem:E["a"]})}}]);