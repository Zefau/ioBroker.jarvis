(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"8cfe":function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return E}));var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"full-height WidgetsPage"},[e("div",{staticClass:"row no-wrap"},[e("q-toolbar",{staticClass:"paper",staticStyle:{"min-height":"56px"}},[e("q-toolbar-title",{attrs:{shrink:""}},[t._v(t._s(t.$t("Widgets"))+" ("+t._s(t.widgetsCount)+")")]),e("q-space"),e("q-btn",{attrs:{color:"primary",icon:"mdi-plus-circle",label:t.$t("Add Widget")},on:{click:t.addWidget}})],1)],1),e("widget-page",{attrs:{widgetId:t.selectedWidgetId},on:{onClose:function(e){t.selectedWidgetId=null}}}),t._l(t.groups,(function(i){return e("div",{directives:[{name:"show",rawName:"v-show",value:!t.expertMode&&i.widgets.length>0,expression:"!expertMode && group.widgets.length > 0"}],key:i.id,staticClass:"row no-wrap paper"},[e("q-expansion-item",{staticClass:"full-width",attrs:{icon:i.icon,label:i.label+" ("+i.widgets.length+")"},model:{value:t.expanded[i.id],callback:function(e){t.$set(t.expanded,i.id,e)},expression:"expanded[group.id]"}},[e("widgets-table",{attrs:{widgets:i.widgets},on:{onEditWidget:t.editWidget}})],1)],1)})),e("paper",{directives:[{name:"show",rawName:"v-show",value:t.expertMode,expression:"expertMode"}],style:{height:t.pageHeight-66-16+"px"}},[e("json-editor",{attrs:{id:"widgets",json:t.json},on:{onChange:t.onJsonEditor}})],1)],2)},s=[],a=i("ed09"),n=i("a54a"),d=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"q-pa-md"},[e("q-table",{attrs:{data:t.widgets,columns:t.columns,pagination:t.pagination,"rows-per-page-label":t.$t("Widgets per page")},scopedSlots:t._u([{key:"header",fn:function(i){return[e("q-tr",{attrs:{props:i}},[e("q-th",{attrs:{"auto-width":""}}),t._l(i.cols,(function(o){return e("q-th",{directives:[{name:"show",rawName:"v-show",value:"id"!==o.field,expression:"col.field !== 'id'"}],key:o.name,attrs:{props:i}},[t._v("\n\t\t\t\t\t\n\t\t\t\t\t"+t._s(o.label)+"\n\t\t\t\t")])})),e("q-th",{attrs:{"auto-width":""}})],2)]}},{key:"body",fn:function(i){return[e("q-tr",{class:{rowDeleted:t.isDeleted(i.row)},attrs:{props:i}},[e("q-td",{attrs:{"auto-width":""}},[!0!==t.isDeleted(i.row)?e("div",[e("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-pencil"},on:{click:function(e){return t.onWidgetEdit(i.row)}}}),e("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-content-copy"},on:{click:function(e){return t.onWidgetCopy(i.row)}}})],1):t._e()]),e("q-td",[e("div",{class:{itemDeleted:t.isDeleted(i.row)},on:{click:function(e){return t.copyToClipboard(i.cols[0].value)}}},[e("q-tooltip",[t._v("\n\t\t\t\t\t\t\tID: "+t._s(i.cols[0].value)+" ("+t._s(t.$t("click to copy to clipboard"))+")\n\t\t\t\t\t\t")]),i.cols[1].value?e("span",[t._v(t._s(i.cols[1].value))]):e("em",[t._v("("+t._s(t.$t("no title"))+")")]),i.row.label?e("span",[t._v(" ("+t._s(i.row.label)+")")]):t._e(),e("icon",{staticStyle:{"margin-left":"4px"},attrs:{name:"clipboard-text-multiple-outline",size:"xs"}})],1)]),e("q-td",[e("div",{class:{itemDeleted:t.isDeleted(i.row)}},[t._v("\n\t\t\t\t\t\t"+t._s(i.cols[2].value)+"\n\t\t\t\t\t")])]),e("q-td",[t.usage[i.row.id]?e("div",{class:{itemDeleted:t.isDeleted(i.row)}},[t._v("\n\t\t\t\t\t\t"+t._s(t.usage[i.row.id].length)+":\n\t\t\t\t\t\t"),t._l(t.usage[i.row.id],(function({widget:o,tab:s,page:a},n){return e("q-chip",{key:i.row.id+"-"+n,attrs:{square:"",color:"primary","text-color":"white",clickable:""},on:{click:function(e){return t.goTo(a,s,o)}}},[t._v("\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t"+t._s(s.title+" ("+a.title+")")+"\n\t\t\t\t\t\t")])}))],2):e("div",{class:{itemDeleted:t.isDeleted(i.row)}})]),e("q-td",{attrs:{"auto-width":""}},[!0!==t.isDeleted(i.row)?e("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-delete",color:"negative"},on:{click:function(e){return t.onWidgetRemove(i.row)}}}):t._e(),t.isDeleted(i.row)?e("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-restore",color:"positive"},on:{click:function(e){return t.onWidgetRestore(i.row)}}}):t._e()],1)],1)]}}])})],1)},r=[],l=(i("ddb0"),i("cdde")),c=Object(a["b"])({name:"WidgetsTable",props:["widgets"],watch:{"$store.state.editor.layout":{deep:!0,immediate:!0,handler:function(t){this.usage={};for(const e of t){const t=e.tabs||[];for(const i of t){const t=[...i.widgetsDesktop||[],...i.widgetsSmartphone||[]];for(const o of t){const t=o.items||[];for(const s of t)this.usage[s]=this.usage[s]||[],this.usage[s].push({widget:o,tab:i,page:e})}}}}}},data(){return{pagination:{sortBy:"title",rowsPerPage:15},columns:[{name:"id",label:this.$i18n.t("ID"),field:"id",align:"left",sortable:!0},{name:"title",label:this.$i18n.t("Title")+" ("+this.$i18n.t("ID")+")",field:"title",align:"left",sortable:!0,style:{width:"20%"}},{name:"module",label:this.$i18n.t("Module"),field:"module",align:"left",sortable:!0,style:{width:"15%"}},{name:"usage",label:this.$i18n.t("Usage")+" [ #: "+this.$i18n.t("Tab")+" ("+this.$i18n.t("Page")+") ]",field:"usage",align:"left",sortable:!0,style:{width:"65%"}}]}},methods:{goTo(t,e,i){this.$store.commit("editor/set",{selectedPage:t,selectedTab:e}),this.$router.push({name:"LayoutPage"})},copyToClipboard(t){Object(l["a"])(t).then((()=>{this.$q.notify(this.$t("ID copied"))})).catch((()=>{}))},isDeleted(t){return!0===t._deleted},onWidgetEdit(t){this.$emit("onEditWidget",t)},onWidgetCopy(t){this.$store.commit("editor/copyWidget",{widget:t})},onWidgetRemove(t){this.$store.commit("editor/removeWidget",{widget:t})},onWidgetRestore(t){this.$store.commit("editor/restoreWidget",{widget:t})}}}),g=c,u=i("2877"),p=i("eaac"),h=i("bd08"),w=i("357e"),m=i("db86"),b=i("9c40"),f=i("05c0"),v=i("b047"),_=i("eebe"),W=i.n(_),$=Object(u["a"])(g,d,r,!1,null,null,null),y=$.exports;W()($,"components",{QTable:p["a"],QTr:h["a"],QTh:w["a"],QTd:m["a"],QBtn:b["a"],QTooltip:f["a"],QChip:v["a"]});var x=i("424e"),q=i("ec26"),D=i("086f"),k=Object(a["b"])({name:"WidgetsPage",components:{JsonEditor:n["a"],WidgetsTable:y,WidgetPage:x["a"]},data(){return{expanded:{},selectedWidgetId:null}},methods:{addWidget(){this.selectedWidgetId=Object(q["a"])()},editWidget(t){this.selectedWidgetId=t.id},onJsonEditor(t){t._error||this.$store.commit("editor/set",{[t.id]:JSON.parse(t.value)})}},computed:{pageHeight(){return this.$store.state.jarvis.pageHeight},groups(){return this.$store.getters["editor/getGroupedWidgets"]},widgetsCount(){return this.$store.getters["editor/getWidgetsWthoutDeletionsCount"]},json(){return this.$store.state.editor.widgets},expertMode(){var t;return null===(t=this.$store.state.editor.settings)||void 0===t?void 0:t.configExpertMode}},created(){D["default"].register(this.$i18n,D["default"].translations)}}),T=k,C=i("65c6"),Q=i("6ac5"),j=i("2c91"),I=i("3b73"),P=Object(u["a"])(T,o,s,!1,null,null,null),E=P.exports;W()(P,"components",{QToolbar:C["a"],QToolbarTitle:Q["a"],QSpace:j["a"],QBtn:b["a"],QExpansionItem:I["a"]})}}]);