{"version":3,"sources":["components/inputs/Field.js","components/inputs/Text.js","config/adapters.js","components/Inputs.js","functions/_defaults/index.js","controller/Log.js","helpers/timeConverter.js","modules/StateList/StateList.config.js","functions/_defaults/defaults.js","functions/blind/index.js","functions/blind/blind.js","functions/door/index.js","functions/door/door.js","functions/heating/index.js","functions/heating/heating.js","functions/light/index.js","functions/light/light.js","functions/location/index.js","functions/location/location.js","functions/user/index.js","functions/user/user.js","functions/window/index.js","functions/window/window.js","modules/DateTime/DateTime.config.js","modules/Map/Map.config.js","modules/iFrame/iFrame.config.js","config/config.dev.js","functions/blind/blind-manufacturers.js","modules/Multimedia/MultimediaItem.js","modules/StateList/StateList.js","modules/StateList/StateListItem.js","components/EnhancedTableToolbar.js","components/EnhancedTableHead.js","components/EnhancedTableBody.js","components/EnhancedTable.js","controller/Function.js","controller/Device.js","functions/blind/components.js","functions/heating/components.js","modules/AdapterStatus/AdapterStatus.config.js","modules/AdapterStatus/AdapterStatus.settings.js","modules/Chart/Chart.config.js","modules/Chart/Chart.settings.js","modules/DateTime/DateTime.settings.js","modules/Map/Map.settings.js","modules/Multimedia/Multimedia.config.js","modules/Multimedia/Multimedia.settings.js","modules/StateList/StateList.settings.js","components/inputs/Chips.js","components/inputs/Fieldset.js","modules/StateListHorizontal/StateListHorizontal.config.js","modules/StateListHorizontal/StateListHorizontal.settings.js","modules/Weather/Weather.config.js","modules/Weather/Weather.settings.js","modules/iFrame/iFrame.settings.js","controller/Settings.js","helpers/colorConverter.js","functions/light/components.js","controller/i18n.js","functions sync /^/.*$","functions/_defaults/i18n/de.js","functions/_defaults/i18n/en.js","functions/blind/i18n/de.js","functions/blind/i18n/en.js","functions/door/i18n/de.js","functions/door/i18n/en.js","functions/heating/i18n/de.js","functions/heating/i18n/en.js","controller/Socket.js","controller/Connection.js","functions/light/i18n/de.js","functions/light/i18n/en.js","functions/location/i18n/de.js","functions/location/i18n/en.js","functions/user/i18n/de.js","functions/user/i18n/en.js","functions/window/i18n/de.js","functions/window/i18n/en.js","i18n sync /^/.*$","i18n/de.js","i18n/en.js","modules sync /^/.*$","modules/AdapterStatus/AdapterStatus.js","modules/AdapterStatus/i18n/de.js","modules/Chart/Chart.js","modules/Chart/i18n/de.js","modules/DateTime/DateTime.js","modules/DateTime/i18n/de.js","modules/Map/Map.js","modules/Map/i18n/de.js","modules/Multimedia/Multimedia.js","modules/Multimedia/i18n/de.js","components/inputs/Switch.js","modules/StateList/i18n/de.js","modules/StateListHorizontal/StateListHorizontal.js","modules/StateListHorizontal/i18n/de.js","modules/Weather/Weather.js","modules/Weather/i18n/de.js","modules/iFrame/i18n/de.js","modules/iFrame/iFrame.js","pages/ConfigurationPage/DevicesPage/i18n/de.js","components/inputs/Label.js","components/inputs/Radio.js","controller/Devices.js","config/config.js","helpers/utils.js","functions/index.js","modules/index.js","config/adapters/alias.js","config/adapters/deconz.js","config/adapters/hm-prc.js","config/adapters/hue.js","config/adapters/hue-extended.js","config/adapters/shelly.js","functions sync /^/.*/components$","modules/AdapterStatus/screenshots/AdapterStatus1.png","modules/Chart/screenshots/Chart1.png","modules/DateTime/screenshots/DateTime1.png","components/inputs/Button.js","components/inputs/Checkbox.js","components/inputs/Number.js","components/inputs/Select.js","modules/StateList/screenshots/StateList1.png","modules/StateList/screenshots/StateList2.png","modules/StateList/screenshots/StateList3.png","modules/StateList/screenshots/StateList4.png","modules/StateListHorizontal/screenshots/StateListHorizontal1.png","modules/iFrame/screenshots/DateTime1.png","modules sync /^/.*/.settings$","modules sync /^/.*/.config$","pages/ConfigurationPage/DevicesPage/i18n sync /^/.*$","pages/LogsPage/LogsPage.js","components/GridContainer.js","components/StatusSnackbar.js","components/TopBar.js","helpers/useWindowDimensions.js","components/TabBar.js","components/DeviceStateDetails.js","components/Widget.js","pages/index.js","Jarvis.js","App.js","serviceWorker.js","index.js","pages/ConfigurationPage/DevicesPage/Devices.config.js","pages/ConfigurationPage/DevicesPage/DevicesPage.js","pages/ConfigurationPage/DevicesPage/ImportDevicesPage.js","pages/ConfigurationPage/DevicesPage/DevicesListPage.js","pages/ConfigurationPage/LayoutsPage/Layouts.config.js","components/Placeholder.js","pages/ConfigurationPage/LayoutsPage/WidgetPage.js","pages/ConfigurationPage/LayoutsPage/LayoutsPage.js","pages/ConfigurationPage/SettingsPage/Settings.config.js","pages/ConfigurationPage/SettingsPage/SettingsPage.js","pages/ConfigurationPage/ConfigurationPage.js","components/Dialog.js","functions/_defaults/components.js"],"names":["useStyles","makeStyles","theme","Field","display","marginLeft","spacing","marginRight","padding","CustomField","props","children","id","info","link","width","classes","key","className","clsx","style","container","item","i18n","t","target","rel","href","title","color","noIconPadding","paddingRight","Text","options","TextAutoComplete","TextInput","onChange","onBlur","required","label","type","select","shrink","disabled","size","placeholder","errorMessage","autoFocus","multiline","val","onEnter","clearOnEnter","clearOnBlur","disableUnderline","icon","InputProps","json","otherProps","useState","value","setValue","error","setError","useEffect","undefined","inputId","toLowerCase","replace","validate","JSON","parse","err","root","TextField","rows","fullWidth","onKeyPress","e","preventDefault","helperText","Array","isArray","map","lbl","join","startAdornment","position","InputLabelProps","showMaxResults","clearOnSelect","popupIcon","closeIcon","filterOptions","createFilterOptions","limit","objectify","multiple","inputValue","setInputValue","Input","inputRoot","onInputChange","text","selected","reason","name","length","getOptionSelected","option","renderInput","params","onClose","require","Button","default","Checkbox","Chip","Chips","InputChips","ChipsField","InputChipsField","Fieldset","FieldsetItem","Form","Number","RadioGroup","Radio","InputRadio","Select","Switch","SwitchInline","InputSwitchInline","Log","module","message","criticality","printToConsole","stack","config","debug","forEach","entry","log","push","time","Date","console","apply","window","timeToSeconds","toString","indexOf","split","hours","minutes","seconds","parseInt","timeToHoursMinutesSeconds","withHours","isNaN","Math","floor","substr","secondsToDateTime","dateTimeFormat","format","locale","locales","getLanguage","_any","stateStyle","battery","unit","door","humidity","level","power","temperature","trigger","wind","round","level2","activity","stateKey","device","getActivityType","manufacturer","true","false","open","lock","toFixed","setTemperature","boost","body","action","ct","colorTemperature","hue","rgb","hsv","hex","presence","users","location","port","MultimediaItem","stateChange","state","helpers","setState","progress","this","states","requestDeviceState","catch","_","listen","unlisten","clearTimeout","progressTimeout","isRunning","duration","setTimeout","prevState","openDialog","setDeviceState","noHeader","index","styleImage","styleLengthBar","background","backgroundImage","backgroundUrlPrepend","playIconElements","onClick","bind","Fragment","divider","image","noImage","information","informationLeft","grandParent","parent","informationRight","lengthBar","controls","controlsBox","controlsBoxLeft","controlsBoxCenter","controlButton","i","controlsBoxRight","React","Component","withStyles","margin","marginTop","height","alignItems","backgroundPosition","cursor","backgroundColor","palette","primary","main","minHeight","float","textAlign","secondary","justifyContent","paddingTop","flex","flexDirection","controlButtonSmall","fontSize","styles","defaultListSectionDivider","defaultListSectionDividerItem","defaultListSectionText","breakpoints","down","horizontalList","flexWrap","ListGroup","actions","handleChange","targetStatus","devices","getDevices","status","primaryStateKey","getOption","StateList","groups","group","items","Devices","forEachDevice","dense","horizontal","defaultListIcon","components","horizontalListItem","horizontalListItemIcon","minWidth","horizontalListItemAction","top","right","transform","verticalListItemAction","ListItemIconElement","customClassNames","classNames","StateListItem","secondaryStatesKeys","ListItemTextWidth","getDeviceStates","ListItemText","createRef","ListItemSecondaryAction","current","offsetWidth","resizeComponent","ListItemSecondaryActionWidth","primaryState","getIcon","isDeviceStateDetails","bodyState","bodyElement","configurations","actionElement","actionType","primaryBody","BodyElement","stateVal","Action","primaryActionState","ActionElement","StateElement","primaryAction","secondaryActions","secondaryStateKey","defaultListDivider","finger","button","getStyle","ref","disableTypography","timeChanged","useToolbarStyles","paddingLeft","highlight","lighten","light","dark","EnhancedTableToolbar","rowCount","numSelected","rightActionButton","Toolbar","Typography","variant","Tooltip","IconButton","aria-label","EnhancedTableHead","headCells","onSelectAllClick","selectable","sortable","order","orderBy","onRequestSort","TableHead","TableRow","TableCell","indeterminate","checked","inputProps","headCell","align","disablePadding","sortDirection","TableSortLabel","active","direction","property","event","noWrap","whiteSpace","nestedObjects","seen","EnhancedTable","columns","sortedRows","emptyRows","rowStyles","row","isItemSelected","labelId","columnId","rowStyle","Object","keys","hover","role","aria-checked","tabIndex","column","scope","content","stringify","showTableContent","colSpan","table","descendingComparator","a","b","orderByCase","orderA","orderB","tmpA","tmpB","getComparator","stableSort","array","comparator","stabilizedThis","el","sort","CustomTableBody","toolbar","pagination","defaultOrder","defaultOrderBy","defaultSelected","defaultPage","defaultRowsPerPage","toolbarRightActionButton","setOrder","setOrderBy","setSelected","page","setPage","rowsPerPage","setRowsPerPage","TableBody","EnhancedTableBody","TableContainer","Table","aria-labelledby","stickyHeader","newSelecteds","n","slice","min","selectedIndex","newSelected","concat","TablePagination","rowsPerPageOptions","component","count","onChangePage","newPage","onChangeRowsPerPage","Function","functionType","function","Error","functionId","defaults","functions","_isFunction","settings","obj","defaultValue","EventEmitter","Device","deviceProperties","socket","Connection","getConnection","room","attributes","_setStatesOptions","stateSubscriptions","on","stateType","s","node","attribute","stateValKeys","stateValKey","stateValValue","ignoredStates","ignoredState","hiddenStates","formatDistanceToNow","lc","includeSeconds","addSuffix","_getConfigurationSetting","pair","values","_getUserSetting","devicesStates","getDeviceState","stateProperty","deviceState","defaultIcon","eventName","callback","listeners","findIndex","listener","subscribe","responses","_getStateFromKey","Promise","reject","resolve","emit","getState","then","_updateDeviceState","subscribeDeviceState","historyCache","start","end","step","getStateHistory","history","res","subscribeState","child","filter","arr","unsubscribeState","off","lineHeight","borderLeftTransparent","borderLeftColor","alpha","borderRightTransparent","borderRightColor","borderRightColorSecondary","BlindLevelAction","setLevel","setActivity","stateChangeActivity","sKey","d","HeatingSetTemperatureBody","Level","LevelComponent","max","requiredStates","DeviceActionsConfiguration","deviceStates","elements","setChecked","actionStateKey","setActionStateKey","checkedIcon","actionElementOptions","splice","deviceId","prevChecked","noPadding","autoComplete","autoHighlight","limitTags","disableCloseOnSelect","renderOption","DeviceBodyConfiguration","bodyStateKey","setBodyStateKey","Icon","chip","InputChip","onDelete","deleteIcon","list","optionKey","freeSolo","getOptionLabel","Legend","FieldsetLegend","centered","xs","utils","getLocaleDateAdapter","getLocale","StateListConfig","_copy","Settings","language","setLanguage","setTranslation","pageTitle","document","pageFavicon","getElementById","translations","setting","copy","layout","HsvToRgb","h","r","g","f","p","q","v","RgbToHex","LightColorTemperatureBody","LevelBody","LightColorBody","initialColor","colorSpace","setColorSpace","onChangeComplete","LightHueBody","setHue","hsl","LightLevelAction","SwitchAction","LightColorAction","colors","labels","Red","Green","Blue","Hue","Saturation","Brightness","Label","br","de","translation","file","warn","isoLong","word","placeholders","unknown","w","parts","shift","RegExp","ucFirst","charAt","toUpperCase","navigator","userLanguage","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","exports","Socket","url","io","timeout","query","statesSubscribes","attempts","pattern","close","ids","cb","connected","cbs","reg","_getPatternFromId","task","hasOwnProperty","test","adapter","getObjectView","getObject","design","search","getRemoteResource","getStates","setUrl","connection","setListeners","connect","setListener","hostname","AdapterStatus","adapterInformation","adapterAliveStatus","newUpdates","updatesJson","lastUpdateCheck","blacklist","updateStates","adapterStates","updates","subscribeStates","update","lastIndexOf","getAdapterInstances","instances","adapters","instance","common","item1","item2","aliveStatus","unsubscribeStates","updateList","adapterList","loading","enabled","alive","tooltip","alt","src","extIcon","small","version","availableVersion","UpdateAvailable","runAsCompactMode","compactGroup","StatusIndicator","notAlive","noUpdates","UpdatesListItem","UpdatesIndicator","fontStyle","borderRadius","Chart","_historyChange","_addChartGraph","_getAxis","chartAxisOptions","_stateChange","_updateChartGraph","chartFilter","chartConfig","yAxes","unshift","ticks","yLeftAxisUnitBefore","parseFloat","yLeftAxisUnitAfter","errors","datePicker","selectedTimeRangeValue","selectedTimeRangeUnit","selectedDateTime","dateNow","chartLabels","chartData","datasets","chartPan","chartZoom","timer","timeRangeRef","chartRef","chartUpdates","chartPluginOptions","maintainAspectRatio","spanGaps","legend","legendClickHandler","tooltips","callbacks","data","datasetIndex","scales","plugins","colorschemes","scheme","zoom","pan","mode","requestDeviceStateHistory","_chartAxisOptions","liveUpdates","prevProps","getTime","timeRange","axisTimeFormat","axis","prevMarker","markers","marker","ts","reduce","chartOptions","chartIndex","_groupChartData","chartInstance","prevStates","dataSet","fill","graphConfig","legendItem","ci","meta","getDatasetMeta","hidden","resetZoom","inputRef","input","displayEmpty","DateFnsUtils","onOpen","ampm","iconButton","dividerVertical","orientation","placement","buttonDisabled","severity","createElement","toolbarButtons","disableElevation","chartHeight","marginBottom","DateTime","joinConfig","refresh","refTimer","useRef","setDateTime","city","setCity","sunrise","setSunrise","sunset","setSunset","getSetting","latitude","longitude","getSunrise","getSunset","sun","mapOverview","left","bottom","zIndex","mapIconContainer","mapIconParent","boxShadow","mapIcon","mapTooltip","Map","settingsLatitude","settingsLongitude","setMarkers","defaultZoom","defaultPosition","setPosition","memoizedMapInitialised","useCallback","memoizedHandleClick","flyTo","prevMarkers","mapMarkers","Marker","avatar","arrow","useFlyTo","center","whenReady","attribution","markerIcon","offset","L","divIcon","html","iconSize","memoizedHandleMouseEvent","closeTooltip","openTooltip","riseOnHover","onMouseOver","tooltipDirection","permanent","tooltipPermanent","Multimedia","FormControl","InputLabel","SwitchSmall","InputSwitch","userInput","control","StateListHorizontal","paper","Weather","setData","response","statusCode","weatherForecast","day","forecast","dailyForecast","date","justify","border","htmlFor","RadioGroupFormControl","RadioLabel","fontFamily","InputRadioGroup","inputs","FormControlLabel","deviceList","processedDevices","addedDevices","ignore","jarvis","requestDeviceStates","rawDevices","allSettled","raw","requestedAdapters","gotAdapters","requestedAdapter","Adapters","deviceObjectType","startkey","namespace","endkey","result","parseDevices","promises","enums","en","members","devicePattern","deviceStructure","uuid","imported","DEFAULTS","str","moveKeyInObject","sorted","moveKeyInArray","next","keyOrIndex","element","arrayOrObject","sortArray","entries","_sortedObj","k","sortObject","x","y","UserConfig","AdapterConfig","param","parameter","Functions","blind","heating","user","funConfigurations","funcComponents","func","Modules","Configurations","ModuleSettings","ModuleConfigurations","statesAsArray","substring","native","TYPE","reachable","InputButton","startIcon","CheckboxLabel","InputCheckbox","NumberInput","InputSelect","selection","menuOptions","LogsPage","logs","getLog","CustomDialog","pinToTop","maxWidth","navigate","header","gridContainer","GridContainer","contents","grid","Grid","sm","md","lg","xl","success","green","warning","amber","iconVariant","opacity","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","StatusSnackbar","autoHideDuration","closeButton","other","Snackbar","anchorOrigin","vertical","SnackbarContent","appBar","flexGrow","menuButton","notConnected","TopBar","connectionStatus","connectionStatusIcon","connectionStatusTooltip","AppBar","Hidden","smDown","getWindowDimensions","innerWidth","innerHeight","paddingBottom","transition","flexShrink","userSelect","tabs","borderBottom","fixed","indicator","fullscreen","overflow","TabBar","selectedTab","onSelectTab","tabBarProps","tab","setTab","setFixed","handleScroll","threshold","scrollY","prevFixed","offsetTop","offsetHeight","addEventListener","removeEventListener","renderedTabs","Tab","Tabs","TabPanel","renderedTab","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","mapHeight","setMapHeight","topBarHeight","setHidden","Box","DialogTitle","grey","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","DeviceStateDetails","forceUpdate","nextProps","nextState","closeDialog","Dialog","dividers","card","cardHeaderNoContents","cardAvatar","cardContent","Widget","iconStyle","Card","CardHeader","Avatar","CardContent","configuration","getModule","widget","Tag","MODULE","showDevice","moduleConfig","getWidgets","widgets","moduleSettings","getWidget","TabPanels","memo","tabPanels","_fullscreen","tabGridColumnsContent","tabGridColumnsContents","columnIndex","tabPanel","Jarvis","tabTitle","notificationDrawer","notifications","notificationsUnread","dialog","dialogContents","toggleDrawer","getLayout","tabsEnabled","tabIcon","now","drawer","Page","Pages","withTheme","App","loaded","disconnect","errorHandler","iobrokerWebAdapterUrl","protocol","setSettings","iobroker","NODE_SETTINGS","applySettings","NODE_LAYOUT","setLayout","NODE_DEVICES","setDevices","CircularProgress","topBar","tabBar","gridColumns","SkeletonLoader","Skeleton","animation","gridItem","gridContents","loaders","random","loader","renderError","ThemeProvider","renderLoadingSkeleton","renderLoadingProgress","Boolean","match","ReactDOM","render","serviceWorker","ready","registration","unregister","DevicesStates","DevicesPage","_onChange","nextErrors","editor","_onSave","savedDevice","base","characteristic","_updated","onSave","_deleteDevice","_addState","newStateKey","_moveState","_deleteState","nextDevice","Inputs","ListItem","ListItemIcon","iconContainer","renderedStates","renderDeviceState","List","renderedOptions","DevicesConfig","renderDeviceOption","renderDeviceStates","renderDeviceOptions","alignRight","FUNCTIONS","heading","ImportDevicesPage","setLoading","importDevices","setImportDevices","foundDevicesByManufacturer","categories","_markDeviceToImport","moveDeviceToIgnore","moveDeviceToNew","hash","prevImportDevices","_created","nextImportDevices","_setSearch","_setImportDeviceList","foundDevices","_new","_added","_incorrect","_ignored","categoryKey","note","adapterKey","AdapterItem","importEnums","onImport","Category","category","deviceChecked","setDeviceChecked","markDeviceToImport","disableRipple","stopPropagation","expanded","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","adapterName","deleteButton","hr","CustomTextInput","CustomDialogTitle","verticalAlign","newlyCreatedDevice","DevicesListPage","selectedDevice","setSelectedDevice","setDevice","scrollTop","_saveDevices","saveDevices","Paper","DeviceTable","_selectDevice","saveDevice","nextDevices","CustomTableProps","DeviceList","Placeholder","WidgetPage","_addItem","addDevice","_editItem","nextWidget","_moveItem","_deleteItem","field","deviceOptions","iconCentered","Actions","deviceWidgetConfig","renderedDevices","renderDevice","description","renderDeviceList","CustomDialogActions","LayoutsConfig","widgetTitle","widgetIcon","widgetIconStyle","widgetModule","some","groupBy","LayoutsPage","_setLayout","setter","_saveWidget","drawerIndex","selectedDrawer","selectedColumn","widgetIndex","nextLayout","selectedWidget","_addColumn","newColumn","_addTab","_changeTab","_deleteWidget","_deleteColumn","_deleteTab","_moveWidget","widgetKey","_moveColumn","_moveTab","_openPopup","tabColumnWidgetsNodes","renderWidget","widgetsInFirstColumn","tabColumnsNodes","renderColumn","tabFullscreen","columnContainer","renderTab","tabsHideLabels","drawers","renderDrawer","borderRight","borderLeft","SettingsPage","_handleSettingsChange","setSetting","getSettings","_handlePanelChange","panel","isExpanded","inputKey","inputSettings","secondaryHeading","SettingsConfig","renderPanel","typography","pxToRem","flexBasis","ConfigurationPage","_onDevicesChange","_onSettingsChange","_onLayoutsChange","onRawChange","_handleTabChange","_cancel","_save","saving","all","pathname","expertMode","rawEditor","scrollHeight","rawEditorHeight","indicatorColor","textColor","DialogDense","DialogTitleTypography","CustomDialogContent","disableBackdropClick","disableEscapeKeyDown","sliderMarkLabel","secondaryAction","State","linebreak","markSteps","markStep","markLabel","onChangeCommitted","valueLabelDisplay","marks","number","parentOnChange","ButtonAction","DropdownAction","MenuItems"],"mappings":"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","file":"static/js/main.81bc9366.chunk.js","sourcesContent":["import React from 'react'\r\nimport clsx from 'clsx'\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tField: {\r\n\t\tdisplay: 'inline-flex',\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tpadding: '0 !important',\r\n\t},\r\n\tCustomField: {\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Field(props) {\r\n\tconst { children, id, info, link, width } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tkey={'grid-' + id}\r\n\t\t\tclassName={clsx(classes.Field, classes.CustomField)}\r\n\t\t\tstyle={{ width: width || 250 }}\r\n\t\t\tcontainer\r\n\t\t\titem\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{i18n.t(info) && <Grid item style={{ width: 30 }}>\r\n\t\t\t\t<a target=\"_blank\" rel=\"noopener noreferrer\" href={link}>\r\n\t\t\t\t\t<Tooltip title={i18n.t(info)}>\r\n\t\t\t\t\t\t<InfoIcon color=\"primary\" />\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</a>\r\n\t\t\t</Grid>}\r\n\t\t\t<Grid item style={{ width: info ? 250-30 : '100%' }}>\r\n\t\t\t\t{children}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\r\n\t);\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport Field from './Field'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tnoIconPadding: {\r\n\t\tpaddingRight: '0 !important'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Text(props) {\r\n\treturn props.options ? TextAutoComplete(props) : TextInput(props);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function TextInput(props) {\r\n\tconst { onChange, onBlur, id, required, label, type, children, select, shrink, disabled, size, placeholder, errorMessage, autoFocus, multiline, val, onEnter, clearOnEnter, clearOnBlur, disableUnderline, icon, InputProps, json, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [value,setValue] = useState(val || '');\r\n\tconst [error,setError] = useState((props.error ? props.error : (required && !val)) || null);\r\n\tuseEffect(() => { props.error !== undefined && setError(props.error) }, [props.error]);\r\n\t\r\n\tconst inputId = id || 'input-' + label.toLowerCase().replace(/ /g, '');\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst validate = val => {\r\n\t\t\r\n\t\t// validate required fields\r\n\t\tif (required && !val) {\r\n\t\t\tsetError(i18n.t('No input given'));\r\n\t\t\treturn [ true, '' ];\r\n\t\t}\r\n\t\t\r\n\t\t// validate JSON\r\n\t\tif (json) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tval = val ? JSON.parse(val) : '';\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tsetError(i18n.t('Wrong JSON format'));\r\n\t\t\t\treturn [ true, {} ];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tsetError(null);\r\n\t\treturn [ false, val ];\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<TextField\r\n\t\t\t\tclasses={{ root: classes.TextField }}\r\n\t\t\t\t\r\n\t\t\t\tid={inputId}\r\n\t\t\t\ttype={type || 'text'}\r\n\t\t\t\trequired={required}\r\n\t\t\t\tselect={select}\r\n\t\t\t\t\r\n\t\t\t\tmultiline={multiline}\r\n\t\t\t\trows={4}\r\n\t\t\t\tsize={size}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tplaceholder={placeholder || ''}\r\n\t\t\t\tautoFocus={autoFocus ? autoFocus : false}\r\n\t\t\t\t\r\n\t\t\t\tonKeyPress={e => {\r\n\t\t\t\t\tif (e.key === 'Enter' && !multiline) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tclearOnEnter && setValue('');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet [ err, val ] = validate(e.target.value);\r\n\t\t\t\t\t\tonEnter && onEnter({ ...props, error: err }, val);\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\terror={typeof error === 'boolean' ? error : (error !== null)}\r\n\t\t\t\thelperText={errorMessage ? i18n.t(errorMessage) : (typeof error !== 'boolean' ? error : '')}\r\n\t\t\t\t\r\n\t\t\t\tlabel={Array.isArray(label) ? label.map(lbl => i18n.t(lbl)).join('') : i18n.t(label)}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={e => {\r\n\t\t\t\t\tsetValue(e.target.value);\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet [ err, val ] = validate(e.target.value);\r\n\t\t\t\t\tonChange && onChange({ ...props, error: err }, val);\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\t...InputProps || {},\r\n\t\t\t\t\tdisableUnderline: disableUnderline,\r\n\t\t\t\t\tstartAdornment: icon && (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<span className={'mdi mdi-' + icon}></span>\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t),\r\n\t\t\t\t\tonBlur: e => {\r\n\t\t\t\t\t\tonBlur && onBlur(props, value);\r\n\t\t\t\t\t\tclearOnBlur && setValue('');\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\tshrink: shrink ? shrink : true\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\t{...otherProps}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{children ? children : null}\r\n\t\t\t</TextField>\r\n\t\t</Field>\r\n\r\n\t)\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport function TextAutoComplete(props) {\r\n\tconst classes = useStyles();\r\n\tconst { errorMessage, required, autoFocus, placeholder, label, shrink,\r\n\t\t\t\tshowMaxResults, onChange, clearOnBlur, clearOnSelect, val, json, popupIcon, closeIcon, ...otherProps } = props;\r\n\t\r\n\t\r\n\tconst filterOptions = showMaxResults && showMaxResults > 0 ? createFilterOptions({ limit: showMaxResults }) : undefined;\r\n\tconst objectify = props.options && props.options[0] && props.options[0].id; // discover whether plain array of array of objects is used\r\n\t\r\n\tconst [value,setValue] = useState(val !== undefined ? val : (props.multiple ? [] : null)); // can not be undefined, because this will change the element from uncontrolled to be controlled\r\n\tconst [inputValue,setInputValue] = useState('');\r\n\tconst [error,setError] = useState((props.error ? props.error : (required && !val)) || null);\r\n\tuseEffect(() => { props.error !== undefined && setError(props.error) }, [props.error]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst validate = options => {\r\n\t\t\r\n\t\t// validate required fields\r\n\t\tif (required && (!options || (Array.isArray(options) && options.length === 0))) {\r\n\t\t\tsetError(i18n.t('No option selected'));\r\n\t\t\treturn [ true, null ];\r\n\t\t}\r\n\t\t\r\n\t\tsetError(null);\r\n\t\treturn [ false, options ];\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\troot: classes.Input,\r\n\t\t\t\t\tinputRoot: clsx(closeIcon === null && popupIcon === null && classes.noIconPadding)\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\t//defaultValue={val}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tinputValue={inputValue}\r\n\t\t\t\t\r\n\t\t\t\tonInputChange={(e, text) => {\r\n\t\t\t\t\tsetInputValue(text);\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={(e, selected, reason) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (props.multiple) {\r\n\t\t\t\t\t\tselected = selected.map(val => typeof val === 'string' && objectify ? { id: val.toLowerCase().replace(/ /g, ''), name: val } : val);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetValue(clearOnSelect ? null : selected);\r\n\t\t\t\t\tif (clearOnSelect) {\r\n\t\t\t\t\t\tsetInputValue('');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet [ err, options ] = validate(selected);\r\n\t\t\t\t\tonChange && onChange({ ...props, error: err }, options);\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\tgetOptionSelected={(option, value) => option && value ? (objectify ? option.id === value.id : option === value) : false}\r\n\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\r\n\t\t\t\trenderInput={params => <TextField\r\n\t\t\t\t\t\t\t\t\t\t{...params}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\trequired={required}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus={autoFocus ? autoFocus : false}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(label) || i18n.t(placeholder)}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\terror={typeof error === 'boolean' ? error : (error !== null)}\r\n\t\t\t\t\t\t\t\t\t\thelperText={errorMessage ? i18n.t(errorMessage) : (typeof error !== 'boolean' ? error : '')}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tshrink: shrink ? shrink : true\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t\tonClose={(e, reason) => reason === 'blur' && clearOnBlur && setValue(null)}\r\n\t\t\t\t\r\n\t\t\t\t{...otherProps}\r\n\t\t\t\t/>\r\n\t\t</Field>\r\n\t\r\n\t);\r\n}\r\n","export default {\r\n\t\"alias\": require('./adapters/alias'),\r\n\t\"deconz\": require('./adapters/deconz'),\r\n\t\"hm-rpc\": require('./adapters/hm-prc'),\r\n\t\"hue\": require('./adapters/hue'),\r\n\t\"hue-extended\": require('./adapters/hue-extended'),\r\n\t\"shelly\": require('./adapters/shelly')\r\n}","\r\nexport default {\r\n\tButton: require('./inputs/Button').default,\r\n\tCheckbox: require('./inputs/Checkbox').default,\r\n\tChip: require('./inputs/Chips').default,\r\n\tChips: require('./inputs/Chips').InputChips,\r\n\tChipsField: require('./inputs/Chips').InputChipsField,\r\n\tFieldset: require('./inputs/Fieldset').default,\r\n\tFieldsetItem: require('./inputs/Fieldset').FieldsetItem,\r\n\tForm: require('./inputs/Fieldset').Form,\r\n\tNumber: require('./inputs/Number').default,\r\n\tRadioGroup: require('./inputs/Radio').default,\r\n\tRadio: require('./inputs/Radio').InputRadio,\r\n\tSelect: require('./inputs/Select').default,\r\n\tSwitch: require('./inputs/Switch').default,\r\n\tSwitchInline: require('./inputs/Switch').InputSwitchInline,\r\n\tText: require('./inputs/Text').default\r\n}","export { default } from './defaults'\r\n","import config from '../config/config'\r\n\r\n/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Log {\r\n\r\n\t/*\r\n\t * holds the log\r\n\t */\r\n\tstatic log = [];\r\n\r\n\t/**\r\n\t * Add a message to the log\r\n\t *\r\n\t * @param\t{String}\t\tmodule\t\t\t\t\t\tModule (origin) of log message\r\n\t * @param\t{String|Array}\tmessage\t\t\t\t\t\tLog message\r\n\t * @param\t{String}\t\t[criticality=info]\t\t\tCriticality, one of 'development', 'debug', 'info', 'warn' or 'error'\r\n\t * @param\t{Boolean}\t\t[printToConsole=false]\t\tPrint log message to console\r\n\t * @param\t{Object}\t\t[stack={}]\t\t\t\t\tStack trace of error message\r\n\t * @return\t{Log}\r\n\t */\r\n\tstatic _(module, message, criticality = 'info', printToConsole = true, stack = {}) {\r\n\t\t\r\n\t\tif (config.debug !== true && (criticality === 'dev' || criticality === 'development')) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (config.debug === true && (criticality === 'dev' || criticality === 'development')) {\r\n\t\t\tcriticality = 'debug';\r\n\t\t}\r\n\t\t\r\n\t\tmessage = Array.isArray(message) ? message : [message];\r\n\t\tmessage.forEach(entry => {\r\n\t\t\tLog.log.push({\r\n\t\t\t\ttime: new Date(),\r\n\t\t\t\tmodule: module,\r\n\t\t\t\tcriticality: criticality,\r\n\t\t\t\tmessage: entry,\r\n\t\t\t\tstack: stack\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tif (printToConsole) {\r\n\t\t\tconsole[criticality].apply(window, [ module + ' #', ...message ]); // @see https://nodejs.org/docs/latest/api/console.html and https://stackoverflow.com/a/11532355\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the log\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Array}\r\n\t */\r\n\tstatic getLog() {\r\n\t\treturn Log.log;\r\n\t}\r\n}\r\n","import { format } from 'date-fns'\r\nimport i18n, { locales } from '../controller/i18n'\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToSeconds(time) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\ttime = time.toString();\r\n\t\tlet format = time.split(':').length-1;\r\n\t\tlet [ hours, minutes, seconds ] = format > 1 ? time.split(':') : ('0:' + time).split(':');\r\n\t\ttime = parseInt(hours) * 3600 + parseInt(minutes) * 60 + parseInt(seconds);\r\n\t}\r\n\t\r\n\treturn parseInt(time);\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToHoursMinutesSeconds(time, withHours = false) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\treturn time;\r\n\t}\r\n\t\r\n\ttime = parseInt(time);\r\n\twithHours = withHours || (time > 3600);\r\n\t\r\n\tif (Number.isNaN(time)) {\r\n\t\treturn withHours ? '00:00:00' : '00:00';\r\n\t}\r\n\t\r\n\tlet hours = '0' + Math.floor(time/3600);\r\n\tlet minutes = '0' + Math.floor(time/60);\r\n\tlet seconds = '0' + (time % 60);\r\n\t\r\n\treturn withHours ? [ hours.substr(-2), minutes.substr(-2), seconds.substr(-2) ].join(':') : [ minutes.substr(-2), seconds.substr(-2) ].join(':');\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction secondsToDateTime(seconds, dateTimeFormat = 'dd. MMM yyyy, HH:mm') {\r\n\treturn format(new Date(seconds*1000), dateTimeFormat, { locale: locales[i18n.getLanguage()] });\r\n}\r\n\r\n\r\nexport default {\r\n\ttimeToSeconds,\r\n\ttimeToHoursMinutesSeconds,\r\n\tsecondsToDateTime\r\n}","\r\nexport default [\r\n\t{\r\n\t\t'parameter': 'actions',\r\n\t\t'label': {\r\n\t\t\t'en': 'Show on/off actions for groups',\r\n\t\t\t'de': 'Buttons an/aus fr Gruppen einblenden'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t}\r\n]\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\t_any: {\r\n\t\tvalue: (val) => val.toString(),\r\n\t\t//stateStyle\r\n\t\t//unit\r\n\t\t//icon\r\n\t\t//iconStyle\r\n\t\tdisplay: {\r\n\t\t\t'true': i18n.t('on'),\r\n\t\t\t'false': i18n.t('off')\r\n\t\t},\r\n\t\tstateStyle: {\r\n\t\t\t'true': {\r\n\t\t\t\t'color': '#090',\r\n\t\t\t\t'fontWeight': 'bold'\r\n\t\t\t},\r\n\t\t\t'false': {\r\n\t\t\t\t'color': '#999'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tbattery: {\r\n\t\tunit: ' %',\r\n\t\ticon: 'battery-medium'\r\n\t},\r\n\tdoor: {\r\n\t\ticon: {\r\n\t\t\t'true': 'door-open',\r\n\t\t\t'false': 'door-closed'\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\t'true': i18n.t('open'),\r\n\t\t\t'false': i18n.t('closed')\r\n\t\t},\r\n\t},\r\n\thumidity: {\r\n\t\tunit: ' %',\r\n\t\ticon: 'water-percent'\r\n\t},\r\n\tlevel: {\r\n\t\tunit: ' %'\r\n\t},\r\n\tposition: {\r\n\t\ticon: 'map-marker'\r\n\t},\r\n\tpower: {\r\n\t\ticon: 'power'\r\n\t},\r\n\ttemperature: {\r\n\t\tunit: ' C',\r\n\t\ticon: 'thermometer'\r\n\t},\r\n\ttrigger: {\r\n\t\ticon: 'power'\r\n\t},\r\n\twind: {\r\n\t\tunit: ' km/h',\r\n\t\ticon: 'weather-windy'\r\n\t}\r\n}\r\n","export { default } from './blind'\r\n","import i18n from '../../controller/i18n'\r\nimport getActivityType from './blind-manufacturers'\r\n\r\nexport default {\r\n\tlevel: {\r\n\t\tvalue: val => Math.round(val),\r\n\t\ticon: {\r\n\t\t\t'default': 'window-shutter-open',\r\n\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t'<=90': 'window-shutter'\r\n\t\t}\r\n\t},\r\n\tlevel2: {\r\n\t\tvalue: val => Math.round(val),\r\n\t\tunit: ' %',\r\n\t\ticon: {\r\n\t\t\t'default': 'window-shutter-open',\r\n\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t'<=90': 'window-shutter'\r\n\t\t}\r\n\t},\r\n\tactivity: {\r\n\t\tval: (val, stateKey, device) => getActivityType(device.options.manufacturer, val),\r\n\t\ticon: {\r\n\t\t\ttrue: 'pan-vertical',\r\n\t\t\tfalse: 'dots-vertical',\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\ttrue: i18n.t('blind#activity#true'),\r\n\t\t\tfalse: i18n.t('blind#activity#false'),\r\n\t\t}\r\n\t}\r\n}","export { default } from './door'\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\topen: {\r\n\t\ticon: {\r\n\t\t\ttrue: 'door-open',\r\n\t\t\tfalse: 'door-closed'\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\ttrue: i18n.t('door#open#true'),\r\n\t\t\tfalse: i18n.t('door#open#false')\r\n\t\t},\r\n\t},\r\n\tlock: {\r\n\t}\r\n}","export { default } from './heating'\r\n","\r\nexport default {\r\n\ttemperature: {\r\n\t\tvalue: val => val.toFixed(1),\r\n\t\tunit: ' C',\r\n\t\ticon: 'radiator',\r\n\t},\r\n\tsetTemperature: {\r\n\t\tunit: ' C',\r\n\t\ticon: 'thermometer-chevron-up'\r\n\t},\r\n\thumidity: {\r\n\t\tunit: ' %'\r\n\t},\r\n\tboost: {\r\n\t\ticon: 'radiator'\r\n\t}\r\n}","export { default } from './light'\r\n","import i18n from '../../controller/i18n'\r\n\r\n\r\nconst color = {\r\n\ticon: {\r\n\t\t'default': 'palette',\r\n\t},\r\n\tunit: ' '\r\n}\r\n\r\nexport default {\r\n\tpower: {\r\n\t\tbody: null,\r\n\t\taction: 'SwitchAction',\r\n\t\t\r\n\t\ticon: {\r\n\t\t\t'true': 'lightbulb-on',\r\n\t\t\t'false': 'lightbulb-off-outline'\r\n\t\t},\r\n\t},\r\n\tlevel: {\r\n\t\tbody: 'LevelBody',\r\n\t\taction: null,\r\n\t\t\r\n\t\tvalue: val => val > 0 && val <= 1 ? val * 100 : val,\r\n\t\tunit: val => val > 0 ? ' %' : null,\r\n\t\tstateStyle: {\r\n\t\t\t'0': {\r\n\t\t\t\t'color': '#999'\r\n\t\t\t}\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\t'default': 'lightbulb-on',\r\n\t\t\t'0': 'lightbulb-off-outline'\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\t'0': i18n.t('light#level#off')\r\n\t\t},\r\n\t},\r\n\tct: {\r\n\t\ticon: {\r\n\t\t\t'default': 'thermometer',\r\n\t\t},\r\n\t\tunit: ' K'\r\n\t},\r\n\tcolorTemperature: {\r\n\t\tbody: 'LightColorTemperatureBody',\r\n\t\taction: null,\r\n\t\t\r\n\t\ticon: {\r\n\t\t\t'default': 'thermometer',\r\n\t\t},\r\n\t\tunit: ' K'\r\n\t},\r\n\thue: {\r\n\t\tbody: 'LightHueBody',\r\n\t\taction: 'LightColorAction',\r\n\t\t...color\r\n\t},\r\n\trgb: {\r\n\t\tbody: 'LightColorBody',\r\n\t\taction: 'LightColorAction',\r\n\t\t...color\r\n\t},\r\n\thsv: {\r\n\t\tbody: 'LightColorBody',\r\n\t\taction: 'LightColorAction',\r\n\t\t...color\r\n\t},\r\n\thex: {\r\n\t\tbody: 'LightColorBody',\r\n\t\taction: 'LightColorAction',\r\n\t\t...color\r\n\t}\r\n}","export { default } from './location'\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\tposition: {\r\n\t\ticon: 'map-marker'\r\n\t},\r\n\tpresence: {\r\n\t\ticon: {\r\n\t\t\ttrue: 'map-marker-radius',\r\n\t\t\tfalse: 'map-marker-remove-outline'\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\ttrue: i18n.t('location#presence#true'),\r\n\t\t\tfalse: i18n.t('location#presence#false'),\r\n\t\t},\r\n\t},\r\n\tusers: {\r\n\t\ticon: {\r\n\t\t\t'': 'account-group-outline',\r\n\t\t\t'default': 'account-group'\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\t'': i18n.t('location#users#empty')\r\n\t\t},\r\n\t},\r\n}","export { default } from './user'\r\n","\r\nexport default {\r\n\tposition: {\r\n\t\ticon: 'map-marker'\r\n\t},\r\n\tlocation: {\r\n\t\ticon: 'account'\r\n\t},\r\n\tbattery: {\r\n\t}\r\n}","export { default } from './window'\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\topen: {\r\n\t\ticon: {\r\n\t\t\ttrue: 'window-open-variant',\r\n\t\t\tfalse: 'window-closed-variant'\r\n\t\t},\r\n\t\tdisplay: {\r\n\t\t\ttrue: i18n.t('window#open#true'),\r\n\t\t\tfalse: i18n.t('window#open#false')\r\n\t\t},\r\n\t}\r\n}","\r\nexport default [\r\n\t{\r\n\t\t'parameter': 'style',\r\n\t\t'label': {\r\n\t\t\t'en': 'Style of the text',\r\n\t\t\t'de': 'Style des Textes'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'CSS statements in javascript notation',\r\n\t\t\t'de': 'CSS-Anweisungen in Javascript Syntax'\r\n\t\t},\r\n\t\t'json': true,\r\n\t\t'val': '{ \"fontSize\": \"1.5rem\", \"textAlign\": \"center\" }'\r\n\t},\r\n\t{\r\n\t\t'parameter': 'format',\r\n\t\t'label': {\r\n\t\t\t'en': 'Date/Time format',\r\n\t\t\t'de': 'Format des Datums / Uhrzeit'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'For possible format values, see date-fns documentation',\r\n\t\t\t'de': 'Fr mgliche Werte, siehe date-fns Dokumentation'\r\n\t\t},\r\n\t\t'link': 'https://date-fns.org/v2.9.0/docs/format',\r\n\t\t'val': 'd. MMMM yyyy HH:mm'\r\n\t},\r\n\t{\r\n\t\t'parameter': 'sun',\r\n\t\t'label': {\r\n\t\t\t'en': 'Show times of sunrise and -set',\r\n\t\t\t'de': 'Zeigt Zeiten fr Sonnenauf- und -untergang'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t}\r\n]\r\n","\r\nexport default [\r\n\t{\r\n\t\t'parameter': 'defaultZoom',\r\n\t\t'label': {\r\n\t\t\t'en': 'initial map zoom',\r\n\t\t\t'de': 'initialer Zoom der Karte'\r\n\t\t},\r\n\t\t'type': 'Number',\r\n\t\t'val': 10\r\n\t},\r\n\t{\r\n\t\t'parameter': 'defaultPosition',\r\n\t\t'label': {\r\n\t\t\t'en': 'initial map coordinates',\r\n\t\t\t'de': 'initiale Koordinaten auf der Karte'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'Separate latitude and longitude via comma (e.g. 53.550383, 9.992376)',\r\n\t\t\t'de': 'Latitude und Longitude mit Komma separiert (z. B. 53.550383, 9.992376)'\r\n\t\t},\r\n\t\t'val': ''\r\n\t},\r\n\t{\r\n\t\t'parameter': 'tooltipDirection',\r\n\t\t'label': {\r\n\t\t\t'en': 'Direction tooltip will open',\r\n\t\t\t'de': 'Richtung in die der Tooltip ffnet'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'possible directions to open: auto, center, top, left, right or bottom',\r\n\t\t\t'de': 'mgliche Werte: auto, center, top, left, right or bottom'\r\n\t\t},\r\n\t\t'type': 'Select',\r\n\t\t'selection': [\r\n\t\t\t{\r\n\t\t\t\t'auto': {\r\n\t\t\t\t\t'en': 'detect dynamically',\r\n\t\t\t\t\t'de': 'dynamisch erkennen'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'center': {\r\n\t\t\t\t\t'en': 'center',\r\n\t\t\t\t\t'de': 'center'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'top': {\r\n\t\t\t\t\t'en': 'top',\r\n\t\t\t\t\t'de': 'top'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'left': {\r\n\t\t\t\t\t'en': 'left',\r\n\t\t\t\t\t'de': 'left'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'right': {\r\n\t\t\t\t\t'en': 'right',\r\n\t\t\t\t\t'de': 'right'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'bottom': {\r\n\t\t\t\t\t'en': 'bottom',\r\n\t\t\t\t\t'de': 'bottom'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t],\r\n\t\t'val': ''\r\n\t},\r\n\t{\r\n\t\t'parameter': 'tooltipPermanent',\r\n\t\t'label': {\r\n\t\t\t'en': 'permanent tooltip',\r\n\t\t\t'de': 'Permanenter Tooltip'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'Option to keep tooltip permanently open (true) or only open on mouse-over (false)',\r\n\t\t\t'de': 'Angabe ob der Tooltip permanent ist (true) oder nur beim rberfahren mit der Maus gezeigt wird (false)'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t}\r\n]\r\n","\r\nexport default [\r\n\t{\r\n\t\t'parameter': 'url',\r\n\t\t'label': {\r\n\t\t\t'en': 'URL to load / show in iFrame',\r\n\t\t\t'de': 'URL, die zu laden / anzuzeigen ist'\r\n\t\t},\r\n\t\t'placeholder': 'http://',\r\n\t\t'required': true\r\n\t},\r\n\t{\r\n\t\t'parameter': 'height',\r\n\t\t'label': {\r\n\t\t\t'en': 'Height of iFrame',\r\n\t\t\t'de': 'Hhe des iFrame Fensters'\r\n\t\t},\r\n\t\t'placeholder': '100%'\r\n\t}\r\n]\r\n","export default {\r\n\t\"iobrokerWebAdapterUrl\": \"https://192.168.178.29:8082\",\r\n\t\"debug\": window.location.port === '3000'\r\n}","export default function getActivityType(manufacturer, val) {\r\n\t\r\n\t// HomeMatic\r\n\tif (manufacturer === 'HomeMatic') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 1: // UP\r\n\t\t\tcase 2: // DOWN\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 3: // STABLE\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Shelly\r\n\telse if (manufacturer === 'Shelly') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 'open': // MOVING\r\n\t\t\tcase 'close': // MOVING\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'stop': // MOVING\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn val;\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\n//import IconButton from '@material-ui/core/IconButton'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport PlayIcon from '@material-ui/icons/PlayArrow'\r\nimport PauseIcon from '@material-ui/icons/Pause'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious'\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext'\r\n\r\nimport Log from '../../controller//Log'\r\nimport helpers from '../../helpers/timeConverter'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdivider: {\r\n\t\tmargin: '15px -16px'\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t},\r\n\tnoHeader: {\r\n\t\tmarginTop: theme.spacing(-4),\r\n\t},\r\n\timage: {\r\n\t\theight: '200px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tnoImage: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tdisplay: 'flex',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tinformation: {\r\n\t\tbackgroundColor: theme.palette.primary.main + '66',\r\n\t\tcolor: '#fff',\r\n\t\tpadding: '10px',\r\n\t\tmargin: 0,\r\n\t\twidth: '100%',\r\n\t\tminHeight: '45px'\r\n\t},\r\n\tinformationLeft: {\r\n\t\twidth: '80%',\r\n\t\tfloat: 'left',\r\n\t\tmargin: 0\r\n\t},\r\n\tinformationRight: {\r\n\t\twidth: '19%',\r\n\t\tfloat: 'right',\r\n\t\tmargin: 0,\r\n\t\ttextAlign: 'right'\r\n\t},\r\n\tlength: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\twidth: '100%',\r\n\t\theight: '7px',\r\n\t},\r\n\tlengthBar: {\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t\theight: '100%',\r\n\t},\r\n\tcontrols: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'stretch'\r\n\t},\r\n\tcontrolsBox: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tpaddingTop: '30px'\r\n\t},\r\n\tcontrolsBoxLeft: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'baseline'\r\n\t},\r\n\tcontrolsBoxCenter: {\r\n\t\tflex: 3\r\n\t},\r\n\tcontrolsBoxRight: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'end'\r\n\t},\r\n\tcontrolButton: {\r\n\t\tmargin: '0 5px'\r\n\t},\r\n\tcontrolButtonSmall: {\r\n\t\tmargin: '0 10px',\r\n\t\tfontSize: '1.2rem',\r\n\t\theight: '32px',\r\n\t\twidth: '32px'\r\n\t}\r\n});\r\n\r\n\r\nclass MultimediaItem extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get initial states\r\n\t\tfor (let stateKey in this.props.device.states) {\r\n\t\t\tthis.props.device.requestDeviceState(stateKey, true).catch(err => Log._('Modules (MultimediaItem)', err.message, 'error', true, err.stack));\r\n\t\t}\r\n\t\t\r\n\t\t// receive updates\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\t\r\n\t\t// duration\r\n\t\tif (stateKey === 'duration' && state && state.val.indexOf(':') === -1) {\r\n\t\t\tstate.val = helpers.timeToHoursMinutesSeconds(state.val);\r\n\t\t}\r\n\t\t\r\n\t\t// isRunning\r\n\t\tif (stateKey === 'isRunning' && state && typeof state.val === 'string') {\r\n\t\t\tstate.val = state.val.indexOf('play') > -1;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({ [stateKey]: state }, () => {\r\n\t\t\tthis.progress();\r\n\t\t});\r\n\t}\r\n\t\r\n\tprogress() {\r\n\t\tclearTimeout(this.progressTimeout);\r\n\t\t\r\n\t\tif (this.state.isRunning && this.state.isRunning.val === true && this.state.progress && this.state.progress.val && this.state.duration && this.state.duration.val) {\r\n\t\t\tthis.progressTimeout = setTimeout(() => {\r\n\t\t\t\tthis.setState(prevState => ({ progress: { ...prevState.progress, val: helpers.timeToSeconds(prevState.progress.val) + 1 }}), () => this.progress());\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\tsetDeviceState(stateKey, value) {\r\n\t\tthis.props.device.setDeviceState(stateKey, value).catch(err => Log._('Modules (MultimediaItem)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, noHeader, index, device } = this.props;\r\n\t\tlet styleImage = {}, styleLength = {}, styleLengthBar = {};\r\n\t\t\r\n\t\t// background\r\n\t\tif (this.state.background && this.state.background.val !== '') {\r\n\t\t\tstyleImage.backgroundImage = 'url(' + ((device.options.backgroundUrlPrepend || '') + this.state.background.val) + ')';\r\n\t\t}\r\n\t\t\r\n\t\t// duration\r\n\t\tif (this.state.duration && this.state.duration.val) {\r\n\t\t\tstyleLengthBar.width = ((this.state.progress && this.state.progress.val) || 0) + 'px';\r\n\t\t}\r\n\t\t\r\n\t\tconst playIconElements = this.state.isRunning && this.state.isRunning.val ? [<PauseIcon onClick={this.setDeviceState.bind(this, 'pause', true)} />, <StopIcon />] : [<PlayIcon onClick={this.setDeviceState.bind(this, 'play', true)} />];\r\n\t\t//const repeatIcon = 'repeat'; // repeat, repeat-off, repeat-once\r\n\t\t//const shuffleIcon = 'shuffle-variant'; // shuffle-variant, shuffle-disabled\r\n\t\t//const volumeIcon = 'volume-high'; // volume-variant-off\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{index > 0 && <Divider className={classes.divider} />}\r\n\t<div className={clsx(classes.container, noHeader && classes.noHeader)}>\r\n\t\t\r\n\t\t<div className={clsx(this.state.background && this.state.background.val !== '' ? classes.image : classes.noImage)} style={ styleImage } onClick={this.openDialog.bind(this)}>\r\n\t\t\t\r\n\t\t\t<div className={classes.information}>\r\n\t\t\t\t<p className={classes.informationLeft}>\r\n\t\t\t\t\t{this.state.grandParent && this.state.grandParent.val && [this.state.grandParent.val, <br key={'br-' + device.id} />]}\r\n\t\t\t\t\t{this.state.parent && this.state.parent.val && this.state.parent.val + ' - '}{this.state.title && this.state.title.val}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className={classes.informationRight}>\r\n\t\t\t\t\t{this.state.progress && helpers.timeToHoursMinutesSeconds(this.state.progress.val)} / {this.state.duration && this.state.duration.val}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div className={classes.length} style={ styleLength }>\r\n\t\t\t<div className={classes.lengthBar} style={ styleLengthBar }></div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div className={classes.controls}>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxLeft)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + repeatIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + shuffleIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxCenter)}>\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipPreviousIcon onClick={this.setDeviceState.bind(this, 'previous', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t\t{playIconElements.map((icon, i) => \r\n\t\t\t\t<Fab key={'icon-' + i} className={classes.controlButton} size=\"large\" color=\"primary\">\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t</Fab>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipNextIcon onClick={this.setDeviceState.bind(this, 'next', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxRight)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + volumeIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(MultimediaItem);\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport StateListItem from './StateListItem'\r\n\r\nimport Devices from '../../controller/Devices'\r\nimport i18n from '../../controller/i18n'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListSectionDivider: {\r\n\t\tmargin: '5px 0 0 0'\r\n\t},\r\n\tdefaultListSectionDividerItem: {\r\n\t\tmargin: '6px 0 7px 0',\r\n\t\tpadding: '0 16px !important'\r\n\t},\r\n\tdefaultListSectionText: {\r\n\t\tmargin: 0,\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: '0 0 0 10px',\r\n\t\t}\r\n\t},\r\n\thorizontalList: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tflexWrap: 'wrap'\r\n\t}\r\n});\r\n\r\n\r\nconst ListGroup = withStyles(styles)(props => {\r\n\tconst { classes, title, actions } = props;\r\n\t\r\n\tconst handleChangeOn = () => handleChange(true);\r\n\tconst handleChangeOff = () => handleChange(false);\r\n\tconst handleChange = targetStatus => {\r\n\t\t\r\n\t\tlet devices = props.getDevices();\r\n\t\tconsole.log(devices);\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\tlet status = targetStatus;\r\n\t\t\tif (device.primaryStateKey === 'level') {\r\n\t\t\t\tstatus = status ? (device.getOption('defaultValue') || 100) : 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdevice.setDeviceState(null, status);\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<ListItem divider className={classes.defaultListSectionDivider} />\r\n\t\t\t<ListItem className={classes.defaultListSectionDividerItem}>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tclassName={classes.defaultListSectionText}\r\n\t\t\t\t\tprimary={title}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t{actions === null || actions === false ? null :\r\n\t\t\t\t\t<ButtonGroup color=\"primary\" size=\"small\">\r\n\t\t\t\t\t\t<Button onClick={handleChangeOn}>{i18n.t('on')}</Button>\r\n\t\t\t\t\t\t<Button onClick={handleChangeOff}>{i18n.t('off')}</Button>\r\n\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t</React.Fragment>\r\n\t\r\n\t);\r\n});\r\n\r\n\r\nclass StateList extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.groups = {};\r\n\t}\r\n\t\r\n\t\r\n\trender() {\r\n\t\tconst { classes, devices, ...otherProps } = this.props;\r\n\t\t\r\n\t\tlet group = null;\r\n\t\tconst items = Devices.forEachDevice(devices, (device, index, options) => {\r\n\t\t\t\r\n\t\t\t// group\r\n\t\t\tif (device.type === 'group') {\r\n\t\t\t\tgroup = device.id;\r\n\t\t\t\t\r\n\t\t\t\treturn <ListGroup\r\n\t\t\t\t\t\t\tkey={'ListGroup-' + device.id}\r\n\t\t\t\t\t\t\ttitle={device.name}\r\n\t\t\t\t\t\t\tgetDevices={() => this.groups[device.id]}\r\n\t\t\t\t\t\t\tactions={device.actions || (this.props.config.actions !== false) || false}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// divider\r\n\t\t\telse if (device.type === 'divider') {\r\n\t\t\t\treturn <ListItem key={'ListDivider-' + device.id} divider className={classes.defaultListSectionDivider} />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// device\r\n\t\t\tthis.groups[group] = this.groups[group] || [];\r\n\t\t\tthis.groups[group].push(device);\r\n\t\t\t\r\n\t\t\treturn <StateListItem\r\n\t\t\t\t\t\t{...otherProps}\r\n\t\t\t\t\t\tkey={'StateListItem-' + device.id}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconfig={{\r\n\t\t\t\t\t\t\t...otherProps.config,\r\n\t\t\t\t\t\t\tdivider: this.props.config.divider && index > 0\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice={device}\r\n\t\t\t\t\t\toptions={options}\r\n\t\t\t\t\t\t/>\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<List dense={true} className={this.props.config.horizontal && classes.horizontalList}>\r\n\t\t\t\t{items}\r\n\t\t\t</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateList);\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\nimport { components } from '../../functions'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListIcon: props => ({\r\n\t\t...theme.components.icon,\r\n\t\t...props.styles\r\n\t}),\r\n\thorizontalListItem: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'center',\r\n\t\tpaddingRight: '16px',\r\n\t\twidth: '140px',\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\thorizontalListItemIcon: {\r\n\t\tminWidth: 'auto'\r\n\t},\r\n\thorizontalListItemAction: {\r\n\t\ttextAlign: 'center',\r\n\t\ttop: 0,\r\n\t\tright: 0,\r\n\t\tposition: 'static',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tverticalListItemAction: {\r\n\t\ttextAlign: 'right'\r\n\t},\r\n});\r\n\r\n\r\nconst ListItemIconElement = withStyles(styles)(props => {\r\n\tconst { customClassNames, children, classes } = props;\r\n\t\r\n\tlet classNames = Array.isArray(customClassNames) ? customClassNames : [customClassNames];\r\n\tclassNames = classNames.map(className => (classes[className] ? classes[className] : className));\r\n\t\r\n\treturn <span className={clsx(classNames)}>{children}</span>\r\n});\r\n\r\n\r\nclass StateListItem extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tListItemTextWidth: '100%',\r\n\t\t\t...this.props.device.getDeviceStates() || {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.ListItemText = React.createRef({});\r\n\t\tthis.ListItemSecondaryAction = React.createRef({});\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tif (this.ListItemText.current) {\r\n\t\t\tthis.ListItemTextWidth = Math.floor(this.ListItemText.current.offsetWidth);\r\n\t\t\tthis.resizeComponent();\r\n\t\t}\r\n\t\t\r\n\t\t// get state changes\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate() {\r\n\t\tthis.resizeComponent();\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\tif (stateKey === this.props.options.primaryStateKey || this.props.options.secondaryStatesKeys.indexOf(stateKey) > -1) {\r\n\t\t\tthis.setState({ [stateKey]: state });\r\n\t\t}\r\n\t}\r\n\t\r\n\tresizeComponent() {\r\n\t\tconst ListItemSecondaryActionWidth = this.ListItemSecondaryAction.current ? Math.floor(this.ListItemSecondaryAction.current.offsetWidth*1.08) : 0;\r\n\t\t\r\n\t\tif (this.state.ListItemSecondaryActionWidth !== ListItemSecondaryActionWidth) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tListItemSecondaryActionWidth: ListItemSecondaryActionWidth,\r\n\t\t\t\tListItemTextWidth: this.ListItemTextWidth-ListItemSecondaryActionWidth + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, config, device, options } = this.props;\r\n\t\t\r\n\t\t// Icon\r\n\t\tconst primaryState = this.state[options.primaryStateKey] || this.state[device.primaryStateKey] || {};\r\n\t\tconst icon = device.getIcon(options.primaryStateKey, primaryState.val) || device.getIcon(options.primaryStateKey, primaryState.value);\r\n\t\t\r\n\t\t// set defaults\r\n\t\tif (config.isDeviceStateDetails) {\r\n\t\t\t\r\n\t\t\t// Body\r\n\t\t\toptions.bodyState = options.primaryStateKey;\r\n\t\t\toptions.bodyElement = device.configurations[options.primaryStateKey] && device.configurations[options.primaryStateKey].body;\r\n\t\t\t\r\n\t\t\t// Action / State\r\n\t\t\toptions.actionElement = device.configurations[options.primaryStateKey] && device.configurations[options.primaryStateKey].action;\r\n\t\t\toptions.actionType = options.actionElement ? 'action' : 'state';\r\n\t\t}\r\n\t\t\r\n\t\t// Body\r\n\t\tlet primaryBody = options.label || primaryState.label || device.name;\r\n\t\tif (options.bodyState && options.bodyElement) {\r\n\t\t\tconst BodyElement = components.body[options.bodyElement] || null;\r\n\t\t\tprimaryBody = BodyElement && <BodyElement title={primaryBody} key={'BodyElement-' + device.id} device={device} state={this.state[options.bodyState] || {}} stateVal={this.state[options.bodyState] && this.state[options.bodyState].val} stateKey={options.bodyState} />\r\n\t\t}\r\n\t\t\r\n\t\t// State\r\n\t\tlet Action = null;\r\n\t\tif (!options.actionType || options.actionType === 'state') {\r\n\t\t\tconst StateElement = components.action['State'];\r\n\t\t\tconst primaryAction = <StateElement key={'StateListItem-PrimaryState-' + device.id + '-' + options.primaryStateKey} device={device} state={primaryState} stateVal={primaryState.val} stateKey={options.primaryStateKey} primary />\r\n\t\t\tconst secondaryActions = options.secondaryStatesKeys ? options.secondaryStatesKeys.map((secondaryStateKey, index) => <span key={'StateListItem-SecondaryState' + index + '-' + device.id + '-' + secondaryStateKey}>{(index > 0 && ', ')}<StateElement device={device} state={this.state[secondaryStateKey] || {}} stateVal={this.state[secondaryStateKey] && this.state[secondaryStateKey].val} stateKey={secondaryStateKey} secondary /></span>) : [];\r\n\t\t\tAction = [ primaryAction, <br key={'StateListItem-Br-' + device.id + '-' + options.primaryStateKey} />, secondaryActions ];\r\n\t\t}\r\n\t\t\r\n\t\t// Action\r\n\t\telse if (options.actionType === 'action') {\r\n\t\t\tconst primaryActionState = this.state[options.primaryStateKey] || {};\r\n\t\t\tconst ActionElement = components.action[options.actionElement] || null;\r\n\t\t\tconst primaryAction = ActionElement && <ActionElement key={'StateListItem-ActionState-' + device.id + '-' + options.primaryStateKey} device={device} state={primaryActionState} stateVal={primaryActionState.val} stateKey={options.primaryStateKey} />\r\n\t\t\tAction = primaryAction;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t{config.divider && config.divider !== 'after' && <ListItem divider className={classes.defaultListDivider} />}\r\n\t\r\n\t<ListItem\r\n\t\tclassName={clsx(this.props.openDialog && classes.finger, config.horizontal && classes.horizontalListItem)}\r\n\t\tbutton={this.props.openDialog !== null}\r\n\t\tonClick={this.props.openDialog && (() => this.props.openDialog(this.props.device))}\r\n\t\t>\r\n\t\t\r\n\t\t<ListItemIcon className={clsx(config.horizontal && classes.horizontalListItemIcon)}>\r\n\t\t{icon === null ? <React.Fragment /> :\r\n\t\t\t<ListItemIconElement customClassNames={['defaultListIcon','mdi mdi-' + icon]} styles={device.getStyle('icon', options.primaryStateKey, primaryState.val)} />\r\n\t\t}\r\n\t\t</ListItemIcon>\r\n\t\t\r\n\t\t<ListItemText\r\n\t\t\tref={this.ListItemText}\r\n\t\t\tdisableTypography={config.isDeviceStateDetails}\r\n\t\t\tprimary={primaryBody}\r\n\t\t\tsecondary={(!config.isDeviceStateDetails && typeof primaryBody === 'string' && primaryState && primaryState.timeChanged) || null}\r\n\t\t\tstyle={{ flex: 'initial', width: this.state.ListItemTextWidth }}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction\r\n\t\t\tref={this.ListItemSecondaryAction}\r\n\t\t\tclassName={config.horizontal ? classes.horizontalListItemAction : classes.verticalListItemAction}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{Action}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t\r\n\t{config.divider && config.divider === 'after' && <ListItem divider style={{margin: '5px 0'}} />}\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateListItem);\r\n","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\n\r\nimport { lighten, makeStyles } from '@material-ui/core/styles'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\n\r\nconst useToolbarStyles = makeStyles(theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: '1 1 100%',\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTableToolbar(props) {\r\n  const classes = useToolbarStyles();\r\n  const { title, rowCount, numSelected, rightActionButton } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t{title !== undefined && (title + ' (' + rowCount + ')')}\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )\r\n\t  : rightActionButton}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\nexport default function EnhancedTableHead(props) {\r\n  const { headCells, onSelectAllClick, selectable, sortable, order, orderBy, numSelected, rowCount, onRequestSort } = props;\r\n  const createSortHandler = property => event => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n\t\t{selectable !== false &&\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t  <Checkbox\r\n\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\tinputProps={{ 'aria-label': 'select all' }}\r\n\t\t\t  />\r\n\t\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n        {headCells.map(headCell => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.align || 'left'}\r\n            padding={headCell.disablePadding ? 'none' : 'default'}\r\n            sortDirection={sortable && (orderBy === headCell.id ? order : false)}\r\n\t\t\tstyle={{ width: headCell.width || 'auto' }}\r\n          >\r\n\t\t  {sortable ?\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.orderBy || headCell.id)}\r\n            >\r\n              <strong>{headCell.label}</strong>\r\n            </TableSortLabel>\r\n\t\t\t:\r\n\t\t\t <strong>{headCell.label}</strong>\r\n\t\t\t}\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport clsx from 'clsx'\r\nimport { format } from 'date-fns'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tnoWrap: {\r\n\t\twhiteSpace: 'nowrap'\r\n\t}\r\n}));\r\n\r\n\r\n// https://stackoverflow.com/questions/9382167/serializing-object-that-contains-cyclic-object-value\r\nfunction nestedObjects(key, val, seen) {\r\n\t\r\n\tif (val !== null && typeof val === 'object') {\r\n\t\tif (seen.indexOf(val) >= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tseen.push(val);\r\n\t}\r\n\t\r\n\treturn val;\r\n}\r\n\r\nfunction showTableContent(content, type = '') {\r\n\t\r\n\tif (content === undefined || content === null) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tlet seen = [];\r\n\tswitch(type.toLowerCase()) {\r\n\t\tcase 'date':\r\n\t\t\tcontent = format(content, 'yyyy-MM-dd HH:mm:ss');\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\tcontent = Array.isArray(content) || typeof content === 'object' ? JSON.stringify(content, (key, val) => nestedObjects(key, val, seen)) : content;\r\n\t\t\tcontent = typeof content === 'boolean' ? content.toString() : content;\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn content;\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n\tconst { columns, sortedRows, emptyRows, rowStyles, selectable, selected, onClick } = props;\r\n\tconst classes = useStyles();\r\n\tconst isSelected = id => selected.indexOf(id) !== -1;\r\n\r\n\treturn (\r\n\r\n<TableBody>\r\n\t{sortedRows.map((row, index) => {\r\n\t\tconst isItemSelected = isSelected(row.id);\r\n\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\r\n\t\tlet styles = {};\r\n\t\tfor (let columnId in rowStyles) {\r\n\t\t\tlet rowStyle = rowStyles[columnId];\r\n\t\t\t\r\n\t\t\tif (row[columnId] && Object.keys(rowStyle).indexOf(row[columnId]) > -1) {\r\n\t\t\t\tstyles = { ...styles, ...rowStyle[row[columnId]] };\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n\t<TableRow\r\n\t\tkey={'TableRow-' + index}\r\n\t\thover\r\n\t\tonClick={onClick ? (event => onClick(event, row.id)) : undefined}\r\n\t\trole=\"checkbox\"\r\n\t\taria-checked={isItemSelected}\r\n\t\ttabIndex={-1}\r\n\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\r\n\t\t{selectable !== false &&\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-Checkbox'}\r\n\t\t\tstyle={styles}\r\n\t\t\tpadding=\"checkbox\"\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Checkbox\r\n\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n\t\t{columns.map(column => (\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-' + column.id}\r\n\t\t\tclasses={{ root: clsx(column.noWrap && classes.noWrap) }}\r\n\t\t\tstyle={styles}\r\n\t\t\tscope=\"row\"\r\n\t\t\tpadding={column.disablePadding ? 'none' : 'default'}\r\n\t\t\t>\r\n\r\n\t\t\t{showTableContent(row[column.id], column.type)}\r\n\t\t</TableCell>\r\n\r\n\t\t))}\r\n\r\n\t</TableRow>\r\n\t\t\r\n\t\t);\r\n\t})}\r\n\t\r\n\t{emptyRows > 0 && (\r\n\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t<TableCell colSpan={6} />\r\n\t</TableRow>\r\n\t)}\r\n\t\r\n</TableBody>\r\n\r\n\t);\r\n}","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React, { useEffect } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TablePagination from '@material-ui/core/TablePagination'\r\n\r\nimport EnhancedTableToolbar from '../components/EnhancedTableToolbar'\r\nimport EnhancedTableHead from '../components/EnhancedTableHead'\r\nimport EnhancedTableBody from '../components/EnhancedTableBody'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  table: {\r\n    minWidth: 750,\r\n  }\r\n}));\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy, orderByCase) {\r\n\t\r\n\tlet orderA, orderB;\r\n\tif (orderBy.indexOf('.') === -1) {\r\n\t\torderA = a[orderBy] || '';\r\n\t\torderB = b[orderBy] || '';\r\n\t}\r\n\telse {\r\n\t\tlet tmpA = { ...a };\r\n\t\tlet tmpB = { ...b };\r\n\t\tlet key = orderBy;\r\n\t\tlet index;\r\n\t\t\r\n\t\twhile (key.indexOf('.') > -1) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tindex = key.substr(0, key.indexOf('.'));\r\n\t\t\t\tkey = key.substr(key.indexOf('.')+1);\r\n\t\t\t\ttmpA = tmpA[index];\r\n\t\t\t\ttmpB = tmpB[index];\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.error(err.message);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\torderA = tmpA[key] || '';\r\n\t\torderB = tmpB[key] || '';\r\n\t}\r\n\t\r\n\tif (orderByCase !== true) {\r\n\t\torderA = typeof orderA === 'object' ? JSON.stringify(orderA) : orderA.toLowerCase();\r\n\t\torderB = typeof orderB === 'object' ? JSON.stringify(orderB) : orderB.toLowerCase();\r\n\t}\r\n\t\r\n\t\r\n  if (orderB < orderA) {\r\n    return -1;\r\n  }\r\n  if (orderB > orderA) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy, orderByCase) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy, orderByCase)\r\n    : (a, b) => -descendingComparator(a, b, orderBy, orderByCase);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  \r\n  const { title, headCells, size, CustomTableBody, rows, toolbar, selectable, pagination, defaultOrder, defaultOrderBy, orderByCase, defaultSelected, defaultPage, defaultRowsPerPage, toolbarRightActionButton } = props;\r\n  \r\n  const [order, setOrder] = React.useState(defaultOrder || 'asc');\r\n  const [orderBy, setOrderBy] = React.useState(defaultOrderBy || headCells[0].orderBy || headCells[0].id);\r\n  const [selected, setSelected] = React.useState(defaultSelected || []);\r\n  const [page, setPage] = React.useState(defaultPage || 0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(pagination ? (defaultRowsPerPage || 5) : rows.length);\r\n\r\nuseEffect(() => setRowsPerPage(pagination ? (defaultRowsPerPage || 5) : rows.length), [rows.length, pagination, defaultRowsPerPage]);\r\n\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map(n => n.id);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = event => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const selectRow = (event, id) => {\r\n    const selectedIndex = selected.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TableBody = CustomTableBody || EnhancedTableBody;\r\n  return (\r\n\t<React.Fragment>\r\n\t\t{toolbar !== false &&\r\n        <EnhancedTableToolbar\r\n\t\t  title={title}\r\n          rowCount={rows.length}\r\n\t\t  numSelected={selected.length || 0}\r\n\t\t  rightActionButton={toolbarRightActionButton}\r\n\t\t  />}\r\n\t\t\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"enhanced table\"\r\n\t\t\tsize={size}\r\n\t\t\tstickyHeader={true}\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={rows.length}\r\n\t\t\t  {...props}\r\n            />\r\n\t\t\t\r\n\t\t\t<TableBody\r\n\t\t\t\tcolumns={headCells}\r\n\t\t\t\tsortedRows={stableSort(rows, getComparator(order, orderBy, orderByCase)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)}\r\n\t\t\t\temptyRows={rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage)}\r\n\t\t\t\tonClick={selectable !== false && selectRow}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\t{...props}\r\n\t\t\t\t/>\r\n\t\t\t\r\n          </Table>\r\n        </TableContainer>\r\n\t\t{pagination && <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={rows.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />}\r\n\t</React.Fragment>\r\n\t\r\n  );\r\n}","import EventEmitter from 'events'\r\nimport functions from '../functions'\r\n\r\n\r\n/**\r\n * Function\r\n *\r\n * @param\t{String}\t\tfunctionType\r\n * @return\t{Function}\r\n *\r\n */\r\nexport default class Function extends EventEmitter {\r\n\t\r\n\tconstructor(functionType) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.function = functionType;\r\n\t\t\r\n\t\tif (!this.function) {\t\r\n\t\t\tthrow new Error('No function given!');\r\n\t\t}\r\n\t\t\r\n\t\tthis.functionId = this.function.toLowerCase();\r\n\t\t\r\n\t\t// configuration\r\n\t\tthis.defaults = functions['_defaults'];\r\n\t\tthis.configurations = functions[this.functionId] || {};\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Mixed}\r\n\t * @private\r\n\t */\r\n\t_applyFunction(key, val) {\r\n\t\treturn this._isFunction(key) ? key(val) : val;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{String}\r\n\t * @private\r\n\t */\r\n\t_getValueFromSettings(settings, defaults = '') {\r\n\t\t\r\n\t\tfor (let key in settings) {\r\n\t\t\tif (settings[key] !== undefined) {\r\n\t\t\t\treturn settings[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn defaults;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isFunction(key) {\r\n\t\treturn key && typeof key === 'function';\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isValue(val) {\r\n\t\treturn val !== undefined; // || val === null || val === false; // null is considered a value, so it can be used to actually null the output\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_setObjectStructure(obj, defaultValue = undefined) {\r\n\t\t\r\n\t\tif (!obj || typeof obj != 'object') {\r\n\t\t\tobj = { 'default': obj || defaultValue };\r\n\t\t}\r\n\t\telse if (typeof obj == 'object' && !obj.default) {\r\n\t\t\tobj.default = defaultValue;\r\n\t\t}\r\n\t\t\r\n\t\treturn obj;\r\n\t}\r\n}\r\n","import Connection from './Connection'\r\nimport Function from './Function'\r\nimport i18n, { locales } from './i18n'\r\nimport Log from './Log'\r\n\r\nimport { formatDistanceToNow } from 'date-fns'\r\n\r\n\r\n/**\r\n * Device\r\n *\r\n * @param\t{Object}\tdeviceProperties\r\n * @param\t{String}\tdeviceProperties.id\r\n * @param\t{String}\tdeviceProperties.name\r\n * @param\t{String}\t[deviceProperties.room=null]\r\n * @param\t{String}\tdeviceProperties.function\r\n * @param\t{Object}\tdeviceProperties.states\r\n * @param\t{Object}\t[deviceProperties.attributes={}]\r\n * @param\t{Object}\tdeviceProperties.options\r\n * @param\t{Object}\tsocket\r\n * @return\t{Device}\r\n * @see https://github.com/Zefau/ioBroker.jarvis/issues/21\r\n *\r\n */\r\nexport default class Device extends Function {\r\n\t\r\n\tconstructor(deviceProperties) {\r\n\t\tconst socket = Connection.getConnection\r\n\t\t\r\n\t\ttry {\r\n\t\t\tsuper(deviceProperties.function);\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthrow new Error('No function given for device ' + deviceProperties.name + '!');\r\n\t\t}\r\n\t\t\r\n\t\t// initialise class data\r\n\t\tthis.id = deviceProperties.id;\r\n\t\tthis.name = deviceProperties.name;\r\n\t\t\r\n\t\tthis.room = deviceProperties.room || null;\r\n\t\t\r\n\t\tthis.states = deviceProperties.states;\r\n\t\tthis.options = deviceProperties.options;\r\n\t\tthis.attributes = deviceProperties.attributes || {};\r\n\t\t\r\n\t\tthis.socket = socket;\r\n\t\t\r\n\t\t// verify data\r\n\t\tif (!this.states || typeof this.states !== 'object' || Object.keys(this.states).length === 0) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no states defined)!');\r\n\t\t}\r\n\t\telse if (!this.id || !this.name || !this.function) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no id, name or function defined)!');\r\n\t\t}\r\n\t\telse if (!this.socket) {\t\r\n\t\t\tthrow new Error('No socket given!');\r\n\t\t}\r\n\t\t\r\n\t\t// hierarchy\r\n\t\tthis.children = deviceProperties.children || [];\r\n\t\tthis.parent = deviceProperties.parent || null;\r\n\t\t\r\n\t\t// get states\r\n\t\tthis._setStatesOptions();\r\n\t\tthis.stateSubscriptions = [];\r\n\t\t\r\n\t\t// set options\r\n\t\t//this.options.manufacturer = (this.primaryStateKey && Adapters[this.states[this.primaryStateKey].state.node.substr(0, this.states[this.primaryStateKey].state.node.indexOf('.'))]) || '';\r\n\t\t//this.options.label = (this.options.label && (typeof this.options.label === 'string' && this.options.label.replace(/%name%/g, this.name))) || this.options.label || this.name;\r\n\t\t\r\n\t\t// listen for errors of the device\r\n\t\tthis.on('error', err => Log._('Device', [ i18n.t('Device error occured!'), err.message ], 'error', false, err.stack));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object|String}\r\n\t * @private\r\n\t */\r\n\t_getStateFromKey(stateKey = null, stateType = 'state') {\r\n\t\t\r\n\t\t// already a state object\r\n\t\tif (stateKey && typeof stateKey === 'object') {\r\n\t\t\treturn stateKey;\r\n\t\t}\r\n\t\t\r\n\t\t// get state object\r\n\t\tlet s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\t// state does not exist\r\n\t\tif (s === undefined) {\r\n\t\t\treturn i18n.t('State does not exist in device %device%').replace(/%device%/g, this.name) + '!';\r\n\t\t}\r\n\t\t\r\n\t\t// state not an object so far\r\n\t\telse if (typeof s === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey] = { [stateType]: { 'node': s }};\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\telse if (typeof s[stateType] === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey][stateType] = { 'node': s[stateType] };\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\t\r\n\t\t// state not valid\r\n\t\tif (!s || !s[stateType]) {\r\n\t\t\treturn i18n.t('Incorrect or non-defined state key for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\telse if (typeof s[stateType] == 'object' && !s[stateType].node) {\r\n\t\t\treturn i18n.t('No %stateType% specified for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getConfigurationSetting(config, stateKey, attribute, stateVal) {\r\n\t\t//console.log(this.id, config, stateKey, attribute, stateVal, this[config], this[config][stateKey], this[config]['_any']);\r\n\t\t\r\n\t\tif (this[config][stateKey] && this[config][stateKey][attribute]) {\r\n\t\t\t\r\n\t\t\t// 1. if stateKey (e.g. level, power) is available, try to replace an attribute (e.g. icon, unit or for styles state, icon) based on current state (e.g. true, false)\r\n\t\t\tif (typeof this[config][stateKey][attribute] === 'object') {\r\n\t\t\t\t\r\n\t\t\t\tconst stateValKeys = Object.keys(this[config][stateKey][attribute]);\r\n\t\t\t\tif (stateValKeys.toString().indexOf('<') > -1 || stateValKeys.toString().indexOf('>') > -1 || stateValKeys.toString().indexOf('!=') > -1) { // !=, >, >=, <, <=\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet val = this[config][stateKey][attribute]['default'];\r\n\t\t\t\t\tstateValKeys.forEach(stateValKey => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet stateValValue = stateValKey.replace('<=', '').replace('<', '').replace('>=', '').replace('>', '').replace('!=', '');\r\n\t\t\t\t\t\tif (stateValKey.indexOf('<=') > -1 && stateVal <= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('<') > -1 && stateVal < stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>=') > -1 && stateVal >= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>') > -1 && stateVal > stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKeys.toString().indexOf('!=') > -1 && stateVal != stateValValue) {  // eslint-disable-line eqeqeq\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn super._isValue(this[config][stateKey][attribute][stateVal]) ? this[config][stateKey][attribute][stateVal] : this[config][stateKey][attribute]['default'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 2. if #1 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config][stateKey][attribute])) {\r\n\t\t\t\treturn this[config][stateKey][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 3. fallback to stateKey with attribute, if defined but neither an object (thus stateless) nor a function\r\n\t\t\telse if (typeof this[config][stateKey][attribute] === 'string') {\r\n\t\t\t\treturn this[config][stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this[config]['_any'] && this[config]['_any'][attribute]) {\r\n\t\t\t\r\n\t\t\t// 4. fallback to _any if no stateKey (e.g. level, power) is given, but consider attribute to be stateful (e.g. true, false)\r\n\t\t\tif (typeof this[config]['_any'][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(this[config]['_any'][attribute][stateVal]) ? this[config]['_any'][attribute][stateVal] : this[config]['_any'][attribute]['default'];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 5. if #4 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config]['_any'][attribute])) {\r\n\t\t\t\treturn this[config]['_any'][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// nothing, return undefined (not null, because this would mean take an empty value)\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getUserSetting(stateKey, attribute, stateVal) {\r\n\t\t\r\n\t\tlet options = this.states;\r\n\t\tif (options[stateKey] && options[stateKey][attribute]) {\r\n\t\t\tif (typeof options[stateKey][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(options[stateKey][attribute][stateVal]) ? options[stateKey][attribute][stateVal] : options[stateKey][attribute]['default'];\r\n\t\t\t}\r\n\t\t\telse if (super._isFunction(options[stateKey][attribute])) {\r\n\t\t\t\treturn options[stateKey][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn options[stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return void\r\n\t * @private\r\n\t *\r\n\t */\r\n\t_setStatesOptions() {\r\n\t\t\r\n\t\tlet states = Object.keys(this.states);\r\n\t\t\r\n\t\t// delete ignored states\r\n\t\tif (this.options.ignoredStates) {\r\n\t\t\tthis.options.ignoredStates = Array.isArray(this.options.ignoredStates) ? this.options.ignoredStates : [this.options.ignoredStates];\r\n\t\t\t\r\n\t\t\tthis.options.ignoredStates.forEach(ignoredState => {\r\n\t\t\t\tif (this.states[ignoredState]) {\r\n\t\t\t\t\tdelete this.states[ignoredState];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get hidden states\r\n\t\tthis.options.hiddenStates = this.options.hiddenStates ? (Array.isArray(this.options.hiddenStates) ? this.options.hiddenStates : [this.options.hiddenStates]) : [];\r\n\t\t\r\n\t\t// primary and secondary state\r\n\t\tthis.primaryStateKey = this.options.primary || states[0] || null;\r\n\t\t//this.states[this.primaryStateKey] = this._getStateFromKey(this.primaryStateKey);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_updateDeviceState(stateKey, state) {\r\n\t\t\r\n\t\t// add time changed\r\n\t\tstate.timeChanged = formatDistanceToNow(new Date(state.lc-5*1000), { locale: locales[i18n.getLanguage()], includeSeconds: true, addSuffix: true })\r\n\t\t\r\n\t\t// add unit\r\n\t\tstate.unit = '';\r\n\t\t\r\n\t\t// change val\r\n\t\tlet val = this._getConfigurationSetting('configurations', stateKey, 'val', state.val);\r\n\t\tstate.val = val !== undefined ? val : state.val;\r\n\t\t\r\n\t\t// assign value\r\n\t\tstate.value = state.val;\r\n\t\t\r\n\t\t// mapping of value to state values\r\n\t\t[{ 'value': 'value' }, { 'display': 'value' }, { 'unit': 'unit' }].forEach(pair => {\r\n\t\t\tlet attribute = Object.keys(pair).toString();\r\n\t\t\tlet option = Object.values(pair).toString();\r\n\t\t\tlet settings = {};\r\n\t\t\t\r\n\t\t\t// get user setting\r\n\t\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, state.val);\r\n\t\t\t\r\n\t\t\t// get function setting or fallback to defaults\r\n\t\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, state.val);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tstate[option] = super._getValueFromSettings(settings, state[option]);\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\tstate.value = typeof value === 'string' ? i18n.t(state.value) : state.value;\r\n\t\treturn state;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetDeviceStates() {\r\n\t\t\r\n\t\tlet devicesStates = {};\r\n\t\tfor (let stateKey in this.states) {\r\n\t\t\tdevicesStates[stateKey] = this.getDeviceState(stateKey);\r\n\t\t}\r\n\t\t\r\n\t\treturn devicesStates;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateProperty=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetDeviceState(stateKey = null, stateProperty = null) {\r\n\t\tconst s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\tlet deviceState = null;\r\n\t\t\r\n\t\tif (s && s.state && stateProperty !== null && s.state.value !== undefined && s.state.value[stateProperty] !== undefined) {\r\n\t\t\tdeviceState = s.state.value[stateProperty];\r\n\t\t}\r\n\t\telse if (s && s.state && stateProperty === null && s.state.value !== undefined) {\r\n\t\t\tdeviceState = s.state.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn deviceState;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get an icon based on the current device state (or falls back to a default).\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateVal=default]\r\n\t * @param\t{String}\t[defaultIcon=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetIcon(stateKey, stateVal = '', defaultIcon = undefined) {\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, 'icon', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, 'icon', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, defaultIcon);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetOption(option, stateVal = 'default') {\r\n\t\treturn (this.options[option] && (this.options[option][stateVal] || this.options[option]['default'])) || this.options[option] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetStyle(attribute, stateKey = null, stateVal = 'default') {\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, attribute + 'Style', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute + 'Style', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, {});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\t// check for duplicates\r\n\t\tlet duplicate = this.listeners(eventName).findIndex(listener => listener.toString() == callback.toString()) > -1; // eslint-disable-line eqeqeq\r\n\t\t\r\n\t\t// attach callback\r\n\t\tif (!duplicate) {\r\n\t\t\tthis.on(eventName, callback);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests all state values from the backend.\r\n\t *\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Array<Promises>}\r\n\t *\r\n\t */\r\n\trequestDeviceStates(subscribe = false) {\r\n\t\t\r\n\t\tlet responses = [];\r\n\t\tfor (let stateKey in this.states) {\r\n\t\t\tresponses.push(this.requestDeviceState(stateKey, subscribe));\r\n\t\t}\r\n\t\t\r\n\t\treturn responses;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Promise}\r\n\t *\r\n\t */\r\n\trequestDeviceState(stateKey = null, subscribe = false) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s === 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error(s) });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (s.state.value !== undefined && this.stateSubscriptions.indexOf(stateKey) > -1) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getState(s.state.node)\r\n\t\t\t\t\t.then(state => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (state === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': new Error('State ' + s.state.node + ' not found!') });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @return\t{Promise}\r\n\t * @see https://github.com/ioBroker/ioBroker.history#access-values-from-javascript-adapter\r\n\t *\r\n\t */\r\n\trequestDeviceStateHistory(stateKey = null, subscribe = false, options = {}) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error(s) });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ts.state.historyCache = s.state.historyCache || {};\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (options.start && options.end && options.step && s.state.historyCache[options.start + '#' + options.end + '#' + options.step] !== undefined) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('historyChange', stateKey, s.state.historyCache[options.start + '#' + options.end + '#' + options.step], this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getStateHistory(s.state.node, options)\r\n\t\t\t\t\t.then(history => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (history === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': new Error('State ' + s.state.node + ' not found!') });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// cache result\r\n\t\t\t\t\t\tif (options.start && options.end && options.step) {\r\n\t\t\t\t\t\t\ts.state.historyCache[options.start + '#' + options.end + '#' + options.step] = history;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.history = history;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('historyChange', stateKey, s.state.history, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetAction(action) {\r\n\t\tthis.options.action = action;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetComponent(component) {\r\n\t\tthis.options.label = component;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\tvalue\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsetDeviceState(stateKey = null, value) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey, 'action');\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error(s) });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.socket.setState(s.action.node, value)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\r\n\t\t\t\t\t// get state value if not subscribed\r\n\t\t\t\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\t\t\t\tthis.requestDeviceState(stateKey);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// resolve\r\n\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsubscribeDeviceState(stateKey = null) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error(s) });\r\n\t\t}\r\n\t\t\r\n\t\t// add subscription\t\r\n\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\tthis.stateSubscriptions.push(stateKey);\r\n\t\t\r\n\t\t\t// subscribe\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.socket.subscribeState(s.state.node, (id, state, params) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (state && state.val !== this.getDeviceState(stateKey, 'val')) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// format value\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish to children as well\r\n\t\t\t\t\t\tthis.children.forEach(child => child.emit('stateChange', stateKey, s.state.value, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error('State already subscribed!') });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tunsubscribeDeviceState(stateKey = null) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error(s) });\r\n\t\t}\r\n\t\t\r\n\t\t// remove subscription\t\r\n\t\tif (this.stateSubscriptions.indexOf(stateKey) > -1) {\r\n\t\t\tthis.stateSubscriptions = this.stateSubscriptions.filter((value, index, arr) => value !== stateKey);\r\n\t\t\r\n\t\t\t// unsubscribe\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.socket.unsubscribeState(s.state.node);\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': new Error('State not subscribed!') });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tunlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\tthis.off(eventName, callback);\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\nimport color from 'color'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\n\r\nimport Log from '../../controller/Log'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tvalue: props => ({\r\n\t\tfloat: 'left',\r\n\t\tlineHeight: '32px',\r\n\t\tmarginRight: '10px'\r\n\t}),\r\n\tborderLeftTransparent: {\r\n\t\tborderLeftColor: 'transparent !important'\r\n\t},\r\n\tborderLeftColor: {\r\n\t\tborderLeftColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightTransparent: {\r\n\t\tborderRightColor: 'transparent !important'\r\n\t},\r\n\tborderRightColor: {\r\n\t\tborderRightColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightColorSecondary: {\r\n\t\tborderRightColor: color(theme.palette.secondary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction BlindLevelAction(props) {\r\n\tconst { device, state, stateKey } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onGoUp = () => {\r\n\t\tsetLevel(100);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 100).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst onGoDown = () => {\r\n\t\tsetLevel(0);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 0).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst onStop = () => {\r\n\t\tsetActivity(false);\r\n\t\tdevice.setDeviceState('activity', true).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\t// level\r\n\tconst [level, setLevel] = useState(state.value || null);\r\n\tuseEffect(() => setLevel(state.value), [state]);\r\n\t\r\n\t// activity\r\n\tconst [activity, setActivity] = useState(false);\r\n\tconst stateChangeActivity = (sKey, s, d) => { sKey === 'activity' && setActivity(s.val); }\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (device.states.activity && device.states.activity.state) {\r\n\t\t\tdevice.states.activity.state = typeof device.states.activity.state === 'string' ? { 'node': device.states.activity.state } : device.states.activity.state;\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('activity', true).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChangeActivity)\r\n\t\t}\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => device.unlisten(stateChangeActivity);\r\n\t\t\r\n\t}, [device, state]);\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t<div className={classes.value}>\r\n\t\t{level + ' ' + state.unit}\r\n\t</div>\r\n\t\r\n\t<ButtonGroup size=\"small\">\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderRightColor : classes.borderRightTransparent))} onClick={onGoUp}><ExpandLessIcon /></Button>\r\n\t\t{activity !== null && <Button color=\"secondary\" className={clsx(!activity ? [ classes.borderLeftTransparent, classes.borderRightTransparent ] : classes.borderRightColorSecondary)} onClick={onStop} disabled={!activity}><StopIcon /></Button>}\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderLeftColor : classes.borderLeftTransparent))} onClick={onGoDown}><ExpandMoreIcon /></Button>\r\n\t</ButtonGroup>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tbody: {\r\n\t},\r\n\taction: {\r\n\t\tBlindLevelAction\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\nimport defaults from '../_defaults'\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction HeatingSetTemperatureBody(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={0} max={35} {...props} />\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tbody: {\r\n\t\tHeatingSetTemperatureBody\r\n\t},\r\n\taction: {\r\n\t}\r\n}","\r\nexport default [\r\n\t{\r\n\t\t'parameter': 'updates',\r\n\t\t'label': 'Adapter Updates',\r\n\t\t'description': {\r\n\t\t\t'en': 'Enable to show adapters updates',\r\n\t\t\t'de': 'Aktivieren, um Adapter Updates anzuzeigen'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t},\r\n\t{\r\n\t\t'parameter': 'list',\r\n\t\t'label': {\r\n\t\t\t'en': 'List of Adapter\\'s',\r\n\t\t\t'de': 'Liste angezeigter Adapter'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'List of adapters to show (empty shows all adapters)',\r\n\t\t\t'de': 'Liste der Adapter, die angezeigt werden (leere Liste zeigt alle Adapter)'\r\n\t\t},\r\n\t\t'values': {\r\n\t\t\t'en': 'Adapter names separated by comma',\r\n\t\t\t'de': 'Namen der Adapter mit Komma separiert'\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\t'parameter': 'blacklist',\r\n\t\t'label': {\r\n\t\t\t'en': 'List of Adapter\\'s to hide',\r\n\t\t\t'de': 'Liste nicht angezeigter Adapter'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'Shows all adapters except the ones listed here',\r\n\t\t\t'de': 'Zeigt alle Adapter, auer die hier angegebenen'\r\n\t\t},\r\n\t\t'values': {\r\n\t\t\t'en': 'Adapter names separated by comma',\r\n\t\t\t'de': 'Namen der Adapter mit Komma separiert'\r\n\t\t}\r\n\t}\r\n]\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light',\r\n\tdevices: false\r\n}","\r\nexport default [\r\n]\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light',\r\n\tdevices: true,\r\n\tdevicesStates: {\r\n\t\tselectable: ['primaryStateKey']\r\n\t}\r\n}","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\ttitle: i18n.t('Time'),\r\n\ticon: 'clock-outline',\r\n\tdevices: false\r\n}","//import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\tdevices: true,\r\n\tdevicesStates: {\r\n\t\tselectable: false,\r\n\t\trequiredStates: ['position']\r\n\t}\r\n}","\r\nexport default [\r\n]\r\n","//import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\tdevices: true\r\n}","import React, { useState, useEffect } from 'react'\r\n\r\nimport i18n from '../../controller/i18n'\r\nimport Inputs from '../../components/Inputs'\r\nimport { components } from '../../functions'\r\n\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Switch from '@material-ui/core/Switch'\r\n\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank'\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox'\r\n\r\n\r\nexport default {\r\n\tdevices: ['device', 'divider', 'group'],\r\n\tDeviceBodyConfiguration,\r\n\tDeviceActionsConfiguration\r\n}\r\n\r\n/*\r\n *\r\n */\r\nfunction DeviceBodyConfiguration({ device, options, onChange, elements = {} }) {\r\n\tconst [bodyStateKey,setBodyStateKey] = useState(options.bodyStateKey || null);\r\n\tuseEffect(() => {\r\n\t\tsetBodyStateKey(options.bodyStateKey);\r\n\t}, [options.bodyStateKey]);\r\n\t\r\n\tif (options.type !== 'device') {\r\n\t\treturn <Inputs.Fieldset>\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t{elements.Icon} {elements.Device}\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t</Inputs.Fieldset>\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Inputs.Fieldset key={'Device-' + (device.id || options.deviceId) + '-Body'}>\r\n\t\t\t<Inputs.FieldsetItem container>\r\n\t\t\t\t{elements.Icon} {elements.Device}\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t<Inputs.FieldsetItem columns={12} noPadding>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='label'\r\n\t\t\t\t\tid='label'\r\n\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\r\n\t\t\t\t\tplaceholder={device.name}\r\n\t\t\t\t\tval={options.label || ''}\r\n\t\t\t\t\tlabel={i18n.t('Device Label')}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='bodyStateKey'\r\n\t\t\t\t\tid='bodyStateKey'\r\n\t\t\t\t\twidth={140}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={bodyStateKey}\r\n\t\t\t\t\tlabel={i18n.t('Body State Key')}\r\n\t\t\t\t\toptions={Object.keys(device.states || {})}\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\tsetBodyStateKey(val);\r\n\t\t\t\t\t\tonChange(props, val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t\r\n\t\t\t\t\trenderOption={(option, state) => {\r\n\t\t\t\t\t\toption = !option ? <em>{i18n.t('no body element')}</em> : option;\r\n\t\t\t\t\t\treturn state.selected ? <strong>{option}</strong> : option;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t{bodyStateKey !== null && <Inputs.Text\r\n\t\t\t\t\tkey='bodyElement'\r\n\t\t\t\t\tid='bodyElement'\r\n\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={options.bodyElement || null}\r\n\t\t\t\t\tlabel={i18n.t('Body Element')}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\toptions={Object.keys(components.body || {})}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t</Inputs.Fieldset>\r\n\t)\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function DeviceActionsConfiguration({ device, options, onChange, elements = {} }) {\r\n\tlet deviceStates = Object.keys(device.states || {});\r\n\t\r\n\tconst [checked,setChecked] = useState(options.actionType === 'action');\r\n\tconst [actionStateKey,setActionStateKey] = useState(options.primaryStateKey || (deviceStates && deviceStates[0]) || null);\r\n\t\r\n\tconst icon = <CheckBoxOutlineBlankIcon fontSize=\"small\" />\r\n\tconst checkedIcon = <CheckBoxIcon fontSize=\"small\" />\r\n\t\r\n\tif (options.type !== 'device') {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tlet actionElementOptions = Object.keys(components.action || {});\r\n\tactionElementOptions.splice(0, 1); // components.action.State;\r\n\t\r\n\treturn (\r\n\t\t<Inputs.Fieldset key={'Device-' + (device.id || options.deviceId) + '-Action'}>\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t<Grid component=\"label\" container alignItems=\"center\">\r\n\t\t\t\t\t<Grid item>{i18n.t('Show states')}</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\tcolor=\"default\"\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\t\t\tonChange={(e, val) => {\r\n\t\t\t\t\t\t\t\tonChange({ id: 'actionType' }, val === true ? 'action' : 'state');\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// delete error of Action Element when switching to State\r\n\t\t\t\t\t\t\t\tif (val !== true) {\r\n\t\t\t\t\t\t\t\t\tonChange({ id: 'actionElement', error: null }, '');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// initial error of Action Element\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tonChange({ id: 'actionElement', error: !options.actionElement }, '');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetChecked(prevChecked => prevChecked !== true);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>{i18n.t('Show an action element')}</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem noPadding>\r\n\t\t\t\t\r\n\t\t\t\t{!checked && <>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='primaryStateKey'\r\n\t\t\t\t\tid='primaryStateKey'\r\n\t\t\t\t\twidth={140}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={actionStateKey}\r\n\t\t\t\t\tlabel={i18n.t('Primary State Key')}\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\tsetActionStateKey(val);\r\n\t\t\t\t\t\tonChange(props, val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\toptions={Object.keys(device.states || {})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='secondaryStatesKeys'\r\n\t\t\t\t\tid='secondaryStatesKeys'\r\n\t\t\t\t\twidth={270}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tlimitTags={2}\r\n\t\t\t\t\tdisableCloseOnSelect\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={options.secondaryStatesKeys || []}\r\n\t\t\t\t\tlabel={i18n.t('Secondary States Keys')}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\toptions={Object.keys(device.states || {})}\r\n\t\t\t\t\t\r\n\t\t\t\t\trenderOption={(option, { selected }) => option && (\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\ticon={icon}\r\n\t\t\t\t\t\t\t\tcheckedIcon={checkedIcon}\r\n\t\t\t\t\t\t\t\tstyle={{ marginRight: 8 }}\r\n\t\t\t\t\t\t\t\tchecked={selected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{option}\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>}\r\n\t\t\t\t\r\n\t\t\t\t{checked && <>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='actionStateKey'\r\n\t\t\t\t\tid='primaryStateKey'\r\n\t\t\t\t\twidth={140}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={actionStateKey}\r\n\t\t\t\t\tlabel={i18n.t('Action State Key')}\r\n\t\t\t\t\toptions={Object.keys(device.states || {})}\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\tsetActionStateKey(val);\r\n\t\t\t\t\t\tonChange(props, val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t\r\n\t\t\t\t\trenderOption={(option, state) => {\r\n\t\t\t\t\t\toption = !option ? <em>{i18n.t('no action element')}</em> : option;\r\n\t\t\t\t\t\treturn state.selected ? <strong>{option}</strong> : option;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t{actionStateKey !== null && <Inputs.Text\r\n\t\t\t\t\tkey='actionElement'\r\n\t\t\t\t\tid='actionElement'\r\n\t\t\t\t\twidth={200}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={options.actionElement || null}\r\n\t\t\t\t\tlabel={i18n.t('Action Element')}\r\n\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\toptions={actionElementOptions}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t</>}\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t</Inputs.Fieldset>\r\n\t)\r\n}\r\n","import React from 'react'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport { TextAutoComplete } from './Text'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tchip: {\r\n\t\tmargin: theme.spacing(0.5),\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputChip(props) {\r\n\tconst { icon, color, label, onDelete, deleteIcon } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst handleDelete = () => onDelete && onDelete();\r\n\treturn (\r\n\t\t<Chip\r\n\t\t\tclassName={classes.chip}\r\n\t\t\ticon={icon}\r\n\t\t\tcolor={color}\r\n\t\t\tlabel={label}\r\n\t\t\tonDelete={handleDelete}\r\n\t\t\tdeleteIcon={deleteIcon}\r\n\t\t\t/>\r\n\t)\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputChips(props) {\r\n\tconst { list, ...otherProps } = props;\r\n\t\r\n\tconst chips = Array.isArray(list) ? list : list.split(',');\r\n\treturn chips.map(chip => typeof chip === 'string' ? InputChip({ label: chip, ...otherProps }) : InputChip({ ...chip, ...otherProps }));\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputChipsField(props) {\r\n\tconst { optionKey, ...otherProps } = props;\r\n\t\r\n\treturn (\r\n\t\t<TextAutoComplete\r\n\t\t\tmultiple\r\n\t\t\tfreeSolo\r\n\t\t\tgetOptionLabel={option => optionKey ? option[optionKey] : option}\r\n\t\t\t{...otherProps}\r\n\t\t\t/>\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tnoPadding: {\r\n\t\tpadding: '0 !important'\r\n\t},\r\n\tFieldset: {\r\n\t\tpadding: theme.spacing(0.5, 3, 2, 3)\r\n\t},\r\n\tFieldsetItem: {\r\n\t\tpadding: theme.spacing(2, 0, 1, 0)\r\n\t},\r\n\tLegend: {\r\n\t\tfontSize: '1.2rem',\r\n\t\tcolor: theme.palette.primary.dark,\r\n\t\tpadding: theme.spacing(1, 3),\r\n\t},\r\n}));\r\n\r\n/*\r\n *\r\n */\r\nexport default function Fieldset(props) {\r\n\tconst { children, noPadding, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<FieldsetLegend {...otherProps} />\r\n\t\t\t<Grid container className={clsx(classes.Fieldset, noPadding && classes.noPadding)} {...otherProps}>\r\n\t\t\t\t{children}\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function FieldsetItem(props) {\r\n\tconst { container, children, columns, noPadding, centered, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tcontainer={container || false}\r\n\t\t\titem\r\n\t\t\tclassName={clsx(classes.FieldsetItem, noPadding && classes.noPadding)}\r\n\t\t\txs={columns || 12}\r\n\t\t\tstyle={centered && { textAlign: 'center' }}\r\n\t\t\t{...otherProps}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{children}\r\n\t\t</Grid>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function FieldsetLegend(props) {\r\n\tconst classes = useStyles();\r\n\treturn !props.label ? null : (\r\n\t\t<>\r\n\t\t\t<Typography className={classes.Legend} variant=\"h3\">{props.label}</Typography>\r\n\t\t\t<Divider />\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function Form(props) {\r\n\tconst { children } = props;\r\n\t\r\n\treturn (\r\n\t\t<MuiPickersUtilsProvider utils={i18n.getLocaleDateAdapter()} locale={i18n.getLocale()}>\r\n\t\t\t{children}\r\n\t\t</MuiPickersUtilsProvider>\r\n\t);\r\n}","import StateListConfig from '../StateList/StateList.config'\r\n\r\nexport default StateListConfig","//import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\tdevices: ['device', 'divider', 'group']\r\n}","\r\nexport default [\r\n]\r\n","import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\ttitle: i18n.t('Weather'),\r\n\ticon: 'weather-partly-cloudy',\r\n\tdevices: false\r\n}","//import i18n from '../../controller/i18n'\r\n\r\nexport default {\r\n\tdevices: false\r\n}","import Log from './Log'\r\nimport i18n from './i18n'\r\n\r\nconst _copy = require('rfdc')();\r\n\r\n\r\n/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Settings {\r\n\r\n\t/*\r\n\t * holds the layout\r\n\t */\r\n\tstatic layout = [];\r\n\t\r\n\t/*\r\n\t * holds the settings\r\n\t */\r\n\tstatic settings = {};\r\n\t\r\n\t/**\r\n\t * Apply settings.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic applySettings() {\r\n\t\t\r\n\t\t// language\r\n\t\tif (Settings.settings.language) {\r\n\t\t\ti18n.setLanguage(Settings.settings.language);\r\n\t\t\ti18n.setTranslation(Settings.settings.language, () => require('../i18n/' + Settings.settings.language));\r\n\t\t}\r\n\t\telse {\r\n\t\t\ti18n.setTranslation(i18n.getLanguage(), () => require('../i18n/' + i18n.getLanguage()));\r\n\t\t}\r\n\t\t\r\n\t\t// page title\r\n\t\tif (Settings.settings.pageTitle) {\r\n\t\t\tdocument.title = Settings.settings.pageTitle;\r\n\t\t}\r\n\t\t\r\n\t\t// favicon\r\n\t\tif (Settings.settings.pageFavicon && Settings.settings.pageFavicon.substr(0, 5) === 'data:') {\r\n\t\t\tdocument.getElementById('favicon').href = Settings.settings.pageFavicon;\r\n\t\t}\r\n\t\t\r\n\t\t// translations\r\n\t\tif (Settings.settings.translations) {\r\n\t\t\t\r\n\t\t\tlet translations = Settings.settings.translations;\r\n\t\t\tfor (let language in translations) {\r\n\t\t\t\ti18n.setTranslation(language, translations[language]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a setting.\r\n\t *\r\n\t * @param\t{String}\tsettings\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getSetting(setting) {\r\n\t\treturn Settings.settings[setting] || '';\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets all settings.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Object}\r\n\t */\r\n\tstatic getSettings(copy = true) {\r\n\t\treturn copy ? _copy(Settings.settings || {}) : (Settings.settings || {});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the layout.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Object}\r\n\t */\r\n\tstatic getLayout(copy = true) {\r\n\t\treturn copy ? _copy(Settings.layout || {}) : (Settings.layout || {});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a setting.\r\n\t *\r\n\t * @param\t{String}\tsetting\r\n\t * @param\t{String}\tvalue\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setSetting(setting, val) {\r\n\t\t\r\n\t\tif (setting && val !== undefined) {\r\n\t\t\tSettings.settings[setting] = val;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Set layout.\r\n\t *\r\n\t * @param\t{Object}\tlayout\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setLayout(layout) {\r\n\t\tif (layout) {\r\n\t\t\tSettings.layout = [ ...Settings.layout, ...layout || [] ];\r\n\t\t\tLog._('Settings', [ 'Set layout', Settings.layout ]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Set settings.\r\n\t *\r\n\t * @param\t{Object}\tsettings\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setSettings(settings) {\r\n\t\tif (settings) {\r\n\t\t\tSettings.settings = { ...Settings.settings, ...settings || {} };\r\n\t\t\tLog._('Settings', [ 'Set settings', Settings.settings ]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n}\r\n","/**\r\n *\r\n *\r\n */\r\nfunction HsvToRgb(h, s = 1, v = 1) {\r\n\tif (Array.isArray(h)) {\r\n\t\tv = h[2];\r\n\t\ts = h[1];\r\n\t\th = h[0];\r\n\t}\r\n\telse if (typeof h === 'string' && h.indexOf(',')) {\r\n\t\t[h, s, v] = h.split(',');\r\n\t}\r\n\t\r\n\tif (h > 1) {\r\n\t\th = h/360;\r\n\t}\r\n\t\r\n\tlet r, g, b, i, f, p, q, t;\r\n\t\r\n\ti = Math.floor(h * 6);\r\n\tf = h * 6 - i;\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - f * s);\r\n\tt = v * (1 - (1 - f) * s);\r\n\t\r\n\tswitch (i % 6) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault: // for webpack\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn [\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t];\r\n}\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction RgbToHex(r, g, b) {\r\n\tif (Array.isArray(r)) {\r\n\t\tb = r[2];\r\n\t\tg = r[1];\r\n\t\tr = r[0];\r\n\t}\r\n\telse if (typeof r === 'string' && r.indexOf(',')) {\r\n\t\t[r, g, b] = r.split(',');\r\n\t}\r\n\t\r\n\tr = parseInt(r).toString(16);\r\n\tg = parseInt(g).toString(16);\r\n\tb = parseInt(b).toString(16);\r\n\t\r\n\tif (r.length === 1) r = '0' + r;\r\n\tif (g.length === 1) g = '0' + g;\r\n\tif (b.length === 1) b = '0' + b;\r\n\t\r\n\treturn \"#\" + r + g + b;\r\n}\r\n\r\n\r\nexport default {\r\n\tHsvToRgb,\r\n\tRgbToHex\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { HuePicker, SketchPicker as ColorPicker } from 'react-color'\r\n\r\nimport helpers from '../../helpers/colorConverter'\r\nimport Log from '../../controller/Log'\r\nimport defaults from '../_defaults/components'\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction LightLevelAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked ? ((device.getOption('defaultValue')) || 100) : 0).catch(({ error }) => Log._('Function (light)', error.message, 'error', true, error.stack));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal > 0);\r\n\tuseEffect(() => setChecked(stateVal > 0), [stateVal]);\r\n\t\r\n\t// only show percentage if device has a switch itself\r\n\tif (device.parent && device.parent.states.power) {\r\n\t\treturn <defaults.action.Action {...props} stateVal={checked} onChange={onChange} />;\r\n\t}\r\n\t\r\n\treturn <defaults.action.SwitchAction {...props} stateVal={checked} onChange={onChange} />\r\n}\r\n\r\nfunction LightColorAction(props) {\r\n\tconst { stateKey, stateVal } = props;\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(stateVal);\r\n\tuseEffect(() => setColorSpace(stateVal), [stateVal]);\r\n\t\r\n\tlet colors, labels = {};\r\n\tif (stateKey === 'rgb' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Red: colors[0], Green: colors[1], Blue: colors[2] };\r\n\t\t\r\n\t}\r\n\telse if (stateKey === 'hsv' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Hue: colors[0], Saturation: colors[1], Brightness: colors[2] };\r\n\t}\r\n\t\r\n\tconst Label = defaults.components.Label;\r\n\tlet label = [];\r\n\tfor (let key in labels) {\r\n\t\tlabel.push(<Label key={key} label={key + ' ' + labels[key]} br={true} />);\r\n\t}\r\n\t\r\n\treturn label;\r\n}\r\n\r\n\r\n/*\r\n * BODY\r\n *\r\n */\r\nfunction LightColorTemperatureBody(props) {\r\n\tconst Level = defaults.body.LevelBody;\r\n\treturn (\r\n\t\t<Level min={2000} max={6500} step={10} {...props} />\r\n\t);\r\n}\r\n\r\nfunction LightHueBody(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tsetHue(Math.round(color.hsl.h));\r\n\t\tdevice.setDeviceState(stateKey, Math.round(color.hsl.h)).catch(({ error }) => Log._('Function (light)', error.message, 'error', true, error.stack));\r\n\t}\r\n\t\r\n\tconst [hue, setHue] = useState(stateVal);\r\n\tuseEffect(() => setHue(stateVal), [stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\tconst color = helpers.RgbToHex(helpers.HsvToRgb(hue));\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<HuePicker\r\n\t\tcolor={color}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\nfunction LightColorBody(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tcolor = color[stateKey];\r\n\t\t\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tcolor = [color.r, color.g, color.b].join(',');\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tcolor = [color.h, color.s, color.v].join(',');\r\n\t\t}\r\n\t\t\r\n\t\tdevice.setDeviceState(stateKey, color).catch(({ error }) => Log._('Function (light)', error.message, 'error', true, error.stack));\r\n\t};\r\n\t\r\n\tlet initialColor = stateVal || '#ffffff';\r\n\t\r\n\t// RGB\r\n\tif (stateKey === 'rgb') {\r\n\t\tinitialColor = helpers.RgbToHex(initialColor);\r\n\t}\r\n\t// HSV\r\n\telse if (stateKey === 'hsv') {\r\n\t\tinitialColor = helpers.RgbToHex(helpers.HsvToRgb(initialColor));\r\n\t}\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(initialColor);\r\n\tuseEffect(() => {\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(stateVal));\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(helpers.HsvToRgb(stateVal)));\r\n\t\t}\r\n\t\t// HEX\r\n\t\telse if (stateKey === 'hex') {\r\n\t\t\tsetColorSpace(stateVal);\r\n\t\t}\r\n\t}, [stateKey, stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<ColorPicker\r\n\t\tcolor={colorSpace}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tbody: {\r\n\t\tLightColorTemperatureBody,\r\n\t\tLightColorBody,\r\n\t\tLightHueBody\r\n\t},\r\n\taction: {\r\n\t\tLightLevelAction,\r\n\t\tLightColorAction\r\n\t}\r\n}","import Log from './Log'\r\nimport { de } from 'date-fns/locale'\r\nexport const locales = { de }\r\n\r\n\r\n/**\r\n * Internationalization\r\n * Based on https://raw.githubusercontent.com/ioBroker/adapter-react/master/src/i18n.js.\r\n * Copyright 2018-2019 bluefox <dogafox@gmaiLog.com>\r\n *\r\n * MIT License\r\n *\r\n *\r\n */\r\nexport default class i18n {\r\n\r\n\t/*\r\n\t * holds the translations\r\n\t */\r\n\tstatic translations = {};\r\n\r\n\t/*\r\n\t * default language\r\n\t */\r\n\tstatic language = (navigator.language || navigator.userLanguage || 'en-EN');\r\n\r\n\t/**\r\n\t * Override default language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setLanguage(language) {\r\n\t\tif (language) {\r\n\t\t\ti18n.language = language;\r\n\t\t\tLog._('i18n', 'Set language to ' + language + '.', 'debug');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a translation for language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @param\t{Object}\ttranslation\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setTranslation(language, translation) {\r\n\t\t\r\n\t\t// load translation file\r\n\t\tif (typeof translation === 'function') {\r\n\t\t\tlet file;\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tfile = translation();\r\n\t\t\t\ttranslation = file.default;\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.warn('Could not load translation file!');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// set translation\r\n\t\tif (language && translation) {\r\n\t\t\ti18n.translations[language] = { ...i18n.translations[language] || {}, ...translation };\r\n\t\t\tLog._('i18n', 'Set translations for language ' + language + '.', 'debug');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getLanguage(isoLong = false) {\r\n\t\treturn i18n.language.substr(0, isoLong ? 5 : 2);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\t{String|Object}\t\tword\r\n\t * @param\t{Object}\t\t\t[options={}]\r\n\t * @param\t{Boolean}\t\t\t[options.ucFirst=false]\r\n\t * @param\t{Object}\t\t\t[placeholders={}]\r\n\t * @param\t{String}\t\t\t[language=i18n.language]\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic t(word = '', options = {}, placeholders = {}, language = i18n.getLanguage()) {\r\n\t\t\r\n\t\t// if object is provided, it might be translated already\r\n\t\tif (typeof word === 'object') {\r\n\t\t\t\r\n\t\t\tif (word[language] !== undefined) {\r\n\t\t\t\tword = word[language];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet unknown = Object.values(word);\r\n\t\t\t\tword = unknown.length > 0 ? unknown[0] : '(unknown word to translate)';\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// if array, then multiple words are given\r\n\t\telse if (Array.isArray(word)) {\r\n\t\t\tword = word.map(w => i18n.t(w, options, placeholders, language)).join('');\r\n\t\t}\r\n\t\t\r\n\t\t// otherwise, treat as string\r\n\t\telse if (word) {\r\n\t\t\tword = word.toString();\r\n\t\t\tif (i18n.translations[language]) {\r\n\t\t\t\t\r\n\t\t\t\t// check if word is concatenated\r\n\t\t\t\tif (word.indexOf('#') > -1) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet parts = word.split('#');\r\n\t\t\t\t\twhile (parts.length > 0 && !i18n.translations[language][parts.join('#')]) {\r\n\t\t\t\t\t\tparts.shift();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tword = parts.join('#');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (i18n.translations[language][word]) {\r\n\t\t\t\t\tword = i18n.translations[language][word];\r\n\t\t\t\t}\r\n\t\t\t\telse if (i18n.translations[language][word.toLowerCase()]) {\r\n\t\t\t\t\tword = i18n.translations[language][word.toLowerCase()];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tLog._('i18n', 'Word \"' + word + '\" not found in language ' + language + '!', 'debug');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tLog._('i18n', 'Language ' + language + ' not loaded for word ' + word + '!', 'error');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// replace placeholders\r\n\t\tfor (let key in placeholders) {\r\n\t\t\tword = word.replace(RegExp('%' + key + '%', 'g'), placeholders[key]);\r\n\t\t}\r\n\t\t\r\n\t\t// options\r\n\t\tif (options.ucFirst) {\r\n\t\t\tword = word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}\r\n\t\t\r\n\t\treturn word;\r\n\t}\r\n}\r\n","var map = {\n\t\"./\": 50,\n\t\"./_defaults\": 122,\n\t\"./_defaults/\": 122,\n\t\"./_defaults/components\": 87,\n\t\"./_defaults/components.js\": 87,\n\t\"./_defaults/defaults\": 164,\n\t\"./_defaults/defaults.js\": 164,\n\t\"./_defaults/i18n/de\": 332,\n\t\"./_defaults/i18n/de.js\": 332,\n\t\"./_defaults/i18n/en\": 333,\n\t\"./_defaults/i18n/en.js\": 333,\n\t\"./_defaults/index\": 122,\n\t\"./_defaults/index.js\": 122,\n\t\"./blind\": 165,\n\t\"./blind/\": 165,\n\t\"./blind/blind\": 166,\n\t\"./blind/blind-manufacturers\": 195,\n\t\"./blind/blind-manufacturers.js\": 195,\n\t\"./blind/blind.js\": 166,\n\t\"./blind/components\": 253,\n\t\"./blind/components.js\": 253,\n\t\"./blind/i18n/de\": 335,\n\t\"./blind/i18n/de.js\": 335,\n\t\"./blind/i18n/en\": 336,\n\t\"./blind/i18n/en.js\": 336,\n\t\"./blind/index\": 165,\n\t\"./blind/index.js\": 165,\n\t\"./door\": 167,\n\t\"./door/\": 167,\n\t\"./door/door\": 168,\n\t\"./door/door.js\": 168,\n\t\"./door/i18n/de\": 337,\n\t\"./door/i18n/de.js\": 337,\n\t\"./door/i18n/en\": 338,\n\t\"./door/i18n/en.js\": 338,\n\t\"./door/index\": 167,\n\t\"./door/index.js\": 167,\n\t\"./heating\": 169,\n\t\"./heating/\": 169,\n\t\"./heating/components\": 254,\n\t\"./heating/components.js\": 254,\n\t\"./heating/heating\": 170,\n\t\"./heating/heating.js\": 170,\n\t\"./heating/i18n/de\": 339,\n\t\"./heating/i18n/de.js\": 339,\n\t\"./heating/i18n/en\": 340,\n\t\"./heating/i18n/en.js\": 340,\n\t\"./heating/index\": 169,\n\t\"./heating/index.js\": 169,\n\t\"./index\": 50,\n\t\"./index.js\": 50,\n\t\"./light\": 171,\n\t\"./light/\": 171,\n\t\"./light/components\": 290,\n\t\"./light/components.js\": 290,\n\t\"./light/i18n/de\": 374,\n\t\"./light/i18n/de.js\": 374,\n\t\"./light/i18n/en\": 375,\n\t\"./light/i18n/en.js\": 375,\n\t\"./light/index\": 171,\n\t\"./light/index.js\": 171,\n\t\"./light/light\": 172,\n\t\"./light/light.js\": 172,\n\t\"./location\": 185,\n\t\"./location/\": 185,\n\t\"./location/i18n/de\": 376,\n\t\"./location/i18n/de.js\": 376,\n\t\"./location/i18n/en\": 377,\n\t\"./location/i18n/en.js\": 377,\n\t\"./location/index\": 185,\n\t\"./location/index.js\": 185,\n\t\"./location/location\": 186,\n\t\"./location/location.js\": 186,\n\t\"./user\": 187,\n\t\"./user/\": 187,\n\t\"./user/i18n/de\": 378,\n\t\"./user/i18n/de.js\": 378,\n\t\"./user/i18n/en\": 379,\n\t\"./user/i18n/en.js\": 379,\n\t\"./user/index\": 187,\n\t\"./user/index.js\": 187,\n\t\"./user/user\": 188,\n\t\"./user/user.js\": 188,\n\t\"./window\": 189,\n\t\"./window/\": 189,\n\t\"./window/i18n/de\": 380,\n\t\"./window/i18n/de.js\": 380,\n\t\"./window/i18n/en\": 381,\n\t\"./window/i18n/en.js\": 381,\n\t\"./window/index\": 189,\n\t\"./window/index.js\": 189,\n\t\"./window/window\": 190,\n\t\"./window/window.js\": 190\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 331;","export default {\r\n\t// States\r\n\t\"on\": \"an\",\r\n\t\"off\": \"aus\",\r\n}","export default {\r\n}","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Aktivitt\",\r\n\t\"blind#level\": \"Behanghhe\",\r\n\t\"blind#level2\": \"Lamellenposition\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"in Bewegung\",\r\n\t\"blind#activity#false\": \"keine\",\r\n}","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Activity\",\r\n\t\"blind#level\": \"Level\",\r\n\t\"blind#level2\": \"Lamella\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"moving\",\r\n\t\"blind#activity#false\": \"none\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Klingel\",\r\n\t\"door#lock\": \"Schlo\",\r\n\t\"door#open\": \"Tr\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"offen\",\r\n\t\"door#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Bell\",\r\n\t\"door#lock\": \"Lock\",\r\n\t\"door#open\": \"Door\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"open\",\r\n\t\"door#open#false\": \"closed\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Luftfeuchtigkeit\",\r\n\t\"heating#setTemperature\": \"eingestellte Temperatur\",\r\n\t\"heating#temperature\": \"Temperatur\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Humidity\",\r\n\t\"heating#setTemperature\": \"Set Temperature\",\r\n\t\"heating#temperature\": \"Temperature\",\r\n}","import EventEmitter from 'events'\r\nimport io from 'socket.io-client'\r\n\r\n\r\n/**\r\n * Class for Socket.io conncetion handling.\r\n *\r\n * @description This is based on an implementation @GermanBluefox (https://github.com/GermanBluefox), see https://github.com/ioBroker/adapter-react/blob/master/src/Connection.js\r\n *\t\t\t\tOnly required functions are taken from source class. Major change is that all events are emitted, so proper error handling is possible in the App.\r\n *\r\n *\r\n * @param\t{String}\t\turl\r\n * @param\t{Object}\t\toptions\r\n * @return\t{Socket}\r\n * @see https://github.com/ioBroker/ioBroker.socketio/blob/master/lib/socket.js https://github.com/ioBroker/ioBroker.js-controller/blob/master/lib/adapter.js\r\n *\r\n */\r\nexport default class Socket extends EventEmitter {\r\n\t\r\n\tconstructor(url = null, options = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// socket connection\r\n\t\tthis.socket = io(url, { timeout: 10000, ...options, query: 'ws=true' });\r\n\t\tthis.statesSubscribes = {}; // subscribed states\r\n\t\t\r\n\t\t/*\r\n\t\t * API events\r\n\t\t * @see https://github.com/socketio/socket.io-client/blob/HEAD/docs/API.md#socket\r\n\t\t *\r\n\t\t */\r\n\t\t// connect\r\n\t\tthis.socket.on('connect', () => this.emit('connect'));\r\n\t\t\r\n\t\t// reconnect: Fired upon a successful reconnection.\r\n\t\tthis.socket.on('reconnect', attempts => this.emit('reconnect', attempts));\r\n\t\t\r\n\t\t// reconnect_error: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_error', error => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_error', 'message': (error && error.message) || 'Reconnection error' }));\r\n\t\t\r\n\t\t// reconnect_failed: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_failed', () => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_failed', 'message': 'Reconnection failed' }));\r\n\t\t\r\n\t\t// discconect\r\n\t\tthis.socket.on('disconnect', reason => this.emit('disconnect', reason));\r\n\t\t\r\n\t\t// error\r\n\t\tthis.socket.on('error', error => this.emit('error', { 'type': 'error', 'event': 'error', 'message': (error && error.message) || 'Unknown error' }));\r\n\t\t\r\n\t\t// connect_failed\r\n\t\tthis.socket.on('connect_failed', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': (error && error.message) || 'Connection error' }));\r\n\t\t\r\n\t\t// connect_error\r\n\t\tthis.socket.on('connect_error', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': (error && error.message) || 'Connection error' }));\r\n\t\t\r\n\t\t// connect_timeout\r\n\t\tthis.socket.on('connect_timeout', () => this.emit('error', { 'type': 'connect', 'event': 'connect_timeout', 'message': 'Connect ran into timeout' }));\r\n\t\t\r\n\t\t/*\r\n\t\t * ioBroker events\r\n\t\t *\r\n\t\t */\r\n\t\tthis.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\t_getPatternFromId(id) {\r\n\t\tlet pattern = id\r\n\t\t\t.replace(/\\./g, '\\\\.')\r\n\t\t\t.replace(/\\*/g, '.*')\r\n\t\t\t.replace(/\\(/g, '\\\\(')\r\n\t\t\t.replace(/\\)/g, '\\\\)')\r\n\t\t\t.replace(/\\+/g, '\\\\+')\r\n\t\t\t.replace(/\\[/g, '\\\\[');\r\n\r\n\t\tif (pattern.indexOf('*') === -1) {\r\n\t\t\tpattern += '$';\r\n\t\t}\r\n\t\t\r\n\t\treturn pattern;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tdisconnect() {\r\n\t\treturn this.socket.close();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeStates(ids, cb) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.subscribeState(id, cb));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to a state by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeState(id, cb) {\r\n\t\t\r\n\t\tif (this.socket.connected) {\r\n\t\t\tif (!this.statesSubscribes[id]) {\r\n\t\t\t\tlet reg = this._getPatternFromId(id);\r\n\t\t\t\tthis.statesSubscribes[id] = { reg: new RegExp(reg), cbs: [cb] };\r\n\t\t\t\tthis.socket.emit('subscribe', id);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb); \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to a state by setting a callback.\r\n\t *\r\n\t */\r\n\t/*subscribeLog(cb) {\r\n\t\t\r\n\t\tif (this.socket.connected) {\r\n\t\t\tthis.socket.emit('requireLog', true);\r\n\t\t\tthis.socket.on('log', cb);\r\n\t\t}\r\n\t}*/\r\n\t\r\n\t/**\r\n\t * Fires pre-registered callbacks (via subscribeState) upon state change.\r\n\t *\r\n\t */\r\n\tstateChange(id, state) {\r\n\t\t\r\n\t\tid = id ? id.replace(/[\\s'\"]/g, '_') : '';\r\n\t\tfor (const task in this.statesSubscribes) {\r\n\t\t\tif (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\r\n\t\t\t\tthis.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetAdapterInstances(adapter, cb) {\r\n\t\t\r\n\t\tif (typeof adapter === 'function') {\r\n\t\t\tcb = adapter;\r\n\t\t\tadapter = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.getObjectView('system', 'instance', { 'startkey': 'system.adapter.' + (adapter ? adapter + '.' : ''), 'endkey': 'system.adapter.' + (adapter ? adapter + '.999' : 'zzz') }, cb);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object.\r\n\t *\r\n\t */\r\n\tgetObject(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObject(id, (err, obj) => err ? reject(err) : resolve(obj)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObject', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetObjectView(design, search, params = null, cb = null) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObjectView(design, search, params, (err, res) => err || !res || !res.rows ? reject(err || new Error('Failed to retrieve enums')) : resolve(res.rows || [])));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObjectView', design, search, params, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a remote ressource.\r\n\t *\r\n\t */\r\n\tgetRemoteResource(url, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getRemoteResource(url, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('httpGet', url, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a state.\r\n\t *\r\n\t */\r\n\tgetState(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getState', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets multiple states at once.\r\n\t *\r\n\t */\r\n\tgetStates(pattern, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStates(pattern, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getStates', pattern, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the state history.\r\n\t *\r\n\t */\r\n\tgetStateHistory(id, options, cb) {\r\n\t\t\r\n\t\tif (typeof options === 'function') {\r\n\t\t\tcb = options;\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStateHistory(id, options, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getHistory', id, options, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a state.\r\n\t *\r\n\t */\r\n\tsetState(id, val, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.setState(id, val, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('setState', id, val, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unsubscribe from multiple states.\r\n\t *\r\n\t */\r\n\tunsubscribeStates(ids) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.unsubscribeState(id));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unsubscribe a state.\r\n\t *\r\n\t */\r\n\tunsubscribeState(id) {\r\n\t\t\r\n\t\tif (this.statesSubscribes[id] && this.socket.connected) {\r\n\t\t\tthis.socket.emit('unsubscribe', id);\r\n\t\t\tdelete this.statesSubscribes[id];\r\n\t\t}\r\n\t}\r\n}\r\n","import Socket from './Socket'\r\n\r\n/**\r\n * Connection\r\n +\r\n *\r\n */\r\nexport default class Connection {\r\n\r\n\t/*\r\n\t * URL\r\n\t */\r\n\tstatic url = window.location.hostname;\r\n\t\r\n\t/*\r\n\t * Connection\r\n\t */\r\n\tstatic connection = null;\r\n\t\r\n\t/**\r\n\t * Connects to the Socket.\r\n\t *\r\n\t * @param\t{String}\turl\r\n\t * @param\t{Array}\t\tlisteners\r\n\t * @return\t{Connection}\r\n\t */\r\n\tstatic connect(url = null, listeners = null) {\r\n\t\t\r\n\t\t// set URL\r\n\t\tif (url) {\r\n\t\t\tConnection.setUrl = url;\r\n\t\t}\r\n\t\t\r\n\t\t// connect\r\n\t\tConnection.connection = new Socket(Connection.url);\r\n\t\t\r\n\t\t// set listeners\r\n\t\tif (listeners) {\r\n\t\t\tConnection.setListeners = listeners;\r\n\t\t}\r\n\t\t\r\n\t\t// return connection\r\n\t\treturn Connection.connection;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the current Connection.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Connection}\tCurrent Connection\r\n\t */\r\n\tstatic get getConnection() {\r\n\t\treturn Connection.connection || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the current URL.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get getUrl() {\r\n\t\treturn Connection.url;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reconnect to the Socket.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get reconnect() {\r\n\t\treturn Connection.connect;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets an event listener.\r\n\t *\r\n\t * @param\t{Object}\t\t\tlistener\r\n\t * @param\t{String}\t\t\tlistener.event\r\n\t * @param\t{Function}\t\t\tlistener.callback\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setListener(listener) {\r\n\t\tConnection.connection.on(listener.event, listener.callback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set event listeners.\r\n\t *\r\n\t * @param\t{Array<Object>}\t\tlisteners\r\n\t * @return \t{Boolean}\r\n\t */\r\n\tstatic set setListeners(listeners = []) {\r\n\t\t\r\n\t\tif (!listeners || !Array.isArray(listeners)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlisteners.forEach(listener => Connection.setListener = listener);\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a new URL (has to be set before calling connect()).\r\n\t *\r\n\t * @param\t{String}\tURL\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setUrl(url) {\r\n\t\tConnection.url = url;\r\n\t}\r\n}\r\n","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Farbtemperatur\",\r\n\t\"light#hex\": \"Farbe (Hex)\",\r\n\t\"light#hsv\": \"Farbraum Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Farbe (Hue)\",\r\n\t\"light#level\": \"Helligkeit\",\r\n\t\"light#power\": \"Licht\",\r\n\t\"light#rgb\": \"Farbraum Rot-Grn-Blau (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"ausgeschaltet\",\r\n}","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Color Temperature\",\r\n\t\"light#hex\": \"Color (Hex)\",\r\n\t\"light#hsv\": \"Colorspace Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Color (Hue)\",\r\n\t\"light#level\": \"Brightness\",\r\n\t\"light#power\": \"Power\",\r\n\t\"light#rgb\": \"Colorspace Red-Green-Blue (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"off\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Anwesenheit\",\r\n\t\"location#users\": \"Benutzer\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"anwesend\",\r\n\t\"location#presence#false\": \"abwesend\",\r\n\t\"location#users#empty\": \"niemand anwesend\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Presence\",\r\n\t\"location#users\": \"Users\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"present\",\r\n\t\"location#presence#false\": \"absent\",\r\n\t\"location#users#empty\": \"nobody present\",\r\n}","export default {\r\n\t\"user#location\": \"Standort\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t\"user#location\": \"Location\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Fenster\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"offen\",\r\n\t\"window#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Window\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"open\",\r\n\t\"window#open#false\": \"closed\",\r\n}","var map = {\n\t\"./de\": 384,\n\t\"./de.js\": 384,\n\t\"./en\": 385,\n\t\"./en.js\": 385\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 383;","export default {\r\n\t\r\n\t/*\r\n\t * BUTTONS\r\n\t */\r\n\t\"save\": \"speichern\",\r\n\t\"cancel\": \"abbrechen\",\r\n\t\"close\": \"schlieen\",\r\n\t\"apply\": \"bernehmen\",\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t/*\r\n\t * LOADING SCREEN\r\n\t */\r\n\t\"Retrieving settings\": \"Einstellungen werden geladen\",\r\n\t\r\n\t/*\r\n\t * STATES\r\n\t */\r\n\t\r\n\t\"user\": \"User\",\r\n\t\"users\": \"Users\",\r\n\t\r\n\t\"door\": \"Tr\",\r\n\t\"window\": \"Fenster\",\r\n\t\r\n\t\"open\": \"offen\",\r\n\t\"closed\": \"geschlossen\",\r\n\t\r\n\t\"turn on\": \"anschalten\",\r\n\t\"power\": \"Gerte Status\",\r\n\t\"trigger\": \"Gerte Status\",\r\n\t\r\n\t\"brightness\": \"Helligkeit\",\r\n\t\"wind\": \"Wind\",\r\n\t\"battery\": \"Batterie\",\r\n\t\r\n\t\"%DateTime\": \"%DateTime Uhr\",\r\n\t\r\n\t/*\r\n\t * HOUSEHOLD\r\n\t */\r\n\t\"running\": \"Gert luft\",\r\n\t\"consumption\": \"Verbrauch\"\r\n}","export default {\r\n}","var map = {\n\t\"./\": 51,\n\t\"./AdapterStatus/AdapterStatus\": 387,\n\t\"./AdapterStatus/AdapterStatus.config\": 273,\n\t\"./AdapterStatus/AdapterStatus.config.js\": 273,\n\t\"./AdapterStatus/AdapterStatus.js\": 387,\n\t\"./AdapterStatus/AdapterStatus.settings\": 274,\n\t\"./AdapterStatus/AdapterStatus.settings.js\": 274,\n\t\"./AdapterStatus/i18n/de\": 388,\n\t\"./AdapterStatus/i18n/de.js\": 388,\n\t\"./AdapterStatus/screenshots/AdapterStatus1.png\": 692,\n\t\"./Chart/Chart\": 389,\n\t\"./Chart/Chart.config\": 276,\n\t\"./Chart/Chart.config.js\": 276,\n\t\"./Chart/Chart.js\": 389,\n\t\"./Chart/Chart.settings\": 277,\n\t\"./Chart/Chart.settings.js\": 277,\n\t\"./Chart/i18n/de\": 390,\n\t\"./Chart/i18n/de.js\": 390,\n\t\"./Chart/screenshots/Chart1.png\": 702,\n\t\"./DateTime/DateTime\": 391,\n\t\"./DateTime/DateTime.config\": 191,\n\t\"./DateTime/DateTime.config.js\": 191,\n\t\"./DateTime/DateTime.js\": 391,\n\t\"./DateTime/DateTime.settings\": 278,\n\t\"./DateTime/DateTime.settings.js\": 278,\n\t\"./DateTime/i18n/de\": 392,\n\t\"./DateTime/i18n/de.js\": 392,\n\t\"./DateTime/screenshots/DateTime1.png\": 703,\n\t\"./Map/Map\": 393,\n\t\"./Map/Map.config\": 192,\n\t\"./Map/Map.config.js\": 192,\n\t\"./Map/Map.js\": 393,\n\t\"./Map/Map.settings\": 279,\n\t\"./Map/Map.settings.js\": 279,\n\t\"./Map/i18n/de\": 394,\n\t\"./Map/i18n/de.js\": 394,\n\t\"./Multimedia/Multimedia\": 395,\n\t\"./Multimedia/Multimedia.config\": 280,\n\t\"./Multimedia/Multimedia.config.js\": 280,\n\t\"./Multimedia/Multimedia.js\": 395,\n\t\"./Multimedia/Multimedia.settings\": 281,\n\t\"./Multimedia/Multimedia.settings.js\": 281,\n\t\"./Multimedia/MultimediaItem\": 196,\n\t\"./Multimedia/MultimediaItem.js\": 196,\n\t\"./Multimedia/i18n/de\": 396,\n\t\"./Multimedia/i18n/de.js\": 396,\n\t\"./StateList/StateList\": 197,\n\t\"./StateList/StateList.config\": 148,\n\t\"./StateList/StateList.config.js\": 148,\n\t\"./StateList/StateList.js\": 197,\n\t\"./StateList/StateList.settings\": 282,\n\t\"./StateList/StateList.settings.js\": 282,\n\t\"./StateList/StateListItem\": 198,\n\t\"./StateList/StateListItem.js\": 198,\n\t\"./StateList/i18n/de\": 398,\n\t\"./StateList/i18n/de.js\": 398,\n\t\"./StateList/screenshots/StateList1.png\": 708,\n\t\"./StateList/screenshots/StateList2.png\": 709,\n\t\"./StateList/screenshots/StateList3.png\": 710,\n\t\"./StateList/screenshots/StateList4.png\": 711,\n\t\"./StateListHorizontal/StateListHorizontal\": 399,\n\t\"./StateListHorizontal/StateListHorizontal.config\": 285,\n\t\"./StateListHorizontal/StateListHorizontal.config.js\": 285,\n\t\"./StateListHorizontal/StateListHorizontal.js\": 399,\n\t\"./StateListHorizontal/StateListHorizontal.settings\": 286,\n\t\"./StateListHorizontal/StateListHorizontal.settings.js\": 286,\n\t\"./StateListHorizontal/i18n/de\": 400,\n\t\"./StateListHorizontal/i18n/de.js\": 400,\n\t\"./StateListHorizontal/screenshots/StateListHorizontal1.png\": 712,\n\t\"./Weather/Weather\": 401,\n\t\"./Weather/Weather.config\": 287,\n\t\"./Weather/Weather.config.js\": 287,\n\t\"./Weather/Weather.js\": 401,\n\t\"./Weather/Weather.settings\": 288,\n\t\"./Weather/Weather.settings.js\": 288,\n\t\"./Weather/i18n/de\": 402,\n\t\"./Weather/i18n/de.js\": 402,\n\t\"./iFrame/i18n/de\": 403,\n\t\"./iFrame/i18n/de.js\": 403,\n\t\"./iFrame/iFrame\": 404,\n\t\"./iFrame/iFrame.config\": 193,\n\t\"./iFrame/iFrame.config.js\": 193,\n\t\"./iFrame/iFrame.js\": 404,\n\t\"./iFrame/iFrame.settings\": 289,\n\t\"./iFrame/iFrame.settings.js\": 289,\n\t\"./iFrame/screenshots/DateTime1.png\": 713,\n\t\"./index\": 51,\n\t\"./index.js\": 51\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 386;","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { format } from 'date-fns'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport List from '@material-ui/core/List'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport StarIcon from '@material-ui/icons/Star'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport Connection from '../../controller/Connection'\r\nimport i18n, { locales } from '../../controller/i18n'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tnoUpdates: {\r\n\t\tfontStyle: 'italic',\r\n\t\ttextAlign: 'right',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.54)'\r\n\t},\r\n\tUpdateAvailable: {\r\n\t\tcolor: '#CCAA00',\r\n\t},\r\n\tUpdatesListItem: {\r\n\t\tbackgroundColor: '#ffd700',\r\n\t\tcolor: '#fff',\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tUpdatesIndicator: {\r\n\t\tright: theme.spacing(3.75),\r\n\t\tbackgroundColor: '#CCAA00',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tcolor: '#fff',\r\n\t\ttextAlign: 'center',\r\n\t\tfontSize: '1rem !important'\r\n\t},\r\n\tStatusIndicator: {\r\n\t\tfontSize: '1.4rem'\r\n\t},\r\n\tloading: {\r\n\t\ttextAlign: 'center',\r\n\t\tmarginTop: '5px'\r\n\t},\r\n\tsmall: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t},\r\n\talive: {\r\n\t\tcolor: '#86d686'\r\n\t},\r\n\tnotAlive: {\r\n\t\tcolor: '#f7e43b'\r\n\t},\r\n\tdisabled: {\r\n\t\tcolor: '#bababa'\r\n\t}\r\n});\r\n\r\n\r\nclass AdapterStatus extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tadapterInformation: [],\r\n\t\t\tadapterAliveStatus: {},\r\n\t\t\tnewUpdates: false,\r\n\t\t\tupdatesJson: '',\r\n\t\t\tlastUpdateCheck: ''\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\tthis.list = this.props.config.list ? (Array.isArray(this.props.config.list) ? this.props.config.list : this.props.config.list.split(',')) : null;\r\n\t\tthis.blacklist = this.props.config.blacklist ? (Array.isArray(this.props.config.blacklist) ? this.props.config.blacklist : this.props.config.blacklist.split(',')) : null;\r\n\t\t\r\n\t\tthis.updateStates = ['admin.0.info.newUpdates', 'admin.0.info.lastUpdateCheck', 'admin.0.info.updatesJson'];\r\n\t\tthis.adapterStates = [];\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// retrieve updates\r\n\t\tif (this.props.config.updates !== false) {\r\n\t\t\t\r\n\t\t\tthis.socket.getStates(this.updateStates, (err, states) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewUpdates: states['admin.0.info.newUpdates'].val,\r\n\t\t\t\t\tlastUpdateCheck: states['admin.0.info.lastUpdateCheck'].val,\r\n\t\t\t\t\tupdatesJson: states['admin.0.info.updatesJson'].val\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// get state updates\r\n\t\t\t\tthis.socket.subscribeStates(this.updateStates, (id, update) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tid = id.substr(id.lastIndexOf('.')+1);\r\n\t\t\t\t\tif (this.state[id] !== update.val) {\r\n\t\t\t\t\t\tthis.setState({ [id]: update.val });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get adapter instances\r\n\t\tthis.socket.getAdapterInstances((err, instances) => {\r\n\t\t\t\r\n\t\t\tif (instances && instances.rows) {\r\n\t\t\t\tlet adapters = [];\r\n\t\t\t\t\r\n\t\t\t\t// states per instance to retrieve\r\n\t\t\t\tinstances.rows.forEach((instance, i) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get alive / connected states\r\n\t\t\t\t\tif ((!this.list || (this.list && this.list.indexOf(instance.value.common.name) > -1)) && (!this.blacklist || (this.blacklist && this.blacklist.indexOf(instance.value.common.name) === -1))) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tadapters.push(instance);\r\n\t\t\t\t\t\tthis.adapterStates = this.adapterStates.concat([\r\n\t\t\t\t\t\t\tinstance.id + '.alive',\r\n\t\t\t\t\t\t\tinstance.id + '.connected',\r\n\t\t\t\t\t\t\tinstance.id.replace('system.adapter.', '') + '.info.connection'\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// sort instances\r\n\t\t\t\tthis.setState({ adapterInformation: adapters.sort((item1, item2) => {\r\n\t\t\t\t\t\tif (item1.id > item2.id) return 1;\r\n\t\t\t\t\t\telse if (item2.id > item1.id) return -1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// retrieve intial states\r\n\t\t\t\tthis.socket.getStates(this.adapterStates, (err, adapterAliveStatus) => {\r\n\t\t\t\t\tthis.setState({ adapterAliveStatus });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get state updates\r\n\t\t\t\t\tthis.socket.subscribeStates(this.adapterStates, (id, aliveStatus) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (aliveStatus && (!this.state.adapterAliveStatus[id] || (aliveStatus.val !== this.state.adapterAliveStatus[id].val))) {\r\n\t\t\t\t\t\t\tthis.setState(prevState => ({ adapterAliveStatus: { ...prevState.adapterAliveStatus, [id]: aliveStatus } }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.socket.unsubscribeStates([ ...this.updateStates, ...this.adapterStates ]);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// adapter updates\r\n\t\tconst updateList = (this.state.updatesJson && JSON.parse(this.state.updatesJson)) || {};\r\n\t\tconst updates = Object.keys(updateList).length\r\n\t\t\r\n\t\t// adapter instances\r\n\t\tlet adapterList = <ListItem key='loading' className={classes.loading}><CircularProgress size={20} /></ListItem>\r\n\t\t\r\n\t\tif (this.state.adapterInformation.length > 0) {\r\n\t\t\t\r\n\t\t\tadapterList = this.state.adapterInformation.map(adapter => {\r\n\t\t\t\tadapter.update = updateList[adapter.value.common.name] || false;\r\n\t\t\t\t\r\n\t\t\t\tconst enabled = adapter.value.common.enabled;\r\n\t\t\t\tconst alive = (this.state.adapterAliveStatus[adapter.id + '.alive'] && this.state.adapterAliveStatus[adapter.id + '.alive'].val) || false;\r\n\t\t\t\tconst connected = (this.state.adapterAliveStatus[adapter.id + '.connected'] && this.state.adapterAliveStatus[adapter.id + '.connected'].val) || false;\r\n\t\t\t\tconst connection = this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'] ? this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'].val : true;\r\n\t\t\t\t\r\n\t\t\t\tconst tooltip = i18n.t('Adapter') + ' ' + (enabled ? (alive && connected && connection ? i18n.t('alive') : i18n.t('not alive')) : i18n.t('disabled'));\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\r\n\t\t\t\t\t<ListItem key={'adapter-' + adapter.id}>\r\n\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t<Avatar alt={adapter.value.common.name} src={adapter.value.common.extIcon} className={classes.small} />\r\n\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={adapter.value.common.title}\r\n\t\t\t\t\t\t\tsecondary={[\r\n\t\t\t\t\t\t\t\t'v' + adapter.value.common.version,\r\n\t\t\t\t\t\t\t\t(adapter.update && adapter.value.common.version !== adapter.update.availableVersion && (<span key={'updates-' + adapter.id}>, <span className={classes.UpdateAvailable}>{i18n.t('Update available') + ' v' + adapter.update.availableVersion}</span></span>)),\r\n\t\t\t\t\t\t\t\t(adapter.value.common.runAsCompactMode && ', ' + i18n.t('Compact Mode') + ' ' + i18n.t('on') + ' (' + i18n.t('Group') + ' ' + adapter.value.common.compactGroup + ')')\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, enabled ? (alive && connected && connection ? classes.alive : classes.notAlive) : classes.disabled)}>\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<span className={enabled ? (alive && connected && connection ? 'mdi mdi-check-circle' : 'mdi mdi-alert') : 'mdi mdi-close'}></span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense>\r\n\t{this.state.newUpdates === false ? (this.state.lastUpdateCheck && \r\n\t<ListItem key=\"updates\" classes={{ root: classes.noUpdates }}>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('last update') + ': ' + format(new Date(this.state.lastUpdateCheck), 'dd.MM.yyyy HH:mm:ss', { locale: locales[i18n.getLanguage()] })}\r\n\t\t\t/>\r\n\t\t\r\n\t</ListItem>)\r\n\t:\r\n\t<ListItem key=\"updates\" classes={{ container: classes.UpdatesListItem }}>\r\n\t\t<ListItemAvatar>\r\n\t\t\t<StarIcon />\r\n\t\t</ListItemAvatar>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('Updates available') + '!'}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, classes.UpdatesIndicator)}>\r\n\t\t\t{updates}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t}\r\n\t\r\n\t{adapterList}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default withStyles(styles)(AdapterStatus);\r\n","\r\nexport default {\r\n\t'disabled': 'deaktiviert',\r\n\t'Update available': 'Aktualisierung verfgbar',\r\n\t'Group': 'Gruppe',\r\n\t'last update': 'letzte Aktualisierung',\r\n\t'Updates available': 'Aktualisierungen verfgbar',\r\n\t'Adapter Status': 'Adapter Status',\r\n\t'Adapter': 'Adapter',\r\n\t'alive': 'luft',\r\n\t'not alive': 'luft nicht',\r\n\t'Compact Mode': 'Compact Mode',\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { Line } from 'react-chartjs-2'\r\n// eslint-disable-next-line\r\nimport chartjs_colorschemes from 'chartjs-plugin-colorschemes'\r\n// eslint-disable-next-line\r\nimport chartjs_zoom from 'chartjs-plugin-zoom'\r\nimport DateFnsUtils from '@date-io/date-fns'\r\n\r\nimport Alert from '@material-ui/lab/Alert'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { MuiPickersUtilsProvider, DateTimePicker } from '@material-ui/pickers'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport Select from '@material-ui/core/Select'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/Event'\r\nimport CalendarTodayIcon from '@material-ui/icons/EventAvailable'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\nimport FastRewindIcon from '@material-ui/icons/FastRewind'\r\n//import DisablePan from '@material-ui/icons/SelectAll'\r\n//import DisableZoom from '@material-ui/icons/LocationDisabled'\r\nimport ResetZoom from '@material-ui/icons/ZoomOutMap'\r\nimport LiveUpdates from '@material-ui/icons/Update'\r\n\r\nimport helpers from '../../helpers/timeConverter'\r\nimport i18n, { locales } from '../../controller/i18n'\r\nimport Log from '../../controller/Log'\r\nimport Devices from '../../controller/Devices'\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tposition: 'absolute',\r\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\terrorMessage: {\r\n\t\tmarginBottom: 5,\r\n\t\tmarginRight: 15,\r\n\t\twidth: '100%'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbarButtons: {\r\n\t\tdisplay: 'initial',\r\n\t\twhiteSpace: 'nowrap'\r\n\t},\r\n\toptions: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\tdatePicker: {\r\n\t\tpadding: '2px 4px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tmargin: 2\r\n\t},\r\n\tinput: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\tselect: {\r\n\t\twidth: 100\r\n\t},\r\n\ticon: {\r\n\t\tmargin: 10,\r\n\t},\r\n\ticonButton: {\r\n\t\tpadding: 10,\r\n\t},\r\n\tdivider: {\r\n\t\tmargin: '15px 0',\r\n\t},\r\n\tdividerVertical: {\r\n\t\theight: 28,\r\n\t\tmargin: 4,\r\n\t},\r\n\tbutton: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff !important',\r\n\t\tmargin: '4px'\r\n\t},\r\n\tbuttonDisabled: {\r\n\t\tbackgroundColor: '#eee',\r\n\t\tmargin: '4px'\r\n\t}\r\n});\r\n\r\n\r\nclass Chart extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t// chart configuration\r\n\t\tthis.chartFilter = this.props.config.chartFilter || {};\r\n\t\tthis.chartConfig = this.props.config.chartConfig || {};\r\n\t\t\r\n\t\tthis.chartConfig.yAxes = this.chartConfig.yAxes || [];\r\n\t\tthis.chartConfig.yAxes.unshift({\r\n\t\t\tid: 'left',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tticks: {\r\n\t\t\t\tcallback: value => (this.chartConfig.yLeftAxisUnitBefore || '') + Number.parseFloat(value).toFixed(1) + (this.chartConfig.yLeftAxisUnitAfter || '')\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// states\r\n\t\tthis.state = {\r\n\t\t\tloading: true,\r\n\t\t\terrors: [],\r\n\t\t\t\r\n\t\t\tdatePicker: false,\r\n\t\t\tselectedTimeRangeValue: (this.chartFilter && this.chartFilter.selectedTimeRangeValue) || 1,\r\n\t\t\tselectedTimeRangeUnit: (this.chartFilter && this.chartFilter.selectedTimeRangeUnit) || 'days',\r\n\t\t\tselectedDateTime: (this.chartFilter && this.chartFilter.selectedDateTime && new Date(this.chartFilter.selectedDateTime)) || new Date(),\r\n\t\t\tdateNow: this.chartFilter && this.chartFilter.selectedDateTime ? false : true,\r\n\t\t\t\r\n\t\t\tchartLabels: [],\r\n\t\t\tchartData: {\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchartPan: true,\r\n\t\t\tchartZoom: true\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.timer = null;\r\n\t\tthis.timeRangeRef = React.createRef();\r\n\t\t\r\n\t\t// chart instance options\r\n\t\tthis.chartRef = React.createRef();\r\n\t\tthis.chartUpdates = {};\r\n\t\tthis.chartAxisOptions = {};\r\n\t\t\r\n\t\tthis.chartPluginOptions = {\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tspanGaps: true,\r\n\t\t\tlegend: {\r\n\t\t\t\tonClick: this.legendClickHandler.bind(this)\r\n\t\t\t},\r\n\t\t\ttooltips: {\r\n\t\t\t\tcallbacks: {\r\n\t\t\t\t\tlabel: (item, data) => data.datasets[item.datasetIndex].label + ': ' + item.value + data.datasets[item.datasetIndex].unit\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tscales: {\r\n\t\t\t\tyAxes: this.chartConfig.yAxes\r\n\t\t\t},\r\n\r\n\t\t\tplugins: {\r\n\t\t\t\tcolorschemes: {\r\n\t\t\t\t\tscheme: 'brewer.SetOne9'\r\n\t\t\t\t},\r\n\t\t\t\tzoom: {\r\n\t\t\t\t\t// Container for pan options\r\n\t\t\t\t\tpan: {\r\n\t\t\t\t\t\t// Boolean to enable panning\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Panning directions\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Container for zoom options\r\n\t\t\t\t\tzoom: {\r\n\t\t\t\t\t\t// Boolean to enable zooming\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Zooming directions.\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// request initial history data\r\n\t\tDevices.forEachDevice(this.props.devices, (device, index, options) => {\r\n\t\t\t\r\n\t\t\tdevice.options = {\r\n\t\t\t\t...device.options,\r\n\t\t\t\tChart: {\r\n\t\t\t\t\tlabel: device.name + ' (' + i18n.t(options.primaryStateKey || device.primaryStateKey) + ')'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// add listeners for newly requested data\r\n\t\t\tdevice.listen('historyChange', this._historyChange);\r\n\t\t\t\r\n\t\t\t// request device history\r\n\t\t\tdevice.requestDeviceStateHistory(options.primaryStateKey || device.primaryStateKey, true, this._chartAxisOptions())\r\n\t\t\t\t.catch(({ error }) => Log._('Modules (Chart)', error.message, 'error', true, error.stack));\r\n\t\t\t\r\n\t\t\t// add listeners for data updates\r\n\t\t\tif (this.props.config.liveUpdates !== null && this.props.config.liveUpdates !== false && this.state.dateNow) {\r\n\t\t\t\tdevice.listen(this._stateChange);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tDevices.forEachDevice(this.props.devices, (device, index, options) => {\r\n\t\t\t\r\n\t\t\tdevice.unlisten(this._stateChange);\r\n\t\t});\r\n\t\t\r\n\t\tclearTimeout(this.timer);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.selectedTimeRangeValue &&\r\n\t\t\t\t(prevState.selectedDateTime !== this.state.selectedDateTime || prevState.selectedTimeRangeValue !== this.state.selectedTimeRangeValue || prevState.selectedTimeRangeUnit !== this.state.selectedTimeRangeUnit)\r\n\t\t\t) {\r\n\t\t\t\r\n\t\t\t// request updated history data\r\n\t\t\tthis.setState({ loading: true, errors: [] });\r\n\t\t\t\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tDevices.forEachDevice(this.props.devices, (device, index, options) => {\r\n\t\t\t\t\tdevice.requestDeviceStateHistory(options.primaryStateKey || device.primaryStateKey, false, this._chartAxisOptions())\r\n\t\t\t\t\t\t.catch(({ error }) => Log._('Modules (Chart)', error.message, 'error', true, error.stack));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_historyChange = (stateKey, history, device) => {\r\n\t\tthis._addChartGraph(device.options.Chart.label, device, history, this._getAxis(this.chartAxisOptions.start, this.chartAxisOptions.end));\r\n\t\tthis.setState({ loading: false });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_stateChange = (stateKey, val, device) => {\r\n\t\tthis._updateChartGraph(device, val, this._getAxis(this.chartAxisOptions.end, new Date()));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_chartAxisOptions() {\r\n\t\t\r\n\t\tconst end = this.state.selectedDateTime.getTime();\r\n\t\tconst unit = this.state.selectedTimeRangeUnit;\r\n\t\t\r\n\t\tlet timeRange = this.state.selectedTimeRangeValue;\r\n\t\tlet step = 1;\r\n\t\tlet axisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\r\n\t\tswitch(unit) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'seconds':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'minutes':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\ttimeRange = timeRange*60;\r\n\t\t\t\t//step = step;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'hours':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60;\r\n\t\t\t\tstep = step*60; // minute-by-minute step\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'days':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60*24;\r\n\t\t\t\tstep = step*60*60; // hourly step\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'weeks':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*7;\r\n\t\t\t\tstep = step*60*60*24; // daily step\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'months':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*31;\r\n\t\t\t\tstep = step*60*60*24; // daily step\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'years':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*365;\r\n\t\t\t\tstep = step*60*60*24*31; // monthly step\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\tthis.chartAxisOptions = {\r\n\t\t\t'axisTimeFormat': axisTimeFormat,\r\n\t\t\t\r\n\t\t\t'start': end-timeRange*1000,\r\n\t\t\t'end': end,\r\n\t\t\t'step': step*1000,\r\n\t\t\t'aggregate': 'average',\r\n\t\t\t'ignoreNull': true\r\n\t\t};\r\n\t\t\r\n\t\treturn this.chartAxisOptions;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_getAxis(start, end) {\r\n\t\t\r\n\t\tlet axis = {};\r\n\t\t\r\n\t\tfor (let time = start; time <= end; time += this.chartAxisOptions.step) {\r\n\t\t\taxis[time] = helpers.secondsToDateTime(time/1000, this.chartAxisOptions.axisTimeFormat);\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\taxisTimeFormat: this.chartAxisOptions.axisTimeFormat,\r\n\t\t\taxis\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_groupChartData(chartData, axis) {\r\n\t\t\r\n\t\tlet prevMarker;\r\n\t\tlet data = [];\r\n\t\t\r\n\t\tlet markers = Object.keys(axis);\r\n\t\tmarkers.forEach((marker, i) => {\r\n\t\t\tprevMarker = markers[(i-1 > 0 ? i-1 : 0)];\r\n\t\t\t\r\n\t\t\tfor (let index in chartData) {\r\n\t\t\t\tlet entry = chartData[index];\r\n\t\t\t\tentry.val = parseFloat(entry.val);\r\n\t\t\t\t\r\n\t\t\t\t// \r\n\t\t\t\tif (!entry.ts || entry.val === null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// before range, continue\r\n\t\t\t\tif (prevMarker > entry.ts) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// in range\r\n\t\t\t\telse if (prevMarker < entry.ts && entry.ts <= marker) {\r\n\t\t\t\t\tdata[i] = !data[i] ? [ entry.val ] : [ ...data[i], entry.val ]; // parseFloat((data[i] ? ((data[i]+entry.val)/2) : entry.val).toFixed(2));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// beyond range, so next marker\r\n\t\t\t\telse if (entry.ts > marker) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif (!data[i]) {\r\n\t\t\t\t// \r\n\t\t\t}\r\n\t\t\telse if (data[i].length === 1) {\r\n\t\t\t\tdata[i] = data[i][0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdata[i] = data[i].reduce((a,b) => a + b, 0) / data[i].length;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_updateChartGraph(device, value, chartOptions) {\r\n\t\t\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.chartUpdates[chartIndex] = this.chartUpdates[chartIndex] || [];\r\n\t\tthis.chartUpdates[chartIndex].push({\r\n\t\t\t'ts': value.ts,\r\n\t\t\t'val': value.val\r\n\t\t});\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this._groupChartData(this.chartUpdates[chartIndex], chartOptions.axis);\r\n\t\t\r\n\t\t//console.log(value);\r\n\t\t//console.log(chartOptions, chartOptions.axis, data);\r\n\t\t\r\n\t\t// update chart\r\n\t\tthis.chartRef.current.chartInstance.data.labels = [ ...this.state.chartData.labels, ...Object.values(chartOptions.axis) ];\r\n\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = [ ...this.state.chartData.datasets[chartIndex].data, ...data ];\r\n\t\tthis.chartRef.current.chartInstance.update();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_addChartGraph(label, device, history, chartOptions) {\r\n\t\t\r\n\t\t// only add chart if data is given\r\n\t\tif (!history || !history.length) {\r\n\t\t\tlet error = i18n.t('No history data given for %s').replace('%s', label) + '!';\r\n\t\t\tthis.setState(prevStates => ({ errors: [ ...prevStates.errors, error ] }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this._groupChartData(history, chartOptions.axis);\r\n\t\t\r\n\t\t// update chart\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === label);\r\n\t\tif (chartIndex > -1) {\r\n\t\t\tthis.chartRef.current.chartInstance.data.labels = Object.values(chartOptions.axis);\r\n\t\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = data;\r\n\t\t\tthis.chartRef.current.chartInstance.update();\r\n\t\t}\r\n\t\t\r\n\t\t// index chart\r\n\t\telse {\r\n\t\t\tthis.setState(prevStates => ({ chartLabels: [ ...prevStates.chartLabels, label ] }));\r\n\t\t\t\r\n\t\t\t// chart dataset\r\n\t\t\tlet dataSet = {\r\n\t\t\t\tlabel: label,\r\n\t\t\t\tunit: device.states[device.primaryStateKey].state.value.unit || '',\r\n\t\t\t\tfill: false,\r\n\t\t\t\t...device.options.graphConfig || {},\r\n\t\t\t\tdata: data\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// add data to chart\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\taxisTimeFormat: chartOptions.axisTimeFormat,\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tlabels: Object.values(chartOptions.axis),\r\n\t\t\t\t\tdatasets: [ ...prevStates.chartData.datasets, dataSet ],\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tlegendClickHandler(e, legendItem) {\r\n\t\t\r\n\t\tlet index = legendItem.datasetIndex;\r\n\t\tlet ci = this.chartRef.current.chartInstance;\r\n\t\tlet meta = ci.getDatasetMeta(index);\r\n\r\n\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\t\tci.update();\r\n\t\tci.resetZoom();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tdisablePan() {\r\n\t\tlet pan = this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled = (pan === false);\r\n\t\tthis.setState({ chartPan: (pan === false) });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tdisableZoom() {\r\n\t\tlet zoom = this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled = (zoom === false);\r\n\t\tthis.setState({ chartZoom: (zoom === false) });\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes, config } = this.props;\r\n\t\treturn (\r\n\r\n<div>\r\n\t<div className={classes.options}>\r\n\t\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('Period shown in Chart')}>\r\n\t\t\t\t<HistoryIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<InputBase\r\n\t\t\t\tinputRef={this.timeRangeRef}\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tvalue={this.state.selectedTimeRangeValue}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeValue: event.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<Select\r\n\t\t\t\tvalue={this.state.selectedTimeRangeUnit}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeUnit: event.target.value })}\r\n\t\t\t\tdisplayEmpty\r\n\t\t\t\tdisableUnderline\r\n\t\t\t\tclassName={classes.select}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<MenuItem value=\"seconds\">{i18n.t('Seconds')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"minutes\">{i18n.t('Minutes')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"hours\">{i18n.t('Hours')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"days\">{i18n.t('Days')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"weeks\">{i18n.t('Weeks')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"months\">{i18n.t('Months')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"years\">{i18n.t('Years')}</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t\r\n\t\t\t{/*\r\n\t\t\t<IconButton className={classes.iconButton} onClick={() => this.timeRangeRef.current.focus()}>\r\n\t\t\t\t<CalendarIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t*/}\r\n\t\t</Paper>\r\n\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('End date')}>\r\n\t\t\t\t<FastRewindIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<MuiPickersUtilsProvider locale={locales[i18n.getLanguage()]} utils={DateFnsUtils}>\r\n\t\t\t\t<DateTimePicker\r\n\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\tvalue={this.state.selectedDateTime}\r\n\t\t\t\t\tonChange={selectedDateTime => this.setState({ selectedDateTime: selectedDateTime, dateNow: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\topen={this.state.datePicker}\r\n\t\t\t\t\tonOpen={() => this.setState({ datePicker: true })}\r\n\t\t\t\t\tonClose={() => this.setState({ datePicker: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\tampm={false}\r\n\t\t\t\t\tformat='dd.MM.yyyy HH:mm'\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tdisableUnderline: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\r\n\t\t\t<Tooltip title={i18n.t('Select end date')}>\r\n\t\t\t\t<IconButton color=\"primary\" className={classes.iconButton} onClick={() => this.setState({ datePicker: true })}>\r\n\t\t\t\t\t<CalendarIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Divider className={classes.dividerVertical} orientation=\"vertical\" />\r\n\t\t\t<Tooltip title={i18n.t('Select today as end date')}>\r\n\t\t\t\t<IconButton className={classes.iconButton} onClick={() => this.setState({ selectedDateTime: new Date(), dateNow: true })}>\r\n\t\t\t\t\t<CalendarTodayIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t</Paper>\r\n\t\t\r\n\t\t<Tooltip title={i18n.t('Live updates are ' + (this.props.config.liveUpdates !== null && this.props.config.liveUpdates !== false && this.state.dateNow ? 'on' : 'off'))} placement=\"top\" style={{ display: 'flex' }}>\r\n\t\t\t<span>\r\n\t\t\t\t<Button disabled={true} className={clsx(classes.datePicker, this.props.config.liveUpdates !== null && this.props.config.liveUpdates !== false && this.state.dateNow ? classes.button : classes.buttonDisabled)}>\r\n\t\t\t\t\t<LiveUpdates />\r\n\t\t\t\t</Button>\r\n\t\t\t</span>\r\n\t\t</Tooltip>\r\n\t\t\r\n\t</div>\r\n\t<Divider className={classes.divider} />\r\n\t\r\n\t<div className={classes.toolbar}>\r\n\t\t<div className={classes.errorMessage}>\r\n\t\t\t{this.state.errors.length > 0 && <Alert severity=\"error\">{this.state.errors.map((error, i) => [ error, React.createElement('br', { key: 'br-error-' + i }) ])}</Alert>}\r\n\t\t</div>\r\n\t\t\r\n\t\t<ButtonGroup className={classes.toolbarButtons} color=\"primary\">\r\n\t\t{/*\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartPan ? 'contained' : 'outlined'} onClick={this.disablePan.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartPan ? 'Disable panning' : 'Enable panning')}>\r\n\t\t\t\t\t<DisablePan />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartZoom ? 'contained' : 'outlined'} onClick={this.disableZoom.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartZoom ? 'Disable Zoom' : 'Enable Zoom')}>\r\n\t\t\t\t\t<DisableZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t*/}\r\n\t\t\t<Button disableElevation={true} variant=\"contained\" onClick={() => this.chartRef.current.chartInstance.resetZoom()}>\r\n\t\t\t\t<Tooltip title={i18n.t('Reset Zoom')}>\r\n\t\t\t\t\t<ResetZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t</ButtonGroup>\r\n\t</div>\r\n\t\r\n\t<div className={'chart-container'} style={{ position: 'relative', height: config.chartHeight || '500px' }}>\r\n\t\t{this.state.loading && <div className={classes.loading}>\r\n\t\t\t<CircularProgress />\r\n\t\t</div>}\r\n\t\t\r\n\t\t<Line\r\n\t\t\tref={this.chartRef}\r\n\t\t\tdata={this.state.chartData}\r\n\t\t\toptions={this.chartPluginOptions}\r\n\t\t\t/>\r\n\t\t\t\r\n\t</div>\r\n</div>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Chart);\r\n","export default {\r\n}","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { format } from 'date-fns'\r\nimport { getSunrise, getSunset } from 'sunrise-sunset-js'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\nimport { joinConfig } from '../../helpers/utils'\r\nimport i18n, { locales } from '../../controller/i18n'\r\nimport Settings from '../../controller/Settings'\r\n\r\n\r\nexport default function DateTime(props) {\r\n\tlet config = joinConfig(props.config, require('./DateTime.config.js').default);\r\n\tconfig.refresh = config.format.indexOf('s') > -1 ? 1000 : (config.format.indexOf('m') > -1 ? 60*1000 : 60*60*1000);\r\n\t\r\n\tconst refTimer = useRef();\r\n\tconst [DateTime, setDateTime] = useState(format(new Date(), config.format, { locale: locales[i18n.getLanguage()] }));\r\n\tconst [city, setCity] = useState('');\r\n\tconst [sunrise, setSunrise] = useState('');\r\n\tconst [sunset, setSunset] = useState('');\r\n\t\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tfunction refresh() {\r\n\t\t\t\r\n\t\t\t// set current time\r\n\t\t\tsetDateTime(format(new Date(), config.format, { locale: locales[i18n.getLanguage()] }));\r\n\t\t\r\n\t\t\t// set sunrise / sunset\r\n\t\t\tif (Settings.getSetting('iobroker').latitude && Settings.getSetting('iobroker').longitude) {\r\n\t\t\t\tsetSunrise(getSunrise(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t\t\tsetSunset(getSunset(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// constantly refresh\r\n\t\t\trefTimer.current = setTimeout(refresh, config.refresh);\r\n\t\t}\r\n\t\t\r\n\t\t// refresh current time\r\n\t\tclearTimeout(refTimer.current);\r\n\t\trefTimer.current = setTimeout(refresh, 1*1000); // first refresh some seconds after render\r\n\t\t\r\n\t\tif (Settings.getSetting('iobroker').city) {\r\n\t\t\tsetCity(Settings.getSetting('iobroker').city);\r\n\t\t}\r\n\t\t\r\n\t\t// unmount\r\n\t\treturn () => clearTimeout(refTimer.current);\r\n\t\t\r\n\t}, [config.format, config.refresh]);\r\n\t\r\n\treturn (\r\n\r\n<div style={config.style}>\r\n\t{i18n.t('%DateTime').replace(/%DateTime/, DateTime)}\r\n\t\r\n\t{config.sun !== false && <div style={{ margin: '5px 0', fontSize: '1.2rem' }}>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-city-variant-outline\"></span> {city ? city : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-up\"></span> {sunrise ? format(sunrise, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-down\"></span> {sunset ? format(sunset, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t</div>\r\n\t}\r\n\t\r\n</div>\r\n\r\n\t);\r\n}\r\n","export default {\r\n\t'Time': 'Zeit',\r\n}","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport L from 'leaflet'\r\nimport { Map as LeafletMap, TileLayer, Marker as LeafletMarker, Tooltip as LeafletTooltip } from 'react-leaflet'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Box from '@material-ui/core/Box'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Devices from '../../controller/Devices'\r\nimport i18n from '../../controller/i18n'\r\nimport Settings from '../../controller/Settings'\r\nimport Log from '../../controller/Log'\r\nimport moduleConfig from './Map.config'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tmap: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapOverview: {\r\n\t\tcolor: '#666',\r\n\t\tposition: 'absolute',\r\n\t\tleft: 0,\r\n\t\tbottom: 0,\r\n\t\twidth: '100%',\r\n\t\theight: '60px',\r\n\t\tzIndex: 999,\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\r\n\t\t'& > *': {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t},\r\n\tmapIconContainer: {\r\n\t},\r\n\tmapIconParent: {\r\n\t\tbackgroundColor: '#fff',\r\n\t\tboxShadow: '0 0 0 8px rgba(255, 255, 255, 0.3)',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapIcon: {\r\n\t\tfontSize: '2rem',\r\n\t\tcolor: theme.palette.primary.main,\r\n\t\ttransform: 'translate3d(4px, -4px,0)', /* for fontSize: '2.3rem' -> 'translate3d(2px, -8px,0)', */\r\n\t\tdisplay: 'block',\r\n\t\t\r\n\t\t'&:after': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tpadding: '50% 0%'\r\n\t\t}\r\n\t},\r\n\tmapTooltip: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Map(props) {\r\n\tconst { config, devices } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst settingsLatitude = Settings.getSetting('iobroker').latitude;\r\n\tconst settingsLongitude = Settings.getSetting('iobroker').longitude;\r\n\t\r\n\tconst [markers, setMarkers] = useState({});\r\n\tconst [zoom,] = useState(config.defaultZoom || 10);\r\n\tconst [position,setPosition] = useState(config.defaultPosition ? (Array.isArray(config.defaultPosition) ? config.defaultPosition : config.defaultPosition.split(',')) : [ settingsLatitude || 53.5505, settingsLongitude || 9.9925 ]);\r\n\tuseEffect(() => {\r\n\t\t!position && setPosition([ settingsLatitude, settingsLongitude ]);\r\n\t}, [ position, settingsLatitude, settingsLongitude ]);\r\n\t\r\n\t// map instance\r\n\tconst map = useRef();\r\n\tconst memoizedMapInitialised = useCallback(() => {map.current = this}, []);\r\n\t\r\n\t// Marker click in overview\r\n\tconst memoizedHandleClick = useCallback(flyTo => map.current.flyTo(flyTo.split(',')), []);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (stateKey, state, device) => {\r\n\t\t\r\n\t\tif (stateKey === 'position') {\r\n\t\t\t\r\n\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\tif (!prevMarkers[device.id] || prevMarkers[device.id].position !== state.val) {\r\n\t\t\t\t\tdevice.options.position = state.val;\r\n\t\t\t\t\treturn { ...prevMarkers, [device.id]: device };\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn prevMarkers;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t// get gps position coordinates\r\n\tuseEffect(() => {\r\n\t\tDevices.forEachDevice(devices, (device, index, options) => {\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange);\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('position').catch(err => {\r\n\t\t\t\tLog._('Modules (Map)', err.message, 'error', true, err.stack)\r\n\t\t\t\t\r\n\t\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\t\tif (!prevMarkers[device.id]) {\r\n\t\t\t\t\t\treturn { ...prevMarkers, [device.id]: null };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn prevMarkers;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => Devices.forEachDevice(devices, (device, index, options) => {device.unlisten(stateChange)});\r\n\t\t\r\n\t}, [devices]);\r\n\t\r\n\t// add markers\r\n\tlet mapMarkers = [], mapOverview = [];\r\n\tif (devices.length > 0 && devices.length === Object.keys(markers).length) {\r\n\t\t\r\n\t\tfor (let key in markers) {\r\n\t\t\tlet device = markers[key];\r\n\t\t\tif (device !== null) {\r\n\t\t\t\tlet marker = <Marker key={'marker-' + device.id} position={device.options.position || ''} device={device} config={config} />\r\n\t\t\t\tmapMarkers.push(marker);\r\n\t\t\t\t\r\n\t\t\t\tlet item = null;\r\n\t\t\t\tif (device.attributes.avatar) {\r\n\t\t\t\t\titem = <Avatar key={'overview-' + device.id} alt={device.name} src={device.attributes.avatar} onClick={() => memoizedHandleClick(device.options.position)} />\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet state = device.getDeviceState();\r\n\t\t\t\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\t\r\n\t\t\t\t\t//console.log(state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\t//console.log(styles);\r\n\t\t\t\t\t\r\n\t\t\t\t\titem = <Avatar style={styles} key={'overview-' + device.id} alt={device.name} onClick={() => memoizedHandleClick(device.options.position)}><span className={clsx('mdi mdi-' + icon)}></span></Avatar>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmapOverview.push(<Tooltip key={'tooltip-' + device.id} title={device.name} aria-label={device.name} arrow>{item}</Tooltip>);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Box className={classes.mapOverview}>\r\n\t\t<Typography>{i18n.t('Jump to')}:</Typography>\r\n\t\t{mapOverview}\r\n\t</Box>\r\n\t<LeafletMap useFlyTo={true} center={position} zoom={zoom} className={classes.map} whenReady={memoizedMapInitialised}>\r\n\t\t<TileLayer\r\n\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\turl='https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n\t\t\t/>\r\n\t\t\r\n\t\t{mapMarkers}\r\n\t</LeafletMap>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nfunction Marker(props) {\r\n\tconst { position, device, config } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tlet markerIcon = null, offset = 40;\r\n\t//Log._('Modules (Map)', 'Marker for ' + device.function + ' ' + device.name + ' added to map.');\r\n\t\r\n\t// Marker with avatar / picture\r\n\tif (device.attributes && device.attributes.avatar && device.attributes.avatar.substr(0, 11) === 'data:image/') {\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<img src=\"' + device.attributes.avatar + '\" class=\"' + classes.mapIconParent + '\" />',\r\n\t\t\ticonSize: [ 64, 64 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker with Icon\r\n\telse {\r\n\t\toffset = 30;\r\n\t\tlet state = device.getDeviceState();\r\n\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\r\n\t\t//console.log(styles); \r\n\t\tconst useStyles = makeStyles({root: styles}, {name:'testi'});\r\n\t\t//console.log(useStyles.root); \r\n\t\t\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<div class=\"' + clsx(classes.mapIconParent) + '\"><span class=\"' + clsx(classes.mapIcon, 'mdi mdi-' + icon) + '\"></span></div>',\r\n\t\t\ticonSize: [ 40, 40 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker MouseOver / MouseOut (bring tooltip to front if markers overlay)\r\n\tconst memoizedHandleMouseEvent = useCallback(function() {this.closeTooltip().openTooltip()}, [],);\r\n\r\n\treturn (\r\n\r\n<LeafletMarker riseOnHover={true} position={Array.isArray(position) ? position : position.split(',')} icon={markerIcon} onMouseOver={memoizedHandleMouseEvent}>\r\n\t<LeafletTooltip className={classes.mapTooltip} direction={config.tooltipDirection || 'bottom'} permanent={config.tooltipPermanent || true} offset={[0,offset]}>\r\n\t\t{device.name}\r\n\t</LeafletTooltip>\r\n</LeafletMarker>\r\n\r\n\t);\r\n}\r\n","export default {\r\n\t'Jump to': 'springen zu',\r\n}","import React from 'react'\r\n\r\nimport MultimediaItem from './MultimediaItem'\r\n\r\n\r\nexport default function Multimedia(props) {\r\n\tconst { devices, settings } = props;\r\n\treturn devices.map((device, i) => <MultimediaItem key={'MultimediaItem-' + device.id} {...props} index={i} noHeader={i === 0 && settings.icon === null && settings.title === null} device={device} />)\r\n}\r\n","export default {\r\n}","import React, { useState } from 'react'\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport Switch from '@material-ui/core/Switch'\r\n\r\nimport Field from './Field'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tFormControl: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tInputLabel: {\r\n\t\twidth: '133%'\r\n\t},\r\n\tSwitch: {\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\tSwitchSmall: {\r\n\t\tmarginTop: '2px'\r\n\t},\r\n\tSwitchInline: {\r\n\t\tmarginLeft: '5px'\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputSwitch(props) {\r\n\tconst { id, label, val, size, disabled, onChange } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst [checked, setChecked] = useState(val ? val : false);\r\n\tconst handleSwitchChange = event => {\r\n\t\tlet userInput = (event && event.target && event.target.checked);\r\n\t\t\r\n\t\tsetChecked(userInput ? userInput : false);\r\n\t\tonChange && onChange(props, userInput ? userInput : false);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<FormControl\r\n\t\t\t\tkey={'FormControl-' + id}\r\n\t\t\t\tclasses={{ root: classes.FormControl }}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<InputLabel classes={{ root: classes.InputLabel }} shrink={true}>{i18n.t(label)}</InputLabel>\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tclasses={{ root: size === 'small' ? classes.SwitchSmall : classes.Switch }}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tonChange={handleSwitchChange}\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</FormControl>\r\n\t\t</Field>\r\n\r\n\t)\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputSwitchInline(props) {\r\n\tconst { label, val, size, disabled, onChange } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst [checked, setChecked] = useState(val || false);\r\n\tconst handleSwitchChange = event => {\r\n\t\tlet userInput = (event && event.target && event.target.checked) || false;\r\n\t\t\r\n\t\tsetChecked(userInput);\r\n\t\tonChange && onChange(props, userInput);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<FormControlLabel\r\n\t\t\t\tclasses={{ root: classes.SwitchInline }}\r\n\t\t\t\tlabel={i18n.t(label)}\r\n\t\t\t\tcontrol={<Switch\r\n\t\t\t\t\tclasses={{ root: size === 'small' ? classes.SwitchSmall : classes.Switch }}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tonChange={handleSwitchChange}\r\n\t\t\t\t\tsize={size} />}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t</Field>\r\n\r\n\t)\r\n}","export default {\r\n}","import React from 'react'\r\n\r\nimport StateList from '../StateList/StateList'\r\n\r\n\r\nexport default function StateListHorizontal(props) {\r\n\tprops.config = props.config || {}\r\n\tprops.config.horizontal = true;\r\n\t\r\n\treturn <StateList {...props} />\r\n}\r\n","export default {\r\n}","import React, { useState, useEffect } from 'react'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Connection from '../../controller/Connection'\r\nimport i18n from '../../controller/i18n'\r\nimport Log from '../../controller/Log'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\twidth: 100,\r\n\t\theight: 160,\r\n\t\tpadding: 5,\r\n\t\ttextAlign: 'center',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Weather(props) {\r\n\tconst { settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [data,setData] = useState(null);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tConnection.getConnection.getRemoteResource(settings.url).then(\r\n\t\t\tresponse => {\r\n\t\t\t\t\r\n\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\tsetData(JSON.parse(response.body));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terr => Log._('Modules (Weather)', err.message, 'error', true, err.stack)\r\n\t\t);\r\n\t\t\r\n\t}, [settings.url]);\r\n\t\r\n\tlet weatherForecast = [];\r\n\t//console.log(data);\r\n\t\r\n\tif (!data) {\r\n\t\treturn null;\r\n\t}\r\n\telse {\r\n\t\tfor (let day in data.day) {\r\n\t\t\tlet forecast = data.day[day];\r\n\t\t\tforecast.title = day === 1 ? i18n.t('today') : (day === 2 ? i18n.t('tomorrow') : forecast.name);\r\n\t\t\t\r\n\t\t\tconst dailyForecast = (\r\n\r\n<Grid key={'day-' + day} item>\r\n\t<Paper className={classes.paper}>\r\n\t\t<Typography variant=\"body1\">\r\n\t\t\t{forecast.title}\r\n\t\t</Typography>\r\n\t\t<Typography variant=\"caption\">\r\n\t\t\t{forecast.date}\r\n\t\t</Typography>\r\n\r\n\r\n\t</Paper>\r\n</Grid>\r\n\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tweatherForecast.push(dailyForecast);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container justify=\"space-between\" spacing={1}>\r\n\t{weatherForecast}\r\n\t\r\n</Grid>\r\n\r\n\t);\r\n}\r\n","export default {\r\n\t'tomorrow': 'Morgen',\r\n\t'Weather': 'Wetter',\r\n}","export default {\r\n\t'Time': 'Zeit',\r\n}","import React from 'react'\r\n\r\nimport { joinConfig } from '../../helpers/utils'\r\n\r\n\r\nexport default function DateTime(props) {\r\n\tlet config = joinConfig(props.config, require('./iFrame.config.js').default);\r\n\t\r\n\tif (!config.url) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tconfig.url = config.url.indexOf('http://') === -1 && config.url.indexOf('https://') === -1 ? 'http://' + config.url : config.url;\r\n\t\r\n\treturn (\r\n\t\t<iframe style={{ border: 0 }} width=\"100%\" height={config.height || '100%'} src={config.url} title={props.title} />\r\n\t);\r\n}\r\n","export default {\r\n\t'Devices List': 'Gerteliste',\r\n\t'Name': 'Name',\r\n\t'Function': 'Gewerk',\r\n\t'States': 'States',\r\n\t'Options': 'Optionen',\r\n\t'Attributes': 'Attribute',\r\n\t\r\n\t'add new device': 'Gert hinzufgen',\r\n\t'add new state': 'State hinzufgen',\r\n\t\r\n\t'No input given': 'Bitte etwas eingeben',\r\n\t'Wrong JSON format': 'Falsches JSON Format',\r\n\t'Type in a state key / identifier': 'State Bezeichnung eingeben',\r\n\t'State key already used': 'State bereits in Benutzung',\r\n\t\r\n\t'Device Configuration': 'Gertekonfiguration',\r\n\t'Delete Device': 'Gert lschen',\r\n\t'General': 'Allgemein',\r\n\t'Device': 'Gert',\r\n\t'Displayed Name': 'Anzeigename',\r\n}","import React from 'react'\r\n\r\nimport FormLabel from '@material-ui/core/InputLabel'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tLabel: {\r\n\t\tbackgroundColor: '#fafafa',\r\n\t\tpadding: '0 6px',\r\n\t\tmarginLeft: '-6px',\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Label({ id, label, required, error }) {\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<FormLabel\r\n\t\t\tclasses={{ root: classes.Label }}\r\n\t\t\trequired={required}\r\n\t\t\tshrink\r\n\t\t\thtmlFor={id}\r\n\t\t\terror={error}\r\n\t\t\tcolor=\"primary\"\r\n\t\t\tvariant=\"outlined\"\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{label}\r\n\t\t</FormLabel>\r\n\t);\r\n}","import React, { useState } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Radio from '@material-ui/core/Radio'\r\nimport RadioGroup from '@material-ui/core/RadioGroup'\r\n\r\nimport Label from './Label'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tRadio: {\r\n\t\tmarginLeft: '2px',\r\n\t},\r\n\tRadioGroupFormControl: {\r\n\t\theight: '54px',\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tborder: '1px solid rgba(0, 0, 0, 0.23)',\r\n\t\twidth: 'calc(100% - 10px)',\r\n\t\tborderRadius: '3px',\r\n\t},\r\n\tRadioGroup: {\r\n\t\theight: '100%',\r\n\t},\r\n\tRadioLabel: {\r\n\t\tfontFamily: '-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\" !important',\r\n\t\tmargin: 0,\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputRadioGroup(props) {\r\n\tconst { onChange, inputs, label, required, val } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [value,setValue] = useState(val);\r\n\t\r\n\treturn (\r\n\t\t<FormControl className={classes.RadioGroupFormControl}>\r\n\t\t\t{label && <Label required={required} label={label} />}\r\n\t\t\t<RadioGroup\r\n\t\t\t\tclassName={classes.RadioGroup}\r\n\t\t\t\trow\r\n\t\t\t\taria-label={label}\r\n\t\t\t\tname={label}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={e => {\r\n\t\t\t\t\tsetValue(e.target.value);\r\n\t\t\t\t\tonChange && onChange(props, e.target.value);\r\n\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{inputs.map(input => <InputRadio key={input.label} {...input} />)}\r\n\t\t\t</RadioGroup>\r\n\t\t</FormControl>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputRadio({ label, value, className }) {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<FormControlLabel\r\n\t\t\tclasses={{ root: classes.RadioLabel, label: clsx(classes.RadioLabel, className) }}\r\n\t\t\tvalue={value}\r\n\t\t\tcontrol={\r\n\t\t\t\t<Radio classes={{ root: classes.Radio }} />\r\n\t\t\t}\r\n\t\t\tlabel={label} />\r\n\t);\r\n}\r\n","import { sort } from '../helpers/utils'\r\nimport Connection from './Connection'\r\nimport Adapters from '../config/adapters'\r\nimport Device from './Device'\r\nimport Log from './Log'\r\nimport i18n from './i18n'\r\nimport { v5 as uuid } from 'uuid'\r\nconst _copy = require('rfdc')();\r\n\r\n\r\n/**\r\n * Devices\r\n *\r\n *\r\n */\r\nexport default class Devices {\r\n\r\n\t/*\r\n\t * holds the raw data\r\n\t */\r\n\tstatic rawDevices = {};\r\n\t\r\n\t/*\r\n\t * holds the devices\r\n\t */\r\n\tstatic Devices = {};\r\n\t\r\n\t/**\r\n\t * Set devices\r\n\t *\r\n\t * @param\t{Object}\tdevices\r\n\t * @return\t{Array<Promises>}\r\n\t */\r\n\tstatic setDevices(deviceList) {\r\n\t\t\r\n\t\tlet devices = {};\r\n\t\tlet states = [];\r\n\t\t\r\n\t\tlet processedDevices = 0, addedDevices = 0;\r\n\t\tfor (let deviceId in deviceList) {\r\n\t\t\tprocessedDevices++;\r\n\t\t\t\r\n\t\t\t// skip\r\n\t\t\tif (deviceList[deviceId].attributes && deviceList[deviceId].attributes.ignore === true) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// correct options\r\n\t\t\tdeviceList[deviceId].id = deviceId;\r\n\t\t\tdeviceList[deviceId].options = { ...deviceList[deviceId].options, ...deviceList[deviceId].jarvis }\r\n\t\t\tdelete deviceList[deviceId].jarvis;\r\n\t\t\t\r\n\t\t\t// get device and its current state values\r\n\t\t\ttry {\r\n\t\t\t\tdevices[deviceId] = new Device(deviceList[deviceId]);\r\n\t\t\t\tstates = [ ...states, ...devices[deviceId].requestDeviceStates(true) ];\r\n\t\t\t\taddedDevices++;\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tLog._('Devices', err.message, 'warn');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// remember raw device list\r\n\t\tDevices.rawDevices = _copy(deviceList);\r\n\t\t\r\n\t\t// remember devices\r\n\t\tDevices.Devices = devices;\r\n\t\t\r\n\t\t// \r\n\t\treturn new Promise(resolve => {\r\n\t\t\tPromise.allSettled(states).then(res => {\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tdevices: devices,\r\n\t\t\t\t\tstates: res,\r\n\t\t\t\t\tprocessedDevices: processedDevices,\r\n\t\t\t\t\taddedDevices: addedDevices\r\n\t\t\t\t});\r\n\t\t\t}).catch(() => {});\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get devices\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tObject\r\n\t */\r\n\tstatic getDevices(options = {}) {\r\n\t\t\r\n\t\tif (typeof options === 'boolean') {\r\n\t\t\toptions = { raw: options }\r\n\t\t}\r\n\t\t\r\n\t\tlet devices = options.raw ? Devices.rawDevices : Devices.Devices;\r\n\t\tdevices = options.copy ? _copy(devices) : devices;\r\n\t\t\r\n\t\tif (options.sort) {\r\n\t\t\tdevices = sort(devices, 'name');\r\n\t\t}\r\n\t\t\r\n\t\treturn devices;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tstatic importDevices(requestedAdapters = []) {\r\n\t\tconst socket = Connection.getConnection;\r\n\t\t\r\n\t\tlet gotAdapters = [];\r\n\t\t\r\n\t\trequestedAdapters = Array.isArray(requestedAdapters) ? requestedAdapters : [requestedAdapters];\r\n\t\trequestedAdapters.forEach(requestedAdapter => {\r\n\t\t\t\r\n\t\t\tgotAdapters.push(new Promise((resolve, reject) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet adapter = Adapters[requestedAdapter];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// get objects (either device, channel or state; depends on adapter structure)\r\n\t\t\t\t\t\tsocket.getObjectView('system', adapter.deviceObjectType || 'device', { startkey: adapter.namespace + '.0', endkey: adapter.namespace + '.99' }).then(result => {\r\n\t\t\t\t\t\t\tDevices.parseDevices(result).then(devices => resolve(devices));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tlet errorMessage = i18n.t('Could not load any adapter devices, channels or states.');\r\n\t\t\t\t\t\t\tLog._('Devices', errorMessage + '!', 'error', true, err.stack);\r\n\t\t\t\t\t\t\treject(new Error(errorMessage));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tlet errorMessage = i18n.t('Adapter structure not defined for adapter %adapter').replace(/%adapter/g, requestedAdapter);\r\n\t\t\t\t\tLog._('Devices', errorMessage + '!', 'error', true, err.stack);\r\n\t\t\t\t\treject(new Error(errorMessage));\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t});\r\n\t\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tPromise.allSettled(gotAdapters).then(result => {\r\n\t\t\t\t\r\n\t\t\t\tlet devices = [];\r\n\t\t\t\tresult.forEach(res => {devices = devices.concat(res.value)});\r\n\t\t\t\tresolve(devices);\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tstatic importEnums(type = 'functions', enums = []) {\r\n\t\tconst socket = Connection.getConnection;\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet promises = [];\r\n\t\t\t\r\n\t\t\tsocket.getObjectView('system', 'enum')\r\n\t\t\t\t.then(enums => {\r\n\t\t\t\t\tenums.forEach(en => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (en.id.indexOf('enum.functions.control_center') === -1 && en.id.indexOf('enum.' + type) > -1 && en.value && en.value.common && en.value.common.members && Array.isArray(en.value.common.members) && en.value.common.members.length > 0) {\r\n\t\t\t\t\t\t\tlet states = en.value.common.members.map(state => ({ id: state })); // convert structure\r\n\t\t\t\t\t\t\tpromises.push(Devices.parseDevices(states, { 'function': en.id.indexOf('enum.functions.') > -1 ? en.id.replace('enum.functions.', '') : null }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tPromise.allSettled(promises).then(devices => resolve(devices));\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tlet errorMessage = i18n.t('Enums could not be retrieved');\r\n\t\t\t\t\tLog._('Devices', errorMessage + '!', 'error', true, err.stack);\r\n\t\t\t\t\treject(new Error(errorMessage));\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tstatic parseDevices(states, options = {}) {\r\n\t\tconst socket = Connection.getConnection;\r\n\t\t\r\n\t\tlet devices = [];\r\n\t\tfor (let parse of states) {\r\n\t\t\tlet state = parse.id;\r\n\t\t\tlet namespace = state.substr(0, state.indexOf('.'));\r\n\t\t\tlet adapter = Adapters[namespace];\r\n\t\t\t\r\n\t\t\t// verify device by pre-defined pattern\r\n\t\t\tif (adapter.devicePattern && RegExp(adapter.default + '\\\\.\\\\d\\\\.' + adapter.devicePattern).test(state) === false) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// get and verify device information\r\n\t\t\tdevices.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\r\n\t\t\t\t// get device structure\r\n\t\t\t\t//socket.getObjectView('system', 'state', { startkey: state, endkey: state + '.\\u9999' }).then(result => {\r\n\t\t\t\tsocket.getStates(state + '.*').then(result => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// convert result to object\r\n\t\t\t\t\tlet deviceStructure = {\r\n\t\t\t\t\t\t'root': state,\r\n\t\t\t\t\t\t'states': Object.keys(result),\r\n\t\t\t\t\t\t'values': result\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// parse device structure and thus retrieve function and states\r\n\t\t\t\t\tadapter.parse(deviceStructure, options).then(device => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice = {\r\n\t\t\t\t\t\t\t'id': device.name ? device.name.toLowerCase().replace(/ /g, '') + '_' + uuid(state, '4eaf6392-6a70-4802-b343-5ff1a1673f39').substr(0, 5) : uuid(state, '4eaf6392-6a70-4802-b343-5ff1a1673f39'),\r\n\t\t\t\t\t\t\t'name': 'unknown device (state ' + state + ')',\r\n\t\t\t\t\t\t\t'function': options.function || 'unknown',\r\n\t\t\t\t\t\t\t'states': {},\r\n\t\t\t\t\t\t\t'options': {},\r\n\t\t\t\t\t\t\t...device\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice.imported = true;\r\n\t\t\t\t\t\tdevice.attributes = {\r\n\t\t\t\t\t\t\tmanufacturer: {\r\n\t\t\t\t\t\t\t\tname: adapter.default,\r\n\t\t\t\t\t\t\t\tnamespace: namespace\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tresolve(device);\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tlet errorMessage = i18n.t('Could not retrieve state %state').replace('%state', state);\r\n\t\t\t\t\tLog._('Devices', errorMessage + '!', 'error', true, err.stack);\r\n\t\t\t\t\treject(new Error(errorMessage));\r\n\t\t\t\t});\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\treturn Promise.allSettled(devices);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tstatic forEachDevice(list, callback) {\r\n\t\t\r\n\t\treturn list.map((item, index) => {\r\n\t\t\t\r\n\t\t\t// defaults\r\n\t\t\titem.secondaryStatesKeys = item.secondaryStatesKeys || [];\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tlet device = Devices.Devices[item.deviceId] || item || {};\r\n\t\t\tdevice.id = device.id || (device.name && device.name.toLowerCase().replace(/ /g, ''));\r\n\t\t\t\r\n\t\t\treturn callback && callback(device, index, item);\r\n\t\t});\r\n\t}\r\n}\r\n","export { default } from './config.dev'\r\n\r\nexport const DEFAULTS = {\r\n\t'MODULE': 'StateList',\r\n\t\r\n\t'NODE_LAYOUT': 'jarvis.0.layout',\r\n\t'NODE_SETTINGS': 'jarvis.0.settings',\r\n\t'NODE_DEVICES': 'jarvis.0.devices',\r\n\t'NODE_NOTIFICATIONS': 'jarvis.0.notifications',\r\n}\r\n","/**\r\n * Capitalize first letter of a word.\r\n *\r\n */\r\nexport default function ucFirst(str) {\r\n\tif (!str) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n/**\r\n * Move a key in an object up or down (\"sort\")\r\n *\r\n */\r\nexport function moveKeyInObject(obj, key, action) {\r\n\t\r\n\t// sort array\r\n\tlet sorted = moveKeyInArray(Object.keys(obj), key, action);\r\n\t\r\n\t// build new object\r\n\tlet next = {}\r\n\tsorted.map(key => next[key] = obj[key]);\r\n\treturn next;\r\n}\r\n\r\n/**\r\n * Move a key in an object up or down (\"sort\")\r\n *\r\n */\r\nexport function moveKeyInArray(arr, keyOrIndex, action) {\r\n\t\r\n\tlet index = typeof keyOrIndex === 'string' ? arr.indexOf(keyOrIndex) : keyOrIndex;\r\n\tlet element = arr[index];\r\n\t\r\n\t// move up\r\n\tif (action === 'up' && index-1 >= 0) {\r\n\t  arr.splice(index-1, 0, element);\r\n\t  arr.splice(index+1, 1);\r\n\t}\r\n\t\r\n\t// move down\r\n\telse if (action === 'down' && index+1 < arr.length) {\r\n\t  arr.splice(index+2, 0, element);\r\n\t  arr.splice(index, 1);\r\n\t}\r\n\t\r\n\treturn arr;\r\n}\r\n\r\n/**\r\n * Sort array or object by specific key\r\n *\r\n */\r\nexport function sort(arrayOrObject, key) {\r\n\treturn Array.isArray(arrayOrObject) ? sortArray(arrayOrObject, key) : sortObject(arrayOrObject, key);\r\n}\r\n\r\n/**\r\n * Sort array by specific key\r\n *\r\n */\r\nexport function sortArray(arr, key) {\r\n\t\r\n\tarr = arr.slice(0);\r\n\tarr.sort((a, b) => {\r\n\t\tlet x = a[key].toLowerCase();\r\n\t\tlet y = b[key].toLowerCase();\r\n\t\treturn x < y ? -1 : x > y ? 1 : 0;\r\n\t});\r\n\t\r\n\treturn arr;\r\n}\r\n\r\n/**\r\n * Sort object by specific key\r\n *\r\n */\r\nexport function sortObject(obj, key) {\r\n\t\r\n\treturn Object\r\n\t\t.entries(obj)\r\n\t\t.sort((a, b) => {\r\n\t\t\tif(a[1][key] < b[1][key]) { return -1; }\r\n\t\t\tif(a[1][key] > b[1][key]) { return 1; }\r\n\t\t\treturn 0;\r\n\t\t})\r\n\t\t.reduce((_sortedObj, [k,v]) => ({\r\n\t\t\t..._sortedObj, \r\n\t\t\t[k]: v\r\n\t\t}), {});\r\n}\r\n\r\n/**\r\n * \r\n *\r\n */\r\nexport function joinConfig(UserConfig, AdapterConfig) {\r\n\t\r\n\tlet config = {}\r\n\tAdapterConfig.forEach(param => {\r\n\t\tconfig[param.parameter] = UserConfig[param.parameter] || param.val;\r\n\t\t\r\n\t\tif (param.json === true && config[param.parameter] && typeof config[param.parameter] === 'string') {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tconfig[param.parameter] = JSON.parse(config[param.parameter]);\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn config;\r\n}\r\n","import i18n from '../controller/i18n'\r\n\r\n\r\nexport const Functions = {\r\n\tdefaults: {\r\n\t\t'en': 'Default settings',\r\n\t\t'de': 'Standard-Einstellungen',\r\n\t},\r\n\t\r\n\tblind: {\r\n\t\t'en': 'Shutters / Blinds',\r\n\t\t'de': 'Rollos / Jalousien',\r\n\t},\r\n\tdoor: {\r\n\t\t'en': 'Doors',\r\n\t\t'de': 'Tren',\r\n\t},\r\n\theating: {\r\n\t\t'en': 'Heating',\r\n\t\t'de': 'Heizung',\r\n\t},\r\n\tlight: {\r\n\t\t'en': 'lights',\r\n\t\t'de': 'Lichter',\r\n\t},\r\n\tlocation: {\r\n\t\t'en': 'locations',\r\n\t\t'de': 'Orte',\r\n\t},\r\n\tuser: {\r\n\t\t'en': 'users',\r\n\t\t'de': 'Benutzer',\r\n\t},\r\n\twindow: {\r\n\t\t'en': 'windows',\r\n\t\t'de': 'Fenster',\r\n\t}\r\n}\r\n\r\n\r\nlet funConfigurations = {}\r\nlet funcComponents = {\r\n\tbody: {},\r\n\taction: {}\r\n}\r\n\r\nObject.keys(Functions).forEach(func => {\r\n\tfunc = func === 'defaults' ? '_' + func : func;\r\n\t\r\n\t// load function language file\r\n\ttry {\r\n\t\ti18n.setTranslation(i18n.getLanguage(), () => require('./' + func + '/i18n/' + i18n.getLanguage()));\r\n\t}\r\n\tcatch(err) {\r\n\t\t//console.error(err);\r\n\t}\r\n\t\r\n\t// load function itself\r\n\ttry {\r\n\t\tfunConfigurations[func] = require('./' + func).default;\r\n\t\t\r\n\t\tlet elements = require('./' + func + '/components').default\r\n\t\tfuncComponents.body = { ...funcComponents.body, ...elements.body }\r\n\t\tfuncComponents.action = { ...funcComponents.action, ...elements.action }\r\n\t}\r\n\tcatch(err) {\r\n\t\t//console.error(err);\r\n\t}\r\n});\r\n\r\nexport default funConfigurations;\r\nexport const components = funcComponents;\r\n","import i18n from '../controller/i18n'\r\n\r\n\r\nexport const Modules = {\r\n\t'AdapterStatus': {\r\n\t\t'de': 'Zeigt alle installierten Adapter mit ihren Instanzen und dem jeweiligen Status (active & alive, active & not connected, inactive) an.'\r\n\t},\r\n\t'Chart': {\r\n\t\t'de': 'Stellt historische Werte (z.B. aus ioBroker.history) grafisch als Chart mittels Chart.js dar.'\r\n\t},\r\n\t'DateTime': {\r\n\t\t'de': 'Das Modul dient der Anzeige des aktuellen Datums und Zeit.'\r\n\t},\r\n\t'iFrame': {\r\n\t\t'de': 'Zeigt eine externe URL an.'\r\n\t},\r\n\t'Map': {\r\n\t\t'de': 'Zeigt eine Karte von OpenStreetMap.'\r\n\t},\r\n\t/*'Multimedia': {\r\n\t\t'de': 'Zeigt ein Multimedia-Player an (z. B. Spotify)'\r\n\t},*/\r\n\t'StateList': {\r\n\t\t'de': 'Zeigt eine Liste von States an.'\r\n\t},\r\n\t'StateListHorizontal': {\r\n\t\t'de': 'Zeigt eine Liste von States horizontal an'\r\n\t},\r\n\t/*'Weather': {\r\n\t\t'de': 'Zeigt die Wetter-Vorschau an.'\r\n\t}*/\r\n}\r\n\r\n\r\nlet _ = {}\r\nlet Settings = {}\r\nlet Configurations = {}\r\n\r\nObject.keys(Modules).forEach(module => {\r\n\t\r\n\t// load module language file\r\n\ttry {\r\n\t\ti18n.setTranslation(i18n.getLanguage(), () => require('./' + module + '/i18n/' + i18n.getLanguage()));\r\n\t}\r\n\tcatch(err) {\r\n\t\t//console.error(err);\r\n\t}\r\n\t\r\n\t// load module settings\r\n\tSettings[module] = require('./' + module + '/' + module + '.settings').default;\r\n\t\r\n\t// load module configurations\r\n\tConfigurations[module] = require('./' + module + '/' + module + '.config').default;\r\n\t\r\n\t// load module itself\r\n\t_[module] = require('./' + module + '/' + module).default;\r\n});\r\n\r\nexport const ModuleSettings = Settings;\r\nexport const ModuleConfigurations = Configurations;\r\nexport default _;\r\n","import Connection from '../../controller/Connection'\r\nimport i18n from '../../controller/i18n'\r\n\r\nexport default 'Alias Devices'\r\nexport const namespace = 'alias'\r\n\r\nexport const deviceObjectType = 'channel';\r\n\r\n\r\nexport function parse(deviceStructure, options) {\r\n\tconst socket = Connection.getConnection;\r\n\t\r\n\treturn new Promise(resolve => {\r\n\t\t\r\n\t\tsocket.getObject(deviceStructure.root).then(obj => {\r\n\t\t\t\r\n\t\t\tlet device = {\r\n\t\t\t\t'name': typeof obj.common.name === 'object' ? i18n.t(obj.common.name) : obj.common.name,\r\n\t\t\t\t'function': 'other',\r\n\t\t\t\t'states': {}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// convert alias structure to jarvis\r\n\t\t\tlet states = {}\r\n\t\t\tlet role = obj.common.role;\r\n\t\t\t\r\n\t\t\tif (['light', 'rgbSingle', 'ct', 'hue', 'dimmer'].indexOf(role) > -1) { // convert light // 'rgb' not supported\r\n\t\t\t\tdevice.function = 'light';\r\n\t\t\t\tstates = {\r\n\t\t\t\t\t'power': '.ON',\r\n\t\t\t\t\t'level': [ '.DIMMER', '.SET' ],\r\n\t\t\t\t\t'colorTemperature': '.TEMPERATURE',\r\n\t\t\t\t\t'hue': '.HUE',\r\n\t\t\t\t\t'rgb': '.RGB',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (['blind'].indexOf(role) > -1) { // convert blind\r\n\t\t\t\tdevice.function = 'blind';\r\n\t\t\t\tstates = {\r\n\t\t\t\t\t'level': '.SET',\r\n\t\t\t\t\t//'': '.ACTUAL',\r\n\t\t\t\t\t//'': '.STOP',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tObject.keys(states).forEach(stateKey => {\r\n\t\t\t\t\r\n\t\t\t\tstates[stateKey] = Array.isArray(states[stateKey]) ? states[stateKey] : [states[stateKey]];\r\n\t\t\t\tstates[stateKey].forEach(key => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (deviceStructure.states.indexOf(deviceStructure.root + key) > -1) {\r\n\t\t\t\t\t\tdevice.states[stateKey] = deviceStructure.root + key;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//delete states[stateKey]\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// adopt all other states\r\n\t\t\tlet statesAsArray = Object.values(device.states);\r\n\t\t\tdeviceStructure.states.forEach(state => {\r\n\t\t\t\t\r\n\t\t\t\tif (statesAsArray.indexOf(state) === -1) {\r\n\t\t\t\t\tdevice.states = {\r\n\t\t\t\t\t\t...device.states,\r\n\t\t\t\t\t\t[state.substring(state.lastIndexOf('.')+1)]: state\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve(device);\r\n\t\t});\r\n\t});\r\n}","import Connection from '../../controller/Connection'\r\n\r\nexport default 'Deconz'\r\nexport const namespace = 'deconz'\r\n\r\nexport const deviceObjectType = 'device';\r\nexport const devicePattern = '(Lights|Groups|Sensors)+\\\\.\\\\w*\\\\d*$';\r\n\r\n\r\nexport function parse(deviceStructure, options) {\r\n\tconst socket = Connection.getConnection;\r\n\t\r\n\treturn new Promise(resolve => {\r\n\t\t\r\n\t\tsocket.getObject(deviceStructure.root).then(obj => {\r\n\t\t\t\r\n\t\t\tlet device = {\r\n\t\t\t\t'name': obj.common.name,\r\n\t\t\t\t'function': 'other',\r\n\t\t\t\t'states': {\r\n\t\t\t\t\t'power': deviceStructure.root + '.on'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// check if light has dimmer (level), white (colorTemperature) or color (hue) capabilities\r\n\t\t\tlet states = {\r\n\t\t\t\t'level': '.level',\r\n\t\t\t\t'colorTemperature': '.ct',\r\n\t\t\t\t'hue': '.hue',\r\n\t\t\t\t'reachable': '.reachable',\r\n\t\t\t\t'battery': '.battery',\r\n\t\t\t\t'humidity': '.humidity',\r\n\t\t\t\t'temperature': '.temperature',\r\n\t\t\t\t'door': '.open'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tObject.keys(states).forEach(stateKey => {\r\n\t\t\t\t\r\n\t\t\t\tif (deviceStructure.states.indexOf(deviceStructure.root + states[stateKey]) > -1) {\r\n\t\t\t\t\tdevice.function = 'light';\r\n\t\t\t\t\tdevice.states[stateKey] = deviceStructure.root + states[stateKey];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve(device);\r\n\t\t});\r\n\t});\r\n}","import Connection from '../../controller/Connection'\r\n\r\nexport default 'HomeMatic IP'\r\nexport const namespace = 'hm-rpc'\r\n\r\nexport const deviceObjectType = 'device';\r\n\r\n\r\nexport function parse(deviceStructure, options) {\r\n\tconst socket = Connection.getConnection;\r\n\t\r\n\treturn new Promise(resolve => {\r\n\t\t\r\n\t\tsocket.getObject(deviceStructure.root).then(obj => {\r\n\t\t\t\r\n\t\t\tlet device = {\r\n\t\t\t\t'name': obj.common.name,\r\n\t\t\t\t'function': 'other',\r\n\t\t\t\t'states': {}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tswitch(obj.native.TYPE.toLowerCase()) {\r\n\t\t\t\tcase 'hmip-bwth': // HEATING\r\n\t\t\t\t\tdevice.function = 'heating';\r\n\t\t\t\t\tdevice.states = {\r\n\t\t\t\t\t\t'temperature': deviceStructure.root + '.1.ACTUAL_TEMPERATURE',\r\n\t\t\t\t\t\t'setTemperature': deviceStructure.root + '.1.SET_POINT_TEMPERATURE',\r\n\t\t\t\t\t\t'humidity': deviceStructure.root + '.1.HUMIDITY',\r\n\t\t\t\t\t\t'boost': deviceStructure.root + '.1.BOOST_MODE',\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 'hmip-swo-b': // WEATHER STATION\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve(device);\r\n\t\t});\r\n\t});\r\n}","import Connection from '../../controller/Connection'\r\n\r\nexport default 'hue'\r\nexport const namespace = 'hue'\r\n\r\nexport const deviceObjectType = 'channel';\r\n\r\n\r\nexport function parse(deviceStructure, options) {\r\n\tconst socket = Connection.getConnection;\r\n\t\r\n\treturn new Promise(resolve => {\r\n\t\t\r\n\t\tsocket.getObject(deviceStructure.root).then(obj => {\r\n\t\t\t\r\n\t\t\tlet device = {\r\n\t\t\t\t'name': obj.common.name,\r\n\t\t\t\t'function': 'other',\r\n\t\t\t\t'states': {\r\n\t\t\t\t\t'power': deviceStructure.root + '.on'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// check if light has dimmer (level), white (colorTemperature) or color (hue) capabilities\r\n\t\t\tlet states = {\r\n\t\t\t\t'level': '.level',\r\n\t\t\t\t'colorTemperature': '.ct',\r\n\t\t\t\t'hue': '.hue',\r\n\t\t\t\t'reachable': '.reachable',\r\n\t\t\t\t'battery': '.battery'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tObject.keys(states).forEach(stateKey => {\r\n\t\t\t\t\r\n\t\t\t\tif (deviceStructure.states.indexOf(deviceStructure.root + states[stateKey]) > -1) {\r\n\t\t\t\t\tdevice.function = 'light';\r\n\t\t\t\t\tdevice.states[stateKey] = deviceStructure.root + states[stateKey];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve(device);\r\n\t\t});\r\n\t});\r\n}","//import Connection from '../../controller/Connection'\r\n\r\nexport default 'hue-extended'\r\nexport const namespace = 'hue-extended'\r\n\r\nexport const deviceObjectType = 'channel';\r\nexport const devicePattern = '(lights|groups|sensors)+\\\\.(\\\\d{3}\\\\-[^.]+)$|([^.]+\\\\-\\\\d{3})$';\r\n\r\n\r\nexport function parse(deviceStructure, options) {\r\n\t\r\n\treturn new Promise(resolve => {\r\n\t\t\r\n\t\tlet device = {}\r\n\t\tdevice.name = deviceStructure.values[deviceStructure.root + '.name'].val;\r\n\t\tdevice.states = {}\r\n\t\t\r\n\t\t// group or light\r\n\t\tif (deviceStructure.root.indexOf('.groups.') > -1 || deviceStructure.root.indexOf('.lights.') > -1) {\r\n\t\t\t\r\n\t\t\tdevice = {\r\n\t\t\t\t...device,\r\n\t\t\t\t'function': 'light',\r\n\t\t\t\t'states': {\r\n\t\t\t\t\t'power': deviceStructure.root + '.action.on'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// check if light has dimmer (level), white (colorTemperature) or color (hue) capabilities\r\n\t\t\tlet states = {\r\n\t\t\t\t'level': '.action.level',\r\n\t\t\t\t'colorTemperature': '.action.colorTemperature',\r\n\t\t\t\t'hue': '.action.hue'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tObject.keys(states).forEach(stateKey => {\r\n\t\t\t\t\r\n\t\t\t\tif (deviceStructure.states.indexOf(deviceStructure.root + states[stateKey]) > -1) {\r\n\t\t\t\t\tdevice.states[stateKey] = deviceStructure.root + states[stateKey];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// additional states\r\n\t\t\tdevice.states.reachable = deviceStructure.root + '.state.reachable';\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve(device);\r\n\t\t}\r\n\t\t\r\n\t\t// sensor\r\n\t\telse if (deviceStructure.root.indexOf('.sensors.') > -1) {\r\n\t\t\t\r\n\t\t\t// check which states are available and thus supported\r\n\t\t\tlet states = {\r\n\t\t\t\t'power': '.action.on',\r\n\t\t\t\t'battery': '.config.battery',\r\n\t\t\t\t'reachable': '.config.reachable',\r\n\t\t\t\t'humidity': '.state.humidity',\r\n\t\t\t\t'temperature': '.state.temperature',\r\n\t\t\t\t'door': '.state.open'\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tObject.keys(states).forEach(stateKey => {\r\n\t\t\t\t\r\n\t\t\t\tif (deviceStructure.states.indexOf(deviceStructure.root + states[stateKey]) > -1) {\r\n\t\t\t\t\tdevice.states[stateKey] = deviceStructure.root + states[stateKey];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve({\r\n\t\t\t\t...device,\r\n\t\t\t\t'function': 'other'\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// not supported\r\n\t\telse {\r\n\t\t\tresolve({});\r\n\t\t}\r\n\t});\r\n}","import Connection from '../../controller/Connection'\r\n\r\nexport default 'Shelly'\r\nexport const namespace = 'shelly'\r\n\r\nexport const deviceObjectType = 'device';\r\n\r\n\r\nexport function parse(deviceStructure, options) {\r\n\tconst socket = Connection.getConnection;\r\n\t\r\n\treturn new Promise(resolve => {\r\n\t\t\r\n\t\tsocket.getObject(deviceStructure.root).then(obj => {\r\n\t\t\t\r\n\t\t\tlet device = {\r\n\t\t\t\t'name': obj.common.name,\r\n\t\t\t\t'function': 'socket',\r\n\t\t\t\t'states': {\r\n\t\t\t\t\t'power': deviceStructure.root + '.Relay0.Switch',\r\n\t\t\t\t\t'firmware': deviceStructure.root + '.firmware',\r\n\t\t\t\t\t'version': deviceStructure.root + '.version',\r\n\t\t\t\t\t'reachable': deviceStructure.root + '.online',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Shelly 1 or Shelly 1 PM\r\n\t\t\tif (deviceStructure.root.indexOf('SHSW-1') > -1 || deviceStructure.root.indexOf('SHSW-PM') > -1) {\r\n\t\t\t\tdevice.states = {\r\n\t\t\t\t\t...device.states,\r\n\t\t\t\t\t'Relay0': deviceStructure.root + '.Relay0.Switch',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Shelly 2\r\n\t\t\telse if (deviceStructure.root.indexOf('SHSW-2') > -1) {\r\n\t\t\t\t\r\n\t\t\t\t// Shutter mode\r\n\t\t\t\tif (deviceStructure.values[deviceStructure.root + '.mode'] && deviceStructure.values[deviceStructure.root + '.mode'].val === 'roller') {\r\n\t\t\t\t\tdelete device.states.power;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdevice.function = 'blind';\r\n\t\t\t\t\tdevice.states = {\r\n\t\t\t\t\t\t...device.states,\r\n\t\t\t\t\t\t'level': deviceStructure.root + '.Shutter.Position',\r\n\t\t\t\t\t\t'activity': deviceStructure.root + '.Shutter.state',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Relay mode\r\n\t\t\t\telse {\r\n\t\t\t\t\tdevice.states = {\r\n\t\t\t\t\t\t...device.states,\r\n\t\t\t\t\t\t'Relay0': deviceStructure.root + '.Relay0.Switch',\r\n\t\t\t\t\t\t'Relay1': deviceStructure.root + '.Relay1.Switch',\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Shelly Dimmer\r\n\t\t\telse if (deviceStructure.root.indexOf('SHDM-1') > -1) {\r\n\t\t\t\tdevice.function = 'light';\r\n\t\t\t\tdevice.states = {\r\n\t\t\t\t\t...device.states,\r\n\t\t\t\t\t'power': deviceStructure.root + '.lights.Switch',\r\n\t\t\t\t\t'level': deviceStructure.root + '.lights.brightness',\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// resolve\r\n\t\t\tresolve(device);\r\n\t\t});\r\n\t});\r\n}","var map = {\n\t\"./_defaults/components\": 87,\n\t\"./blind/components\": 253,\n\t\"./heating/components\": 254,\n\t\"./light/components\": 290\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 691;","module.exports = __webpack_public_path__ + \"static/media/AdapterStatus1.38536619.png\";","module.exports = __webpack_public_path__ + \"static/media/Chart1.cb44dbbf.png\";","module.exports = \"data:image/png;base64,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\"","import React from 'react'\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport InputButton from '@material-ui/core/Button'\r\n\r\nimport Field from './Field'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tInputButton: {\r\n\t\twidth: '100%'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Button(props) {\r\n\tconst { id, label, color, variant, disabled, loading, startIcon, onClick } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<InputButton\r\n\t\t\t\tkey={id}\r\n\t\t\t\tclasses={{ root: classes.InputButton }}\r\n\t\t\t\tvariant={variant || 'contained'}\r\n\t\t\t\tcolor={color || 'primary'}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tstartIcon={loading ? <CircularProgress size={24} /> : (startIcon || (variant !== 'text' ? <AddIcon /> : null))}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{i18n.t(label)}\r\n\t\t\t</InputButton>\r\n\t\t</Field>\r\n\r\n\t)\r\n}","import React, { useState, useEffect } from 'react'\r\n\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tCheckbox: {\r\n\t},\r\n\tCheckboxLabel: {\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputCheckbox(props) {\r\n\tconst { id, label, onChange = () => {}, size, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [checked,setChecked] = useState(props.checked);\r\n\tuseEffect(() => {\r\n\t\tsetChecked(props.checked);\r\n\t}, [props.checked]);\r\n\t\r\n\tconst handleClick = e => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tonChange && onChange(props, e.target.checked);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<FormControlLabel\r\n\t\t\tclasses={{ label: classes.CheckboxLabel }}\r\n\t\t\tcontrol={\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\t{...otherProps}\r\n\t\t\t\t\tid={id}\r\n\t\t\t\t\tclasses={{ root: classes.Checkbox }}\r\n\t\t\t\t\tname={label || ''}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\tsize={size || 'medium'}\r\n\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\tonClick={handleClick}\r\n\t\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tlabel={label || ''}\r\n\t\t\t/>\r\n\t);\r\n}","import TextInput from './Text'\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function NumberInput(props) {\r\n\treturn TextInput({ ...props, type: 'number' });\r\n}","import React from 'react'\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n\r\nimport Text from './Text'\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputSelect(props) {\r\n\tconst { id, selection, val } = props;\r\n\t\r\n\tlet value = '';\r\n\tconst menuOptions = selection.map(option => {\r\n\t\tconst key = Object.keys(option).shift();\r\n\t\t\r\n\t\tif (key === val) {\r\n\t\t\tvalue = val;\r\n\t\t}\r\n\t\t\r\n\t\treturn <MenuItem key={'MenuItem-' + id + '-' + key} value={key}>{i18n.t(option[key])}</MenuItem>\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Text\r\n\t\t\t{...props}\r\n\t\t\tval={value}\r\n\t\t\tselect={true}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{menuOptions}\r\n\t\t</Text>\r\n\t);\r\n}","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/StateList2.7819d286.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/StateList4.5695145e.png\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","var map = {\n\t\"./AdapterStatus/AdapterStatus.settings\": 274,\n\t\"./Chart/Chart.settings\": 277,\n\t\"./DateTime/DateTime.settings\": 278,\n\t\"./Map/Map.settings\": 279,\n\t\"./Multimedia/Multimedia.settings\": 281,\n\t\"./StateList/StateList.settings\": 282,\n\t\"./StateListHorizontal/StateListHorizontal.settings\": 286,\n\t\"./Weather/Weather.settings\": 288,\n\t\"./iFrame/iFrame.settings\": 289\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 714;","var map = {\n\t\"./AdapterStatus/AdapterStatus.config\": 273,\n\t\"./Chart/Chart.config\": 276,\n\t\"./DateTime/DateTime.config\": 191,\n\t\"./Map/Map.config\": 192,\n\t\"./Multimedia/Multimedia.config\": 280,\n\t\"./StateList/StateList.config\": 148,\n\t\"./StateListHorizontal/StateListHorizontal.config\": 285,\n\t\"./Weather/Weather.config\": 287,\n\t\"./iFrame/iFrame.config\": 193\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 715;","var map = {\n\t\"./de\": 405,\n\t\"./de.js\": 405\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 716;","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport i18n from '../../controller/i18n'\r\nimport Log from '../../controller/Log'\r\n\r\nimport Dialog from '../../components/Dialog'\r\nimport EnhancedTable from '../../components/EnhancedTable'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tpinToTop: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0\r\n\t}\r\n});\r\n\r\n\r\nconst headCells = [\r\n\t{ id: 'time', disablePadding: false, type: 'Date', label: i18n.t('Time'), noWrap: true },\r\n\t{ id: 'module', disablePadding: false, label: i18n.t('Module'), noWrap: true },\r\n\t{ id: 'criticality', disablePadding: false, label: i18n.t('Criticality'), noWrap: true },\r\n\t{ id: 'message', disablePadding: false, label: i18n.t('Message') },\r\n\t{ id: 'stack', disablePadding: false, type: 'Object', label: i18n.t('Stack Trace') },\r\n];\r\n\r\nconst rowStyles = { // https://material-ui.com/components/alert/#simple-alerts\r\n\t'criticality': {\r\n\t\t'debug': {\r\n\t\t\tcolor: 'rgba(0, 0, 0, 0.4)',\r\n\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0.1)'\r\n\t\t},\r\n\t\t'info': {\r\n\t\t\tcolor: 'rgb(13, 60, 97)',\r\n\t\t\tbackgroundColor: 'rgb(232, 244, 253)'\r\n\t\t},\r\n\t\t'warn': {\r\n\t\t\tcolor: 'rgb(102, 60, 0)',\r\n\t\t\tbackgroundColor: 'rgb(255, 244, 229)'\r\n\t\t},\r\n\t\t'error': {\r\n\t\t\tcolor: 'rgb(97, 26, 21)',\r\n\t\t\tbackgroundColor: 'rgb(253, 236, 234)'\r\n\t\t},\r\n\t\t'success': {\r\n\t\t\tcolor: 'rgb(30, 70, 32)',\r\n\t\t\tbackgroundColor: 'rgb(237, 247, 237)'\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass LogsPage extends React.Component {\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst logs = Log.getLog();\r\n\t\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ CustomDialog: classes.pinToTop }}\r\n\tfullWidth={true}\r\n\tmaxWidth={'xl'}\r\n\t\r\n\topen={(this.props.page === 'logs')}\r\n\tonClose={() => this.props.navigate('home')}\r\n\t\r\n\theader=\"Logs\"\r\n\tactions={\r\n\t\t<Button autoFocus onClick={() => this.props.navigate('home')} color=\"primary\">\r\n\t\t\t{i18n.t('Close')}\r\n\t\t</Button>\r\n\t}\r\n\t>\r\n\t\r\n\t<Paper className={classes.paper}>\r\n\t\t<EnhancedTable\r\n\t\t\theadCells={headCells}\r\n\t\t\trows={logs}\r\n\t\t\trowStyles={rowStyles}\r\n\t\t\t\r\n\t\t\tselectable={false}\r\n\t\t\tsortable={true}\r\n\t\t\ttoolbar={false}\r\n\t\t\tstickyHeader\r\n\t\t\t/>\r\n\t\t\r\n\t</Paper>\r\n\t\r\n</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(LogsPage);\r\n","import React from 'react'\r\n\r\nimport Log from '../controller/Log'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tgridContainer: {\r\n\t\tpaddingLeft: theme.spacing(1),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(0.4)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function GridContainer(props) {\r\n\tconst { contents = {} } = props;\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tlet grid = [];\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tif (!contents[column]) {\r\n\t\t\tLog._('GridContainer', 'No content for column #' + column + '!', 'warn');\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\r\n\t\tgrid.push(\r\n\t\t\t<Grid key={column} item\t\t\t\t// @see https://material-ui.com/customization/breakpoints/\r\n\t\t\t\txs={12}\t\t\t\t\t\t\t//    0 -  600px\r\n\t\t\t\tsm={6}\t\t\t\t\t\t\t//  600 -  960px\r\n\t\t\t\tmd={6}\t\t\t\t\t\t\t//  960 - 1280px\r\n\t\t\t\tlg={Math.round(12/columns)}\t\t// 1280 - 1920px\r\n\t\t\t\txl={Math.round(12/columns)}\t\t// \t\t> 1920px\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{contents[column]}\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container spacing={0} className={classes.gridContainer}>\r\n\t{grid}\r\n</Grid>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\nimport ErrorIcon from '@material-ui/icons/Error'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\n\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tsuccess: {\r\n\t\tbackgroundColor: green[600],\r\n\t},\r\n\terror: {\r\n\t\tbackgroundColor: theme.palette.error.dark,\r\n\t},\r\n\tinfo: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t},\r\n\twarning: {\r\n\t\tbackgroundColor: amber[700],\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 20,\r\n\t},\r\n\ticonVariant: {\r\n\t\topacity: 0.9,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\tmessage: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n}));\r\n\r\n\r\nconst variantIcon = {\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n};\r\n\r\n\r\nexport default function StatusSnackbar(props) {\r\n\tconst classes = useStyles();\r\n\tlet { className, open, autoHideDuration, message, closeButton, onClose, variant, ...other } = props;\r\n\tconst Icon = variantIcon[variant];\r\n\t\r\n\topen = open || true;\r\n\tautoHideDuration = autoHideDuration || null;\r\n\treturn (\r\n\r\n<Snackbar\r\n\tanchorOrigin={{\r\n\t\tvertical: 'bottom',\r\n\t\thorizontal: 'center',\r\n\t}}\r\n\topen={open}\r\n\tautoHideDuration={autoHideDuration}\r\n\tonClose={onClose}\r\n\t>\r\n\t<SnackbarContent\r\n\t\tclassName={clsx(classes[variant], className)}\r\n\t\tmessage={\r\n\t\t\t<span id=\"client-snackbar\" className={classes.message}>\r\n\t\t\t\t<Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t{message}\r\n\t\t\t</span>\r\n\t\t}\r\n\t\taction={closeButton && [\r\n\t\t\t<IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t</IconButton>,\r\n\t\t]}\r\n\t\t{...other}\r\n\t\t/>\r\n\t\t\r\n</Snackbar>\r\n\r\n\t);\r\n}","import React from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport i18n from '../controller/i18n'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/tooltip'\r\n//import Badge from '@material-ui/core/Badge'\r\n//import NotificationsIcon from '@material-ui/icons/Notifications'\r\n//import MenuIcon from '@material-ui/icons/Menu'\r\nimport DonateIcon from '@material-ui/icons/Favorite'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tappBar: {\r\n\t\tflexGrow: 1,\r\n\t\tboxShadow: 'none',\r\n\t\ttransform: 'none',\r\n\t},\r\n\ttoolbar: {\r\n\t\tbackgroundColor: theme.palette.primary.main\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tnotConnected: {\r\n\t\tcolor: '#f30'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TopBar(props) {\r\n\tconst classes = useStyles();\r\n\tconst { children, title, connectionStatus, navigate } = props;\r\n\t\r\n\tconst connectionStatusIcon = connectionStatus === true ? 'lan-connect' : (connectionStatus === 'pending' ? 'lan-pending' : 'lan-disconnect');\r\n\tconst connectionStatusTooltip = connectionStatus === true ? i18n.t('Connected to ioBroker') : (connectionStatus === 'pending' ? i18n.t('Not connected to ioBroker! Reconnecting..') : i18n.t('Not connected to ioBroker! Connection failed!'));\r\n\t\r\n\treturn (\r\n\r\n<AppBar id=\"appBar\" position=\"static\" className={classes.appBar}>\r\n\r\n\t<Toolbar className={classes.toolbar}>\r\n\t\t\r\n\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t{title}\r\n\t\t</Typography>\r\n\t\t\r\n\t\t<Hidden smDown>\r\n\t\t\t{connectionStatus !== true && <IconButton classes={{ root: classes.notConnected }} color=\"inherit\" onClick={() => navigate('logs')}>\r\n\t\t\t\t<Tooltip title={i18n.t(connectionStatusTooltip)}>\r\n\t\t\t\t\t<span className={\"mdi mdi-\" + connectionStatusIcon}></span>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</IconButton>}\r\n\t\t\t<IconButton color=\"inherit\" onClick={() => navigate('donate')}>\r\n\t\t\t\t<DonateIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton color=\"inherit\" onClick={() => navigate('configuration')}>\r\n\t\t\t\t<SettingsIcon />\r\n\t\t\t</IconButton>\r\n\t\t</Hidden>\r\n\t\t\r\n\t\t{/*\r\n\t\t<IconButton color=\"inherit\" onClick={() => toggleDrawer('notificationDrawer', true)}>\r\n\t\t\t<Badge badgeContent={notifications} color=\"secondary\">\r\n\t\t\t\t<NotificationsIcon />\r\n\t\t\t</Badge>\r\n\t\t</IconButton>\r\n\t\t*/}\r\n\t\t\r\n\t</Toolbar>\r\n\t\r\n\t{children}\r\n</AppBar>\r\n\r\n\t);\r\n}\r\n","/*\r\n * by QoP <https://stackoverflow.com/users/4484822/qop>\r\n * @see https://stackoverflow.com/questions/36862334/get-viewport-window-height-in-reactjs\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Settings from '../controller/Settings'\r\nimport useWindowDimensions from '../helpers/useWindowDimensions'\r\n\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingBottom: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t},\r\n\ttabs: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tpaddingLeft: theme.spacing(),\r\n\t\tcolor: '#fff',\r\n\t\twidth: 'calc(100% - ' + theme.spacing() + 'px)',\r\n\t\tzIndex: 101,\r\n\t\tborderBottom: '5px solid #eee'\r\n\t},\r\n\tfixed: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 0\r\n\t},\r\n\tindicator: {\r\n\t\tbackgroundColor: '#fff',\r\n\t},\r\n\tfullscreen: {\r\n\t\t//marginLeft: -theme.spacing(),\r\n\t\tmarginTop: '-4px',\r\n\t\tposition: 'relative',\r\n\t\tzIndex: 1001,\r\n\t\toverflow: 'hidden'\r\n\t},\r\n\tgrid: {\r\n\t\tpaddingBottom: '30px'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TabBar(props) {\r\n\tlet { tabs, selectedTab, onSelectTab } = props;\r\n\tconst classes = useStyles();\r\n\tlet tabBarProps = useRef({});\r\n\t\r\n\t// tab\r\n\tconst [tab, setTab] = useState(selectedTab);\r\n\tconst handleChange = (event, tab) => {\r\n\t\tonSelectTab(tab);\r\n\t\tsetTab(tab);\r\n\t}\r\n\t\r\n\t// scroll\r\n\tconst [fixed, setFixed] = useState(false);\r\n\tconst handleScroll = useCallback(() => {\r\n\t\tconst threshold = (tabBarProps.current.top + tabBarProps.current.height - 53);\r\n\t\tconst fixed = window.scrollY >= threshold;\r\n\t\t\r\n\t\tsetFixed(prevFixed => {\r\n\t\t\tif (prevFixed !== fixed) {\r\n\t\t\t\tdocument.getElementById('root').style.paddingTop = fixed ? (threshold-5-8) + 'px' : 0;\r\n\t\t\t\treturn fixed;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn prevFixed;\r\n\t\t});\r\n\t\t\r\n\t}, [tabBarProps]);\r\n\r\n\tuseEffect(() => setTab(selectedTab), [selectedTab]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttabBarProps.current = {\r\n\t\t\ttop: document.getElementById('tabBar').offsetTop,\r\n\t\t\theight: document.getElementById('tabBar').offsetHeight\r\n\t\t}\r\n\t\t\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\treturn () => window.removeEventListener('scroll', handleScroll, 0);\r\n\t\t\r\n\t}, [handleScroll]);\r\n\t\r\n\t// render tabs\r\n\tconst renderedTabs = tabs.map((tab, i) => {\r\n\t\treturn (\r\n\t\t\t<Tab\r\n\t\t\t\tkey={'tab' + i}\r\n\t\t\t\ticon={<span className={clsx(classes.icon, 'mdi mdi-' + tab.icon)}></span>}\r\n\t\t\t\tlabel={!fixed && Settings.getSetting('tabsHideLabels') !== true && tab.title ? tab.title : null}\r\n\t\t\t\t/>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\r\n<Tabs\r\n\tid=\"tabBar\"\r\n\tvalue={tab}\r\n\tonChange={handleChange}\r\n\tvariant=\"scrollable\"\r\n\tclasses={{\r\n\t\troot: clsx(classes.tabs, fixed && classes.fixed),\r\n\t\tindicator: classes.indicator\r\n\t}}>\r\n\t\r\n\t{renderedTabs}\r\n</Tabs>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport function TabPanel(props) {\r\n\tconst { children, selectedTab, renderedTab, fullscreen } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t// get map height based on viewport\r\n\tconst { height } = useWindowDimensions();\r\n\tconst [mapHeight, setMapHeight] = useState(height);\r\n\tlet topBarHeight = useRef({});\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttopBarHeight.current = document.getElementById('appBar').offsetHeight;\r\n\t\tsetMapHeight(height-topBarHeight.current+4);\r\n\t\t\r\n\t}, [height]);\r\n\t\r\n\t/*\r\n\t * Some components need to be visible upon loading, so proper initialise.\r\n\t * Due to the 'hidden' attribute though, they might be hidden.\r\n\t * This is a workaround to initially show everything for a short period of time and then hide according to tab settings.\r\n\t *\r\n\t */\r\n\tconst [hidden, setHidden] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tlet timer = setTimeout(() => setHidden(selectedTab !== renderedTab), 10);\r\n\t\treturn () => clearTimeout(timer);\r\n\t\t\r\n\t}, [selectedTab, renderedTab]);\r\n\t\r\n\treturn (\r\n\r\n<Box\r\n\trole=\"tabpanel\"\r\n\thidden={hidden}\r\n\tid={'tabpanel-' + renderedTab}\r\n\tclassName={clsx(fullscreen ? classes.fullscreen : classes.grid)}\r\n\tstyle={{ height: mapHeight + 'px' }}\r\n\t>\r\n\t\r\n\t{children}\r\n</Box>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\r\nimport MuiDialogContent from '@material-ui/core/DialogContent'\r\nimport MuiDialogActions from '@material-ui/core/DialogActions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Device from '../controller/Device'\r\nimport Log from '../controller/Log'\r\nimport i18n from '../controller/i18n'\r\n\r\nimport Modules from '../modules'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(2),\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n});\r\n\r\n\r\nconst DialogTitle = withStyles(styles)(props => {\r\n\tconst { children, classes, onClose, ...other } = props;\r\n\treturn (\r\n\r\n<MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n\t<Typography variant=\"h6\">{children}</Typography>\r\n\t{onClose ? (\r\n\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t<CloseIcon />\r\n\t</IconButton>\r\n\t) : null}\r\n</MuiDialogTitle>\r\n\r\n\t);\r\n});\r\n\r\nconst DialogContent = withStyles(theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(1)\r\n\t\t}\r\n\t},\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles(theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n}))(MuiDialogActions);\r\n\r\n\r\nexport default class DeviceStateDetails extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tchildren: []\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tlet device = this.props.contents && this.props.contents.device;\r\n\t\tif (device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\t\r\n\t\t\t// get from cache\r\n\t\t\tif (device.children.length) {\r\n\t\t\t\tLog._('DeviceStateDetails', [ 'Got ' + Object.keys(device.children).length + ' states for device ' + device.name + ' from cache.', device.children ]);\r\n\t\t\t\tthis.setState({ 'children': device.children }, () => this.forceUpdate());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// retrieve new\r\n\t\t\telse {\r\n\t\t\t\t// loop through states and request status\r\n\t\t\t\tlet responses = [];\r\n\t\t\t\tlet children = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (let stateKey in device.states) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (device.states[stateKey].state === undefined || device.options.hiddenStates.indexOf(stateKey) > -1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet child = new Device({\r\n\t\t\t\t\t\t'id': device.id + '#' + stateKey,\r\n\t\t\t\t\t\t'name': i18n.t(device.function + '#' + stateKey) || stateKey,\r\n\t\t\t\t\t\t'function': device.function,\r\n\t\t\t\t\t\t'states': { [stateKey]: device.states[stateKey] },\r\n\t\t\t\t\t\t'options': {}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// add child to parent\r\n\t\t\t\t\tdevice.children.push(child);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// retrieve state\r\n\t\t\t\t\tresponses.push(child.requestDeviceState(null, true));\r\n\t\t\t\t\tchildren.push(child);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tPromise.allSettled(responses).then(() => {\r\n\t\t\t\t\tLog._('DeviceStateDetails', [ 'Retrieved ' + Object.keys(children).length + ' states for device ' + device.name + '.', children ]);\r\n\t\t\t\t\tthis.setState({ 'children': children }, () => this.forceUpdate());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\tthis.setState({ 'children': [] }, () => this.forceUpdate());\r\n\t\t}\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\treturn this.props !== nextProps.open && (!this.props.contents || this.props.contents.ts !== nextProps.contents.ts);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { open, closeDialog, contents } = this.props;\r\n\t\tconst { device } = contents;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog onClose={closeDialog} open={open || false} maxWidth={'md'} fullWidth={true}>\r\n\t<DialogTitle onClose={closeDialog}>\r\n\t\t{device.name}\r\n\t</DialogTitle>\r\n\t<DialogContent dividers style={{ padding: 0 }}>\r\n\t\t\r\n\t\t<Modules.StateList openDialog={null} devices={this.state.children} config={{ isDeviceStateDetails: true, divider: true }} />\t\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={closeDialog} color=\"primary\">\r\n\t\t\tClose\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t\t);\r\n\t};\r\n}\r\n","import React from 'react'\r\n\r\nimport Settings from '../controller/Settings'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tcard: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t},\r\n\tcardHeaderNoContents: {\r\n\t\tpadding: theme.spacing(),\r\n\t},\r\n\tcardAvatar: props => ({\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff',\r\n\t\tfontSize: '24px',\r\n\t\t...props\r\n\t}),\r\n\tcardContent: {\r\n\t\tpadding: theme.spacing(0, 2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpadding: theme.spacing(0)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Widget(props) {\r\n\tconst { title, icon, iconStyle } = props;\r\n\tconst classes = useStyles(iconStyle);\r\n\t\r\n\treturn (\r\n\r\n<Card className={classes.card}>\r\n\t<CardHeader\r\n\t\tavatar={icon !== null &&\r\n\t\t\t<Avatar variant=\"rounded\" classes={{ root: classes.cardAvatar }}>\r\n\t\t\t\t{React.createElement('span', { 'className': 'mdi mdi-' + (icon || Settings.getSetting('defaultBoxIcon') || 'home') })}\r\n\t\t\t</Avatar>\r\n\t\t}\r\n\t\ttitle={title &&\r\n\t\t\t<Typography variant=\"h5\" component=\"h2\">\r\n\t\t\t\t{title}\r\n\t\t\t</Typography>\r\n\t\t}\r\n\t/>\r\n\t<CardContent className={classes.cardContent}>\r\n\t\t{props.children}\r\n\t</CardContent>\r\n</Card>\r\n\r\n\t);\r\n}\r\n","\r\nexport default {\r\n\tconfiguration: require('./ConfigurationPage/ConfigurationPage').default,\r\n\tlogs: require('./LogsPage/LogsPage').default,\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { withTheme } from '@material-ui/core/styles'\r\nimport Hidden from '@material-ui/core/Hidden'\r\n//import { SwipeableViews } from '@tarragon/swipeable-tabs'\r\n\r\nimport { DEFAULTS } from './config/config'\r\n\r\nimport Connection from './controller/Connection'\r\nimport Devices from './controller/Devices'\r\nimport Log from './controller/Log'\r\nimport Settings from './controller/Settings'\r\n\r\nimport TopBar from './components/TopBar'\r\nimport TabBar, { TabPanel } from './components/TabBar'\r\n//import Notifications from './components/Notifications'\r\nimport GridContainer from './components/GridContainer'\r\nimport DeviceStateDetails from './components/DeviceStateDetails'\r\nimport Widget from './components/Widget'\r\n\r\nimport Modules, { ModuleSettings } from './modules'\r\nimport Pages from './pages'\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nconst getModule = props => {\r\n\tLog._('Jarvis', [ 'RENDER getModule', props ], 'development');\r\n\tconst { widget, actions = {} } = props;\r\n\t\r\n\t// widget has no devices assigned\r\n\t/*\r\n\tif (ModuleSettings[widget.module] && ModuleSettings[widget.module].noDevicesAllowed !== true) {\r\n\t\tLog._('Jarvis', 'Widget ' + (widget.title || widget.module) + ' has no devices assigned to it!', 'error');\r\n\t\treturn null;\r\n\t}\r\n\t*/\r\n\t\r\n\t// get module\r\n\tconst Tag = Modules[widget.module || DEFAULTS.MODULE];\r\n\t\r\n\t// get tag\r\n\tif (Tag === undefined) {\r\n\t\tLog._('Jarvis', 'Undefined module \"' + widget.module + '\" used!', 'error');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn <Tag\r\n\t\t\t\tkey={'tag-' + widget.module + '-' + widget.title}\r\n\t\t\t\tdevices={widget.devices || []}\r\n\t\t\t\topenDialog={actions.showDevice ? actions.showDevice : null}\r\n\t\t\t\tconfig={widget.moduleConfig || {}}\r\n\t\t\t\t/>\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nconst getWidget = props => {\r\n\tLog._('Jarvis', [ 'RENDER getWidget', props ], 'development');\r\n\tconst { widget, actions = {}, key = null } = props;\r\n\twidget.module = widget.module || DEFAULTS.MODULE;\r\n\t\r\n\tconst moduleSettings = ModuleSettings[widget.module] || {};\r\n\tconst content = getModule({ widget, actions });\r\n\t\r\n\treturn (\r\n\t\t<Widget\r\n\t\t\tkey={key ? ('widget-' + key) : ('widget-' + widget.module + '-' + widget.key)}\r\n\t\t\ttitle={widget.title === null ? null : (widget.title || moduleSettings.title)}\r\n\t\t\ticon={widget.icon === null ? null : (widget.icon || moduleSettings.icon)}\r\n\t\t\ticonStyle={widget.iconStyle}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{content}\r\n\t\t</Widget>\r\n\t);\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nconst getWidgets = props => {\r\n\tLog._('Jarvis', [ 'RENDER getWidgets', props ], 'development');\r\n\tconst { widgets, actions = {}, key = '' } = props;\r\n\t\r\n\treturn widgets.map((widget, i) => widget && getWidget({ widget, actions, key: key ? (key + '-widget-' + i) : ('widget-' + i) }));\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nconst TabPanels = React.memo(props => {\r\n\tLog._('Jarvis', [ 'RENDER TabPanels', props ], 'development');\r\n\tconst { tabs, selectedTab, actions = {} } = props;\r\n\t\r\n\tlet tabPanels = [];\r\n\ttabs.forEach((tab, tabIndex) => {\r\n\t\t\r\n\t\t// detect fullscreen\r\n\t\tconst fullscreen = tab._fullscreen !== undefined;\r\n\t\t\r\n\t\t// get widgets for each column\r\n\t\tlet tabGridColumnsContent = null;\r\n\t\tif (fullscreen) {\r\n\t\t\ttabGridColumnsContent = tab._fullscreen && getModule({ widget: tab._fullscreen, actions });\r\n\t\t}\r\n\t\telse if (tab.columns && Array.isArray(tab.columns)) {\r\n\t\t\tlet tabGridColumnsContents = {};\r\n\t\t\t\r\n\t\t\ttab.columns.forEach((column, columnIndex) => {\r\n\t\t\t\ttabGridColumnsContents[columnIndex+1] = getWidgets({ widgets: column, actions, key: 'tab-' + tabIndex + '-column-' + columnIndex+1 });\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\ttabGridColumnsContent = <GridContainer contents={tabGridColumnsContents} />\r\n\t\t}\r\n\t\t\r\n\t\t// render tab\r\n\t\tconst tabPanel = (\r\n\t\t\t<TabPanel\r\n\t\t\t\tkey={'tabPanel-' + tabIndex}\r\n\t\t\t\trenderedTab={tabIndex}\r\n\t\t\t\tselectedTab={selectedTab}\r\n\t\t\t\tfullscreen={fullscreen}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{tabGridColumnsContent}\r\n\t\t\t</TabPanel>\r\n\t\t);\r\n\t\t\r\n\t\ttabPanels.push(tabPanel);\r\n\t});\r\n\t\r\n\treturn tabPanels;\r\n\t\r\n}, (prevProps, nextProps) => {\r\n\t//console.log(prevProps, nextProps);\r\n\treturn prevProps.selectedTab === nextProps.selectedTab;\r\n});\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nclass Jarvis extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tselectedTab: 0,\r\n\t\t\ttabTitle: '',\r\n\t\t\t\r\n\t\t\tpage: 'home',\r\n\t\t\t\r\n\t\t\tnotificationDrawer: false,\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationsUnread: 0,\r\n\t\t\t\r\n\t\t\tdialog: false,\r\n\t\t\tdialogContents: {\r\n\t\t\t\t'ts': 0,\r\n\t\t\t\t'device': {}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// bind methods\r\n\t\tthis.closeDialog = this.closeDialog.bind(this);\r\n\t\tthis.openDialog = this.openDialog.bind(this);\r\n\t\tthis.onSelectTab = this.onSelectTab.bind(this);\r\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\r\n\t\tthis.navigate = this.navigate.bind(this);\r\n\t\t\r\n\t\t// get connection\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\t// initialise\r\n\t\tthis.devices = Devices.getDevices();\r\n\t\tthis.tabs = (Settings.getLayout()[0] && Settings.getLayout()[0].tabs) || [];\r\n\t\tthis.tabsEnabled = this.tabs && this.tabs.length > 1;\r\n\t\t\r\n\t\tthis.state.tabIcon = this.tabs[this.state.selectedTab] && this.tabs[this.state.selectedTab].icon;\r\n\t\tthis.state.tabTitle = this.tabs[this.state.selectedTab] && this.tabs[this.state.selectedTab].title;\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tLog._('Jarvis', 'componentDidMount', 'development');\r\n\t\t\r\n\t\t// check if devices and settings are defined\r\n\t\tif (!this.devices || Object.keys(this.devices).length === 0 || !this.tabs || this.tabs.length === 0) {\r\n\t\t\tthis.navigate('configuration');\r\n\t\t}\r\n\t\t\r\n\t\t// get notifications\r\n\t\t/*\r\n\t\tthis.socket.getState('jarvis.0.notifications').then(notifications => {\r\n\t\t\tnotifications = (notifications && notifications.val && JSON.parse(notifications.val)) || [];\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotificationsUnread: notifications.filter(notification => !notification.unread || notification.unread !== false).length,\r\n\t\t\t\tnotifications: notifications\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis.socket.subscribeState(DEFAULTS.NODE_NOTIFICATIONS, notifications => Log._('Jarvis', notifications));\r\n\t\t*/\r\n\t}\r\n\t\r\n\tcloseDialog() {\r\n\t\tthis.setState({ 'dialog': false, 'dialogContents': { 'ts': Date.now(), 'device': {} } });\r\n\t}\r\n\t\r\n\topenDialog(device) {\r\n\t\tthis.setState({ 'dialog': true, 'dialogContents': { 'ts': Date.now(), 'device': device } });\r\n\t}\r\n\t\r\n\tonSelectTab(tab) {\r\n\t\tthis.setState({\r\n\t\t\tselectedTab: tab,\r\n\t\t\ttabIcon: this.tabs[tab].icon,\r\n\t\t\ttabTitle: this.tabs[tab].title\r\n\t\t});\r\n\t}\r\n\t\r\n\ttoggleDrawer(drawer, open) {\r\n\t\tthis.setState({ [drawer]: open });\r\n\t}\r\n\t\r\n\tnavigate(page) {\r\n\t\tthis.setState({ page });\r\n\t}\r\n\t\r\n    render() {\r\n\t\tLog._('Jarvis', 'RENDER render()', 'development');\r\n\t\t\r\n\t\tconst Page = Pages[this.state.page] || null;\r\n\t\t\r\n\t\tconst tabPanels = <TabPanels page={this.state.page} tabs={this.tabs} selectedTab={this.state.selectedTab} actions={{ showDevice: this.openDialog }} />\r\n        return (\r\n\r\n<React.Fragment>\r\n\t<TopBar\r\n\t\ttitle={\r\n\t\t\t(this.tabsEnabled && <>\r\n\t\t\t\t{this.state.tabIcon && <span className={clsx(this.props.theme.components.tabIcon, 'mdi mdi-' + this.state.tabIcon)}></span>}\r\n\t\t\t\t{this.state.tabTitle !== 'null' && <span> {this.state.tabTitle}</span>}\r\n\t\t\t</>) ||\r\n\t\t\tSettings.getSetting('topBarTitle') ||\r\n\t\t\tSettings.getSetting('pageTitle') ||\r\n\t\t\t'jarvis - Smart Home Overview'\r\n\t\t}\r\n\t\t\r\n\t\tconnectionStatus={this.props.connectionStatus}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnavigate={this.navigate}\r\n\t\t//notifications={this.state.notificationsUnread}\r\n\t\t>\r\n\t\t\r\n\t\t{this.tabsEnabled && <TabBar tabs={this.tabs} selectedTab={this.state.selectedTab} onSelectTab={this.onSelectTab} />}\r\n\t</TopBar>\r\n\t\r\n\t\r\n\t{/* DRAWER: NOTIFICATIONS \r\n\t<Notifications\r\n\t\topen={this.state.notificationDrawer}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnotifications={this.state.notifications}\r\n\t\t/>*/}\r\n\t\r\n\t\r\n\t{/* PAGE */}\r\n\t{Page && <Page\r\n\t\tpage={this.state.page}\r\n\t\tnavigate={this.navigate}\r\n\t\tdevices={this.devices}\r\n\t\t/>}\r\n\t\r\n\t\r\n\t{/* POPUP */}\r\n\t<DeviceStateDetails\r\n\t\topen={this.state.dialog}\r\n\t\tcontents={this.state.dialogContents}\r\n\t\tcloseDialog={this.closeDialog}\r\n\t\t/>\r\n\t\r\n\t\r\n\t{/* TABS */}\r\n{/*\r\n\t<Hidden smUp>\r\n\t<SwipeableViews\r\n\t\tviews={tabPanels}\r\n\t\tselectedView={this.state.selectedTab}\r\n\t\tonSwipe={this.onSelectTab}\r\n\t\t/>\r\n\t</Hidden>\r\n\t<Hidden smDown>\r\n\t\t{tabPanels}\r\n\t</Hidden>\r\n*/}\r\n\t{tabPanels}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withTheme(Jarvis);","import React from 'react'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { DEFAULTS } from './config/config'\r\nimport config from './config/config.dev.js'\r\n\r\nimport GridContainer from './components/GridContainer'\r\nimport StatusSnackbar from './components/StatusSnackbar'\r\n\r\nimport Connection from './controller/Connection'\r\nimport Devices from './controller/Devices'\r\nimport i18n from './controller/i18n'\r\nimport Log from './controller/Log'\r\nimport Settings from './controller/Settings'\r\nimport Jarvis from './Jarvis'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tmargin: '10px 0 0 0',\r\n\t\tcolor: '#999'\r\n\t},\r\n\tgridItem: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmarginRight: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nclass App extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tloaded: [],\r\n\t\t\t\r\n\t\t\tconnected: false,\r\n\t\t\terror: false,\r\n\t\t\terrorMessage: '',\r\n\t\t\t\r\n\t\t\tlayout: null,\r\n\t\t\ttheme: null\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tLog._('App', 'RENDER componentWillUnmount()', 'development');\r\n\t\t\r\n\t\tif (this.socket) {\r\n\t\t\tthis.socket.disconnect();\r\n\t\t\tthis.socket = null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tLog._('App', 'RENDER componentDidMount()', 'development');\r\n\t\t\r\n\t\t/*\r\n\t\t * get theme\r\n\t\t */\r\n\t\timport('./controller/theme').then(theme => this.setState({ theme: theme.default }));\r\n\t\t\r\n\t\t/*\r\n\t\t * language pack\r\n\t\t */\r\n\t\ttry {\r\n\t\t\t//i18n.setTranslation(i18n.getLanguage(), () => require('./i18n/' + i18n.getLanguage()));\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tconsole.error(err);\r\n\t\t}\r\n\t\t\r\n\t\t/*\r\n\t\t * connect and get connection\r\n\t\t */\r\n\t\tconst errorHandler = err => {\r\n\t\t\t//Log._('App', i18n.t('Socket disconnected') + '!', 'error') //, true, err.stack);\r\n\t\t\tthis.setState({\r\n\t\t\t\tconnected: false,\r\n\t\t\t\terror: true,\r\n\t\t\t\terrorMessage: i18n.t(typeof err === 'string' ? err : err.message) + '. Reconnecting..'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tsetTimeout(function reconnect() {\r\n\t\t\t\t\r\n\t\t\t\tLog._('App', i18n.t('Attempting reconnect') + '..');\r\n\t\t\t\tConnection.reconnect();\r\n\t\t\t\tsetTimeout(() => reconnect, 30*1000);\r\n\t\t\t\t\r\n\t\t\t}, 10*1000);\r\n\t\t\t*/\r\n\t\t};\r\n\t\t\r\n\t\tconst url = window.location.port === '3000' ? config.iobrokerWebAdapterUrl :\r\n\t\t\twindow.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n\t\t\r\n\t\tconst listeners = [\r\n\t\t\t{ 'event': 'connect', 'callback': () => this.setState({ connected: true, error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'reconnect', 'callback': () => this.setState({ connected: 'pending', error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'disconnect', 'callback': errorHandler },\r\n\t\t\t{ 'event': 'error', 'callback': errorHandler }\r\n\t\t];\r\n\t\t\r\n\t\tLog._('App', i18n.t('Connect to') + ' ' + url + '...');\r\n\t\tthis.socket = Connection.connect(url, listeners);\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve ioBroker config\r\n\t\t */\r\n\t\tthis.socket.getObject('system.config', (err, data) => data && data.common && Settings.setSettings({ iobroker: data.common }));\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve settings\r\n\t\t */\r\n\t\tthis.socket.getState(DEFAULTS.NODE_SETTINGS)\r\n\t\t\t.then(state => {\r\n\t\t\t\tlet settings = null;\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tsettings = JSON.parse(state.val || {});\r\n\t\t\t\t\tSettings.setSettings(settings);\r\n\t\t\t\t\tSettings.applySettings();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.setState(prevState => ({ loaded: [ ...prevState.loaded, 'settings' ] }));\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_SETTINGS: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'settings' ],\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing settings') + '!'\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_SETTINGS: ' + err.message, 'error');\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tloaded: [ ...prevState.loaded, 'settings' ],\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: typeof err === 'string' ? i18n.t(err) : i18n.t(err.message)\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve layout\r\n\t\t */\r\n\t\tthis.socket.getState(DEFAULTS.NODE_LAYOUT)\r\n\t\t\t.then(state => {\r\n\t\t\t\tlet layout = null;\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlayout = JSON.parse(state.val || []);\r\n\t\t\t\t\tSettings.setLayout(layout);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (layout.length === 0) {\r\n\t\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'layout' ],\r\n\t\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\t\terrorMessage: i18n.t('Please create the configuration. See documentation.')\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\t\tlayout: layout,\r\n\t\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'layout' ]\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_LAYOUT: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'layout' ],\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing layout') + '!'\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_LAYOUT: ' + err.message, 'error');\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tloaded: [ ...prevState.loaded, 'layout' ],\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: typeof err === 'string' ? i18n.t(err) : i18n.t(err.message)\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve devices\r\n\t\t */\r\n\t\tthis.socket.getState(DEFAULTS.NODE_DEVICES)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tDevices.setDevices(JSON.parse(state.val || {})).then(res => {\r\n\t\t\t\t\t\tLog._('App', [ 'Processed ' + res.processedDevices + ' devices and discarded ' + (res.processedDevices - res.addedDevices) + ' devices due to incorrect configuration.', res ]);\r\n\t\t\t\t\t\tthis.setState(prevState => ({ loaded: [ ...prevState.loaded, 'devices' ] }));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_DEVICES: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'devices' ],\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing devices') + '!'\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_DEVICES: ' + err.message, 'error');\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tloaded: [ ...prevState.loaded, 'devices' ],\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: i18n.t('Socket failed while getting devices') + '!'\r\n\t\t\t\t}));\r\n\t\t\t});\r\n    }\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderError(error) {\r\n\t\tLog._('App', 'RENDER renderError()', 'development');\r\n\t\t\r\n\t\terror = error || this.state.errorMessage;\r\n\t\tLog._('App', 'Render Error: ' + error, 'error');\r\n\t\t\r\n\t\treturn (\r\n\r\n<StatusSnackbar\r\n\tkey={'StatusSnackbar'}\r\n\tvariant=\"error\"\r\n\tcloseButton={false}\r\n\tmessage={error.toString()}\r\n\t/>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderLoadingProgress() {\r\n\t\tLog._('App', 'RENDER renderLoadingProgress()', 'development');\r\n\t\t\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\r\n<Grid\r\n\tkey=\"loadingProcess\"\r\n\tcontainer\r\n\tspacing={0}\r\n\tdirection=\"column\"\r\n\tjustify=\"center\"\r\n\talignItems=\"center\"\r\n\tstyle={{ minHeight: \"100vh\" }}\r\n\t>\r\n\r\n\t<CircularProgress />\r\n\t<Typography className={classes.loading}>{i18n.t('Retrieving settings')}...</Typography>\r\n\r\n</Grid>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderLoadingSkeleton(props) {\r\n\t\tLog._('App', 'RENDER renderLoadingSkeleton()', 'development');\r\n\t\t\r\n\t\tconst { classes } = this.props;\r\n\t\tconst { topBar, tabBar, gridColumns } = props;\r\n\t\t\r\n\t\tconst SkeletonLoader = (props) => <Skeleton animation=\"wave\" variant=\"rect\" className={classes.gridItem} height={props.height} />;\r\n\t\t\r\n\t\tlet gridContents = {}\r\n\t\tfor (let column = 1; column <= gridColumns; column++) {\r\n\t\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\t\r\n\t\t\tlet loaders = Math.random() * (5 - 2) + 2;\r\n\t\t\tfor (let loader = 1; loader <= loaders; loader++) {\r\n\t\t\t\tgridContents[column].push(<SkeletonLoader key={column + '#' + loader} height={(Math.random() * (400 - 100) + 100)} />);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t{topBar && <Skeleton animation=\"wave\" variant=\"rect\" height={64} />}\r\n\t{tabBar && <Skeleton animation=\"wave\" variant=\"rect\" height={48} />}\r\n\t<GridContainer key=\"loadingSkeleton\" contents={gridContents} />\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n    render() {\r\n\t\tLog._('App', 'RENDER render()', 'development');\r\n\t\t\r\n\t\t// error message\r\n\t\tconst error = this.state.error ? this.renderError() : null;\r\n\t\t\r\n\t\t// loading screens\r\n\t\tif (!error && (this.state.loaded.indexOf('settings') === -1 || this.state.loaded.indexOf('layout') === -1)) {\r\n\t\t\treturn this.renderLoadingProgress();\r\n\t\t}\r\n\t\telse if (!error && this.state.loaded.indexOf('devices') === -1) {\r\n\t\t\treturn this.state.layout.length === 0 ? null : this.renderLoadingSkeleton({ topBar: true, tabBar: this.state.layout && this.state.layout[0] && this.state.layout[0].tabs.length > 1, gridColumns: this.state.layout && this.state.layout[0] && this.state.layout[0].tabs && this.state.layout[0].tabs[0] && this.state.layout[0].tabs[0].columns.length });\r\n\t\t}\r\n\t\t\r\n\t\t// App\r\n\t\telse {\r\n\t\t\tLog._('App', [ 'Connected:', this.state.connected ]);\r\n\t\t\treturn (\r\n\r\n<ThemeProvider theme={this.state.theme}>\r\n\t{error}\r\n\t{this.state.loaded.length === 3 && <Jarvis key=\"jarvis\" connectionStatus={this.state.connected} />}\r\n</ThemeProvider>\r\n\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","\r\nexport default {\r\n\t'hiddenStates': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Liste mit States, die von jarvis zwar geladen, aber nicht angezeigt werden.'\r\n\t\t}\r\n\t},\r\n\t'ignoredStates': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Liste mit States, die von jarvis ignoriert (und damit nicht geladen) werden.'\r\n\t\t}\r\n\t},/*\r\n\t'defaultValue': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Initialer Standard-Wert, der beim Schalten gesetzt wird.'\r\n\t\t}\r\n\t},*/\r\n\t/*'label': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'alternativer Bezeichner des Gerts als Anzeige-Name'\r\n\t\t}\r\n\t},*/\r\n}\r\n\r\nexport const DevicesStates = {\r\n\t'state': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Datenpunkt dessen State als Wert angezeigt wird'\r\n\t\t}\r\n\t},\r\n\t'stateStyle': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Style des angezeigten Wertes (im JSON Format)'\r\n\t\t},\r\n\t\t'json': true\r\n\t},\r\n\t'display': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Texte die den angezeigten Wert ersetzen (im JSON Format)'\r\n\t\t},\r\n\t\t'json': true\r\n\t},\r\n\t'label': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Label'\r\n\t\t}\r\n\t},\r\n\t'unit': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Einheit'\r\n\t\t}\r\n\t},\r\n\t/*'type': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t},\r\n\t\t'type': 'Select',\r\n\t\t'selection': [\r\n\t\t\t{ 'de': 'Deutsch' },\r\n\t\t\t{ 'switch': 'Switch' },\r\n\t\t\t{ 'switch': 'Switch' },\r\n\t\t\t{ 'switch': 'Switch' },\r\n\t\t]\r\n\t},*/\r\n\t'action': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Datenpunkt der zum Schalten getriggert wird'\r\n\t\t}\r\n\t},\r\n\t'icon': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Material Icon (klick zur Ansicht aller Icons)'\r\n\t\t},\r\n\t\t'link': 'https://materialdesignicons.com/'\r\n\t},\r\n\t'iconStyle': {\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Style des Icons (im JSON Format)'\r\n\t\t},\r\n\t\t'json': true\r\n\t}\r\n}\r\n","import React from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport DevicesConfig, { DevicesStates } from './Devices.config'\r\nimport i18n from '../../../controller/i18n'\r\nimport FUNCTIONS from '../../../functions'\r\nimport ucFirst, { moveKeyInObject } from '../../../helpers/utils'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tfullWidth: {\r\n\t\twidth: '100%',\r\n\t},\r\n\ticonContainer: {\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nclass DevicesPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tdevice: this.props.device,\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.editor = {};\r\n\t\tthis.newStateKey = '';\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tcomponentDidMount() {\r\n\t\tthis._onChange({ error: !this.state.device.name, id: 'device-name' }, this.state.device.name || ''); // trigger initial validation\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_onChange = (props, val) => {\r\n\t\t\r\n\t\t// error occured\r\n\t\tif (props.error) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: props.error\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// no error -> remove old error\r\n\t\telse if (!props.error && this.state.errors[props.id]) {\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors || {} }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn { errors: nextErrors };\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// set value\r\n\t\tthis.editor[props.id] = val;\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_onSave = () => {\r\n\t\tlet savedDevice = { ...this.state.device }\r\n\t\tsavedDevice.options = savedDevice.options || {}\r\n\t\tsavedDevice.attributes = savedDevice.attributes || {}\r\n\t\t\r\n\t\tfor (const key in this.editor) {\r\n\t\t\tconst val = this.editor[key];\r\n\t\t\tconst [ type, base, characteristic ] = key.split('-');\r\n\t\t\t\r\n\t\t\t// states\r\n\t\t\tif (type === 'states') {\r\n\t\t\t\tif (typeof savedDevice[type][base] === 'object') {\r\n\t\t\t\t\tsavedDevice[type][base][characteristic] = val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsavedDevice[type][base] = {\r\n\t\t\t\t\t\tstate: savedDevice[type][base],\r\n\t\t\t\t\t\t[characteristic]: val\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// options or attributes\r\n\t\t\telse if (type === 'options' || type === 'attributes') {\r\n\t\t\t\tsavedDevice[type][base] = val;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// device\r\n\t\t\telse {\r\n\t\t\t\tsavedDevice[base] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// save\r\n\t\tsavedDevice.attributes._updated = Date.now();\r\n\t\tthis.props.onSave && this.props.onSave(savedDevice);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_deleteDevice = () => this.props.onDelete && this.props.onDelete(this.props.device.id);\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_addState = () => {\r\n\t\t\r\n\t\t// empty state key\r\n\t\tif (!this.newStateKey) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\tnewStateKey: i18n.t('Type in a state key / identifier')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// state key exists already\r\n\t\telse if (Object.keys(this.state.device.states).indexOf(this.newStateKey) > -1) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\tnewStateKey: i18n.t('State key already used')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// add state key\r\n\t\telse {\r\n\t\t\tlet key = this.newStateKey.replace(/ /g, '');\r\n\t\t\t//this.newStateKey = '';\r\n\t\t\t\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors }\r\n\t\t\t\tdelete nextErrors['newStateKey'];\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\terrors: nextErrors,\r\n\t\t\t\t\tdevice: {\r\n\t\t\t\t\t\t...prevStates.device,\r\n\t\t\t\t\t\tstates: {\r\n\t\t\t\t\t\t\t[key]: {},\r\n\t\t\t\t\t\t\t...prevStates.device.states || {}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_moveState = (action, key) => {\r\n\t\t\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tdevice: {\r\n\t\t\t\t...prevState.device,\r\n\t\t\t\tstates: moveKeyInObject({ ...this.state.device.states }, key, action)\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_deleteState = key => {\r\n\t\t\r\n\t\tthis.setState(prevStates => {\r\n\t\t\tlet nextDevice = { ...prevStates.device }\r\n\t\t\tdelete nextDevice.states[key];\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tdevice: nextDevice\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceState(state) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst states = Object.keys(DevicesStates).map(key => {\r\n\t\t\tconst s = DevicesStates[key];\r\n\t\t\tconst Input = Inputs[s.type || 'Text'];\r\n\t\t\treturn (\r\n\t\t\t\t<Inputs.FieldsetItem columns={4} key={'states-' + state.key + '-' + key}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\t{...s}\r\n\t\t\t\t\t\tid={'states-' + state.key + '-' + key}\r\n\t\t\t\t\t\tshrink={true}\r\n\t\t\t\t\t\tlabel={s.label || ucFirst(key)}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tval={!state[key] || typeof state[key] === 'string' ? (state[key] || '') : (state[key].node || JSON.stringify(state[key]))}\r\n\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t);\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<ListItem key={'StatesListItemLabel-' + state.key} dense divider>\r\n\t\t\t\t{state.key &&\r\n\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={() => this._moveState('up', state.key)}>\r\n\t\t\t\t\t\t<ArrowUpIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={() => this._moveState('down', state.key)}>\r\n\t\t\t\t\t\t<ArrowDownIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={() => this._deleteState(state.key)} style={{ marginTop: 40 }}>\r\n\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</ListItemIcon>}\r\n\t\t\t\t\r\n\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t<div style={{ paddingBottom: 8 }}><strong>{state.key}</strong></div>\r\n\t\t\t\t\t<Inputs.Fieldset noPadding>\r\n\t\t\t\t\t\t{states}\r\n\t\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceStates(states) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst renderedStates = Object.keys(states || {}).map(stateKey => {\r\n\t\t\tlet state = states[stateKey];\r\n\t\t\tstate = typeof state === 'string' ? { 'state': state } : state;\r\n\t\t\treturn this.renderDeviceState({ ...state, key: stateKey });\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t\t<ListItem key={'StatesListItemLabel-add'} dense divider>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\" disabled>\r\n\t\t\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t\t\t<Inputs.Text id={'states-add'} onChange={(props, input) => this.newStateKey = input} shrink={true} label=\"new key\" val={this.newStateKey} />\r\n\t\t\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\t\t\tlabel={i18n.t('add new state')}\r\n\t\t\t\t\t\t\t\tonClick={this._addState}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{this.state.errors['newStateKey'] || ''}\r\n\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{renderedStates}\r\n\t\t\t\t\t\r\n\t\t\t\t</List>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceOption(config, value) {\r\n\t\t\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tvalue = value.join(',');\r\n\t\t}\r\n\t\telse if (typeof value === 'object') {\r\n\t\t\tvalue = JSON.stringify(value);\r\n\t\t}\r\n\t\t\r\n\t\tconst Tag = Inputs[config.type || 'Text'];\r\n\t\treturn (\r\n\t\t\t<ListItem key={'StatesListItemLabel-' + config.parameter} divider>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={config.parameter}\r\n\t\t\t\t\tsecondary={i18n.t(config.label || '')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<Tag\r\n\t\t\t\t\t\tkey={'options-' + config.parameter}\r\n\t\t\t\t\t\tid={'options-' + config.parameter}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tval={value}\r\n\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t{...config}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceOptions(options) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst renderedOptions = Object.keys(DevicesConfig).sort().map(config => this.renderDeviceOption({ ...DevicesConfig[config], parameter: config }, options[config] || ''));\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t{renderedOptions}\r\n\t\t\t</List>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tif (this.state.device === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tconst states = this.renderDeviceStates(this.state.device.states);\r\n\t\tconst options = this.renderDeviceOptions(this.state.device.options);\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\theader={i18n.t('Device Configuration')}\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t<Grid key='actions' container>\r\n\t\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t\t\t<Button key='action-delete' onClick={() => this._deleteDevice()} color=\"secondary\" startIcon={<DeleteIcon />}>\r\n\t\t\t\t\t\t\t\t{i18n.t('Delete Device')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t\t\t<Button key='action-cancel' onClick={() => this.props.onClose()} color=\"secondary\">\r\n\t\t\t\t\t\t\t\t{i18n.t('Cancel')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button key='action-save' onClick={() => this._onSave()} color=\"primary\" disabled={Object.keys(this.state.errors).length > 0}>\r\n\t\t\t\t\t\t\t\t{i18n.t('Apply')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t]}\r\n\t\t\t\t\r\n\t\t\t\tdense\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\t\r\n\t\t\t\topen={true}\r\n\t\t\t\tonClose={() => this.props.onClose()}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Fieldset label={i18n.t('General')}>\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\tkey=\"device-name\"\r\n\t\t\t\t\t\t\tid=\"device-name\"\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel={i18n.t('Device')}\r\n\t\t\t\t\t\t\tval={this.state.device.name}\r\n\t\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tkey=\"device-function\"\r\n\t\t\t\t\t\t\tid=\"device-function\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel={i18n.t('Function')}\r\n\t\t\t\t\t\t\tval={this.state.device.function || 'other'}\r\n\t\t\t\t\t\t\tselection={Object.keys(FUNCTIONS).sort().map(func => func !== 'defaults' ? ({ [func]: i18n.t(func) }) : ({ 'other': i18n.t('other') }))}\r\n\t\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Fieldset label={i18n.t('States')}>\r\n\t\t\t\t\t{states}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Fieldset label={i18n.t('Options')}>\r\n\t\t\t\t\t{options}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(DevicesPage);\r\n","import React, { useState, useRef } from 'react'\r\n//import clsx from 'clsx'\r\nimport { v1 as uuid } from 'uuid'\r\n\r\nimport Log from '../../../controller/Log'\r\nimport i18n from '../../../controller/i18n'\r\nimport Devices from '../../../controller/Devices'\r\nimport Adapters from '../../../config/adapters'\r\n\r\nimport Accordion from '@material-ui/core/Accordion'\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\n\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tfullWidth: {\r\n\t\twidth: '100%',\r\n\t},\r\n\theading: {\r\n\t\tpaddingRight: theme.spacing()\r\n\t},\r\n\tListItem: {\r\n\t\tdisplay: 'flex',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function ImportDevicesPage(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [loading,setLoading] = useState(null);\r\n\tconst [importDevices,setImportDevices] = useState({});\r\n\t\r\n\tlet search = {\r\n\t\tfilter: 'all',\r\n\t\tadapters: Object.keys(Adapters) || [],\r\n\t}\r\n\t\r\n\tlet foundDevicesByManufacturer = useRef({});\r\n\tlet categories = useRef({\r\n\t\t'_new': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('New Devices'),\r\n\t\t\t'expanded': true,\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t\t'_added': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('Devices that have been added already'),\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t\t'_incorrect': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('Devices with incorrect configuration (states not found)'),\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t\t'_ignored': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('Devices marked as ignored'),\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t});\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _importDevices = () => props.onImport && props.onImport(importDevices);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _markDeviceToImport = device => {\r\n\t\t\r\n\t\t// mark device as ignored\r\n\t\tlet moveDeviceToIgnore = categories.current['_new'].devices.findIndex(d => d.id === device.id);\r\n\t\tlet moveDeviceToNew = categories.current['_ignored'].devices.findIndex(d => d.id === device.id);\r\n\t\tif (device.attributes && device.attributes.ignore === true && moveDeviceToIgnore > -1) {\r\n\t\t\tcategories.current['_new'].devices.splice(moveDeviceToIgnore, 1);\r\n\t\t\tcategories.current['_ignored'].devices.push(device);\r\n\t\t\tcategories.current['_ignored'].hash = uuid();\r\n\t\t\tcategories.current['_new'].hash = uuid();\r\n\t\t}\r\n\t\telse if (device.attributes && device.attributes.ignore === false && moveDeviceToNew > -1) {\r\n\t\t\tcategories.current['_ignored'].devices.splice(moveDeviceToNew, 1);\r\n\t\t\tcategories.current['_new'].devices.push(device);\r\n\t\t\tcategories.current['_ignored'].hash = uuid();\r\n\t\t\tcategories.current['_new'].hash = uuid();\r\n\t\t}\r\n\t\t\r\n\t\t// mark device to import\r\n\t\tsetImportDevices(prevImportDevices => {\r\n\t\t\t\r\n\t\t\tlet deviceIds = Object.keys(prevImportDevices);\r\n\t\t\tif (deviceIds.indexOf(device.id) === -1 || device.attributes.ignore === true || device.attributes.ignore === false) {\r\n\t\t\t\tdevice.attributes = device.attributes || {}\r\n\t\t\t\tdevice.attributes.ignore = device.attributes.ignore === false ? null : device.attributes.ignore;\r\n\t\t\t\tdevice.attributes._created = Date.now();\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prevImportDevices,\r\n\t\t\t\t\t[device.id]: device\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// unmark device from import\r\n\t\t\telse {\r\n\t\t\t\tlet nextImportDevices = { ...prevImportDevices }\r\n\t\t\t\tdelete nextImportDevices[device.id];\r\n\t\t\t\treturn nextImportDevices;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _setSearch = (attribute, value) => {\r\n\t\t\r\n\t\tif (Array.isArray(search[attribute])) {\r\n\t\t\t\r\n\t\t\t// remove from array\r\n\t\t\tif (search[attribute].indexOf(value) > -1) {\r\n\t\t\t\tsearch[attribute] = search[attribute].filter(adapter => adapter !== value);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// add to array\r\n\t\t\telse {\r\n\t\t\t\tsearch[attribute].push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsearch[attribute] = value;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _setImportDeviceList = foundDevices => {\r\n\t\t\r\n\t\t// reset last search\r\n\t\tfoundDevicesByManufacturer.current = {}\r\n\t\tcategories.current._new.devices = [];\r\n\t\tcategories.current._added.devices = [];\r\n\t\tcategories.current._incorrect.devices = [];\r\n\t\tcategories.current._ignored.devices = [];\r\n\t\t\r\n\t\t// add devices\r\n\t\tlet deviceList = Devices.getDevices({ raw: true});\r\n\t\tfoundDevices.forEach((res, index) => {\r\n\t\t\tlet device = res.value || res.reason.device;\r\n\t\t\tlet categoryKey = '_new';\r\n\t\t\t\r\n\t\t\t// get category\r\n\t\t\tif (res.status === 'fulfilled') {\r\n\t\t\t\t\r\n\t\t\t\t// device added already\r\n\t\t\t\tif (deviceList[device.id] !== undefined) {\r\n\t\t\t\t\tcategoryKey = '_added';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// device has been ignored\r\n\t\t\t\t\tif (deviceList[device.id].attributes && deviceList[device.id].attributes.ignore === true) {\r\n\t\t\t\t\t\tcategoryKey = '_ignored';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcategoryKey = '_incorrect';\r\n\t\t\t\tdevice.attributes.note = res.reason.error.message\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcategories.current[categoryKey].devices.push(device);\r\n\t\t\tfoundDevicesByManufacturer.current[device.attributes.manufacturer.namespace] = foundDevicesByManufacturer.current[device.attributes.manufacturer.namespace] || [];\r\n\t\t\tfoundDevicesByManufacturer.current[device.attributes.manufacturer.namespace].push(device.id);\r\n\t\t});\r\n\t\t\r\n\t\tsetLoading('done');\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _getDevices = () => {\r\n\t\tsetLoading('loading');\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve devices\r\n\t\t */\r\n\t\tif (search.filter === 'all') {\r\n\t\t\tDevices.importDevices(search.adapters)\r\n\t\t\t\t.then(_setImportDeviceList)\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tLog._('App', 'IMPORT_DEVICES: ' + err.message, 'error');\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve enums\r\n\t\t */\r\n\t\telse {\r\n\t\t\tDevices.importEnums()\r\n\t\t\t\t.then(_setImportDeviceList)\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tLog._('App', 'IMPORT_ENUMS: ' + err.message, 'error');\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst adapters = Object.keys(Adapters).map(adapterKey => {\r\n\t\tlet adapter = { ...Adapters[adapterKey], namespace: adapterKey, devices: foundDevicesByManufacturer.current[adapterKey] || [] }\r\n\t\treturn <AdapterItem key={'AdapterItem-' + adapterKey} adapter={adapter} _setSearch={_setSearch} />\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Devices Import')}\r\n\t\t\tactions={<>\r\n\t\t\t\t<Inputs.Button width=\"auto\" id='action-cancel' onClick={props.onClose} label={i18n.t('Cancel')} variant=\"text\" color=\"secondary\" />\r\n\t\t\t\t<Inputs.Button width=\"auto\" id='action-read' onClick={_getDevices} label={i18n.t('Read adapters')} variant=\"text\" disabled={loading === 'loading'} loading={loading === 'loading'} />\r\n\t\t\t\t{loading === 'done' && <Inputs.Button\r\n\t\t\t\t\t\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\tid='action-import'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => _importDevices()}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t('Import selected devices') + ' (' + Object.values(importDevices).filter(device => !device.attributes || device.attributes.ignore !== true).length + ')'}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={Object.keys(importDevices).length === 0}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t</>}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='md'\r\n\t\t\tfullWidth={true}\r\n\t\t\t\r\n\t\t\topen={true}\r\n\t\t\tonClose={() => props.onClose()}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label={i18n.t('Adapters')}>\r\n\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.RadioGroup\r\n\t\t\t\t\t\tonChange={(props, val) => _setSearch('filter', val)}\r\n\t\t\t\t\t\tlabel={i18n.t('Search the adapter structure for all devices or only devices added to enums')}\r\n\t\t\t\t\t\tinputs={[\r\n\t\t\t\t\t\t\t{ label: i18n.t('Search adapter structure for all devices'), value: 'all' },\r\n\t\t\t\t\t\t\t{ label: i18n.t('Search only for devices added to enums'), value: 'enums' }\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tval={search.filter}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t\t\t{adapters}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t\t{loading !== null && <Inputs.Fieldset label={i18n.t('Devices')}>\r\n\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t{loading === 'loading' && <CircularProgress />}\r\n\t\t\t\t\t{loading === 'done' && Object.keys(categories.current).map(key => <Category key={'Category-' + key} {...{ id: key, ...categories.current[key] }} _markDeviceToImport={_markDeviceToImport} />)}\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</Inputs.Fieldset>}\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst Device = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\tconst { category, device, _markDeviceToImport } = props;\r\n\t\r\n\tconst [deviceChecked,setDeviceChecked] = useState(device.attributes && device.attributes.ignore !== undefined ? true : false);\r\n\tconst markDeviceToImport = () => {\r\n\t\tsetDeviceChecked(prevChecked => prevChecked !== true);\r\n\t\t_markDeviceToImport && _markDeviceToImport(device);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem key={device.id} dense button={category.id !== '_incorrect' && category.id !== '_ignored'} divider onClick={() => category.id !== '_incorrect' && category.id !== '_ignored' && markDeviceToImport(device)}>\r\n\t\t\t<ListItemIcon>\r\n\t\t\t\t<Inputs.Checkbox\r\n\t\t\t\t\tid={device.id}\r\n\t\t\t\t\tchecked={deviceChecked}\r\n\t\t\t\t\tdisabled={category.id === '_incorrect' || category.id === '_ignored'}\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': device.id }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText classes={{ root: classes.ListItem }} disableTypography>\r\n\t\t\t\t<Typography className={classes.heading}>{device.name}</Typography>\r\n\t\t\t\t{device.attributes && device.attributes.manufacturer && <Chip color=\"secondary\" size=\"small\" label={device.attributes.manufacturer.name} />}\r\n\t\t\t</ListItemText>\r\n\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t{category.id === '_new' && <Inputs.Button\r\n\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tlabel={i18n.t('ignore')}\r\n\t\t\t\t\tonClick={event => {\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice.attributes = {\r\n\t\t\t\t\t\t\t...device.attributes,\r\n\t\t\t\t\t\t\tignore: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmarkDeviceToImport(device);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t\r\n\t\t\t\t{category.id === '_ignored' && <Inputs.Button\r\n\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tlabel={i18n.t('move to new devices')}\r\n\t\t\t\t\tonClick={event => {\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice.attributes = {\r\n\t\t\t\t\t\t\t...device.attributes,\r\n\t\t\t\t\t\t\tignore: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmarkDeviceToImport(device);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t\r\n\t\t\t</ListItemSecondaryAction>\r\n\t\t</ListItem>\r\n\t)\r\n\t\r\n}, (prevProps, nextProps) => prevProps.device.attributes.ignore === nextProps.device.attributes.ignore);\r\n\r\n/*\r\n *\r\n */\r\nconst Category = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\tconst { id, name, expanded, devices, _markDeviceToImport } = props;\r\n\t\r\n\tconst deviceList = devices.map(device => <Device key={'Category-' + id + '-Device-' + device.id} category={props} device={device} _markDeviceToImport={_markDeviceToImport} />);\r\n\t\r\n\treturn (\r\n\t\t<Accordion classes={{ root: classes.fullWidth }} key={id} defaultExpanded={expanded === true}>\r\n\t\t\t<AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n\t\t\t\t<Typography className={classes.heading}>{name}</Typography>\r\n\t\t\t\t<Chip color=\"primary\" size=\"small\" label={devices.length} />\r\n\t\t\t</AccordionSummary>\r\n\t\t\t<AccordionDetails>\r\n\t\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t\t{deviceList}\r\n\t\t\t\t</List>\r\n\t\t\t</AccordionDetails>\r\n\t\t</Accordion>\r\n\t)\r\n\t\r\n}, (prevProps, nextProps) => prevProps.hash === nextProps.hash);\r\n\r\n/*\r\n *\r\n */\r\nconst AdapterItem = React.memo(({ adapter, _setSearch }) => {\r\n\tconst adapterName = adapter.default;\r\n\t\r\n\tconst [checked,setChecked] = useState(true);\r\n\tconst setAdapter = adapterKey => {\r\n\t\tsetChecked(prevChecked => prevChecked !== true);\r\n\t\t_setSearch && _setSearch('adapters', adapterKey);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem key={adapter.namespace} dense button divider onClick={() => setAdapter(adapter.namespace)}>\r\n\t\t\t<ListItemIcon>\r\n\t\t\t\t<Inputs.Checkbox\r\n\t\t\t\t\tid={adapter.namespace}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': adapterName }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={adapterName} />\r\n\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t{adapter.devices && Array.isArray(adapter.devices) && adapter.devices.length > 0 && <Chip color=\"primary\" size=\"small\" label={adapter.devices.length} />}\r\n\t\t\t</ListItemSecondaryAction>\r\n\t\t</ListItem>\r\n\t)\r\n});","import React, { useState, useEffect, useRef } from 'react'\r\n//import clsx from 'clsx'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\nimport i18n from '../../../controller/i18n'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport ImportIcon from '@material-ui/icons/CloudDownload'\r\n\r\nimport EnhancedTable from '../../../components/EnhancedTable'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\nimport DevicesPage from './DevicesPage'\r\nimport ImportDevicesPage from './ImportDevicesPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '25px'\r\n\t},\r\n\thr: {\r\n\t\tmargin: '10px 2px'\r\n\t},\r\n\tCustomTextInput: {\r\n\t\twidth: 150\r\n\t},\r\n\tCustomDialogTitle: {\r\n\t\tpadding: 0,\r\n\t\tmarginRight: '50px'\r\n\t},\r\n\tTableCell: {\r\n\t\tverticalAlign: 'top',\r\n\t\tpadding: '5px 0'\r\n\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tpaper: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center',\r\n\t},\r\n\tnewlyCreatedDevice: {\r\n\t\tbackgroundColor: 'rgba(99, 233, 30, 0.08) !important'\r\n\t}\r\n}));\r\n\r\n\r\ni18n.setTranslation(i18n.getLanguage(), () => require('./i18n/' + i18n.getLanguage()));\r\n\r\nexport default function DevicesListPage(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [selectedDevice,setSelectedDevice] = useState(null);\r\n\tconst [importDevices,setImportDevices] = useState(null);\r\n\tconst [devices,setDevices] = useState(props.devices);\r\n\tconst [device,setDevice] = useState(null);\r\n\t\r\n\tlet hash = useRef(Date.now());\r\n\t\r\n\tuseEffect(() => {\r\n\t\thash.current = Date.now();\r\n\t\tsetDevices(props.devices);\r\n\t\t\r\n\t}, [props.devices]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (device) {\r\n\t\t\tdocument.getElementById('DialogContent').scrollTop = (document.getElementById('device-' + device.id) && document.getElementById('device-' + device.id).offsetTop) || 0;\r\n\t\t}\r\n\t\t\r\n\t}, [device]);\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _importDevices = importDevices => _saveDevices({ ...devices, ...importDevices });\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _saveDevice = saveDevice => {\r\n\t\tsetDevice(saveDevice);\r\n\t\t_saveDevices({ ...devices, [saveDevice.id]: saveDevice });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _saveDevices = saveDevices => {\r\n\t\tsetDevices(saveDevices);\r\n\t\tprops.onChange && props.onChange(saveDevices);\r\n\t\t\r\n\t\thash.current = Date.now();\r\n\t\tsetSelectedDevice(null);\r\n\t\tsetImportDevices(null);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteDevice = deviceId => {\r\n\t\tlet nextDevices = { ...devices }\r\n\t\tdelete nextDevices[deviceId];\r\n\t\t_saveDevices(nextDevices);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\treturn (\r\n\r\n<>\r\n\t<Paper className={classes.paper}>\r\n\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t{i18n.t('Devices List') + ' (' + Object.keys(devices).length + ')'}\r\n\t\t</Typography>\r\n\t\t\r\n\t\t<Inputs.Button\r\n\t\t\tkey=\"device-add\"\r\n\t\t\twidth={300}\r\n\t\t\tonClick={() => setSelectedDevice('#new')}\r\n\t\t\tstartIcon={<AddIcon />}\r\n\t\t\tdisabled={selectedDevice !== null || importDevices !== null}\r\n\t\t\tlabel={i18n.t('add new device')}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<Inputs.Button\r\n\t\t\tkey=\"devices-import\"\r\n\t\t\tonClick={() => setImportDevices(true)}\r\n\t\t\tstartIcon={<ImportIcon />}\r\n\t\t\tdisabled={selectedDevice !== null || importDevices !== null}\r\n\t\t\tlabel={i18n.t('import devices')}\r\n\t\t\t/>\r\n\t\t\r\n\t</Paper>\r\n\t<Paper>\r\n\t\t<DeviceTable\r\n\t\t\t_selectDevice={device => setSelectedDevice(device.id)}\r\n\t\t\thash={hash.current}\r\n\t\t\tdevices={devices}\r\n\t\t\t/>\r\n\t\t\r\n\t\t{selectedDevice != null && <DevicesPage\r\n\t\t\t\t\t\t\t\t\t\tdevice={selectedDevice === '#new' ? { id: uuid(), states: {}, options: {}, attributes: { _created: Date.now() }} : devices[selectedDevice]}\r\n\t\t\t\t\t\t\t\t\t\tonSave={_saveDevice}\r\n\t\t\t\t\t\t\t\t\t\tonDelete={_deleteDevice}\r\n\t\t\t\t\t\t\t\t\t\tonClose={() => setSelectedDevice(null)}\r\n\t\t\t\t\t\t\t\t\t\t/>}\r\n\r\n\t\t{importDevices !== null && <ImportDevicesPage\r\n\t\t\t\t\t\t\t\t\t\tonImport={_importDevices}\r\n\t\t\t\t\t\t\t\t\t\tonClose={() => setImportDevices(null)}\r\n\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\r\n\t</Paper>\r\n</>\r\n\r\n\t)\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceTable = React.memo(props => {\r\n\tconst { devices } = props;\r\n\tconsole.log(\"RENDER DeviceTable\");\r\n\t\r\n\treturn (\r\n\t\t<EnhancedTable\r\n\t\t\ttoolbar={false}\r\n\t\t\theadCells={[\r\n\t\t\t\t{ id: 'edit', width: '5%', disablePadding: true, label: '' },\r\n\t\t\t\t{ id: 'name', width: '15%', label: i18n.t('Name') },\r\n\t\t\t\t{ id: 'function', width: '10%', label: i18n.t('Function') },\r\n\t\t\t\t{ id: 'states', width: '50%', disablePadding: false, label: i18n.t('States') },\r\n\t\t\t\t{ id: 'options', width: '20%', disablePadding: false, label: i18n.t('Options') },\r\n\t\t\t\t//{ id: 'attributes', width: '15%', disablePadding: false, label: i18n.t('Attributes') }\r\n\t\t\t]}\r\n\t\t\trows={Object.values(devices)}\r\n\t\t\t\r\n\t\t\tdefaultOrderBy=\"name\"\r\n\t\t\tselectable={false}\r\n\t\t\tsortable={true}\r\n\t\t\tstickyHeader\r\n\t\t\t\r\n\t\t\tCustomTableBody={CustomTableProps => <DeviceList {...props} {...CustomTableProps} />}\r\n\t\t\t/>\r\n\t);\r\n\t\r\n}, (prevProps, nextProps) => prevProps.hash === nextProps.hash);\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceList = props => {\r\n\tconst classes = useStyles();\r\n\tconst { sortedRows, _selectDevice } = props;\r\n\tconsole.log(\"RENDER DeviceList\");\r\n\t\r\n\treturn (\r\n\t\t<TableBody>\r\n\t\t\r\n\t\t{sortedRows.map((device, index) => {\r\n\t\t\tlet options = Object.keys(device.options || {}).filter(optionKey => (device.options[optionKey] === '' || (Array.isArray(device.options[optionKey]) && device.options[optionKey].length === 0) || (typeof device.options[optionKey] === 'object' && Object.keys(device.options[optionKey]).length === 0)) === false).sort().join(', '); \r\n\t\t\t//let attributes = Object.keys(device.attributes || {}).sort().join(', ');\r\n\t\t\t\r\n\t\t\t// skip\r\n\t\t\tif (device.attributes && device.attributes.ignore === true) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={'TableRow-' + index}\r\n\t\t\t\t\tid={'device-' + device.id}\r\n\t\t\t\t\thover\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tselected={device.attributes && device.attributes._created > Date.now()-24*60*60*1000}\r\n\t\t\t\t\tclasses={{ selected: classes.newlyCreatedDevice }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<TableCell padding=\"checkbox\" scope=\"row\" align=\"center\">\r\n\t\t\t\t\t\t<IconButton onClick={() => _selectDevice(device)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>{(device.options && device.options.label) || device.name}</TableCell>\r\n\t\t\t\t\t<TableCell>{device.function}</TableCell>\r\n\t\t\t\t\t<TableCell>{Object.keys(device.states || {}).join(', ')}</TableCell>\r\n\t\t\t\t\t<TableCell>{options.length > 35 ? <Tooltip title={options}><span>{options.substr(0,32) + '...'}</span></Tooltip> : options}</TableCell>\r\n\t\t\t\t\t{/*<TableCell>{attributes.length > 35 ? <Tooltip title={attributes}><span>{attributes.substr(0,32) + '...'}</span></Tooltip> : attributes}</TableCell>*/}\r\n\t\t\t\t</TableRow>\r\n\t\t\t\r\n\t\t\t);\r\n\t\t})}\r\n\t\t\r\n\t\t</TableBody>\r\n\t);\r\n\t\r\n}","import Modules from '../../../modules'\r\n\r\nexport default {\r\n\t'tabsHideLabels': {\r\n\t\t'label': {\r\n\t\t\t'de': 'Tab Labels nicht anzeigen (nur Icons)',\r\n\t\t\t'en': 'Hide tab labels (only show icons)'\r\n\t\t},\r\n\t\t'info': {\r\n\t\t\t'de': 'Zeigt nur die Icons im Tab und nicht die Labels',\r\n\t\t\t'en': 'Show only icons within a tab, not the label'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': false\r\n\t},\r\n\t'tabIcon': {\r\n\t\t'label': {\r\n\t\t\t'de': 'Tab Icon',\r\n\t\t\t'en': 'Tab Icon'\r\n\t\t},\r\n\t\t'type': 'Text',\r\n\t},\r\n\t'tabTitle': {\r\n\t\t'label': {\r\n\t\t\t'de': 'Tab Titel',\r\n\t\t\t'en': 'Tab Title'\r\n\t\t},\r\n\t\t'type': 'Text',\r\n\t},\r\n\t'tabFullscreen': {\r\n\t\t'label': {\r\n\t\t\t'de': 'Tab als Vollbild',\r\n\t\t\t'en': 'Tab Fullscreen'\r\n\t\t},\r\n\t\t'info': {\r\n\t\t\t'de': 'Vollbild kann nur bei einem Tab mit nur einer Spalte und nur einem eingestellten Widget aktiviert werden.',\r\n\t\t\t'en': 'Fullscreen can only be enabled on a tab setup with only a single column and only a single widget'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': false\r\n\t},\r\n\t\r\n\t'widgetModule': {\r\n\t\t'required': true,\r\n\t\t'label': {\r\n\t\t\t'de': 'Modul zur Anzeige der Gerte',\r\n\t\t\t'en': 'Modul to display the devices'\r\n\t\t},\r\n\t\t'type': 'Text',\r\n\t\t//val: 'StateList',\r\n\t\t'options': Object.keys(Modules)\r\n\t},\r\n\t'widgetTitle': {\r\n\t\t'required': true,\r\n\t\t'label': {\r\n\t\t\t'de': 'Titel der Widget-Box',\r\n\t\t\t'en': 'Title of the widget-box'\r\n\t\t},\r\n\t\t'type': 'Text',\r\n\t\t//val: ''\r\n\t},\r\n\t'widgetIcon': {\r\n\t\t'label': {\r\n\t\t\t'de': 'Icon der Widget-Box',\r\n\t\t\t'en': 'Icon of the widget-box'\r\n\t\t},\r\n\t\t'type': 'Text',\r\n\t\t'placeholder': 'home',\r\n\t\t'info': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Material Icon (klick zur Ansicht aller Icons)'\r\n\t\t},\r\n\t\t'link': 'https://materialdesignicons.com/'\r\n\t},\r\n\t'widgetIconStyle': {\r\n\t\t'label': {\r\n\t\t\t'de': 'Icon style der Widget-Box',\r\n\t\t\t'en': 'Icon style of the widget-box'\r\n\t\t},\r\n\t\t'type': 'Text',\r\n\t\t'json': true,\r\n\t\t'placeholder': '{ \"color\": \"#fff\", \"fontSize\": \"24px\" }' // backgroundColor: theme.palette.primary.main,\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Placeholder(props) {\r\n\tconst { width, height } = props;\r\n\t\r\n\treturn (\r\n\t\t<div style={{ display: 'inline-flex', width: width + 'px', height: (height || 1) + 'px' }}>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react'\r\n\r\nimport { DEFAULTS } from '../../../config/config'\r\nimport LayoutsConfig from './Layouts.config'\r\nimport { moveKeyInArray, sortArray } from '../../../helpers/utils'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Devices from '../../../controller/Devices'\r\nimport { ModuleConfigurations, ModuleSettings } from '../../../modules/'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\n\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport DevicesIcon from '@material-ui/icons/Devices'\r\nimport DividerIcon from '@material-ui/icons/Remove'\r\nimport GroupIcon from '@material-ui/icons/FormatListBulleted'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\nimport Placeholder from '../../../components/Placeholder'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\ticonContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\ticonCentered: {\r\n\t\tverticalAlign: 'middle',\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\tnoPadding: {\r\n\t\tpadding: 0,\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t},\r\n\theight: {\r\n\t\tlineHeight: '45px'\r\n\t},\r\n\ttitle: {\r\n\t\tlineHeight: '25px'\r\n\t},\r\n});\r\n\r\n\r\nclass WidgetPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\twidget: this.props.widget,\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.editor = { moduleConfig: {}, ...this.props.widget };\r\n\t\tthis.deviceList = Devices.getDevices({ sort: true });\r\n\t\tthis.deviceOptions = sortArray(Object.values(this.deviceList), 'function');\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tcomponentDidMount() {\r\n\t\tthis._onChange({ error: !this.state.widget.title, id: 'title' }, this.state.widget.title || ''); // trigger initial validation\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_addItem = (type, val) => {\r\n\t\tlet device = { type: type }\r\n\t\t\r\n\t\tif (type === 'device') {\r\n\t\t\tdevice.deviceId = val.id;\r\n\t\t}\r\n\t\telse if (type === 'group') {\r\n\t\t\tdevice.name = val;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState(prevStates => {\r\n\t\t\tlet nextErrors = { ...prevStates.errors }\r\n\t\t\tdelete nextErrors.addDevice;\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\terrors: nextErrors,\r\n\t\t\t\twidget: {\r\n\t\t\t\t\t...prevStates.widget,\r\n\t\t\t\t\tdevices: [\r\n\t\t\t\t\t\t...prevStates.widget.devices || [],\r\n\t\t\t\t\t\tdevice\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_editItem = (index, props, val) => {\r\n\t\t\r\n\t\t// error occured\r\n\t\tif (props.error) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: props.error\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// no error -> remove old error\r\n\t\telse if (!props.error && this.state.errors[props.id]) {\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors || {} }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn { errors: nextErrors };\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.setState(prevStates => {\r\n\t\t\tlet nextWidget = { ...prevStates.widget }\r\n\t\t\tnextWidget.devices[index][props.id] = val;\r\n\t\t\t\r\n\t\t\treturn { widget: nextWidget };\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_moveItem = (action, index) => {\r\n\t\t\r\n\t\tthis.editor.devices = moveKeyInArray([ ...this.editor.devices ], index, action);\r\n\t\tthis.setState(prevStates => ({\r\n\t\t\twidget: {\r\n\t\t\t\t...prevStates.widget,\r\n\t\t\t\tdevices: moveKeyInArray([ ...prevStates.widget.devices ], index, action)\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_deleteItem = index => {\r\n\t\t\r\n\t\t//this.editor.devices.splice(index, 1); // not necessary for some reason\r\n\t\tthis.setState(prevStates => {\r\n\t\t\tlet nextWidget = { ...prevStates.widget };\r\n\t\t\tnextWidget.devices.splice(index, 1);\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\twidget: nextWidget\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_onChange = (props, val) => {\r\n\t\t\r\n\t\t// error occured\r\n\t\tif (props.error && props.error !== this.state.errors[props.id]) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: props.error\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// no error -> remove old error\r\n\t\telse if (!props.error && this.state.errors[props.id]) {\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors || {} }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn { errors: nextErrors };\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// converted nested IDs to object\r\n\t\tif (props.id.indexOf('moduleConfig.') > -1) {\r\n\t\t\tthis.editor.moduleConfig[props.id.replace('moduleConfig.', '')] = val;\r\n\t\t}\r\n\t\t\r\n\t\t// set value\r\n\t\telse {\r\n\t\t\tthis.editor[props.id] = val;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_onSave = action => {\r\n\t\t\r\n\t\t// errors\r\n\t\tconst requiredFields = [{ parameter: 'title', required: true }, { parameter: 'module', required: true }];\r\n\t\tlet errors = {};\r\n\t\t\r\n\t\t[ ...requiredFields, ...(ModuleConfigurations[this.state.widget.module] || []) ].forEach(field => {\r\n\t\t\tif (field.required === true && !this.editor[field.parameter] && !this.editor.moduleConfig[field.parameter]) {\r\n\t\t\t\terrors[field.parameter] = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (Object.values(errors).indexOf(true) > -1) {\r\n\t\t\tthis.setState(prevStates => ({ errors: { ...prevStates.errors, ...errors }}));\r\n\t\t\t//console.error(errors, this.editor);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// attach devices\r\n\t\tthis.editor.devices = [ ...this.state.widget.devices || [] ];\r\n\t\tthis.props.onSave(this.editor);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDevice(device, index) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst moduleSettings = ModuleSettings[this.state.widget.module] || {};\r\n\t\tlet Device = device.deviceId;\r\n\t\tlet d = {};\r\n\t\t\r\n\t\tlet Icon = <DevicesIcon classes={{ root: classes.iconCentered }} />\r\n\t\tlet Actions = null;\r\n\t\t\r\n\t\tif (device && device.type === 'device') {\r\n\t\t\td = this.deviceList[device.deviceId];\r\n\t\t\tDevice = <span className={classes.title}>{d.name + ' (' + i18n.t(d.function) + ')'}</span>\r\n\t\t\t\r\n\t\t\tconst deviceWidgetConfig = this.state.widget.devices[index] || {};\r\n\t\t\tconst states = Object.keys(d.states || {}).map(state => ({ [state]: d.states[state].label || state }));\r\n\t\t\t\r\n\t\t\tActions = (!moduleSettings.devicesStates || (moduleSettings.devicesStates && moduleSettings.devicesStates.selectable !== false)) && <>\r\n\t\t\t\t\t{(!moduleSettings.devicesStates || !moduleSettings.devicesStates.selectable || (moduleSettings.devicesStates.selectable && moduleSettings.devicesStates.selectable.indexOf('primaryStateKey') > -1)) &&\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tid=\"primaryStateKey\"\r\n\t\t\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel={i18n.t('Primary State Key')}\r\n\t\t\t\t\t\t\tselection={states}\r\n\t\t\t\t\t\t\tval={deviceWidgetConfig.primaryStateKey !== undefined ? deviceWidgetConfig.primaryStateKey : d.primaryStateKey}\r\n\t\t\t\t\t\t\tonChange={(props, val) => this._editItem(index, props, val)}\r\n\t\t\t\t\t\t\tdisabled={moduleSettings.devicesStates && moduleSettings.devicesStates.disabled && moduleSettings.devicesStates.disabled.indexOf('primaryStateKey') > -1}\r\n\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t{(!moduleSettings.devicesStates || !moduleSettings.devicesStates.selectable || (moduleSettings.devicesStates.selectable && moduleSettings.devicesStates.selectable.indexOf('secondaryStateKey') > -1)) ?\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tid=\"secondaryStateKey\"\r\n\t\t\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel={i18n.t('Secondary State Key')}\r\n\t\t\t\t\t\t\tselection={[ { '': i18n.t('none') }, ...states ]}\r\n\t\t\t\t\t\t\tval={deviceWidgetConfig.secondaryStateKey !== undefined ? deviceWidgetConfig.secondaryStateKey : d.secondaryStateKey}\r\n\t\t\t\t\t\t\tonChange={(props, val) => this._editItem(index, props, val)}\r\n\t\t\t\t\t\t\tdisabled={moduleSettings.devicesStates && moduleSettings.devicesStates.disabled && moduleSettings.devicesStates.disabled.indexOf('secondaryStateKey') > -1}\r\n\t\t\t\t\t\t\t/> : <Placeholder width={150} />}\r\n\t\t\t\t</>\r\n\t\t}\r\n\t\telse if (device && device.type === 'group') {\r\n\t\t\tIcon = <GroupIcon classes={{ root: classes.iconCentered }} />\r\n\t\t\tDevice = <span className={classes.title}>{device.name}</span>\r\n\t\t}\r\n\t\telse if (device && device.type === 'divider') {\r\n\t\t\tIcon = <DividerIcon classes={{ root: classes.iconCentered }} />\r\n\t\t\tDevice = <em className={classes.title}>{'(' + i18n.t('divider') + ')'}</em>\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<ListItem key={'Device-' + (device.deviceId || (device.type + '-' + index))} divider classes={{ container: classes.height }}>\r\n\t\t\t\t<Grid container item xs={1}>\r\n\t\t\t\t\t<div className={classes.iconContainer}>\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={() => this._moveItem('up', index)}>\r\n\t\t\t\t\t\t\t<ArrowUpIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={() => this._moveItem('down', index)}>\r\n\t\t\t\t\t\t\t<ArrowDownIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={() => this._deleteItem(index)} style={{ height: '30px', margin: 'auto 0 auto 8px' }}>\r\n\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{moduleSettings.DeviceBodyConfiguration ? React.createElement(moduleSettings.DeviceBodyConfiguration, { device: d, options: (this.editor.devices && this.editor.devices[index]) || device, onChange: (props, val) => this._editItem(index, props, val), elements: { Icon, Device, Actions }}) : <>{Icon} {Device}</>}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={5}>\r\n\t\t\t\t\t{moduleSettings.DeviceActionsConfiguration ? React.createElement(moduleSettings.DeviceActionsConfiguration, { device: d, options: (this.editor.devices && this.editor.devices[index]) || device, onChange: (props, val) => this._editItem(index, props, val), elements: { Icon, Device, Actions }}) : Actions}\r\n\t\t\t\t</Grid>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceList(devices) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst renderedDevices = devices.map((device, i) => this.renderDevice(device, i));\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<List classes={{ root: classes.fullWidth }} dense disablePadding>\r\n\t\t\t\t{renderedDevices}\r\n\t\t\t</List>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tif (this.state.widget === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\t// get module configuration options\r\n\t\tconst moduleConfig = !this.state.widget.module ? []: ModuleConfigurations[this.state.widget.module || DEFAULTS.MODULE].map(config => {\r\n\t\t\t\r\n\t\t\t// consider required fields\r\n\t\t\tif (!this.state.errors['moduleConfig.' + config.parameter] && config.required === true && !(this.editor.moduleConfig[config.parameter] || config.val)) {\r\n\t\t\t\tthis._onChange({ error: true, id: 'moduleConfig.' + config.parameter }, (this.editor.moduleConfig[config.parameter] || config.val) || ''); // trigger initial validation\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// render config option\r\n\t\t\tconst Input = Inputs[config.type || 'Text'];\r\n\t\t\treturn (\r\n\t\t\t\t<Inputs.FieldsetItem columns={4} key={'FieldsetItem-' + config.parameter}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\t{...config}\r\n\t\t\t\t\t\tkey={'moduleConfig-' + config.parameter}\r\n\t\t\t\t\t\tid={'moduleConfig.' + config.parameter}\r\n\t\t\t\t\t\tlabel={i18n.t(config.label || config.parameter)}\r\n\t\t\t\t\t\tinfo={config.description}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\tval={this.editor.moduleConfig[config.parameter] || config.val}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t);\r\n\t\t});\r\n\t\t\r\n\t\t// list devices\r\n\t\tconst moduleSettings = ModuleSettings[this.state.widget.module] || {};\r\n\t\tconst devices = !this.state.widget.module || moduleSettings.devices === false ? null : this.renderDeviceList(this.state.widget.devices || []);\r\n\t\t\r\n\t\treturn (\r\n\r\n\t<Dialog\r\n\t\theader={i18n.t('Widget configuration')}\r\n\t\tclasses={{ CustomDialogActions: classes.DialogActions }}\r\n\t\tactions={\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{this.state.widget.index !== undefined && \r\n\t\t\t\t\t<Button key='action-delete' onClick={() => this.props.onDelete(this.state.widget.index)} color=\"secondary\" startIcon={<DeleteIcon />}>\r\n\t\t\t\t\t\t{i18n.t('Delete Widget')}\r\n\t\t\t\t\t</Button>}\r\n\t\t\t\t\t&nbsp;\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t<Button key='action-cancel' onClick={() => this.props.onClose()} color=\"secondary\">\r\n\t\t\t\t\t\t{i18n.t('Cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button key='action-save' onClick={this._onSave} color=\"primary\" disabled={Object.keys(this.state.errors).length > 0}>\r\n\t\t\t\t\t\t{i18n.t('Apply')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t}\r\n\t\t\r\n\t\tdense\r\n\t\tmaxWidth={'lg'}\r\n\t\topen={true}\r\n\t\tonClose={() => this.props.onClose()}\r\n\t\t>\r\n\t\t\r\n\t\t<Inputs.Fieldset label={i18n.t('Widget-Box')}>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='title'\r\n\t\t\t\t\tid='title'\r\n\t\t\t\t\t{...LayoutsConfig.widgetTitle}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\tval={this.state.widget.title || ''}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='icon'\r\n\t\t\t\t\tid='icon'\r\n\t\t\t\t\t{...LayoutsConfig.widgetIcon}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\tval={this.state.widget.icon || ''}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='iconStyle'\r\n\t\t\t\t\tid='iconStyle'\r\n\t\t\t\t\t{...LayoutsConfig.widgetIconStyle}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\tval={this.state.widget.iconStyle ? JSON.stringify(this.state.widget.iconStyle) : ''}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t</Inputs.Fieldset>\r\n\t\t\r\n\t\t<Inputs.Fieldset label={i18n.t('Module')}>\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='module'\r\n\t\t\t\t\tid='module'\r\n\t\t\t\t\t{...LayoutsConfig.widgetModule}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={this.state.widget.module}\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\tthis._onChange(props, val);\r\n\t\t\t\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\t\t\t\twidget: {\r\n\t\t\t\t\t\t\t\t...prevStates.widget,\r\n\t\t\t\t\t\t\t\tmodule: val\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t{moduleConfig}\r\n\t\t\t\r\n\t\t</Inputs.Fieldset>\r\n\t\t\r\n\t\t{(this.state.widget.module && moduleSettings.devices !== false) && <Inputs.Fieldset label={i18n.t('Devices')}>\r\n\t\t\t\r\n\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\twidth=\"90%\"\r\n\t\t\t\t\tkey='addDevice'\r\n\t\t\t\t\tid='addDevice'\r\n\t\t\t\t\tlabel={i18n.t('Add device')}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\toptions={this.deviceOptions}\r\n\t\t\t\t\tgetOptionLabel={option => option.function + ' ' + option.name}\r\n\t\t\t\t\trenderOption={(option, state) => option.name}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={(props, device) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// check if an item has been selected\r\n\t\t\t\t\t\tif (device) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// verify if device has certain state, if required by the module\r\n\t\t\t\t\t\t\tconst states = Object.keys(device.states);\r\n\t\t\t\t\t\t\tif (moduleSettings.devicesStates && moduleSettings.devicesStates.requiredStates && Array.isArray(moduleSettings.devicesStates.requiredStates) && moduleSettings.devicesStates.requiredStates.some(state => states.indexOf(state) === -1)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\t\t\t\t\t\terrors: {\r\n\t\t\t\t\t\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t\t\t\t\t\t'addDevice': [ 'Device needs one of the following states', ': ', moduleSettings.devicesStates.requiredStates.join(', ') ]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis._addItem('device', device);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t\r\n\t\t\t\t\tclearOnSelect\r\n\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\r\n\t\t\t\t\tgroupBy={option => option.function}\r\n\t\t\t\t\tcloseIcon={null}\r\n\t\t\t\t\tpopupIcon={null}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t{Array.isArray(moduleSettings['devices']) && moduleSettings['devices'].indexOf('divider') > -1 && <><Inputs.FieldsetItem columns={1} centered>\r\n\t\t\t\t<em>{i18n.t('or')}</em>\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\twidth=\"90%\"\r\n\t\t\t\t\tkey='addGroup'\r\n\t\t\t\t\tid='addGroup'\r\n\t\t\t\t\tlabel={i18n.t('Add group')}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonEnter={(props, val) => val && this._addItem('group', val)}\r\n\t\t\t\t\tclearOnEnter\r\n\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem></>}\r\n\t\t\t{Array.isArray(moduleSettings['devices']) && moduleSettings['devices'].indexOf('group') > -1 && <><Inputs.FieldsetItem columns={1} centered>\r\n\t\t\t\t<em>{i18n.t('or')}</em>\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t<Inputs.Button\r\n\t\t\t\t\tkey='addDivider'\r\n\t\t\t\t\tid='addDivider'\r\n\t\t\t\t\tlabel={i18n.t('Add divider')}\r\n\t\t\t\t\tonClick={() => this._addItem('divider')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem></>}\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t{devices}\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t</Inputs.Fieldset>}\r\n\t</Dialog>\r\n\t\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(WidgetPage);\r\n","import React from 'react'\r\n\r\nimport { DEFAULTS } from '../../../config/config'\r\nimport LayoutsConfig from './Layouts.config'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport { moveKeyInArray } from '../../../helpers/utils'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport TabIcon from '@material-ui/icons/Tab'\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport ArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft'\r\nimport ArrowRightIcon from '@material-ui/icons/KeyboardArrowRight'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport Inputs from '../../../components/Inputs'\r\nimport WidgetPage from './WidgetPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '20px'\r\n\t},\r\n\ttabs: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\ttab: {\r\n\t\tpadding: theme.spacing(3, 2),\r\n\t},\r\n\ticonContainer: {\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\tcolumnContainer: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t},\r\n\tcolumn: {\r\n\t\twidth: 250,\r\n\t\tmargin: theme.spacing(1, 1),\r\n\t\tborderRight: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t\tborderLeft: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t},\r\n\tDialogActions: {\r\n\t\tjustifyContent: 'initial'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nclass LayoutsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tselectedDrawer: null,\r\n\t\t\tselectedTab: null,\r\n\t\t\tselectedColumn: null,\r\n\t\t\tselectedWidget: null,\r\n\t\t\t\r\n\t\t\tlayout: (Array.isArray(this.props.layout) && this.props.layout.length > 0 && this.props.layout) || [{ title: '', tabs: [] }],\r\n\t\t\tsettings: this.props.settings\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_setLayout = (setter, callback) => {\r\n\t\tthis.setState(setter, () => {\r\n\t\t\tcallback && callback();\r\n\t\t\tthis.props.onChange(this.state.layout, this.state.settings);\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_saveWidget = widget => {\r\n\t\tconst drawerIndex = this.state.selectedDrawer;\r\n\t\tconst tabIndex = this.state.selectedTab;\r\n\t\tconst columnIndex = this.state.selectedColumn;\r\n\t\t\r\n\t\tconst widgetIndex = widget.index;\r\n\t\tdelete widget.index;\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\t\r\n\t\t\t// fullscreen\r\n\t\t\tif (columnIndex === 'fullscreen') {\r\n\t\t\t\tnextLayout[drawerIndex].tabs[tabIndex]._fullscreen = widget;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// column\r\n\t\t\telse {\r\n\t\t\t\tif (widgetIndex >= 0) {\r\n\t\t\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns[columnIndex][widgetIndex] = widget;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns[columnIndex].push(widget);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tselectedWidget: null,\r\n\t\t\t\tlayout: nextLayout\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_addColumn = (drawerIndex, tabIndex, newColumn) => {\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout ];\r\n\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns.push([]);\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_addTab = drawerIndex => {\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs.push({\r\n\t\t\t\ttitle: i18n.t('new tab'),\r\n\t\t\t\ticon: 'home',\r\n\t\t\t\tcolumns: [\r\n\t\t\t\t\t[]\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t\t\r\n\t\t}, () => setTimeout(() => window.location = '#tab-' + (this.state.layout[drawerIndex].tabs.length-1), 100));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_changeTab = (drawerIndex, tabIndex) => ({ id }, val) => {\r\n\t\tid = id.substr(0, id.indexOf('-'));\r\n\t\t\r\n\t\t// edit tab icon / label\r\n\t\tif (id === 'icon' || id === 'title') {\r\n\t\t\t\r\n\t\t\tthis._setLayout(prevState => {\r\n\t\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\t\tnextLayout[drawerIndex].tabs[tabIndex] = {\r\n\t\t\t\t\t...nextLayout[drawerIndex].tabs[tabIndex],\r\n\t\t\t\t\t[id]: val\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn { layout: nextLayout }\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// edit tab fullscreen option\r\n\t\telse if (id === 'fullscreen') {\r\n\t\t\t\r\n\t\t\tthis._setLayout(prevState => {\r\n\t\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\t\t\r\n\t\t\t\tif (nextLayout[drawerIndex].tabs[tabIndex]._fullscreen) {\r\n\t\t\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns = [\r\n\t\t\t\t\t\t[nextLayout[drawerIndex].tabs[tabIndex]._fullscreen]\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tdelete nextLayout[drawerIndex].tabs[tabIndex]._fullscreen;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnextLayout[drawerIndex].tabs[tabIndex]._fullscreen = (nextLayout[drawerIndex].tabs[tabIndex].columns && nextLayout[drawerIndex].tabs[tabIndex].columns[0] && nextLayout[drawerIndex].tabs[tabIndex].columns[0][0]) || null;\r\n\t\t\t\t\tdelete nextLayout[drawerIndex].tabs[tabIndex].columns;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn { layout: nextLayout }\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_deleteWidget = widgetIndex => {\r\n\t\tconst drawerIndex = this.state.selectedDrawer;\r\n\t\tconst tabIndex = this.state.selectedTab;\r\n\t\tconst columnIndex = this.state.selectedColumn;\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns[columnIndex].splice(widgetIndex, 1);\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tselectedWidget: null,\r\n\t\t\t\tlayout: nextLayout\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_deleteColumn = (drawerIndex, tabIndex, columnIndex) => {\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns.splice(columnIndex, 1);\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_deleteTab = (drawerIndex, tabIndex) => {\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs.splice(tabIndex, 1);\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_moveWidget = (action, drawerIndex, tabIndex, columnIndex, widgetKey) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns[columnIndex] = moveKeyInArray([ ...nextLayout[drawerIndex].tabs[tabIndex].columns[columnIndex] ], widgetKey, action);\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_moveColumn = (action, drawerIndex, tabIndex, columnIndex) => {\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs[tabIndex].columns = moveKeyInArray([ ...nextLayout[drawerIndex].tabs[tabIndex].columns ], columnIndex, action);\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_moveTab = (action, drawerIndex, tabIndex) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tthis._setLayout(prevState => {\r\n\t\t\tlet nextLayout = [ ...prevState.layout || [] ];\r\n\t\t\tnextLayout[drawerIndex].tabs = moveKeyInArray([ ...nextLayout[drawerIndex].tabs ], tabIndex, action);\r\n\t\t\treturn { layout: nextLayout }\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_openPopup = (drawerIndex, tabIndex, columnIndex, widget) => {\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t\tselectedDrawer: drawerIndex,\r\n\t\t\tselectedTab: tabIndex,\r\n\t\t\tselectedColumn: columnIndex,\r\n\t\t\tselectedWidget: widget\r\n\t\t});\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderWidget(drawer, tab, column, widget) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<ListItem\r\n\tkey={'Tab-' + tab.index + '_Column-' + column.index + '_Widget-' + widget.index}\r\n\tonClick={() => this._openPopup(drawer.index, tab.index, column.index, widget)}\r\n\tbutton\r\n\tdivider\r\n\t>\r\n\t\r\n\t{tab.fullscreen ?\r\n\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t<FullscreenIcon />\r\n\t</ListItemIcon>\r\n\t\t:\r\n\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t<React.Fragment>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveWidget('up', drawer.index, tab.index, column.index, widget.index)}>\r\n\t\t\t\t<ArrowUpIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveWidget('down', drawer.index, tab.index, column.index, widget.index)}>\r\n\t\t\t\t<ArrowDownIcon />\r\n\t\t\t</IconButton>\r\n\t\t</React.Fragment>\r\n\t</ListItemIcon>}\r\n\t\r\n\t<ListItemText primary={\r\n\t\t<React.Fragment>\r\n\t\t\t<Typography display=\"block\">{widget.title}</Typography>\r\n\t\t\t<Typography variant=\"subtitle2\">({widget.module})</Typography>\r\n\t\t</React.Fragment>\r\n\t} />\r\n\t\r\n</ListItem>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderColumn(drawer, tab, column) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// components per tab\r\n\t\tlet tabColumnWidgetsNodes = [];\r\n\t\ttabColumnWidgetsNodes = column.widgets.map((widget, index) => {\r\n\t\t\t\r\n\t\t\tif (widget !== null) {\r\n\t\t\t\twidget.index = index;\r\n\t\t\t\twidget.module = widget.module || DEFAULTS.MODULE;\r\n\t\t\t\treturn this.renderWidget(drawer, tab, column, widget);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn null;\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\r\n<Grid className={classes.column} key={'Tab-' + tab.index + '_Column-' + column.index} item>\r\n\t<List>\r\n\t\t{tab._fullscreen === undefined && <>\r\n\t\t<ListItem divider dense>\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => this._moveColumn('up', drawer.index, tab.index, column.index)}>\r\n\t\t\t\t\t<ArrowLeftIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={i18n.t('move column')} />\r\n\t\t\t\r\n\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => this._moveColumn('down', drawer.index, tab.index, column.index)}>\r\n\t\t\t\t\t<ArrowRightIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemSecondaryAction>\r\n\t\t</ListItem>\r\n\t\t<ListItem onClick={() => this._deleteColumn(drawer.index, tab.index, column.index)} button divider dense>\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={i18n.t('delete column')} />\r\n\t\t</ListItem></>}\r\n\t\t\r\n\t\t{(tab._fullscreen === undefined || (tab._fullscreen !== undefined && column.widgets.length < 1))&& <ListItem onClick={() => this._openPopup(drawer.index, tab.index, column.index, { module: DEFAULTS.MODULE })} button divider dense>\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t<AddIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={i18n.t('add new widget')} />\r\n\t\t</ListItem>}\r\n\t\t\r\n\t\t{tabColumnWidgetsNodes}\r\n\t\t\r\n\t</List>\r\n</Grid>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderTab(drawer, tab) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// columns per tab\r\n\t\tlet columns = 1;\r\n\t\tlet widgetsInFirstColumn = (tab.columns && tab.columns[1] && tab.columns[1].length) || 0;\r\n\t\tlet tabColumnsNodes = [];\r\n\t\t\r\n\t\t// tab is fullscreen\r\n\t\tif (tab._fullscreen !== undefined) {\r\n\t\t\ttabColumnsNodes.push(this.renderColumn(drawer, tab, { widgets: tab._fullscreen ? [ tab._fullscreen ] : [], index: 'fullscreen' }));\r\n\t\t}\r\n\t\t\r\n\t\t// tab divided in columns\r\n\t\telse {\r\n\t\t\tcolumns = tab.columns.length;\r\n\t\t\ttabColumnsNodes = tab.columns.map((column, columnIndex) => this.renderColumn(drawer, tab, { widgets: column, index: columnIndex }));\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<ListItem\r\n\tkey={'Tab-' + tab.id}\r\n\tid={'tab-' + tab.index}\r\n\tdivider={tab.index !== (this.state.layout[drawer.index].tabs.length-1)}\r\n\tclasses={{ root: classes.tab }}\r\n\t>\r\n\t\r\n\t<ListItemIcon key={'Drawer-' + drawer.id + '-Tab-' + tab.id + '-ListItemIcon'} classes={{ root: classes.iconContainer }}>\r\n\t\t<React.Fragment>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveTab('up', drawer.index, tab.index)}>\r\n\t\t\t\t<ArrowUpIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveTab('down', drawer.index, tab.index)}>\r\n\t\t\t\t<ArrowDownIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton size=\"small\" onClick={() => this._deleteTab(drawer.index, tab.index)} classes={{ root: classes.deleteButton }}>\r\n\t\t\t\t<DeleteIcon />\r\n\t\t\t</IconButton>\r\n\t\t</React.Fragment>\r\n\t</ListItemIcon>\r\n\t<ListItemText\r\n\t\tdisableTypography={true}\r\n\t\tprimary={[\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tkey={'Input-tabIcon-' + tab.id}\r\n\t\t\t\tid={'icon-' + tab.index}\r\n\t\t\t\t{...LayoutsConfig.tabIcon}\r\n\t\t\t\t\r\n\t\t\t\tonBlur={this._changeTab(drawer.index, tab.index)}\r\n\t\t\t\tval={tab.icon || ''}\r\n\t\t\t\ticon={tab.icon || ''}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tkey={'Input-tabTitle-' + tab.id}\r\n\t\t\t\tid={'title-' + tab.index}\r\n\t\t\t\t{...LayoutsConfig.tabTitle}\r\n\t\t\t\t\r\n\t\t\t\tonBlur={this._changeTab(drawer.index, tab.index)}\r\n\t\t\t\tval={tab.title || ''}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Inputs.Button\r\n\t\t\t\tkey={'Input-tabAddColumn-' + tab.id}\r\n\t\t\t\tid={'tabAddColumn-' + tab.index}\r\n\t\t\t\tlabel='add new column'\r\n\t\t\t\tdisabled={tab._fullscreen !== undefined}\r\n\t\t\t\tonClick={() => this._addColumn(drawer.index, tab.index, columns+1)}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Inputs.Switch\r\n\t\t\t\tkey={'Input-tabFullscreen-' + tab.id}\r\n\t\t\t\tid={'fullscreen-' + tab.index}\r\n\t\t\t\t{...LayoutsConfig.tabFullscreen}\r\n\t\t\t\t\r\n\t\t\t\tdisabled={(columns > 1 || widgetsInFirstColumn > 1)}\r\n\t\t\t\tonChange={this._changeTab(drawer.index, tab.index)}\r\n\t\t\t\tval={tab._fullscreen !== undefined}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Grid\r\n\t\t\t\tkey={'Tab-' + tab.id + '-ColumnContainer'}\r\n\t\t\t\tclasses={{ root: classes.columnContainer }}\r\n\t\t\t\tcontainer\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{tabColumnsNodes}\r\n\t\t\t</Grid>\r\n\t\t]}\r\n\t\t/>\r\n\t\r\n</ListItem>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDrawer(drawer) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst tabs = drawer.tabs.map((tab, tabIndex) => tab && this.renderTab(drawer, { ...tab, index: tabIndex, id: tab.title.toLowerCase().replace(/ /g, '') + tabIndex }));\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<List className={classes.tabs} key={'Drawer-' + drawer.id}>\r\n\t\t\t\t<ListItem divider classes={{ root: classes.tab }}>\r\n\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t<TabIcon />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\tdisableTypography={true}\r\n\t\t\t\t\t\tprimary={[\r\n\t\t\t\t\t\t\t<Inputs.Button key='Input-addTabs' id='Input-addTabs' label='add new tab' onClick={() => this._addTab(drawer.index)} />,\r\n\t\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\t\tkey='Input-tabsHideLabels'\r\n\t\t\t\t\t\t\t\tid='tabsHideLabels'\r\n\t\t\t\t\t\t\t\t{...LayoutsConfig.tabsHideLabels}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonChange={({ id }, val) => this.props.onChange(this.state.layout, { [id]: val })}\r\n\t\t\t\t\t\t\t\tval={this.state.settings['tabsHideLabels']}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t{tabs}\r\n\t\t\t\t\r\n\t\t\t</List>\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\t//const { classes } = this.props;\r\n\t\t\r\n\t\tconst drawers = this.state.layout.map((drawer, drawerIndex) => drawer && this.renderDrawer({ ...drawer, index: drawerIndex, id: drawer.title.toLowerCase().replace(/ /g, '') + drawerIndex }));\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t<Paper>\r\n\t\t{drawers}\r\n\t\t\r\n\t</Paper>\r\n\t\r\n\t{this.state.selectedWidget !== null && <WidgetPage\r\n\t\t\t\t\t\t\t\t\t\t\t\twidget={this.state.selectedWidget}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSave={this._saveWidget}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonDelete={this._deleteWidget}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ selectedWidget: null })}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(LayoutsPage);\r\n","\r\nexport default {\r\n\t'pageSettings': {\r\n\t\t'label': 'Page Settings',\r\n\t\t'settings': {\r\n\t\t\t'language': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Spracheinstellung von jarvis',\r\n\t\t\t\t\t'en': 'Language settings for jarvis'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Select',\r\n\t\t\t\t'selection': [\r\n\t\t\t\t\t{ 'de': 'Deutsch' },\r\n\t\t\t\t\t{ 'en': 'English' }\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t'pageFavicon': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Favicon im Browser',\r\n\t\t\t\t\t'en': 'Browser favicon'\r\n\t\t\t\t},\r\n\t\t\t\t'info': {\r\n\t\t\t\t\t'de': 'base64 Wert der Grafik',\r\n\t\t\t\t\t'en': 'base64 value of the image'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Text'\r\n\t\t\t},\r\n\t\t\t'pageTitle': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Titel im Browser',\r\n\t\t\t\t\t'en': 'Browser title'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'jarvis - just another remarkable vis'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t'themeSettings': {\r\n\t\t'label': 'Theme Settings',\r\n\t\t'settings': {\r\n\t\t\t'themeColorPrimary': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Primre Farbe des Themes',\r\n\t\t\t\t\t'en': 'Primary theme color'\r\n\t\t\t\t},\r\n\t\t\t\t'info': {\r\n\t\t\t\t\t'de': 'Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `blue|700`) sein. Alternativ kann ein Hex oder RGB angegeben werden.'\r\n\t\t\t\t},\r\n\t\t\t\t'link': 'https://material-ui.com/customization/color/#color-palette',\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'blue|700'\r\n\t\t\t},\r\n\t\t\t'themeColorSecondary': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Sekundre Farbe des Themes',\r\n\t\t\t\t\t'en': 'Secondary theme color'\r\n\t\t\t\t},\r\n\t\t\t\t'info': {\r\n\t\t\t\t\t'de': 'Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `pink`) sein. Alternativ kann ein Hex oder RGB angegeben werden.'\r\n\t\t\t\t},\r\n\t\t\t\t'link': 'https://material-ui.com/customization/color/#color-palette',\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'pink'\r\n\t\t\t},\r\n\t\t\t'defaultBoxIcon': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Standard Widget-Box Icon',\r\n\t\t\t\t\t'en': 'Default widget-box icon'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'home'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport Accordion from '@material-ui/core/Accordion'\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport SettingsConfig from './Settings.config'\r\nimport Settings from '../../../controller/Settings'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\theading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tflexBasis: '33.33%',\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tsecondaryHeading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n});\r\n\r\n\r\nclass SettingsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tdelete Settings.settings.iobroker;\r\n\t\tthis.state = {\r\n\t\t\tpanel: false\r\n\t\t}\r\n\t\t\r\n\t\tthis.onChange = this.props.onChange;\r\n\t\tthis.settings = Settings.getSettings();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_handleSettingsChange = (key, val) => {\r\n\t\tSettings.setSetting(key, val);\r\n\t\t\r\n\t\tif (this.onChange) {\r\n\t\t\tthis.onChange(Settings.getSettings());\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_handlePanelChange = panel => (event, isExpanded) => this.setState({ panel: isExpanded ? panel : false });\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderPanel(key, panel) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst settings = Object.keys(panel.settings).map(inputKey => {\r\n\t\t\tconst inputSettings = panel.settings[inputKey];\r\n\t\t\tconst Tag = Inputs[inputSettings.type || 'Text'];\r\n\t\t\t\r\n\t\t\treturn <Tag\r\n\t\t\t\t\t\tkey={'Input-' + key + '-' + inputKey}\r\n\t\t\t\t\t\tid={inputKey}\r\n\t\t\t\t\t\tonChange={this._handleSettingsChange}\r\n\t\t\t\t\t\tval={this.props.settings[inputKey] || this.settings[inputKey]}\r\n\t\t\t\t\t\t{...inputSettings}\r\n\t\t\t\t\t\t/>\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\r\n<Accordion\r\n\tkey={'Accordion-' + key}\r\n\texpanded={this.state.panel === key}\r\n\tonChange={this._handlePanelChange(key)}\r\n\t>\r\n\t\r\n\t<AccordionSummary\r\n\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\tid={'panel-header-' + key}\r\n\t\t>\r\n\t\t\r\n\t\t<Typography className={classes.heading}>{panel.label}</Typography>\r\n\t\t{panel.description && <Typography className={classes.secondaryHeading}>{panel.description}</Typography>}\r\n\t\t\r\n\t</AccordionSummary>\r\n\t<AccordionDetails>\r\n\t\t{settings}\r\n\t</AccordionDetails>\r\n</Accordion>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\treturn Object.keys(SettingsConfig).map(panel => this.renderPanel(panel, SettingsConfig[panel]))\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SettingsPage);\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { DEFAULTS } from '../../config/config'\r\nimport Connection from '../../controller/Connection'\r\nimport Devices from '../../controller/Devices'\r\nimport i18n from '../../controller/i18n'\r\nimport Settings from '../../controller/Settings'\r\n\r\nimport Dialog from '../../components/Dialog'\r\nimport Inputs from '../../components/Inputs'\r\n\r\nimport DevicesListPage from './DevicesPage/DevicesListPage'\r\nimport LayoutsPage from './LayoutsPage/LayoutsPage'\r\nimport SettingsPage from './SettingsPage/SettingsPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tmarginBottom: '10px',\r\n\t},\r\n\tpinToTop: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0\r\n\t},\r\n\ttitle: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center'\r\n\t},\r\n\trawEditor: {\r\n\t\tfontFamily: 'Roboto Mono,Consolas,Courier New,monospace !important'\r\n\t}\r\n});\r\n\r\n\r\nclass ConfigurationPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t// get layout & settings\r\n\t\tlet layout = Settings.getLayout();\r\n\t\tlet settings = Settings.getSettings();\r\n\t\tdelete settings.iobroker;\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\texpertMode: false,\r\n\t\t\ttab: 'devices',\r\n\t\t\terrors: {},\r\n\t\t\tsaving: false,\r\n\t\t\t\r\n\t\t\tsettings: settings,\r\n\t\t\tlayout: layout,\r\n\t\t\tdevices: Devices.getDevices({ raw: true, copy: true })\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\tthis._onDevicesChange.bind(this);\r\n\t\tthis._onSettingsChange.bind(this);\r\n\t\tthis._onLayoutsChange.bind(this);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t *\r\n\t */\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.expertMode) {\r\n\t\t\tlet rawEditor = document.getElementById(this.state.tab);\r\n\t\t\t\r\n\t\t\tif (rawEditor.scrollHeight !== prevState.rawEditorHeight) {\r\n\t\t\t\tthis.setState({ rawEditorHeight: rawEditor.scrollHeight });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t * \r\n\t */\r\n\t_onDevicesChange = devices => this.setState({ devices: devices });\r\n\t_onSettingsChange = settings => this.setState({ settings: settings });\r\n\t_onLayoutsChange = (layout, settings) => this.setState(prevState => ({ settings: { ...prevState.settings, ...settings || {} }, layout: layout }));\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tonRawChange = (props, val) => {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tlet res = JSON.parse(val);\r\n\t\t\t\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\terrors: nextErrors,\r\n\t\t\t\t\t[props.type]: res\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: i18n.t('Invalid JSON format')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_handleTabChange = (event, tab) => this.setState({ tab });\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_cancel = () => this.props.navigate('home');\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_save = () => {\r\n\t\tthis.setState({ saving: true });\r\n\t\t\r\n\t\tlet result = [\r\n\t\t\tthis.socket.setState(DEFAULTS.NODE_SETTINGS, JSON.stringify(this.state.settings)),\r\n\t\t\tthis.socket.setState(DEFAULTS.NODE_LAYOUT, JSON.stringify(this.state.layout)),\r\n\t\t\tthis.socket.setState(DEFAULTS.NODE_DEVICES, JSON.stringify(this.state.devices))\r\n\t\t];\r\n\t\t\r\n\t\tPromise.all(result)\r\n\t\t\t.then(() => window.location.replace(window.location.pathname))\r\n\t\t\t.catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ CustomDialog: classes.pinToTop }}\r\n\tfullWidth={true}\r\n\tmaxWidth={false}\r\n\t\r\n\topen={(this.props.page === 'configuration')}\r\n\tonClose={this._cancel}\r\n\t\r\n\theader={[\r\n\t\t<Typography key=\"header\" variant=\"h6\">\r\n\t\t\t{i18n.t('Configuration')}\r\n\t\t\t<Inputs.SwitchInline\r\n\t\t\t\tkey=\"Input-expertMode\"\r\n\t\t\t\tid=\"expertMode\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tlabel={i18n.t('Expert mode')}\r\n\t\t\t\tonChange={(key, val) => this.setState(prevState => ({ expertMode: val, tab: prevState.expertMode ? prevState.tab.substr(0, prevState.tab.length-3) : prevState.tab + 'Raw' }))}\r\n\t\t\t\tval={this.state.expertMode}\r\n\t\t\t\t/>\r\n\t\t</Typography>,\r\n\t\t\r\n\t\t<Tabs\r\n\t\t\tkey=\"tabs\"\r\n\t\t\tvalue={this.state.tab}\r\n\t\t\tindicatorColor=\"primary\"\r\n\t\t\ttextColor=\"primary\"\r\n\t\t\tonChange={this._handleTabChange}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{this.state.expertMode === true && <Tab value=\"devicesRaw\" label={i18n.t('Devices')} />}\r\n\t\t\t{this.state.expertMode === true && <Tab value=\"layoutRaw\" label={i18n.t('Layout')} />}\r\n\t\t\t{this.state.expertMode === true && <Tab value=\"settingsRaw\" label={i18n.t('Settings')} />}\r\n\t\t\t{this.state.expertMode !== true && <Tab value=\"devices\" label={i18n.t('Devices')} />}\r\n\t\t\t{this.state.expertMode !== true && <Tab value=\"layout\" label={i18n.t('Layout')} />}\r\n\t\t\t{this.state.expertMode !== true && <Tab value=\"settings\" label={i18n.t('Settings')} />}\r\n\t\t</Tabs>\r\n\t]}\r\n\tactions={[\r\n\t\t<Button key='action-cancel' autoFocus onClick={this._cancel} color=\"secondary\">\r\n\t\t\t{i18n.t('Cancel')}\r\n\t\t</Button>,\r\n\t\t<Button key='action-save' onClick={this._save} color=\"primary\" variant=\"contained\" disabled={this.state.saving === true || Object.keys(this.state.errors).length > 0}>\r\n\t\t\t{i18n.t('Save')}\r\n\t\t</Button>\r\n\t]}\r\n\t>\r\n\t\r\n\t<div hidden={this.state.tab !== 'devices'}>\r\n\t\t<DevicesListPage devices={this.state.devices} onChange={this._onDevicesChange} />\r\n\t\t\r\n\t</div>\r\n\t{this.state.expertMode === true && \r\n\t<div hidden={this.state.tab !== 'devicesRaw'}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Raw Editor') + ' ' + i18n.t('Devices')}\r\n\t\t\t</Typography>\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tid=\"devicesRaw\"\r\n\t\t\t\tlabel={['JSON Editor', (this.state.errors['devicesRaw'] !== undefined ? ' (' + this.state.errors['devicesRaw'] + ')' : '')]}\r\n\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\tinputProps={{ style: { height: this.state.rawEditorHeight } }}\r\n\t\t\t\tmultiline\r\n\t\t\t\twidth=\"99%\"\r\n\t\t\t\terror={this.state.errors['devicesRaw'] !== undefined}\r\n\t\t\t\tonChange={(props, val) => this.onRawChange({ ...props, type: 'devices' }, val)}\r\n\t\t\t\tval={JSON.stringify(this.state.devices, null, 3)}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t</div>}\r\n\t<div hidden={this.state.tab !== 'settings'} style={{ width: '100%' }}>\r\n\t\t<Paper className={classes.title}>\r\n\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t{i18n.t('Settings')}\r\n\t\t\t</Typography>\r\n\t\t</Paper>\r\n\t\t<SettingsPage settings={this.state.settings} onChange={this._onSettingsChange} />\r\n\t\t\r\n\t</div>\r\n\t{this.state.expertMode === true && \r\n\t<div hidden={this.state.tab !== 'settingsRaw'} style={{ width: '100%' }}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Raw Editor') + ' ' + i18n.t('Settings')}\r\n\t\t\t</Typography>\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tid=\"settingsRaw\"\r\n\t\t\t\tlabel={['JSON Editor', (this.state.errors['settingsRaw'] !== undefined ? ' (' + this.state.errors['settingsRaw'] + ')' : '')]}\r\n\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\tinputProps={{ style: { height: this.state.rawEditorHeight } }}\r\n\t\t\t\tmultiline\r\n\t\t\t\twidth=\"99%\"\r\n\t\t\t\terror={this.state.errors['settingsRaw'] !== undefined}\r\n\t\t\t\tonChange={(props, val) => this.onRawChange({ ...props, type: 'settings' }, val)}\r\n\t\t\t\tval={JSON.stringify(this.state.settings, null, 3)}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t</div>}\r\n\t<div hidden={this.state.tab !== 'layout'}>\r\n\t\t<Paper>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Layout')}\r\n\t\t\t</Typography>\r\n\t\t</Paper>\r\n\t\t<LayoutsPage settings={this.state.settings} layout={this.state.layout} onChange={this._onLayoutsChange} />\r\n\t\t\r\n\t</div>\r\n\t{this.state.expertMode === true && \r\n\t<div hidden={this.state.tab !== 'layoutRaw'} style={{ width: '100%' }}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Raw Editor') + ' ' + i18n.t('Layout')}\r\n\t\t\t</Typography>\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tid=\"layoutRaw\"\r\n\t\t\t\tlabel={['JSON Editor', (this.state.errors['layoutRaw'] !== undefined ? ' (' + this.state.errors['layoutRaw'] + ')' : '')]}\r\n\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\tinputProps={{ style: { height: this.state.rawEditorHeight } }}\r\n\t\t\t\tmultiline\r\n\t\t\t\twidth=\"99%\"\r\n\t\t\t\terror={this.state.errors['layoutRaw'] !== undefined}\r\n\t\t\t\tonChange={(props, val) => this.onRawChange({ ...props, type: 'layout' }, val)}\r\n\t\t\t\tval={JSON.stringify(this.state.layout || {}, null, 3)}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t</div>}\r\n\t\r\n</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(ConfigurationPage);\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n\tDialog: {\r\n\t},\r\n\tDialogDense: {\r\n\t\tpadding: theme.spacing(2, 0)\r\n\t},\r\n\tCustomDialog: {\r\n\t},\r\n\tDialogTitle: {\r\n\t},\r\n\tCustomDialogTitle: {\r\n\t},\r\n\tDialogTitleTypography: {\r\n\t\t//padding: theme.spacing(2)\r\n\t},\r\n\tDialogContent: {\r\n\t\tbackgroundColor: '#fafafa'\r\n\t},\r\n\tCustomDialogContent: {\r\n\t},\r\n\tDialogActions: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n\tCustomDialogActions: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function CustomDialog(props) {\r\n\tconst { header, onClose, children, actions, dense, disableBackdropClick, disableEscapeKeyDown } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ paper: clsx(classes.Dialog, classes.CustomDialog) }}\r\n\tfullWidth={props.fullWidth}\r\n\tmaxWidth={props.maxWidth}\r\n\t\r\n\tdisableBackdropClick={disableBackdropClick ? disableBackdropClick : true}\r\n\tdisableEscapeKeyDown={disableEscapeKeyDown ? disableEscapeKeyDown : true}\r\n\t\r\n\topen={props.open}\r\n\tonClose={props.onClose}\r\n\t>\r\n\t\r\n\t<DialogTitle\r\n\t\tclasses={{ root: clsx(classes.DialogTitle, classes.CustomDialogTitle) }}\r\n\t\tdisableTypography\r\n\t\t>\r\n\t\t\r\n\t\t{typeof header !== 'string' ? header : <Typography className={classes.DialogTitleTypography} variant=\"h6\">\r\n\t\t\t{header}\r\n\t\t</Typography>}\r\n\t\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t\t<CloseIcon />\r\n\t\t</IconButton>\r\n\t</DialogTitle>\r\n\t\r\n\t<DialogContent id='DialogContent' className={clsx(classes.DialogContent, classes.CustomDialogContent, dense && classes.DialogDense)} dividers>\r\n\t\t{children}\r\n\t</DialogContent>\r\n\t\r\n\t<DialogActions classes={{ root: clsx(classes.DialogActions, classes.CustomDialogActions) }}>\r\n\t\t{actions}\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t);\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Select from '@material-ui/core/Select'\r\nimport Slider from '@material-ui/core/Slider'\r\nimport Switch from '@material-ui/core/Switch'\r\n\r\nimport i18n from '../../controller/i18n'\r\nimport Log from '../../controller/Log'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tcomponent: {\r\n\t\tpadding: theme.spacing(2, 0, 2, 0)\r\n\t},\r\n\tsliderMarkLabel: {\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tdisplay: 'none',\r\n\t\t\t'&:nth-child(5)': { display: 'block' },\r\n\t\t\t'&:nth-child(15)': { display: 'block' },\r\n\t\t\t'&:nth-child(25)': { display: 'block' }\r\n\t\t}\r\n\t},\r\n\tprimaryAction: props => ({\r\n\t\t...props\r\n\t}),\r\n\tsecondaryAction: props => ({\r\n\t\tcolor: '#999',\r\n\t\tfontSize: '14px',\r\n\t\t//...props\r\n\t}),\r\n}));\r\n\r\n\r\n/*\r\n * ACTION\r\n *\r\n */\r\nfunction State(props) {\r\n\tconst { device, state, stateKey, stateVal } = props;\r\n\tconst classes = useStyles(device.getStyle('state', stateKey, stateVal));\r\n\t\r\n\treturn (\r\n\r\n<span className={clsx((props.primary && classes.primaryAction) || (props.secondary && classes.secondaryAction))}>\r\n\t{state && state.value} {state && state.unit}\r\n</span>\r\n\r\n\t);\r\n}\r\n\r\nfunction SwitchAction(props) {\r\n\tconst { device, stateKey, stateVal, onChange: parentOnChange } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked).catch(({ error }) => Log._('Function (defaults)', error.message, 'error', true, error.stack));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal);\r\n\tuseEffect(() => setChecked(stateVal), [stateVal]);\r\n\t\r\n\treturn (\r\n\r\n<Switch\r\n\tchecked={checked}\r\n\tonChange={parentOnChange || onChange}\r\n\tvalue={checked !== true}\r\n\tcolor=\"primary\"\r\n\t/>\r\n\r\n\t);\r\n}\r\n\r\nfunction ButtonAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onClick = () => {\r\n\t\tdevice.setDeviceState(stateKey, true).catch(({ error }) => Log._('Function (defaults)', error.message, 'error', true, error.stack));\r\n\t}\r\n\t\r\n\t//\r\n\tif (stateVal === true || stateVal > 0) {\r\n\t\treturn <State {...props} onChange={null} primary />\r\n\t}\r\n\t\r\n\tconst icon = 'power';\r\n\treturn (\r\n\r\n<Button\r\n\tvariant=\"outlined\"\r\n\tcolor=\"primary\"\r\n\tsize=\"small\"\r\n\tstartIcon={<span className={'mdi mdi-' + icon}></span>}\r\n\tonClick={onClick}\r\n\t>\r\n\t\r\n\t{i18n.t('turn on')}\r\n</Button>\r\n\r\n\t);\r\n}\r\n\r\nfunction DropdownAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onChange = (e, option) => {\r\n\t\tdevice.setDeviceState(stateKey, parseInt(e.target.value)).catch(({ error }) => Log._('Function (defaults)', error.message, 'error', true, error.stack));\r\n\t}\r\n\t\r\n\tconst options = device.states[stateKey].display || null;\r\n\tconst MenuItems = options && Object.keys(options).map(key => <MenuItem key={'MenuItem-' + device.id + '-' + stateKey + '-' + key} value={key}>{options[key]}</MenuItem>);\r\n\t\r\n\treturn !options ? <span>{i18n.t('Display attribute of state %s must be defined').replace('%s', stateKey)}!</span> : (\r\n\t\t<FormControl variant=\"outlined\" size=\"small\">\r\n\t\t\t<Select\r\n\t\t\t\tvalue={stateVal}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{MenuItems}\r\n\t\t\t</Select>\r\n\t\t</FormControl>\r\n\t);\r\n}\r\n\r\n\r\n/*\r\n * BODY\r\n *\r\n */\r\nfunction Label(props) {\r\n\tconst { label, br } = props;\r\n\tconst linebreak = br || false;\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t{label}\r\n\t{linebreak && <br />}\r\n</React.Fragment>\r\n\t\r\n\t);\r\n}\r\n\r\nfunction Component(props) {\r\n\tconst { title, children } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Label label={title} />\r\n\t<div className={classes.component}>\r\n\t\t{children}\r\n\t</div>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\nfunction LevelBody(props) {\r\n\tlet { device, stateKey, stateVal, title, min, max, step, markSteps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\tconst [level, setLevel] = useState(stateVal);\r\n\tuseEffect(() => setLevel(stateVal), [stateVal]);\r\n\t\r\n\tconst onChange = (e, val) => setLevel(val);\r\n\tconst onChangeCommitted = (e, val) => {\r\n\t\tsetLevel(val);\r\n\t\tdevice.setDeviceState(stateKey, val).catch(({ error }) => Log._('Function (defaults)', error.message, 'error', true, error.stack));\r\n\t}\r\n\t\r\n\t// default settings\r\n\tmin = min || 0;\r\n\tmax = max || 100;\r\n\tstep = step || 1;\r\n\tmarkSteps = markSteps || 11; // 0 to 10\r\n\tlet markStep = ((max-min)/(markSteps-1)) || 10;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<Slider\r\n\t\tclasses={{ markLabel: classes.sliderMarkLabel }}\r\n\t\tonChange={onChange}\r\n\t\tonChangeCommitted={onChangeCommitted}\r\n\t\tvalue={level}\r\n\t\tvalueLabelDisplay=\"auto\"\r\n\t\tmarks={[...Array(markSteps).keys()].map(number => ({ 'value': min+number*markStep, 'label': min+number*markStep }))}\r\n\t\tmin={min}\r\n\t\tmax={max}\r\n\t\tstep={step}\r\n\t/>\r\n\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tLabel,\r\n\t\tComponent\r\n\t},\r\n\tbody: {\r\n\t\tLevelBody\r\n\t},\r\n\taction: {\r\n\t\tState,\r\n\t\tSwitchAction,\r\n\t\tButtonAction,\r\n\t\tDropdownAction\r\n\t}\r\n}"],"sourceRoot":""}