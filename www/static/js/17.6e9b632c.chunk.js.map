{"version":3,"sources":["pages/ConfigurationPage/DevicesPage/ComponentConfigPage.js","pages/ConfigurationPage/LayoutsPage/i18n/de.js","pages/ConfigurationPage/LayoutsPage/i18n/en.js","pages/ConfigurationPage/LayoutsPage/Layouts.config.js","pages/ConfigurationPage/LayoutsPage/WidgetPage.js","pages/ConfigurationPage/LayoutsPage/LayoutsPage.js","../node_modules/@material-ui/icons/Devices.js","../node_modules/@material-ui/icons/FormatListBulleted.js","../node_modules/@material-ui/icons/Remove.js","pages/ConfigurationPage/LayoutsPage/i18n sync /^/.*$","../node_modules/@material-ui/icons/Tab.js","../node_modules/@material-ui/icons/Fullscreen.js"],"names":["ComponentConfig","React","memo","props","Log","_","_onClose","_onChange","id","config","attributes","useState","open","setOpen","useEffect","undefined","componentConfiguration","Object","keys","map","configKey","configOption","val","_translate","info","otherConfigOption","label","i18n","t","selection","Tag","Inputs","type","key","divider","disableTypography","container","spacing","item","width","inputProps","style","textAlign","onChange","header","actions","Button","variant","onClick","color","dense","maxWidth","fullWidth","disablePadding","useStyles","makeStyles","theme","iconContainer","display","alignItems","iconCentered","verticalAlign","marginRight","noPadding","padding","alignRight","justifyContent","marginLeft","height","lineHeight","title","Badge","right","transform","sticky","position","backgroundColor","palette","background","default","top","zIndex","_merge","require","_copy","WidgetPage","classes","errors","setErrors","EDITOR","useRef","widget","decryptAllPasswords","current","then","decrypted","onClose","_onSave","useCallback","action","err","ModuleConfigurations","module","forEach","field","required","parameter","moduleConfig","values","indexOf","prevErrors","encryptAllPasswords","onSave","deviceIndex","nextErrors","error","devices","split","replace","_validate","xs","index","onDelete","startIcon","className","disabled","length","SectionWidget","editor","SectionModule","configItems","WidgetsConfig","params","hideOn","FieldsetItem","columns","Fieldset","get","setModule","Text","autoComplete","autoHighlight","options","ModuleList","ModuleConfig","moduleSettings","ModuleSettings","moduleConfigurations","ModuleDevices","push","hide","Input","description","ModuleConfiguration","marginBottom","createElement","FieldsetLegend","setDevices","setError","_addItem","device","deviceId","name","nextDevices","_editItem","_deleteItem","splice","deviceOptions","sortArray","deviceIdList","withinGroup","renderedDevices","i","deviceStates","states","bodyStateKey","primaryStateKey","Device","errorMessage","disableCloseOnSelect","clearOnSelect","clearOnBlur","getOptionLabel","option","function","manufacturer","renderOption","state","added","filter","badgeContent","badge","fontSize","paddingLeft","devicesStates","requiredStates","Array","isArray","some","join","groupBy","closeIcon","popupIcon","centered","onEnter","clearOnEnter","onDragEnd","res","source","destination","droppableId","provided","snapshot","ref","innerRef","minHeight","droppableProps","root","placeholder","componentConfig","setComponentConfig","stateKey","DeviceIcon","Actions","DeviceActionsConfiguration","selectable","Select","_key","secondaryStateKey","lastUpdateOption","Switch","lastUpdate","element","componentsOptions","userConfig","c","uuid","JSON","stringify","draggableId","clsx","drag","isDragging","draggableProps","dragHandleProps","substr","lastIndexOf","icon","DeviceBodyConfiguration","tabs","tab","columnContainer","marginTop","column","margin","borderRight","borderLeft","DialogActions","cursor","userSelect","hover","selected","setTranslations","language","LayoutsPage","layout","_setLayout","setter","cb","_onLayoutsChange","drawers","drawer","drawerIndex","toLowerCase","Drawer","prevProps","nextProps","lastAddedTab","setDrawer","isFirstRun","prevLayout","nextLayout","newTabId","newTabElement","document","getElementById","scrollTop","offsetTop","_deleteTab","tabIndex","prevDrawer","nextDrawer","_moveTab","event","stopPropagation","moveKeyInArray","DragTab","LayoutsConfig","tabsHideLabels","settings","sourceTab","destinationTab","sourceColumn","destinationColumn","_fullscreen","Tab","setTab","_changeTab","prevTab","nextTab","_deleteColumn","columnIndex","widgetsInFirstColumn","tabColumnsNodes","widgets","DragColumn","fullscreen","tabIcon","onBlur","tabTitle","tabFullscreen","tabsWidgetsEdges","widgetsEdges","direction","isDropDisabled","isDragDisabled","Column","setColumn","selectedWidget","setSelectedWidget","tabColumnWidgetsNodes","_openWidget","_moveWidget","target","_setDrawer","removed","widgetIndex","DragWidget","prevColumn","nextColumn","primary","button","size","Widget","Fragment","_interopRequireDefault","_interopRequireWildcard","defineProperty","exports","value","_default","d","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","resolve"],"mappings":"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","file":"static/js/17.6e9b632c.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Info from '../../../components/Info'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n}));\r\n */\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst ComponentConfig = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER ComponentConfig', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onClose, _onChange, id, config, attributes } = props;\r\n\t\r\n\tconst [open,setOpen] = useState(false);\r\n\tconst onClose = () => {\r\n\t\tsetOpen(false)\r\n\t\t_onClose();\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetOpen(config !== null);\r\n\t}, [config]);\r\n\t\r\n\tif (id === null || config === null || config === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// component configuration\r\n\tconst componentConfiguration = Object.keys(config).map(configKey => {\r\n\t\tlet configOption = config[configKey];\r\n\t\tconfigOption = typeof configOption === 'object' ? configOption : { 'label': configKey, 'val': configOption.val !== undefined ? configOption.val : configOption }\r\n\t\tlet { _translate, info, ...otherConfigOption } = configOption;\r\n\t\t\r\n\t\totherConfigOption.label = configOption.label || configKey;\r\n\t\totherConfigOption.label = _translate ? i18n.t(configOption.label) : configOption.label;\r\n\t\totherConfigOption.val = _translate ? i18n.t(configOption.val) : configOption.val;\r\n\t\totherConfigOption.selection = typeof otherConfigOption.selection === 'function' ? otherConfigOption.selection(props) : otherConfigOption.selection;\r\n\t\t\r\n\t\tconst Tag = Inputs[configOption.type || 'Text'];\r\n\t\treturn (\r\n\t\t\t<ListItem key={'Config-' + configKey} divider>\r\n\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t<Grid item><Info info={info} /></Grid>\r\n\t\t\t\t\t\t<Grid item><Typography>{i18n.t(otherConfigOption.label)}</Typography></Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t\t\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<Tag\r\n\t\t\t\t\t\tkey={'componentConfig.' + id + '.' + configKey}\r\n\t\t\t\t\t\tid={'componentConfig.' + id + '.' + configKey}\r\n\t\t\t\t\t\t{...otherConfigOption}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel=''\r\n\t\t\t\t\t\twidth={180}\r\n\t\t\t\t\t\tinputProps={{\r\n\t\t\t\t\t\t\tstyle: { textAlign: 'right' }\r\n\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={(props, val) => _onChange(props, val, attributes)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Component configuration')}\r\n\t\t\tactions={\r\n\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={onClose} color=\"primary\" label=\"Apply\" />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='xs'\r\n\t\t\tfullWidth={true}\r\n\t\t\topen={open}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<List dense disablePadding>\r\n\t\t\t\t{componentConfiguration}\r\n\t\t\t</List>\r\n\t\t</Dialog>\r\n\t);\r\n});\r\n\r\nexport default ComponentConfig;\r\n","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Layout#tabsHideLabels#label\": \"Tab Labels nicht anzeigen (nur Icons)\",\r\n\t\"config#Layout#tabsHideLabels#info\": \"Zeigt nur die Icons im Tab und nicht die Labels\",\r\n\t\"config#Layout#tabIcon#label\": \"Tab Icon\",\r\n\t\"config#Layout#tabTitle#label\": \"Tab Titel\",\r\n\t\"config#Layout#tabFullscreen#label\": \"Tab als Vollbild\",\r\n\t\"config#Layout#tabFullscreen#info\": \"Vollbild kann nur bei einem Tab mit nur einer Spalte und nur einem eingestellten Widget aktiviert werden\",\r\n\t\"config#Layout#tabsWidgetsEdges#label\": \"Widget Ecken (rund oder eckig)\",\r\n\t\"config#Layout#tabsWidgetsEdges#info\": \"Die Ecke des Widgets rund (false) oder eckig (true)\",\r\n\t\r\n\t\"config#Layout#widgetModule#label\": \"Modul zur Anzeige der Geräte\",\r\n\t\"config#Layout#widgetFullscreen#label\": \"Inhalte als Vollbild\",\r\n\t\"config#Layout#widgetFullscreen#info\": \"Die Inhalte nehmen die komplette größe des Widgets ein (Titel und Icon wird ausgeblendet)\",\r\n\t\"config#Layout#widgetTitle#label\": \"Titel der Widget-Box\",\r\n\t\"config#Layout#widgetJustification#label\": \"Ausrichtung des Inhalts\",\r\n\t\"config#Layout#widgetJustification#info\": \"Legt fest wie der Inhalt ausgerichtet ist. Entweder linksbündig, mittig oder rechtsbündig.\",\r\n\t\"config#Layout#widgetJustification#select#left\": \"linksbündig\",\r\n\t\"config#Layout#widgetJustification#select#center\": \"mittig / zentriert\",\r\n\t\"config#Layout#widgetJustification#select#right\": \"rechtsbündig\",\r\n\t\"config#Layout#widgetMinHeight#label\": \"Mindest-Höhe\",\r\n\t\"config#Layout#widgetMaxHeight#label\": \"Maximal-Höhe\",\r\n\t\"config#Layout#height#info\": \"Es kann ein beliebiges absolutes (z. B. px), oder relatives (z. B. vh) Längenmaß genutzt werden. Ein relatives Längenmaß ist für ein responsive Design zu empfehlen, welches sowohl auf Desktop als auch mobil genutzt wird.\",\r\n\t\"config#Layout#widgetScaleContents#label\": \"Skaliere Inhalte\",\r\n\t\"config#Layout#widgetScaleContents#info\": \"Skaliere die Inhalte, um der Höhe zu entsprechen (an) oder zeige Scrollbalken (aus)\",\r\n\t\"config#Layout#widgetIcon#label\": \"Icon der Widget-Box\",\r\n\t\"config#Layout#widgetIcon#info\": \"Material Icon (klick zur Ansicht aller Icons)\",\r\n\t\"config#Layout#widgetIconStyle#label\": \"Icon style der Widget-Box\",\r\n\t\r\n\t// Component\r\n\t\"Component configuration\": \"Komponenten Konfiguration\",\r\n\t\"Module Configuration\": \"Modul Konfiguration\",\r\n\t\"No configuration available for this module\": \"Keine Konfiguration für dieses Modul vorhanden\",\r\n\t\"Assigned Devices\": \"zugeordnete Geräte\",\r\n\t\"add device\": \"Gerät hinzufügen\",\r\n\t\"add group\": \"Gruppe hinzufügen\",\r\n\t\"add divider\": \"Trennstreifen\",\r\n\t\"add tab\": \"Tab hinzufügen\",\r\n\t\"add column\": \"Spalte hinzufügen\",\r\n\t\"move column\": \"Spalte schieben\",\r\n\t\"delete column\": \"Spalte löschen\",\r\n\t\"add widget\": \"Widget hinzufügen\",\r\n\t\"Widget configuration\": \"Widget Konfiguration\",\r\n\t\"Delete Widget\": \"Widget löschen\",\r\n\t\"Widget-Box\": \"Widget-Box\",\r\n\t\"Module\": \"Modul\",\r\n\t\"Devices\": \"Geräte\",\r\n\t\r\n\t\"Primary State Key\": \"primärer Datenpunkt\",\r\n\t\"Secondary State Key\": \"sekundärer Datenpunkt\",\r\n\t\"Show State\": \"zeige Wert\",\r\n\t\r\n\t\"or\": \"oder\",\r\n\t\"none\": \"keine\",\r\n\t\"divider\": \"Trennstreifen\",\r\n\t\r\n\t\"No component selected\": \"keine Komponente ausgewählt\",\r\n\t\"No option selected\": \"keine Komponente ausgewählt\",\r\n\t\"Device needs one of the following states\": \"Das Gerät benötigt einen der folgenden Datenpunkte\"\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Layout#tabsHideLabels#label\": \"Hide tab labels (only show icons)\",\r\n\t\"config#Layout#tabsHideLabels#info\": \"Show only icons within a tab, not the label\",\r\n\t\"config#Layout#tabIcon#label\": \"Tab Icon\",\r\n\t\"config#Layout#tabTitle#label\": \"Tab Title\",\r\n\t\"config#Layout#tabFullscreen#label\": \"Tab Fullscreen\",\r\n\t\"config#Layout#tabFullscreen#info\": \"Fullscreen can only be enabled on a tab setup with only a single column and only a single widget\",\r\n\t\"config#Layout#tabsWidgetsEdges#label\": \"Widgets edges (round or angled)\",\r\n\t\"config#Layout#tabsWidgetsEdges#info\": \"The edge of the widget box either round (false) or angled (true)\",\r\n\t\r\n\t\"config#Layout#widgetModule#label\": \"Modul to display the devices\",\r\n\t\"config#Layout#widgetFullscreen#label\": \"Widget fullscreen\",\r\n\t\"config#Layout#widgetFullscreen#info\": \"The content will fill the whole size of the widget (title and icon will be hidden)\",\r\n\t\"config#Layout#widgetTitle#label\": \"Title of the widget-box\",\r\n\t\"config#Layout#widgetJustification#label\": \"Content Alignment\",\r\n\t\"config#Layout#widgetJustification#info\": \"Specify how the content of the widget is aligned. Either left, centered or right.\",\r\n\t\"config#Layout#widgetJustification#select#left\": \"Left\",\r\n\t\"config#Layout#widgetJustification#select#center\": \"Centered\",\r\n\t\"config#Layout#widgetJustification#select#right\": \"Right\",\r\n\t\"config#Layout#widgetMinHeight#label\": \"Minimum height\",\r\n\t\"config#Layout#widgetMaxHeight#label\": \"Maximum height\",\r\n\t\"config#Layout#height#info\": \"You may use any absolute (e.g. px) or relative (e.g. vh) unit. A relative unit is recommended for a responsive design, which shall fit both desktop and mobile resolutions.\",\r\n\t\"config#Layout#widgetScaleContents#label\": \"Scale contents\",\r\n\t\"config#Layout#widgetScaleContents#info\": \"Scale contents to fit height (true) or display scroll bars (false)\",\r\n\t\"config#Layout#widgetIcon#label\": \"Icon of the widget-box\",\r\n\t\"config#Layout#widgetIcon#info\": \"Material Icon (click to view all icons)\",\r\n\t\"config#Layout#widgetIconStyle#label\": \"Icon style of the widget-box\"\r\n}","\r\nexport default {\r\n\t\"tabsHideLabels\": {\r\n\t\t\"label\": \"config#Layout#tabsHideLabels#label\",\r\n\t\t\"info\": \"config#Layout#tabsHideLabels#info\",\r\n\t\t\"type\": \"Switch\",\r\n\t\t\"val\": false\r\n\t},\r\n\t\"tabIcon\": {\r\n\t\t\"label\": \"config#Layout#tabIcon#label\",\r\n\t\t\"type\": \"Text\",\r\n\t},\r\n\t\"tabTitle\": {\r\n\t\t\"label\": \"config#Layout#tabTitle#label\",\r\n\t\t\"type\": \"Text\",\r\n\t},\r\n\t\"tabFullscreen\": {\r\n\t\t\"width\": 150,\r\n\t\t\"label\": \"config#Layout#tabFullscreen#label\",\r\n\t\t\"info\": \"config#Layout#tabFullscreen#info\",\r\n\t\t\"type\": \"Switch\",\r\n\t\t\"val\": false\r\n\t},\r\n\t\"tabsWidgetsEdges\": {\r\n\t\t\"label\": \"config#Layout#tabsWidgetsEdges#label\",\r\n\t\t\"info\": \"config#Layout#tabsWidgetsEdges#info\",\r\n\t\t\"type\": \"Switch\",\r\n\t\t\"val\": false\r\n\t}\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\r\nimport { v5 as uuid } from 'uuid'\r\n\r\nimport config from '../../../config/config'\r\nimport WidgetsConfig from './Widgets.config'\r\nimport { encryptAllPasswords, decryptAllPasswords } from '../../../helpers/encryption'\r\nimport { sortArray } from '../../../helpers/utils'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\n//import Devices from '../../../controller/Devices'\r\nimport { ModuleList, ModuleConfigurations, ModuleSettings } from '../../../modules/'\r\nimport { componentsOptions } from '../../../functions'\r\n\r\nimport Badge from '@material-ui/core/Badge'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport DevicesIcon from '@material-ui/icons/Devices'\r\nimport DividerIcon from '@material-ui/icons/Remove'\r\nimport GroupIcon from '@material-ui/icons/FormatListBulleted'\r\n\r\nimport ComponentConfig from '../DevicesPage/ComponentConfigPage'\r\nimport Dialog from '../../../components/Dialog'\r\nimport Icon from '../../../components/Icon'\r\nimport Inputs from '../../../components/Inputs'\r\nimport Placeholder from '../../../components/Placeholder'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\ticonContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center'\r\n\t},\r\n\ticonCentered: {\r\n\t\tverticalAlign: 'middle',\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\tnoPadding: {\r\n\t\tpadding: 0,\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t},\r\n\theight: {\r\n\t\tlineHeight: '45px'\r\n\t},\r\n\ttitle: {\r\n\t\tlineHeight: '25px'\r\n\t},\r\n\tBadge: {\r\n\t\tright: 'unset',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tsticky: {\r\n\t\tposition: 'sticky',\r\n\t\tbackgroundColor: theme.palette.background.default,\r\n\t\ttop: -16,\r\n\t\tzIndex: 1\r\n\t}\r\n}));\r\n\r\n\r\nconst _merge = require('deepmerge');\r\nconst _copy = require('rfdc')();\r\nconst WidgetPage = props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [errors,setErrors] = useState({});\r\n\tconst EDITOR = useRef(_copy({ 'moduleConfig': {}, 'devices': [], ...props.widget }));\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tdecryptAllPasswords(EDITOR.current).then(decrypted => EDITOR.current = decrypted);\r\n\t\t\r\n\t}, []);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onClose = () => {\r\n\t\tEDITOR.current = null;\r\n\t\tprops.onClose();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onSave = useCallback(action => {\r\n\t\t\r\n\t\t// errors\r\n\t\tconst requiredFields = [{ 'parameter': 'title', 'required': true }, { 'parameter': 'module', 'required': true }];\r\n\t\tlet err = {};\r\n\t\t\r\n\t\t[ ...requiredFields, ...(ModuleConfigurations[EDITOR.current.module] || []) ].forEach(field => {\r\n\t\t\tif (field.required === true && !EDITOR.current[field.parameter] && !EDITOR.current.moduleConfig[field.parameter]) {\r\n\t\t\t\terr[field.parameter] = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (Object.values(err).indexOf(true) > -1) {\r\n\t\t\tsetErrors(prevErrors => ({ ...prevErrors, ...err }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// encrypt passwords and save\r\n\t\tencryptAllPasswords(EDITOR.current).then(props.onSave);\r\n\t\t\r\n\t}, [props.onSave]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onChange = useCallback((props, val, deviceIndex) => {\r\n\t\t\r\n\t\t// error handler\r\n\t\tsetErrors(prevErrors => {\r\n\t\t\tlet nextErrors = { ...prevErrors }\r\n\t\t\t\r\n\t\t\t// error occured\r\n\t\t\tif (props.error && props.error !== prevErrors[props.id]) {\r\n\t\t\t\tnextErrors[props.id] = props.error;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// no error -> remove old error\r\n\t\t\telse if (!props.error && prevErrors[props.id]) {\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn nextErrors;\r\n\t\t});\r\n\t\t\r\n\t\t// device\r\n\t\tif (deviceIndex !== undefined) {\r\n\t\t\tEDITOR.current.devices = EDITOR.current.devices || [];\r\n\t\t\tEDITOR.current.devices[deviceIndex] = EDITOR.current.devices[deviceIndex] || {}\r\n\t\t\t\r\n\t\t\tif (props.id.indexOf('componentConfig.') > -1) {\r\n\t\t\t\tconst [,key,id] = props.id.split('.');\r\n\t\t\t\t\r\n\t\t\t\tEDITOR.current.devices[deviceIndex][key] = EDITOR.current.devices[deviceIndex][key] || {}\r\n\t\t\t\tEDITOR.current.devices[deviceIndex][key][id] = val;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tEDITOR.current.devices[deviceIndex][props.id] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// converted nested IDs to object\r\n\t\telse if (props.id.indexOf('moduleConfig.') > -1) {\r\n\t\t\tEDITOR.current.moduleConfig[props.id.replace('moduleConfig.', '')] = val;\r\n\t\t}\r\n\t\t\r\n\t\t// set value\r\n\t\telse {\r\n\t\t\tEDITOR.current[props.id] = val;\r\n\t\t}\r\n\t\t\r\n\t}, []);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _validate = useCallback((key, val) => {\r\n\t\t_onChange({ error: !val, id: key }, val || '');\r\n\t}, [_onChange]);\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst mount = () => _validate('title', props.widget.title); // trigger initial validation\r\n\tuseEffect(mount, []);\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tif (props.widget === null) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Widget configuration')}\r\n\t\t\tactions={\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t\t{props.widget.index !== undefined && <Inputs.Button key='action-delete' variant=\"text\" onClick={() => props.onDelete(props.widget.index)} color=\"secondary\" startIcon={<DeleteIcon />} label=\"Delete Widget\" />}\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t\t<Inputs.Button key=\"action-cancel\" variant=\"text\" onClick={_onClose} color=\"secondary\" label=\"Cancel\" />\r\n\t\t\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={_onSave} color=\"primary\" disabled={Object.keys(errors).length > 0} label=\"Apply\" />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth={false}\r\n\t\t\tfullWidth={true}\r\n\t\t\topen={true}\r\n\t\t\tonClose={_onClose}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<SectionWidget\r\n\t\t\t\t{...props}\r\n\t\t\t\t_onChange={_onChange}\r\n\t\t\t\t_validate={_validate}\r\n\t\t\t\teditor={EDITOR.current}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<SectionModule\r\n\t\t\t\t{...props}\r\n\t\t\t\t_onChange={_onChange}\r\n\t\t\t\teditor={EDITOR.current}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n\r\nexport default WidgetPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst SectionWidget = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER SectionWidget', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange, editor } = props;\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst configItems = Object.values(WidgetsConfig).map(params => {\r\n\t\tconst Tag = Inputs[params.type || 'Text'];\r\n\t\t\r\n\t\tdelete params.hideOn;\r\n\t\treturn (\r\n\t\t\t<Inputs.FieldsetItem key={'key-' + params.parameter} columns={params.columns || 2}>\r\n\t\t\t\t<Tag\r\n\t\t\t\t\t{...params}\r\n\t\t\t\t\tid={params.parameter}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\tval={editor[params.parameter] !== undefined ? editor[params.parameter] : (params.val || '')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Inputs.Fieldset label='Widget-Box'>\r\n\t\t\t{configItems}\r\n\t\t</Inputs.Fieldset>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst SectionModule = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER SectionModule', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange, editor } = props;\r\n\t\r\n\tconst [module,setModule] = useState(editor.module || config.get('DEFAULT_MODULE'));\r\n\t\r\n\treturn (\r\n\t\t<Inputs.Fieldset label='Module'>\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='module'\r\n\t\t\t\t\tid='module'\r\n\t\t\t\t\t\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tlabel=\"config#Layout#widgetModule#label\"\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={module}\r\n\t\t\t\t\toptions={ModuleList}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t_onChange(props, val);\r\n\t\t\t\t\t\tsetModule(val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t<ModuleConfig\r\n\t\t\t\t{...props}\r\n\t\t\t\tmoduleSettings={(module && ModuleSettings[module]) || {}}\r\n\t\t\t\tmoduleConfigurations={(module && ModuleConfigurations[module]) || []}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<ModuleDevices\r\n\t\t\t\t{...props}\r\n\t\t\t\tmoduleSettings={(module && ModuleSettings[module]) || {}}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Inputs.Fieldset>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst ModuleConfig = props => {\r\n\tLog._('WidgetPage', 'RENDER ModuleConfig', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange, moduleSettings, moduleConfigurations, editor } = props;\r\n\t\r\n\t//\r\n\tconst [errors,setErrors] = useState({});\r\n\tuseEffect(() => {\r\n\t\tconst keys = Object.keys(errors);\r\n\t\tif (keys.length > 0) {\r\n\t\t\tkeys.forEach(key => _onChange({ error: true, id: key }, ''));\r\n\t\t}\r\n\t\t\r\n\t}, [errors, _onChange]);\r\n\t\r\n\t// get module configuration options\r\n\tlet moduleConfig = [];\r\n\t\r\n\tif (moduleConfigurations.length > 0) {\r\n\t\tmoduleConfig.push(moduleConfigurations.map(config => {\r\n\t\t\t\r\n\t\t\tif (config.hide) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// get selection options\r\n\t\t\tif (typeof config.selection === 'function') {\r\n\t\t\t\tconfig.selection = config.selection();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// consider required fields\r\n\t\t\tif (!errors['moduleConfig.' + config.parameter] && config.required === true && !(editor.moduleConfig[config.parameter] || config.val)) {\r\n\t\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t\t...prevErrors,\r\n\t\t\t\t\t['moduleConfig.' + config.parameter]: true\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// render config option\r\n\t\t\tconst Input = Inputs[config.type || 'Text'];\r\n\t\t\treturn (\r\n\t\t\t\t<Inputs.FieldsetItem columns={config.columns || 3} key={'ModuleConfiguration-' + config.parameter}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\t{...config}\r\n\t\t\t\t\t\tkey={'moduleConfig-' + config.parameter}\r\n\t\t\t\t\t\tid={'moduleConfig.' + config.parameter}\r\n\t\t\t\t\t\tlabel={config.label || config.parameter}\r\n\t\t\t\t\t\tinfo={config.description}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\tval={editor.moduleConfig[config.parameter] !== undefined ? editor.moduleConfig[config.parameter] : config.val}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t);\r\n\t\t}));\r\n\t}\r\n\t\r\n\tif (moduleSettings.ModuleConfiguration !== undefined) {\r\n\t\tmoduleConfig.push(\r\n\t\t\t<Grid key=\"CustomModuleConfiguration\" item xs={12}>\r\n\t\t\t\t<Divider style={{ marginBottom: 8 }} />\r\n\t\t\t\t{React.createElement(moduleSettings.ModuleConfiguration, { 'options': editor.moduleConfig, '_onChange': _onChange })}\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n\t\r\n\tif (moduleConfig.length === 0) {\r\n\t\tmoduleConfig = (\r\n\t\t\t<Inputs.FieldsetItem key=\"noModuleConfiguration\" noPadding>\r\n\t\t\t\t<Typography>{i18n.t('No configuration available for this module')}.</Typography>\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn [\r\n\t\t<Inputs.FieldsetItem key=\"ModuleConfiguration\" noPadding>\r\n\t\t\t<Inputs.FieldsetLegend label='Module Configuration' variant=\"h4\" divider={false} />\r\n\t\t</Inputs.FieldsetItem>,\r\n\t\tmoduleConfig\r\n\t];\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst ModuleDevices = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER SectionDevices', 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _onChange, moduleSettings, editor } = props;\r\n\t\r\n\tconst [devices,setDevices] = useState(editor.devices || []);\r\n\tconst [error,setError] = useState('');\r\n\t\r\n\tif (!moduleSettings.devices) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addItem = (type, val) => {\r\n\t\tlet device = { type: type }\r\n\t\t\r\n\t\t// add device\r\n\t\tif (type === 'device') {\r\n\t\t\tdevice.deviceId = val.id;\r\n\t\t}\r\n\t\t\r\n\t\t// add group\r\n\t\telse if (type === 'group') {\r\n\t\t\tdevice.name = val;\r\n\t\t}\r\n\t\t\r\n\t\t// next devices\r\n\t\tlet nextDevices = [\r\n\t\t\t...devices,\r\n\t\t\tdevice\r\n\t\t];\r\n\t\t\r\n\t\tsetError('');\r\n\t\tsetDevices(nextDevices);\r\n\t\t_onChange({ id: 'devices' }, nextDevices);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _editItem = (index, props, val) => _onChange(props, val, index);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteItem = index => {\r\n\t\t\r\n\t\t// next devices\r\n\t\tlet nextDevices = [ ...devices ];\r\n\t\tnextDevices.splice(index, 1);\r\n\t\t\r\n\t\tsetDevices(nextDevices);\r\n\t\t_onChange({ id: 'devices' }, nextDevices);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onDragEnd = res => {\r\n\t\t\r\n\t\tif (res.source && res.destination && res.source.index !== res.destination.index) {\r\n\t\t\t\r\n\t\t\t// next devices\r\n\t\t\tlet nextDevices = [ ...devices ];\r\n\t\t\tnextDevices.splice(res.destination.index, 0, nextDevices.splice(res.source.index, 1)[0]);\r\n\t\t\t\r\n\t\t\tsetDevices(nextDevices);\r\n\t\t\t_onChange({ id: 'devices' }, nextDevices);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\tconst deviceOptions = sortArray(sortArray(Object.values(props.devices), 'name'), 'function');\r\n\tconst deviceIdList = devices.map(device => device.deviceId);\r\n\t\r\n\tlet withinGroup = false;\r\n\tconst renderedDevices = devices.map((device, i) => {\r\n\t\tconst deviceStates = Object.keys(device.states || {});\r\n\t\tconst bodyStateKey = device.bodyStateKey !== undefined ? device.bodyStateKey : (device.primaryStateKey || (deviceStates && deviceStates[0]) || null);\r\n\t\t\r\n\t\tif (device.type === 'group') {\r\n\t\t\twithinGroup = true;\r\n\t\t}\r\n\t\telse if (device.type === 'divider') {\r\n\t\t\twithinGroup = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Device\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={device.type + '- ' + (device.deviceId || device.name) + '-' + i}\r\n\t\t\t\t_addItem={_addItem}\r\n\t\t\t\t_editItem={_editItem}\r\n\t\t\t\t_deleteItem={_deleteItem}\r\n\t\t\t\tdevice={props.devices[device.deviceId] || null}\r\n\t\t\t\toptions={{\r\n\t\t\t\t\t'label': (bodyStateKey && device.states && device.states[bodyStateKey] && device.states[bodyStateKey].label) || '',\r\n\t\t\t\t\t...device,\r\n\t\t\t\t\t'index': i\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\twithinGroup={withinGroup}\r\n\t\t\t\tdevices={devices}\r\n\t\t\t\t/>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Inputs.FieldsetItem noPadding>\r\n\t\t\t\t<Inputs.FieldsetLegend label='Assigned Devices' variant=\"h4\" divider={false} />\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset noPadding>\t\r\n\t\t\t\t<Inputs.Fieldset noPadding className={classes.sticky}>\t\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\twidth=\"90%\"\r\n\t\t\t\t\t\t\tkey='addDevice'\r\n\t\t\t\t\t\t\tid='addDevice'\r\n\t\t\t\t\t\t\tlabel='Add device'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\terror={error !== ''}\r\n\t\t\t\t\t\t\terrorMessage={error}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tautoComplete\r\n\t\t\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\t\tdisableCloseOnSelect\r\n\t\t\t\t\t\t\tclearOnSelect\r\n\t\t\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\toptions={deviceOptions}\r\n\t\t\t\t\t\t\tgetOptionLabel={option => i18n.t(option.function) + ' ' + option.name + (!option.attributes || !option.attributes.manufacturer ? '' : ' (' + option.attributes.manufacturer.name + ')')}\r\n\t\t\t\t\t\t\trenderOption={(option, state) => {\r\n\t\t\t\t\t\t\t\tconst added = deviceIdList.indexOf(option.id) > -1 ? deviceIdList.filter(device => device === option.id).length : 0;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Badge badgeContent={added} classes={{ badge: classes.Badge }} color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t<span style={{ fontSize: '0.8rem', paddingLeft: '24px' }}>{added > 0 ? <strong>{option.name}</strong> : option.name}</span>\r\n\t\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={(props, device) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// check if an item has been selected\r\n\t\t\t\t\t\t\t\tif (device) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// verify if device has certain state, if required by the module\r\n\t\t\t\t\t\t\t\t\tconst states = Object.keys(device.states || {});\r\n\t\t\t\t\t\t\t\t\tif (moduleSettings.devicesStates && moduleSettings.devicesStates.requiredStates && Array.isArray(moduleSettings.devicesStates.requiredStates) && moduleSettings.devicesStates.requiredStates.some(state => states.indexOf(state) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tsetError(i18n.t('Device needs one of the following states') + ': ' + moduleSettings.devicesStates.requiredStates.join(', '));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t_addItem('device', device);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tgroupBy={option => i18n.t(option.function)}\r\n\t\t\t\t\t\t\tcloseIcon={null}\r\n\t\t\t\t\t\t\tpopupIcon={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t{Array.isArray(moduleSettings['devices']) && moduleSettings['devices'].indexOf('group') > -1 && [\r\n\t\t\t\t\t<Inputs.FieldsetItem key=\"orGroup\" columns={1} centered>\r\n\t\t\t\t\t\t<em>{i18n.t('or')}</em>\r\n\t\t\t\t\t</Inputs.FieldsetItem>,\r\n\t\t\t\t\t<Inputs.FieldsetItem key=\"addGroup\" columns={3}>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\twidth=\"90%\"\r\n\t\t\t\t\t\t\tkey='addGroup'\r\n\t\t\t\t\t\t\tid='addGroup'\r\n\t\t\t\t\t\t\tlabel='Add group'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonEnter={(props, val) => val && _addItem('group', val)}\r\n\t\t\t\t\t\t\tclearOnEnter\r\n\t\t\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>]}\r\n\t\t\t\t\t\r\n\t\t\t\t\t{Array.isArray(moduleSettings['devices']) && moduleSettings['devices'].indexOf('divider') > -1 && [\r\n\t\t\t\t\t<Inputs.FieldsetItem key=\"orDivider\" columns={1} centered>\r\n\t\t\t\t\t\t<em>{i18n.t('or')}</em>\r\n\t\t\t\t\t</Inputs.FieldsetItem>,\r\n\t\t\t\t\t<Inputs.FieldsetItem key=\"addDivider\" columns={3}>\r\n\t\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\t\tkey='addDivider'\r\n\t\t\t\t\t\t\tid='addDivider'\r\n\t\t\t\t\t\t\tlabel='Add divider'\r\n\t\t\t\t\t\t\tonClick={() => _addItem('divider')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>]}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t<DragDropContext onDragEnd={_onDragEnd}>\r\n\t\t\t\t\t\t<Droppable\r\n\t\t\t\t\t\t\tkey=\"dropList\"\r\n\t\t\t\t\t\t\tdroppableId=\"dropList\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tminHeight: 50\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<List classes={{ root: classes.fullWidth }} dense disablePadding>\r\n\t\t\t\t\t\t\t\t\t{renderedDevices}\r\n\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t</DragDropContext>\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst Device = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER Device', 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _editItem, _deleteItem, devices, device, options, moduleSettings } = props;\r\n\t\r\n\t//\r\n\tconst [componentConfig,setComponentConfig] = useState(null);\r\n\tconst deviceStates = device && device.states && Object.keys(device.states || {}).map(stateKey => ({ '_key': stateKey, '_translated': true, [stateKey]: device.states[stateKey].label || stateKey }));\r\n\t\r\n\t//\r\n\tlet Device = options.deviceId;\r\n\tlet DeviceIcon = <DevicesIcon classes={{ root: classes.iconCentered }} />\r\n\tlet Actions = null;\r\n\t\r\n\t//\r\n\tif (options.type === 'device' && device !== null) {\r\n\t\tDevice = <span className={classes.title}>{device.name + ' (' + i18n.t(device.function) + ', #' + device.id + ')'}</span>\r\n\t\t\r\n\t\tif (!moduleSettings.DeviceActionsConfiguration) {\r\n\t\t\tActions = (!moduleSettings.devicesStates || (moduleSettings.devicesStates && moduleSettings.devicesStates.selectable !== false)) && <Grid container spacing={1}>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{(!moduleSettings.devicesStates || !moduleSettings.devicesStates.selectable || (moduleSettings.devicesStates.selectable && moduleSettings.devicesStates.selectable.indexOf('primaryStateKey') > -1)) &&\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tid=\"primaryStateKey\"\r\n\t\t\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel='Primary State Key'\r\n\t\t\t\t\t\t\tselection={deviceStates}\r\n\t\t\t\t\t\t\tval={options.primaryStateKey !== undefined ? options.primaryStateKey : device.primaryStateKey}\r\n\t\t\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t\t\tval = typeof val === 'object' ? val[val._key] : val;\r\n\t\t\t\t\t\t\t\t_editItem(options.index, props, val);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={moduleSettings.devicesStates && moduleSettings.devicesStates.disabled && moduleSettings.devicesStates.disabled.indexOf('primaryStateKey') > -1}\r\n\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{(!moduleSettings.devicesStates || !moduleSettings.devicesStates.selectable || (moduleSettings.devicesStates.selectable && moduleSettings.devicesStates.selectable.indexOf('secondaryStateKey') > -1)) ?\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tid=\"secondaryStateKey\"\r\n\t\t\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel='Secondary State Key'\r\n\t\t\t\t\t\t\tselection={[ { '': i18n.t('none') }, ...deviceStates ]}\r\n\t\t\t\t\t\t\tval={options.secondaryStateKey !== undefined ? options.secondaryStateKey : device.secondaryStateKey}\r\n\t\t\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t\t\tval = typeof val === 'object' ? val[val._key] : val;\r\n\t\t\t\t\t\t\t\t_editItem(options.index, props, val);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={moduleSettings.devicesStates && moduleSettings.devicesStates.disabled && moduleSettings.devicesStates.disabled.indexOf('secondaryStateKey') > -1}\r\n\t\t\t\t\t\t\t/> :\r\n\t\t\t\t\t\t<Placeholder width={150} />}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{moduleSettings.devicesStates && moduleSettings.devicesStates.lastUpdateOption === true &&\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\tid=\"lastUpdate\"\r\n\t\t\t\t\t\t\tlabel='Display Last Update'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval={options.lastUpdate !== undefined ? options.lastUpdate : true}\r\n\t\t\t\t\t\t\tonChange={(props, val) => _editItem(options.index, props, val)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>}\r\n\t\t\t\t</Grid>\r\n\t\t}\r\n\t}\r\n\telse if (options.type === 'group') {\r\n\t\tDeviceIcon = <GroupIcon classes={{ root: classes.iconCentered }} />\r\n\t\tDevice = <span className={classes.title}>{options.name}</span>\r\n\t}\r\n\telse if (options.type === 'divider') {\r\n\t\tDeviceIcon = <DividerIcon classes={{ root: classes.iconCentered }} />\r\n\t\tDevice = <em className={classes.title}>{'(' + i18n.t('divider') + ')'}</em>\r\n\t}\r\n\t\r\n\t//\r\n\tconst deviceOptions = {\r\n\t\t'device': device || {},\r\n\t\t'deviceStates': deviceStates,\r\n\t\t'options': { ...devices[options.index] || options, 'withinGroup': props.withinGroup },\r\n\t\t'elements': { DeviceIcon, Device, Actions },\r\n\t\t\r\n\t\t'onChange': (props, val) => _editItem(options.index, props, val),\r\n\t\t'onConfig': (id, stateKey, element) => {\r\n\t\t\tlet config = _merge(\r\n\t\t\t\tcomponentsOptions['_defaults'][element] || {},\r\n\t\t\t\t(componentsOptions[device.function] && componentsOptions[device.function][element]) || {}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t// apply user specific values\r\n\t\t\tconst userConfig = _merge(\r\n\t\t\t\t(device && device.states && device.states[stateKey] && device.states[stateKey][element + 'Config']) || {},\r\n\t\t\t\toptions[element + 'Config'] || {}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tObject.keys(userConfig).forEach(key => {\r\n\t\t\t\tlet [,c] = key.indexOf('-') > -1 ? key.split('-') : ['', key];\r\n\t\t\t\tconfig[c] = typeof config[c] !== 'object' ? { 'val': config[c] } : config[c];\r\n\t\t\t\tconfig[c].val = userConfig[stateKey + '-' + c] || userConfig[c] || config[c].val;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tsetComponentConfig({ id, device, config, 'attributes': { stateKey, element } });\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\tkey={'uuid-' + uuid(JSON.stringify(device) + '_' + JSON.stringify(deviceOptions.options), '4eaf6392-6a70-4802-b343-5ff1a1673f39')}\r\n\t\t\tdraggableId={'device-' + options.deviceId + '-' + options.index}\r\n\t\t\tindex={options.index}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{(provided, snapshot) => (\r\n\t\t\t<div\r\n\t\t\t\tclassName={clsx(classes.drag, snapshot.isDragging && classes.isDragging)}\r\n\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<ComponentConfig\r\n\t\t\t\t\t_onClose={() => setComponentConfig(null)}\r\n\t\t\t\t\t_onChange={(props, val, attributes) => {\r\n\t\t\t\t\t\tconst key = attributes.stateKey + '-' + props.id.substr(props.id.lastIndexOf('.')+1);\r\n\t\t\t\t\t\tconst id = attributes.element + 'Config';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptions[id] = options[id] || {}\r\n\t\t\t\t\t\toptions[id][key] = val;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t_editItem(options.index, { ...props, 'id': 'componentConfig.' + id + '.' + key }, val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t{...componentConfig || {}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<ListItem divider classes={{ container: classes.height }}>\r\n\t\t\t\t\t<Grid container item xs={1}>\r\n\t\t\t\t\t\t<div className={classes.iconContainer}>\r\n\t\t\t\t\t\t\t<Icon style={{ fontSize: '1.5em' }} icon=\"mdi:drag\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IconButton onClick={() => _deleteItem(options.index)}>\r\n\t\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid container item xs={5}>\r\n\t\t\t\t\t\t{moduleSettings.DeviceBodyConfiguration ? React.createElement(moduleSettings.DeviceBodyConfiguration, deviceOptions) : <>{DeviceIcon} {Device}</>}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid container item xs={6}>\r\n\t\t\t\t\t\t{moduleSettings.DeviceActionsConfiguration ? React.createElement(moduleSettings.DeviceActionsConfiguration, deviceOptions) : Actions}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</ListItem>\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Draggable>\r\n\t);\r\n});\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport clsx from 'clsx'\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\nimport config from '../../../config/config'\r\nimport LayoutsConfig from './Layouts.config'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\nimport { moveKeyInArray } from '../../../helpers/utils'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\nimport TabIcon from '@material-ui/icons/Tab'\r\n\r\nimport Icon from '../../../components/Icon'\r\nimport Inputs from '../../../components/Inputs'\r\nimport WidgetPage from './WidgetPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabs: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\ttab: {\r\n\t\tpadding: theme.spacing(3, 2),\r\n\t},\r\n\ticonContainer: {\r\n\t\talignItems: 'center'\r\n\t},\r\n\tcolumnContainer: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t},\r\n\tcolumn: {\r\n\t\twidth: 250,\r\n\t\tmargin: theme.spacing(1, 1),\r\n\t\tborderRight: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t\tborderLeft: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t},\r\n\tDialogActions: {\r\n\t\tjustifyContent: 'initial'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t},\r\n\tdrag: {\r\n\t\tcursor: 'grab !important',\r\n\t\tuserSelect: 'none',\r\n\t\t\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: theme.palette.action.hover,\r\n\t\t}\r\n\t},\r\n\tisDragging: {\r\n\t\tbackgroundColor: theme.palette.action.selected,\r\n\t}\r\n}));\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nconst LayoutsPage = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER LayoutsPage', 'development');\r\n\t\r\n\tconst layout = useRef(Array.isArray(props.layout) && props.layout.length > 0 ? [ ...props.layout ] : [{ title: '', tabs: [] }]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _setLayout = (setter, cb = null) => {\r\n\t\tlayout.current = setter(layout.current);\r\n\t\tcb && cb();\r\n\t\t\r\n\t\tprops._onLayoutsChange(layout.current);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst drawers = layout.current.map((drawer, drawerIndex) => {\r\n\t\t\r\n\t\tif (!drawer) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tdrawer.id = drawer.title.toLowerCase().replace(/ /g, '') + drawerIndex;\r\n\t\treturn (\r\n\t\t\t<Drawer\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={'Drawer-' + drawer.id} \r\n\t\t\t\t_setLayout={_setLayout}\r\n\t\t\t\tlayout={layout.current}\r\n\t\t\t\tdrawer={{ ...drawer, index: drawerIndex, id: drawer.id }}\r\n\t\t\t\t/>\r\n\t\t);\r\n\t});\r\n\t\t\r\n\treturn (\r\n\t\t<Paper>\r\n\t\t\t{drawers}\r\n\t\t</Paper>\r\n\t)\r\n\t\r\n}, (prevProps, nextProps) => nextProps.selected !== true); // re-render on false (not equal), only render when selected\r\n\r\nexport default LayoutsPage;\r\n\r\n\r\n/*\r\n * DRAWER\r\n */\r\nconst Drawer = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Drawer ' + props.drawer.id, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _setLayout } = props;\r\n\t\r\n\tconst lastAddedTab = useRef(null);\r\n\tconst [drawer,setDrawer] = useState(props.drawer || {});\r\n\t\r\n\t/*\r\n\t * apply changes to layout\r\n\t */\r\n\tconst isFirstRun = useRef(true);\r\n\tuseEffect(() => {\r\n\t\tisFirstRun.current === false && _setLayout(prevLayout => {\r\n\t\t\tlet nextLayout = [ ...prevLayout || [] ];\r\n\t\t\tnextLayout[drawer.index] = drawer;\r\n\t\t\treturn nextLayout;\r\n\t\t});\r\n\t\t\r\n\t\tisFirstRun.current = false;\r\n\t\t\r\n\t\t// new tab\r\n\t\tconst newTabId = 'Drawer-' + drawer.id + '-Tab-' + i18n.t('add tab').toLowerCase().replace(/ /g, '') + (drawer.tabs.length-1);\r\n\t\tconst newTabElement = document.getElementById(newTabId);\r\n\t\t\r\n\t\tif (newTabElement && newTabId !== lastAddedTab.current) {\r\n\t\t\tdocument.getElementById('DialogContent').scrollTop = newTabElement.offsetTop;\r\n\t\t\tlastAddedTab.current = newTabId;\r\n\t\t}\r\n\t\t\r\n\t}, [_setLayout, drawer]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addTab = d => {\r\n\t\t\r\n\t\tsetDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\tnextDrawer.tabs.push({\r\n\t\t\t\tid: uuid(),\r\n\t\t\t\ttitle: i18n.t('add tab'),\r\n\t\t\t\ticon: 'home',\r\n\t\t\t\tcolumns: [[]]\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteTab = tabIndex => {\r\n\t\t\r\n\t\tsetDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\tnextDrawer.tabs.splice(tabIndex, 1);\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _moveTab = (action, tabIndex) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tsetDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\tnextDrawer.tabs = moveKeyInArray([ ...nextDrawer.tabs || [] ], tabIndex, action);\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onDragEnd = res => {\r\n\t\t\r\n\t\tif (!res.source || !res.destination) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// TAB\r\n\t\tif (res.type === 'TAB') {\r\n\t\t\t\r\n\t\t\tif (res.source.index !== res.destination.index) {\r\n\t\t\t\t\r\n\t\t\t\tsetDrawer(prevDrawer => {\r\n\t\t\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\t\t\tnextDrawer.tabs.splice(res.destination.index, 0, nextDrawer.tabs.splice(res.source.index, 1)[0]);\r\n\t\t\t\t\treturn nextDrawer;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// COLUMN\r\n\t\telse if (res.type === 'COLUMN') {\r\n\t\t\tconst [, sourceTab ] = res.source.droppableId.split('#');\r\n\t\t\tconst [, destinationTab ] = res.destination.droppableId.split('#');\r\n\t\t\t\r\n\t\t\tif (sourceTab !== destinationTab || res.source.index !== res.destination.index) {\r\n\t\t\t\tsetDrawer(prevDrawer => {\r\n\t\t\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst column = nextDrawer.tabs[sourceTab].columns[res.source.index];\r\n\t\t\t\t\tnextDrawer.tabs[sourceTab].columns.splice(res.source.index, 1);\r\n\t\t\t\t\tnextDrawer.tabs[destinationTab].columns.splice(res.destination.index, 0, column);\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn nextDrawer;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// WIDGET\r\n\t\telse if (res.type === 'WIDGET') {\r\n\t\t\tconst [, source ] = res.source.droppableId.split('#');\r\n\t\t\tconst [ sourceTab, sourceColumn ] = source.split('-');\r\n\t\t\t\r\n\t\t\tconst [, destination ] = res.destination.droppableId.split('#');\r\n\t\t\tconst [ destinationTab, destinationColumn ] = destination.split('-');\r\n\t\t\t\r\n\t\t\tif (sourceTab !== destinationTab || sourceColumn !== destinationColumn || res.source.index !== res.destination.index) {\r\n\t\t\t\t\r\n\t\t\t\tsetDrawer(prevDrawer => {\r\n\t\t\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\t\t\tlet widget = null;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// remove widget\r\n\t\t\t\t\t// fullscreen\r\n\t\t\t\t\tif (nextDrawer.tabs[sourceTab]._fullscreen !== undefined) {\r\n\t\t\t\t\t\twidget = nextDrawer.tabs[sourceTab]._fullscreen;\r\n\t\t\t\t\t\tnextDrawer.tabs[sourceTab]._fullscreen = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// columns\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\twidget = nextDrawer.tabs[sourceTab].columns[sourceColumn][res.source.index];\r\n\t\t\t\t\t\tnextDrawer.tabs[sourceTab].columns[sourceColumn].splice(res.source.index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// add widget\r\n\t\t\t\t\t// fullscreen\r\n\t\t\t\t\tif (nextDrawer.tabs[destinationTab]._fullscreen !== undefined) {\r\n\t\t\t\t\t\tnextDrawer.tabs[destinationTab]._fullscreen = widget;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// columns\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tnextDrawer.tabs[destinationTab].columns[destinationColumn].splice(res.destination.index, 0, widget);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn nextDrawer;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// tabs per drawer\r\n\tconst tabs = drawer.tabs.map((tab, tabIndex) => {\r\n\t\t\r\n\t\tif (!tab) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\ttab.columns = tab.columns || [];\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<DragTab\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={'Tab-' + tab.id} \r\n\t\t\t\ttab={{ ...tab, 'index': tabIndex, 'id': tab.title.toLowerCase().replace(/ /g, '') + tabIndex }}\r\n\t\t\t\t_moveTab={_moveTab}\r\n\t\t\t\t_deleteTab={_deleteTab}\r\n\t\t\t\t/>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<List className={classes.tabs} key={'Drawer-' + drawer.id} id={'Drawer-' + drawer.id}>\r\n\t\t\t<ListItem divider classes={{ root: classes.tab }}>\r\n\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t<TabIcon />\r\n\t\t\t\t</ListItemIcon>\r\n\t\t\t\t<ListItemText disableTypography={true}>\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item><Inputs.Button key='addTabs' id='addTabs' label='add tab' onClick={() => _addTab(drawer)} /></Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\t\tkey='tabsHideLabels'\r\n\t\t\t\t\t\t\t\tid='tabsHideLabels'\r\n\t\t\t\t\t\t\t\t{...LayoutsConfig.tabsHideLabels}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tonChange={({ id }, val) => props._onLayoutsChange(null, { [id]: val })}\r\n\t\t\t\t\t\t\t\tval={props.settings['tabsHideLabels']}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem>\r\n\t\t\t<DragDropContext onDragEnd={_onDragEnd}>\r\n\t\t\t\t<Droppable\r\n\t\t\t\t\tkey={drawer.id}\r\n\t\t\t\t\ttype=\"TAB\"\r\n\t\t\t\t\tdroppableId={'drawer_' + drawer.id + '#'}\r\n\t\t\t\t\t//isDropDisabled={!(tab._fullscreen === undefined || (tab._fullscreen !== undefined && column.widgets.length < 1))}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tminHeight: 50\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{tabs}\r\n\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Droppable>\r\n\t\t\t</DragDropContext>\r\n\t\t</List>\r\n\t)\r\n});\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst DragTab = props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\tkey={props.tab.id}\r\n\t\t\tdraggableId={props.tab.id}\r\n\t\t\tindex={props.tab.index}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{(provided, snapshot) => (\r\n\t\t\t<div\r\n\t\t\t\tclassName={clsx(classes.drag, snapshot.isDragging && classes.isDragging)}\r\n\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Tab {...props} />\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Draggable>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst Tab = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Tab ' + props.tab.id, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _setLayout, drawer } = props;\r\n\t\r\n\tconst [tab,setTab] = useState(props.tab || {});\r\n\t\r\n\t/*\r\n\t * apply changes to layout\r\n\t */\r\n\tconst isFirstRun = useRef(true);\r\n\tuseEffect(() => {\r\n\t\tisFirstRun.current === false && _setLayout(prevLayout => {\r\n\t\t\tlet nextLayout = [ ...prevLayout || [] ];\r\n\t\t\tnextLayout[drawer.index].tabs[tab.index] = tab;\r\n\t\t\treturn nextLayout;\r\n\t\t});\r\n\t\t\r\n\t\tisFirstRun.current = false;\r\n\t}, [_setLayout, drawer.index, tab]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _changeTab = (drawerIndex, tabIndex) => ({ id }, val) => {\r\n\t\tid = id.substr(0, id.indexOf('-'));\r\n\t\t\r\n\t\t// edit tab fullscreen option\r\n\t\tif (id === 'fullscreen') {\r\n\t\t\t\r\n\t\t\tsetTab(prevTab => {\r\n\t\t\t\tlet nextTab = { ...prevTab }\r\n\t\t\t\t\r\n\t\t\t\tif (nextTab._fullscreen !== undefined) {\r\n\t\t\t\t\tnextTab.columns = [\r\n\t\t\t\t\t\t[ nextTab._fullscreen ]\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tdelete nextTab._fullscreen;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnextTab._fullscreen = (nextTab.columns && nextTab.columns[0] && nextTab.columns[0][0]) || null;\r\n\t\t\t\t\tdelete nextTab.columns;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn nextTab;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// any other information\r\n\t\telse if (tab[id] !== val) {\r\n\t\t\t\r\n\t\t\tsetTab(prevTab => ({\r\n\t\t\t\t...prevTab,\r\n\t\t\t\t[id]: val\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addColumn = () => {\r\n\t\t\r\n\t\tsetTab(prevTab => {\r\n\t\t\tlet nextTab = { ...prevTab || {} }\r\n\t\t\tnextTab.columns.push([]);\r\n\t\t\treturn nextTab;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _deleteColumn = columnIndex => {\r\n\t\t\r\n\t\tsetTab(prevTab => {\r\n\t\t\tlet nextTab = { ...prevTab || {} }\r\n\t\t\tnextTab.columns.splice(columnIndex, 1);\r\n\t\t\treturn nextTab;\r\n\t\t});\r\n\t}\r\n\t\r\n\t// columns per tab\r\n\tlet columns = 1;\r\n\tlet widgetsInFirstColumn = (tab.columns && tab.columns[1] && tab.columns[1].length) || 0;\r\n\tlet tabColumnsNodes = [];\r\n\t\r\n\t// tab is fullscreen\r\n\tif (tab._fullscreen !== undefined) {\r\n\t\tconst column = {\r\n\t\t\tkey: uuid(),\r\n\t\t\tindex: 'fullscreen',\r\n\t\t\twidgets: tab._fullscreen ? [ tab._fullscreen ] : []\r\n\t\t}\r\n\t\t\r\n\t\tcolumn.id = column.id || column.key;\r\n\t\ttabColumnsNodes.push(\r\n\t\t\t<DragColumn\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={'Column-' + column.key}\r\n\t\t\t\t_changeTab={_changeTab}\r\n\t\t\t\tcolumn={column}\r\n\t\t\t\ttab={tab}\r\n\t\t\t\tfullscreen\r\n\t\t\t\t/>\r\n\t\t);\r\n\t}\r\n\t\r\n\t// tab divided in columns\r\n\telse {\r\n\t\tcolumns = tab.columns.length;\r\n\t\ttabColumnsNodes = tab.columns.map((widgets, columnIndex) => {\r\n\t\t\tconst column = {\r\n\t\t\t\tkey: uuid(),\r\n\t\t\t\tindex: columnIndex,\r\n\t\t\t\twidgets\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumn.id = column.id || column.key;\r\n\t\t\treturn (\r\n\t\t\t\t<DragColumn\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tkey={'Column-' + column.key}\r\n\t\t\t\t\t_deleteColumn={_deleteColumn}\r\n\t\t\t\t\tcolumn={column}\r\n\t\t\t\t\ttab={tab}\r\n\t\t\t\t\t/>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem\r\n\t\t\tid={'Drawer-' + drawer.id + '-Tab-' + tab.id}\r\n\t\t\tdivider={tab.index !== (props.layout[drawer.index].tabs.length-1)}\r\n\t\t\tclasses={{ root: classes.tab }}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<Icon style={{ fontSize: '1.8em' }} icon=\"mdi:drag\" />\r\n\t\t\t\t\r\n\t\t\t\t<IconButton onClick={() => props._deleteTab(tab.index)}>\r\n\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText disableTypography={true}>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\tkey={'Input-tabIcon-' + tab.id}\r\n\t\t\t\t\t\t\tid={'icon-' + tab.index}\r\n\t\t\t\t\t\t\t{...LayoutsConfig.tabIcon}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonBlur={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\t\tval={tab.icon || ''}\r\n\t\t\t\t\t\t\ticon={tab.icon ? tab.icon.replace('mdi-', '') : ''}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\tkey={'Input-tabTitle-' + tab.id}\r\n\t\t\t\t\t\t\tid={'title-' + tab.index}\r\n\t\t\t\t\t\t\t{...LayoutsConfig.tabTitle}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonBlur={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\t\tval={tab.title || ''}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\t\tkey={'Input-tabAddColumn-' + tab.id}\r\n\t\t\t\t\t\t\tid={'tabAddColumn-' + tab.index}\r\n\t\t\t\t\t\t\tlabel='add column'\r\n\t\t\t\t\t\t\tdisabled={tab._fullscreen !== undefined}\r\n\t\t\t\t\t\t\tonClick={_addColumn}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\tkey={'Input-tabFullscreen-' + tab.id}\r\n\t\t\t\t\t\t\tid={'fullscreen-' + tab.index}\r\n\t\t\t\t\t\t\t{...LayoutsConfig.tabFullscreen}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdisabled={(columns > 1 || widgetsInFirstColumn > 1)}\r\n\t\t\t\t\t\t\tonChange={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\t\tval={tab._fullscreen !== undefined}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\tkey='tabsWidgetsEdges'\r\n\t\t\t\t\t\t\tid={'widgetsEdges-' + tab.index}\r\n\t\t\t\t\t\t\t{...LayoutsConfig.tabsWidgetsEdges}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdisabled={!(columns > 1 || widgetsInFirstColumn > 1)}\r\n\t\t\t\t\t\t\tonChange={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\t\tval={tab.widgetsEdges !== undefined ? tab.widgetsEdges : LayoutsConfig.tabsWidgetsEdges.val}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Droppable\r\n\t\t\t\t\tkey={tab.id}\r\n\t\t\t\t\ttype=\"COLUMN\"\r\n\t\t\t\t\tdroppableId={'tab_'  + tab.id + '#' + tab.index}\r\n\t\t\t\t\tdirection=\"horizontal\"\r\n\t\t\t\t\tisDropDisabled={tab._fullscreen !== undefined}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t\t\tkey={'Tab-' + tab.id + '-ColumnContainer'}\r\n\t\t\t\t\t\tclasses={{ root: classes.columnContainer }}\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tminHeight: 50\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{tabColumnsNodes}\r\n\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Droppable>\r\n\t\t\t</ListItemText>\r\n\t\t</ListItem>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DragColumn = props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\tkey={props.column.id}\r\n\t\t\tdraggableId={props.column.id + '#' + props.tab.index}\r\n\t\t\tindex={props.fullscreen !== undefined ? 0 : props.column.index}\r\n\t\t\tisDragDisabled={props.fullscreen !== undefined}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{(provided, snapshot) => (\r\n\t\t\t<Grid\r\n\t\t\t\tclasses={{ root: clsx(classes.column, classes.drag, snapshot.isDragging && classes.isDragging) }}\r\n\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\titem\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Column {...props} />\r\n\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t</Draggable>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst Column = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Column ' + props.column.index, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _setLayout, drawer, tab } = props;\r\n\t\r\n\tconst [column,setColumn] = useState(props.column);\r\n\tconst [selectedWidget,setSelectedWidget] = useState(null);\r\n\t\r\n\t/*\r\n\t * apply changes to layout\r\n\t */\r\n\tconst isFirstRun = useRef(true);\r\n\tuseEffect(() => {\r\n\t\tisFirstRun.current === false && _setLayout(prevLayout => {\r\n\t\t\tlet nextLayout = [ ...prevLayout || [] ];\r\n\t\t\t\r\n\t\t\t// fullscreen\r\n\t\t\tif (column.index === 'fullscreen') {\r\n\t\t\t\tnextLayout[drawer.index].tabs[tab.index]._fullscreen = column.widgets[0];\r\n\t\t\t\tdelete nextLayout[drawer.index].tabs[tab.index].columns;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// column\r\n\t\t\telse {\r\n\t\t\t\tnextLayout[drawer.index].tabs[tab.index].columns[column.index] = column.widgets;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn nextLayout;\r\n\t\t});\r\n\t\t\r\n\t\tisFirstRun.current = false;\r\n\t}, [_setLayout, drawer.index, tab.index, column]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _openWidget = widget => setSelectedWidget(widget);\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _saveWidget = widget => {\r\n\t\tconst widgetIndex = widget.index;\r\n\t\tdelete widget.index;\r\n\t\twidget.id = widget.id || uuid();\r\n\t\t\r\n\t\t// save widget\r\n\t\tsetSelectedWidget(null);\r\n\t\tsetColumn(prevColumn => {\r\n\t\t\tlet nextColumn = { ...prevColumn || {} }\r\n\t\t\t\r\n\t\t\t// fullscreen\r\n\t\t\tif (column.index === 'fullscreen') {\r\n\t\t\t\tnextColumn.widgets[0] = widget;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// column\r\n\t\t\telse {\r\n\t\t\t\t// modify existing\r\n\t\t\t\tif (widgetIndex >= 0) {\r\n\t\t\t\t\tnextColumn.widgets[widgetIndex] = widget;\r\n\t\t\t\t}\r\n\t\t\t\t// add new\r\n\t\t\t\telse {\r\n\t\t\t\t\tnextColumn.widgets.push(widget);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn nextColumn;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _deleteWidget = widgetIndex => {\r\n\t\tsetSelectedWidget(null);\r\n\t\tsetColumn(prevColumn => {\r\n\t\t\tlet nextColumn = { ...prevColumn || {} }\r\n\t\t\tnextColumn.widgets.splice(widgetIndex, 1);\r\n\t\t\treturn nextColumn;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _moveWidget = (widget, source, target) => {\r\n\t\tprops._setDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\t\r\n\t\t\t// delete at source\r\n\t\t\tconst removed = nextDrawer.tabs[source.tabIndex].columns[source.columnIndex].splice(source.widgetIndex, 1);\r\n\t\t\t\r\n\t\t\t// insert at target\r\n\t\t\tnextDrawer.tabs[target.tabIndex].columns[target.columnIndex].splice(target.widgetIndex, 0, removed[0]);\r\n\t\t\t\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t// components per tab\r\n\tlet tabColumnWidgetsNodes = [];\r\n\ttabColumnWidgetsNodes = column.widgets.map((widget, index) => {\r\n\t\t\r\n\t\tif (widget !== null) {\r\n\t\t\twidget.index = index;\r\n\t\t\twidget.module = widget.module || config.get('DEFAULT_MODULE');\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<DragWidget\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tkey={'Widget-' + widget.id}\r\n\t\t\t\t\twidget={widget}\r\n\t\t\t\t\t_moveWidget={_moveWidget}\r\n\t\t\t\t\t_openWidget={_openWidget}\r\n\t\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{selectedWidget !== null && (\r\n\t\t\t\t<WidgetPage\r\n\t\t\t\t\tdevices={props.devices}\r\n\t\t\t\t\twidget={selectedWidget}\r\n\t\t\t\t\tonSave={_saveWidget}\r\n\t\t\t\t\tonDelete={_deleteWidget}\r\n\t\t\t\t\tonClose={() => setSelectedWidget(null)}\r\n\t\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t\r\n\t\t\t<List>\r\n\t\t\t\t{tab._fullscreen === undefined && <>\r\n\t\t\t\t<ListItem divider dense>\r\n\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t<Icon style={{ fontSize: '1.5em', margin: '0 3px' }} icon=\"mdi:drag\" />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t<ListItemText primary={i18n.t('move column')} />\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<ListItem onClick={() => props._deleteColumn(column.index)} button divider dense>\r\n\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t<ListItemText primary={i18n.t('delete column')} />\r\n\t\t\t\t</ListItem></>}\r\n\t\t\t\t\r\n\t\t\t\t{(tab._fullscreen === undefined || (tab._fullscreen !== undefined && column.widgets.length < 1)) && <ListItem onClick={() => _openWidget({ module: config.get('DEFAULT_MODULE') })} button divider dense>\r\n\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t<ListItemText primary={i18n.t('add widget')} />\r\n\t\t\t\t</ListItem>}\r\n\t\t\t\t\r\n\t\t\t\t<Droppable\r\n\t\t\t\t\tkey={column.id}\r\n\t\t\t\t\ttype=\"WIDGET\"\r\n\t\t\t\t\tdroppableId={'widget_'  + column.id + '#' + tab.index + '-' + column.index}\r\n\t\t\t\t\tisDropDisabled={!(tab._fullscreen === undefined || (tab._fullscreen !== undefined && column.widgets.length < 1))}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tminHeight: 50\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t{tabColumnWidgetsNodes}\r\n\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Droppable>\r\n\t\t\t</List>\r\n\t\t</>\r\n\t);\r\n\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DragWidget = props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\tkey={props.widget.id}\r\n\t\t\tdraggableId={props.widget.id + '#' + props.tab.index + '-' + props.column.index}\r\n\t\t\tindex={props.widget.index}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{(provided, snapshot) => (\r\n\t\t\t<div\r\n\t\t\t\tclassName={clsx(classes.drag, snapshot.isDragging && classes.isDragging)}\r\n\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Widget {...props} />\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Draggable>\r\n\t);\r\n}\r\n\r\nconst Widget = props => {\r\n\tLog._('LayoutsPage', 'RENDER Widget ' + props.widget.index, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { widget } = props;\r\n\t\r\n\treturn (\r\n\t\t<ListItem\r\n\t\t\tkey={'widget-' + widget.id}\r\n\t\t\t\r\n\t\t\tonClick={() => props._openWidget(widget)}\r\n\t\t\tdivider\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{props.tab._fullscreen ?\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<FullscreenIcon />\r\n\t\t\t</ListItemIcon>\r\n\t\t\t\t:\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<Icon style={{ fontSize: '1.5em' }} icon=\"mdi:drag\" />\r\n\t\t\t</ListItemIcon>}\r\n\t\t\t\r\n\t\t\t<ListItemText primary={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Typography display=\"block\">{widget.title}</Typography>\r\n\t\t\t\t\t<Typography variant=\"subtitle2\">({widget.module})</Typography>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t} />\r\n\t\t\t\r\n\t\t</ListItem>\r\n\t);\r\n\r\n}\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4V6zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-1 9h-4v-7h4v7z\"\n}), 'Devices');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z\"\n}), 'FormatListBulleted');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13H5v-2h14v2z\"\n}), 'Remove');\n\nexports.default = _default;","var map = {\n\t\"./de\": 1361,\n\t\"./de.js\": 1361,\n\t\"./en\": 1362,\n\t\"./en.js\": 1362\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1469;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z\"\n}), 'Tab');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n}), 'Fullscreen');\n\nexports.default = _default;"],"sourceRoot":""}