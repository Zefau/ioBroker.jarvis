{"version":3,"sources":["helpers/timeConverter.js","modules/StateListItem.js","modules/StateList.js","functions/door/door.js","functions/heating/heating.js","functions/location/location.js","functions/user/user.js","functions/window/window.js","helpers/colorConverter.js","functions/light/light.js","functions/blind/blind.js","functions/blind/blind-manufacturers.js","functions/blind/index.js","functions/blind/blind.de.js","functions/blind/blind.en.js","functions/door/door.de.js","functions/door/door.en.js","functions/heating/heating.de.js","functions/heating/heating.en.js","Settings.js","functions/light/light.de.js","functions/light/light.en.js","functions/location/location.de.js","functions/location/location.en.js","functions/user/user.de.js","functions/user/user.en.js","functions/window/window.de.js","functions/window/window.en.js","modules/AdapterStatus.js","modules/Chart.js","modules/DateTime.js","modules/Map.js","modules/StateListHorizontal.js","modules/Weather.js","modules/MultimediaItem.js","modules/Multimedia.js","i18n sync /^/.*/.js$","i18n/de.js","i18n/en.js","functions/blind sync /^/blind/..*$","functions/door/index.js","functions/door sync /^/door/..*$","functions/heating/index.js","functions/heating sync /^/heating/..*$","functions/light/index.js","functions/defaults.js","Socket.js","Connection.js","functions/light sync /^/light/..*$","functions/location/index.js","functions/location sync /^/location/..*$","functions/user/index.js","functions/user sync /^/user/..*$","functions/window/index.js","functions/window sync /^/window/..*$","components/GridContainer.js","components/StatusSnackbar.js","config/config.dev.js","functions/index.js","Function.js","config/adapters.js","Device.js","pages/index.js","components/TopBar.js","helpers/useWindowDimensions.js","components/TabBar.js","components/Notifications.js","modules/index.js","components/Popup.js","components/Widget.js","Jarvis.js","App.js","serviceWorker.js","index.js","components/EnhancedTableToolbar.js","components/EnhancedTableHead.js","components/EnhancedTableBody.js","components/EnhancedTable.js","pages/SettingsPage.js","i18n.js","config/config.js"],"names":["timeToSeconds","time","toString","indexOf","split","length","hours","minutes","seconds","parseInt","timeToHoursMinutesSeconds","withHours","Number","isNaN","Math","floor","substr","join","secondsToDateTime","dateTimeFormat","format","Date","locale","locales","i18n","getLanguage","styles","theme","defaultListDivider","margin","defaultListIcon","props","components","icon","horizontalListItem","display","textAlign","paddingRight","width","marginTop","horizontalListItemIcon","minWidth","horizontalListItemAction","top","right","position","transform","verticalListItemAction","ListItemIconElement","withStyles","customClassNames","children","classes","classNames","Array","isArray","map","className","clsx","StateListItem","stateChange","stateKey","state","device","primaryStateKey","secondaryStateKey","setState","ListItemTextWidth","getDeviceState","ListItemText","React","createRef","ListItemSecondaryAction","this","current","offsetWidth","resizeComponent","listen","unlisten","ListItemSecondaryActionWidth","openDialog","horizontal","component","action","options","get","getIcon","val","value","primaryComponent","getComponent","primaryAction","getAction","secondaryAction","Fragment","divider","ListItem","finger","button","onClick","bind","ListItemIcon","getStyle","ref","disableTypography","primary","getOption","secondary","subtitle","timeChanged","style","flex","key","id","Component","defaultListSectionDivider","defaultListSectionDividerItem","padding","defaultListSectionText","breakpoints","down","horizontalList","flexDirection","flexWrap","ListDivider","getDevicesBySubgroup","subgroup","title","subgroupActions","handleChange","targetStatus","forEach","status","setDeviceState","ButtonGroup","color","size","Button","t","StateList","devices","push","settings","List","dense","i","listSection","listItem","translations","require","default","setTranslation","configurations","open","true","false","lock","actions","temperature","toFixed","unit","setTemperature","humidity","boost","Level","defaults","LevelComponent","min","max","PowerAction","presence","users","location","battery","HsvToRgb","h","r","g","b","f","p","q","s","v","round","RgbToHex","LightColorAction","stateVal","useState","colorSpace","setColorSpace","useEffect","colors","labels","Red","Green","Blue","Hue","Saturation","Brightness","Label","label","br","LightColorComponent","initialColor","helpers","onChangeComplete","e","catch","err","console","error","power","level","colorTemperature","hue","rgb","hsv","hex","step","setHue","hsl","onChange","setChecked","target","checked","parent","states","Action","_any","useStyles","makeStyles","float","lineHeight","marginRight","borderLeftTransparent","borderLeftColor","palette","main","alpha","borderRightTransparent","borderRightColor","borderRightColorSecondary","level2","activity","manufacturer","getActivityType","setLevel","sKey","d","setActivity","requestDeviceState","disabled","Settings","log","setting","language","setLanguage","loadTranslation","pageTitle","document","pageFavicon","getElementById","href","AdapterStatus","adapterInformation","adapterAliveStatus","newUpdates","updatesJson","lastUpdateCheck","socket","Connection","getConnection","list","blacklist","updates","updateStates","getStates","subscribeStates","update","lastIndexOf","getAdapterInstances","instances","rows","adapters","instance","common","name","concat","replace","sort","item1","item2","aliveStatus","prevState","updateList","JSON","parse","Object","keys","adapterList","loading","adapter","enabled","alive","connected","connection","tooltip","alt","src","extIcon","small","version","availableVersion","UpdateAvailable","runAsCompactMode","compactGroup","StatusIndicator","notAlive","root","noUpdates","container","UpdatesListItem","UpdatesIndicator","ModuleSettings","noDevicesAllowed","fontStyle","backgroundColor","spacing","paddingLeft","borderRadius","height","fontSize","Chart","historyChange","history","addChartGraph","axis","getAxis","start","end","updateChartGraph","chartFilter","chartConfig","yAxes","unshift","type","ticks","callback","yLeftAxisUnitBefore","parseFloat","yLeftAxisUnitAfter","errors","datePicker","selectedTimeRangeValue","selectedTimeRangeUnit","selectedDateTime","dateNow","chartLabels","chartData","datasets","chartPan","chartZoom","timer","timeRangeRef","chartRef","chartUpdates","chartOptions","maintainAspectRatio","spanGaps","legend","legendClickHandler","tooltips","callbacks","item","data","datasetIndex","scales","plugins","colorschemes","scheme","zoom","pan","mode","getTimeRange","requestDeviceStateHistory","liveUpdates","prevProps","clearTimeout","setTimeout","getTime","timeRange","axisTimeFormat","prevMarker","markers","marker","index","entry","ts","reduce","a","chartIndex","findIndex","groupChartData","chartInstance","values","prevStates","dataSet","fill","graphConfig","legendItem","ci","meta","getDatasetMeta","hidden","resetZoom","inputRef","input","event","displayEmpty","disableUnderline","select","utils","DateFnsUtils","onOpen","onClose","variant","ampm","InputProps","iconButton","dividerVertical","orientation","placement","buttonDisabled","toolbar","errorMessage","severity","createElement","toolbarButtons","disableElevation","chartHeight","alignItems","justifyContent","marginBottom","whiteSpace","marginLeft","DateTime","refTimer","useRef","setDateTime","city","setCity","sunrise","setSunrise","sunset","setSunset","refresh","getSetting","latitude","longitude","getSunrise","getSunset","sun","mapOverview","left","bottom","zIndex","cursor","mapIconContainer","mapIconParent","boxShadow","mapIcon","content","mapTooltip","Map","defaultZoom","defaultPosition","setMarkers","memoizedMapInitialised","useCallback","memoizedHandleClick","flyTo","prevMarkers","mapMarkers","Marker","attributes","avatar","undefined","aria-label","arrow","useFlyTo","center","whenReady","attribution","url","markerIcon","offset","info","function","L","divIcon","html","iconSize","memoizedHandleMouseEvent","closeTooltip","openTooltip","riseOnHover","onMouseOver","direction","tooltipDirection","permanent","tooltipPermanent","StateListHorizontal","paper","Weather","setData","getRemoteResource","then","response","statusCode","body","weatherForecast","day","forecast","dailyForecast","date","justify","Multimedia","progress","progressTimeout","isRunning","duration","noHeader","styleImage","styleLengthBar","background","backgroundImage","backgroundUrlPrepend","playIconElements","Divider","image","noImage","information","informationLeft","grandParent","informationRight","lengthBar","controls","controlsBox","controlsBoxLeft","controlsBoxCenter","Fab","controlButton","controlsBoxRight","backgroundPosition","minHeight","paddingTop","controlButtonSmall","MultimediaItem","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","module","exports","sliderMarkLabel","parentOnChange","TriggerAction","startIcon","linebreak","markSteps","markStep","markLabel","onChangeCommitted","valueLabelDisplay","marks","number","door","trigger","wind","Socket","io","timeout","query","statesSubscribes","on","emit","attempts","message","reason","ids","cb","subscribeState","cbs","reg","RegExp","task","hasOwnProperty","test","getObjectView","Promise","reject","getObject","obj","design","search","params","getState","pattern","getStateHistory","EventEmitter","listeners","setUrl","setListeners","connect","listener","setListener","window","hostname","gridContainer","GridContainer","contents","columns","grid","column","Grid","xs","sm","md","lg","xl","warn","success","green","dark","warning","amber","iconVariant","opacity","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","StatusSnackbar","autoHideDuration","closeButton","other","Icon","Snackbar","anchorOrigin","vertical","SnackbarContent","IconButton","blind","heating","jalousie","light","user","Function","functionType","functionId","toLowerCase","functions","defaultStyles","_isFunction","defaultValue","Device","deviceProperties","room","_setProperties","stateSubscriptions","stateType","node","config","attribute","stateValKeys","stateValKey","stateValValue","tmp","ignoredStates","ignoredState","hiddenStates","hideStates","hideState","stateOrAttribute","_getStateFromKey","Adapters","groups","group","formatDistanceToNow","lc","includeSeconds","addSuffix","_getConfigurationSetting","pair","option","_getUserSetting","property","forceDefault","stateProperty","deviceState","defaultIcon","eventName","subscribe","responses","_updateDeviceState","subscribeDeviceState","historyCache","res","child","off","appBar","flexGrow","menuButton","transition","flexShrink","userSelect","TopBar","connectionStatus","toggleDrawer","navigate","notifications","connectionStatusIcon","connectionStatusTooltip","AppBar","Toolbar","Typography","Tooltip","getWindowDimensions","innerWidth","innerHeight","paddingBottom","tabs","borderBottom","fixed","indicator","fullscreen","TabBar","selectTab","tabBarProps","tab","setTab","setFixed","handleScroll","threshold","scrollY","prevFixed","offsetTop","offsetHeight","addEventListener","removeEventListener","renderedTabs","Tab","tabsHideLabels","Tabs","selectedTab","TabPanel","renderedTab","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","mapHeight","setMapHeight","topBarHeight","setHidden","Box","role","Notifications","Drawer","anchor","drawer","DialogTitle","grey","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","Popup","forceUpdate","allSettled","nextProps","nextState","closeDialog","Dialog","maxWidth","fullWidth","dividers","autoFocus","card","cardHeaderNoContents","cardAvatar","cardContent","Widget","iconStyle","Card","CardHeader","Avatar","CardContent","getGroup","groupId","Tag","Modules","getGridContents","gridContents","columnContents","Jarvis","tabTitle","page","notificationDrawer","notificationsUnread","dialog","dialogContents","layout","tabsEnabled","widgetProps","filter","notification","unread","tabPanels","tabLabel","tabPanel","now","Page","Pages","topBarTitle","getTabPanels","App","loaded","errorHandler","reconnect","port","protocol","NODES","SETTINGS","setSettings","applySettings","iobroker","DEVICES","processDevices","promises","results","result","deviceList","groupedDevices","deviceId","jarvis","processDevice","groupDevice","CircularProgress","topBar","tabBar","gridColumns","SkeletonLoader","Skeleton","animation","gridItem","loaders","random","loader","renderError","renderLoadingProgress","renderLoadingSkeleton","ThemeProvider","Boolean","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","useToolbarStyles","highlight","lighten","text","EnhancedTableToolbar","numSelected","EnhancedTableHead","headCells","onSelectAllClick","order","orderBy","rowCount","onRequestSort","TableHead","TableRow","TableCell","Checkbox","indeterminate","inputProps","headCell","align","disablePadding","sortDirection","TableSortLabel","active","visuallyHidden","EnhancedTable","pageRows","emptyRows","selected","row","isItemSelected","labelId","hover","aria-checked","tabIndex","scope","colSpan","table","border","clip","overflow","descendingComparator","getComparator","stableSort","array","comparator","stabilizedThis","el","CustomTableBody","pagination","defaultOrder","defaultOrderBy","defaultSelected","defaultPage","defaultRowsPerPage","setOrder","setOrderBy","setSelected","setPage","rowsPerPage","setRowsPerPage","TableBody","EnhancedTableBody","TableContainer","Table","aria-labelledby","newSelecteds","n","slice","selectedIndex","newSelected","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","SettingsPage","handleTabChange","handlePanelChange","panel","isExpanded","handleSwitchChange","userInput","handleTextChange","save","stringify","reload","renderTableForDevices","TextField","MenuItem","FormControl","formControl","InputLabel","Select","FormHelperText","helperText","textField","placeholder","FormControlLabel","control","Switch","renderSettingForText","renderSettingForSwitch","renderSettingForSelect","renderSetting","ExpansionPanel","expanded","ExpansionPanelSummary","expandIcon","heading","description","secondaryHeading","ExpansionPanelDetails","panels","renderPanel","dialogContent","Paper","square","indicatorColor","textColor","rawEditor","multiline","typography","pxToRem","flexBasis","fontFamily","de","languages","translation","isoLong","word","placeholders","parts","shift","ucFirst","charAt","toUpperCase","userLanguage","pageSettings","en","tabSettings","themeSettings","themeColorPrimary","themeColorSecondary"],"mappings":"6HAoDe,KACdA,cA9CD,SAAuBC,GAEtB,GAAIA,EAAKC,WAAWC,QAAQ,MAAQ,EAAG,CAEtC,IAFsC,GACtCF,EAAOA,EAAKC,YACME,MAAM,KAAKC,OAAO,EACO,EAAIJ,EAAKG,MAAM,MAAQ,KAAOH,GAAMG,MAAM,KAH/C,mBAGhCE,EAHgC,KAGzBC,EAHyB,KAGhBC,EAHgB,KAItCP,EAAyB,KAAlBQ,SAASH,GAAoC,GAApBG,SAASF,GAAgBE,SAASD,GAGnE,OAAOC,SAASR,IAsChBS,0BA/BD,SAAmCT,GAA0B,IAApBU,EAAmB,wDAE3D,GAAIV,EAAKC,WAAWC,QAAQ,MAAQ,EACnC,OAAOF,EAMR,GAHAA,EAAOQ,SAASR,GAChBU,EAAYA,GAAcV,EAAO,KAE7BW,OAAOC,MAAMZ,GAChB,OAAOU,EAAY,WAAa,QAGjC,IAAIL,EAAQ,IAAMQ,KAAKC,MAAMd,EAAK,MAC9BM,EAAU,IAAMO,KAAKC,MAAMd,EAAK,IAChCO,EAAU,IAAOP,EAAO,GAE5B,OAAOU,EAAY,CAAEL,EAAMU,QAAQ,GAAIT,EAAQS,QAAQ,GAAIR,EAAQQ,QAAQ,IAAKC,KAAK,KAAO,CAAEV,EAAQS,QAAQ,GAAIR,EAAQQ,QAAQ,IAAKC,KAAK,MAe5IC,kBARD,SAA2BV,GAAkD,IAAzCW,EAAwC,uDAAvB,sBACpD,OAAOC,YAAO,IAAIC,KAAa,IAARb,GAAeW,EAAgB,CAAEG,OAAQC,IAAQC,IAAKC,oB,+LCnCxEC,EAAS,SAAAC,GAAK,MAAK,CACxBC,mBAAoB,CACnBC,OAAQ,aAETC,gBAAiB,SAAAC,GAAK,sBAClBJ,EAAMK,WAAWC,KADC,GAElBF,EAAML,SAEVQ,mBAAoB,CACnBC,QAAS,eACTC,UAAW,SACXC,aAAc,OACdC,MAAO,QACPC,UAAW,QAEZC,uBAAwB,CACvBC,SAAU,QAEXC,yBAA0B,CACzBN,UAAW,SACXO,IAAK,EACLC,MAAO,EACPC,SAAU,SACVC,UAAW,QAEZC,uBAAwB,CACvBX,UAAW,WAKPY,EAAsBC,YAAWvB,EAAXuB,EAAmB,SAAAlB,GAAU,IAChDmB,EAAwCnB,EAAxCmB,iBAAkBC,EAAsBpB,EAAtBoB,SAAUC,EAAYrB,EAAZqB,QAEhCC,EAAaC,MAAMC,QAAQL,GAAoBA,EAAmB,CAACA,GAGvE,OAFAG,EAAaA,EAAWG,KAAI,SAAAC,GAAS,OAAKL,EAAQK,GAAaL,EAAQK,GAAaA,KAE7E,0BAAMA,UAAWC,YAAKL,IAAcF,MAItCQ,E,YAEL,WAAY5B,GAAQ,IAAD,8BAClB,4CAAMA,KAgCP6B,YAAc,SAACC,EAAUC,GACpBD,IAAa,EAAK9B,MAAMgC,OAAOC,iBAAmBH,IAAa,EAAK9B,MAAMgC,OAAOE,mBACpF,EAAKC,SAAL,eAAiBL,EAAWC,KAhC7B,EAAKA,MAAQ,CACZK,kBAAmB,QAGpB,EAAKL,MAAM,EAAK/B,MAAMgC,OAAOC,iBAAmB,EAAKjC,MAAMgC,OAAOK,kBAAoB,GAElF,EAAKrC,MAAMgC,OAAOE,oBACrB,EAAKH,MAAM,EAAK/B,MAAMgC,OAAOE,mBAAqB,EAAKlC,MAAMgC,OAAOK,eAAe,EAAKrC,MAAMgC,OAAOE,oBAAsB,IAG5H,EAAKI,aAAeC,IAAMC,YAC1B,EAAKC,wBAA0BF,IAAMC,YAdnB,E,iFAkBlBE,KAAKN,kBAAoBrD,KAAKC,MAAM0D,KAAKJ,aAAaK,QAAQC,aAC9DF,KAAKG,kBAGLH,KAAK1C,MAAMgC,OAAOc,OAAOJ,KAAKb,e,6CAI9Ba,KAAK1C,MAAMgC,OAAOe,SAASL,KAAKb,e,2CAIhCa,KAAKG,oB,wCAUL,IAAMG,EAA+BjE,KAAKC,MAAuD,KAAjD0D,KAAKD,wBAAwBE,QAAQC,aAEjFF,KAAKX,MAAMiB,+BAAiCA,GAC/CN,KAAKP,SAAS,CACba,6BAA8BA,EAC9BZ,kBAAmBM,KAAKN,kBAAkBY,EAA+B,S,mCAM3EN,KAAK1C,MAAMiD,WAAWP,KAAK1C,MAAMgC,U,+BAGxB,IAAD,EACmDU,KAAK1C,MAAxDqB,EADA,EACAA,QAAS6B,EADT,EACSA,WAAYlB,EADrB,EACqBA,OAAQmB,EAD7B,EAC6BA,UAAWC,EADxC,EACwCA,OAE1CrB,EAAQW,KAAKX,MAAMC,EAAOC,iBAC1BoB,EAAUrB,EAAOsB,IAAI,WAErBpD,EAAO8B,EAAOuB,QAAQvB,EAAOC,gBAAiBF,EAAMyB,MAAQxB,EAAOuB,QAAQvB,EAAOC,gBAAiBF,EAAM0B,OACzGC,EAAmBP,GAAanB,EAAO2B,eACvCC,EAAgB5B,EAAO6B,UAAU7B,EAAOC,iBAAkD,IAAjCD,EAAOqB,QAAQO,eACxEE,EAAkBV,GAAUV,KAAKX,MAAMC,EAAOE,mBAAqBF,EAAO6B,UAAU7B,EAAOE,mBAAqB,KAEtH,OAEF,kBAAC,IAAM6B,SAAP,KAEEV,EAAQW,SAA+B,UAApBX,EAAQW,SAAuB,kBAACC,EAAA,EAAD,CAAUD,SAAO,EAACtC,UAAWL,EAAQxB,qBAExF,kBAACoE,EAAA,EAAD,CACCvC,UAAWC,YAAKe,KAAK1C,MAAMiD,YAAc5B,EAAQ6C,OAAQhB,GAAc7B,EAAQlB,oBAC/EgE,OAAkC,OAA1BzB,KAAK1C,MAAMiD,WACnBmB,QAAS1B,KAAK1C,MAAMiD,YAAcP,KAAKO,WAAWoB,KAAK3B,OAGvD,kBAAC4B,EAAA,EAAD,CAAc5C,UAAWC,YAAKuB,GAAc7B,EAAQZ,yBAC1C,OAATP,EAAgB,kBAAC,IAAM6D,SAAP,MAChB,kBAAC9C,EAAD,CAAqBE,iBAAkB,CAAC,kBAAkB,WAAajB,GAAOP,OAAQqC,EAAOuC,SAAS,OAAQvC,EAAOC,gBAAiBF,EAAMyB,QAI7I,kBAAClB,EAAA,EAAD,CACCkC,IAAK9B,KAAKJ,aACVmC,mBAAwC,IAArBf,EACnBgB,QAAShB,GAAoB1B,EAAO2C,UAAU,SAC9CC,UAAiC,OAArBvB,EAAQwB,WAAqBxB,EAAQwB,UAAa9C,GAASA,EAAM+C,cAAwB,KACrGC,MAAO,CAAEC,KAAM,UAAWzE,MAAOmC,KAAKX,MAAMK,qBAG7C,kBAACK,EAAA,EAAD,CACC+B,IAAK9B,KAAKD,wBACVf,UAAYwB,EAAa7B,EAAQV,yBAA2BU,EAAQL,wBAGlE8C,EAAkC,CAAEF,EAAe,wBAAIqB,IAAK,MAAQjD,EAAOkD,KAAQpB,GAAjEF,IAIrBP,EAAQW,SAA+B,UAApBX,EAAQW,SAAuB,kBAACC,EAAA,EAAD,CAAUD,SAAO,EAACe,MAAO,CAACjF,OAAQ,gB,GAtG1DyC,IAAM4C,WA8GnBjE,cAAWvB,EAAXuB,CAAmBU,G,kBCpJ5BjC,EAAS,SAAAC,GAAK,MAAK,CACxBwF,0BAA2B,CAC1BtF,OAAQ,aAETuF,8BAA+B,CAC9BvF,OAAQ,cACRwF,QAAS,qBAEVC,uBAAuB,aACtBzF,OAAQ,GACPF,EAAM4F,YAAYC,KAAK,MAAQ,CAC/B3F,OAAQ,eAGV4F,eAAgB,CACftF,QAAS,OACTuF,cAAe,MACfC,SAAU,UAKNC,EAAc3E,YAAWvB,EAAXuB,EAAmB,SAAAlB,GAAU,IACxCqB,EAAoErB,EAApEqB,QAASyE,EAA2D9F,EAA3D8F,qBAAsBC,EAAqC/F,EAArC+F,SAAUC,EAA2BhG,EAA3BgG,MAAOC,EAAoBjG,EAApBiG,gBAIlDC,EAAe,SAAAC,GAEJL,EAAqBC,GAC7BK,SAAQ,SAAApE,GAEf,IAAIqE,EAASF,EACkB,UAA3BnE,EAAOC,kBACVoE,EAASA,EAAS,IAAM,GAGzBrE,EAAOsE,eAAe,KAAMD,OAI9B,OAED,kBAAC,IAAMtC,SAAP,KACC,kBAACE,EAAA,EAAD,CAAUD,SAAO,EAACtC,UAAWL,EAAQ+D,4BACrC,kBAACnB,EAAA,EAAD,CAAUvC,UAAWL,EAAQgE,+BAC5B,kBAAC/C,EAAA,EAAD,CACCZ,UAAWL,EAAQkE,uBACnBb,QAASsB,IAGV,kBAACvD,EAAA,EAAD,KACqB,OAApBwD,IAAgD,IAApBA,EAA4B,KACxD,kBAACM,EAAA,EAAD,CAAaC,MAAM,UAAUC,KAAK,SACjC,kBAACC,EAAA,EAAD,CAAQtC,QA7BY,kBAAM8B,GAAa,KA6BLzG,IAAKkH,EAAE,OACzC,kBAACD,EAAA,EAAD,CAAQtC,QA7Ba,kBAAM8B,GAAa,KA6BLzG,IAAKkH,EAAE,eAWxCC,E,6LAEgBb,GAEpB,IAAIc,EAAU,GAQd,OAPAnE,KAAK1C,MAAM6G,QAAQT,SAAQ,SAAApE,GAEtB+D,IAAa/D,EAAO2C,UAAU,aACjCkC,EAAQC,KAAK9E,MAIR6E,I,+BAGE,IAELd,EAFI,SACwErD,KAAK1C,MAA7EqB,EADA,EACAA,QAAS6B,EADT,EACSA,WAAY2D,EADrB,EACqBA,QAASE,EAD9B,EAC8BA,SAAU5D,EADxC,EACwCA,UAAWC,EADnD,EACmDA,OAAWpD,EAD9D,kFAIR,OAEF,kBAACgH,EAAA,EAAD,CAAMC,OAAO,EAAMvF,UAAWwB,GAAc7B,EAAQqE,gBAClDmB,EAAQpF,KAAI,SAACO,EAAQkF,GAErB,IAAMC,EAA2B,OAAbpB,GAAiD,OAA5B/D,EAAOqB,QAAQ0C,UAAqB/D,EAAOqB,QAAQ0C,WAAaA,GAAY,kBAACF,EAAD,CACvFZ,IAAK,eAAiBjD,EAAOsB,IAAI,MACjCwC,qBAAsB,EAAKA,qBAAqBzB,KAAK,GACrD0B,SAAU/D,EAAO2C,UAAU,YAC3BqB,MAAOhE,EAAOqB,QAAQ0C,SACtBE,gBAAiBc,EAASd,iBAAmBjE,EAAOqB,QAAQ4C,kBAGpFmB,EAAW,kBAAC,EAAD,iBACRpH,EADQ,CAEZiF,IAAK,iBAAmBjD,EAAOsB,IAAI,MACnCJ,WAAYA,EACZlB,OAAQA,EACRmB,UAAWA,IAAa,EACxBC,OAAQA,IAAU,KAIvB,OADA2C,EAAW/D,EAAO2C,UAAU,YACrB,CAAEwC,EAAaC,W,GA1CA7E,IAAM4C,WAkDfjE,sBAAWvB,EAAXuB,CAAmB0F,I,iCCpIlC,kBAKIS,EAAeC,OAAQ,UAAY7H,IAAKC,eAAe6H,QAC3D9H,IAAK+H,eAAe/H,IAAKC,cAAe2H,GAGzB,WACdI,eAAgB,CACfC,KAAM,CACLxH,KAAM,CACLyH,KAAM,YACNC,MAAO,eAER7F,MAAO,CACN4F,KAAMlI,IAAKkH,EAAE,kBACbiB,MAAOnI,IAAKkH,EAAE,qBAGhBkB,KAAM,IAGP5H,WAAY,GAEZ6H,QAAS,GAETnI,OAAQ,K,iCC5BT,0CASI0H,EAAeC,OAAQ,aAAe7H,IAAKC,eAAe6H,QAC9D9H,IAAK+H,eAAe/H,IAAKC,cAAe2H,GAgBzB,WACdI,eAAgB,CACfM,YAAa,CACZtE,MAAO,SAAAD,GAAG,OAAIA,EAAIwE,QAAQ,IAC1BC,KAAM,UAEPC,eAAgB,CACfD,KAAM,SACN/H,KAAM,0BAEPiI,SAAU,CACTF,KAAM,MAEPG,MAAO,CACNlI,KAAM,aAGRD,WAAY,CACXiI,eA3BF,SAAwClI,GACvC,IAAMqI,EAAQC,UAASrI,WAAWsI,eAClC,OACC,kBAACF,EAAD,eAAOG,IAAK,EAAGC,IAAK,IAAQzI,MA0B7B8H,QAAS,CACRM,MAAOE,UAASR,QAAQY,aAEzB/I,OAAQ,K,iCCjDT,kBAMI0H,EAAeC,OAAQ,cAAgB7H,IAAKC,eAAe6H,QAC/D9H,IAAK+H,eAAe/H,IAAKC,cAAe2H,GAGzB,WACdI,eAAgB,CACf3G,SAAU,CACTZ,KAAM,cAEPyI,SAAU,CACTzI,KAAM,CACLyH,KAAM,oBACNC,MAAO,6BAER7F,MAAO,CACN4F,KAAMlI,IAAKkH,EAAE,0BACbiB,MAAOnI,IAAKkH,EAAE,6BAGhBiC,MAAO,CACN1I,KAAM,CACL,GAAI,wBACJ,QAAW,iBAEZ6B,MAAO,CACN,GAAItC,IAAKkH,EAAE,2BAId1G,WAAY,GAEZ6H,QAAS,GAETnI,OAAQ,K,iCCvCT,kBAMI0H,EAAeC,OAAQ,UAAY7H,IAAKC,eAAe6H,QAC3D9H,IAAK+H,eAAe/H,IAAKC,cAAe2H,GAGzB,WACdI,eAAgB,CACf3G,SAAU,CACTZ,KAAM,cAEP2I,SAAU,CACT3I,KAAM,WAEP4I,QAAS,IAGV7I,WAAY,GAEZ6H,QAAS,GAETnI,OAAQ,K,iCCzBT,kBAMI0H,EAAeC,OAAQ,YAAc7H,IAAKC,eAAe6H,QAC7D9H,IAAK+H,eAAe/H,IAAKC,cAAe2H,GAGzB,WACdI,eAAgB,CACfC,KAAM,CACLxH,KAAM,CACLyH,KAAM,sBACNC,MAAO,yBAER7F,MAAO,CACN4F,KAAMlI,IAAKkH,EAAE,oBACbiB,MAAOnI,IAAKkH,EAAE,wBAIjB1G,WAAY,GAEZ6H,QAAS,GAETnI,OAAQ,K,oFC0EM,OACdoJ,SAlGD,SAAkBC,GAAkB,IAc/BC,EAAGC,EAAGC,EAAGjC,EAAGkC,EAAGC,EAAGC,EAAG3C,EAdL4C,EAAc,uDAAV,EAAGC,EAAO,uDAAH,EAC/B,GAAIjI,MAAMC,QAAQwH,GACjBQ,EAAIR,EAAE,GACNO,EAAIP,EAAE,GACNA,EAAIA,EAAE,QAEF,GAAiB,kBAANA,GAAkBA,EAAE5K,QAAQ,KAAM,CAAC,IAAD,EACrC4K,EAAE3K,MAAM,KAD6B,mBAChD2K,EADgD,KAC7CO,EAD6C,KAC1CC,EAD0C,KAgBlD,OAZIR,EAAI,IACPA,GAAM,KAOPK,EAAIG,GAAK,EAAID,GACbD,EAAIE,GAAK,GAFTJ,EAAQ,EAAJJ,GADJ9B,EAAInI,KAAKC,MAAU,EAAJgK,KAGEO,GACjB5C,EAAI6C,GAAK,GAAK,EAAIJ,GAAKG,GAEfrC,EAAI,GACX,KAAK,EACJ+B,EAAIO,EACJN,EAAIvC,EACJwC,EAAIE,EACJ,MAED,KAAK,EACJJ,EAAIK,EACJJ,EAAIM,EACJL,EAAIE,EACJ,MAED,KAAK,EACJJ,EAAII,EACJH,EAAIM,EACJL,EAAIxC,EACJ,MAED,KAAK,EACJsC,EAAII,EACJH,EAAII,EACJH,EAAIK,EACJ,MAED,KAAK,EACJP,EAAItC,EACJuC,EAAIG,EACJF,EAAIK,EACJ,MAED,KAAK,EACJP,EAAIO,EACJN,EAAIG,EACJF,EAAIG,EAON,MAAO,CACNvK,KAAK0K,MAAU,IAAJR,GACXlK,KAAK0K,MAAU,IAAJP,GACXnK,KAAK0K,MAAU,IAAJN,KAiCZO,SAxBD,SAAkBT,EAAGC,EAAGC,GACvB,GAAI5H,MAAMC,QAAQyH,GACjBE,EAAIF,EAAE,GACNC,EAAID,EAAE,GACNA,EAAIA,EAAE,QAEF,GAAiB,kBAANA,GAAkBA,EAAE7K,QAAQ,KAAM,CAAC,IAAD,EACrC6K,EAAE5K,MAAM,KAD6B,mBAChD4K,EADgD,KAC7CC,EAD6C,KAC1CC,EAD0C,KAYlD,OARAF,EAAIvK,SAASuK,GAAG9K,SAAS,IACzB+K,EAAIxK,SAASwK,GAAG/K,SAAS,IACzBgL,EAAIzK,SAASyK,GAAGhL,SAAS,IAER,IAAb8K,EAAE3K,SAAc2K,EAAI,IAAMA,GACb,IAAbC,EAAE5K,SAAc4K,EAAI,IAAMA,GACb,IAAbC,EAAE7K,SAAc6K,EAAI,IAAMA,GAEvB,IAAMF,EAAIC,EAAIC,I,QCtFlB9B,EAAeC,OAAQ,WAAa7H,IAAKC,eAAe6H,QA2B5D,SAASoC,EAAiB3J,GAAQ,IACzB8B,EAAuB9B,EAAvB8B,SAAU8H,EAAa5J,EAAb4J,SADc,EAGIC,mBAASD,GAHb,mBAGzBE,EAHyB,KAGbC,EAHa,KAIhCC,qBAAU,kBAAMD,EAAcH,KAAW,CAACA,IAE1C,IAAIK,EAAQC,EAAS,GACJ,QAAbpI,GAAsBgI,EAEzBI,EAAS,CAAEC,KADXF,EAASH,EAAWzL,MAAM,MACH,GAAI+L,MAAOH,EAAO,GAAII,KAAMJ,EAAO,IAGrC,QAAbnI,GAAsBgI,IAE9BI,EAAS,CAAEI,KADXL,EAASH,EAAWzL,MAAM,MACH,GAAIkM,WAAYN,EAAO,GAAIO,WAAYP,EAAO,KAGtE,IAAMQ,EAAQnC,UAASrI,WAAWwK,MAC9BC,EAAQ,GACZ,IAAK,IAAIzF,KAAOiF,EACfQ,EAAM5D,KAAK,kBAAC2D,EAAD,CAAOxF,IAAKA,EAAKyF,MAAOzF,EAAM,IAAMiF,EAAOjF,GAAM0F,IAAI,KAGjE,OAAOD,EA0CR,SAASE,EAAoB5K,GAAQ,IAC5BgC,EAAsChC,EAAtCgC,OAAQF,EAA8B9B,EAA9B8B,SAAU8H,EAAoB5J,EAApB4J,SAAU5D,EAAUhG,EAAVgG,MAiBhC6E,EAAejB,GAAY,UAGd,QAAb9H,EACH+I,EAAeC,EAAQpB,SAASmB,GAGX,QAAb/I,IACR+I,EAAeC,EAAQpB,SAASoB,EAAQ/B,SAAS8B,KA1Bf,MA6BChB,mBAASgB,GA7BV,mBA6B5Bf,EA7B4B,KA6BhBC,EA7BgB,KA8BnCC,qBAAU,WAEQ,QAAblI,EACHiI,EAAce,EAAQpB,SAASE,IAGV,QAAb9H,EACRiI,EAAce,EAAQpB,SAASoB,EAAQ/B,SAASa,KAG3B,QAAb9H,GACRiI,EAAcH,KAEb,CAAC9H,EAAU8H,IAEd,IAAMzE,EAAYmD,UAASrI,WAAWkF,UACtC,OAED,kBAACA,EAAD,CAAWa,MAAOA,GAASlE,GAC1B,kBAAC,eAAD,CACC0E,MAAOsD,EACPvJ,MAAO,OACPwK,iBAjDwB,SAACvE,EAAOwE,GAChCxE,EAAQA,EAAM1E,GAGG,QAAbA,EACH0E,EAAQ,CAACA,EAAMyC,EAAGzC,EAAM0C,EAAG1C,EAAM2C,GAAGjK,KAAK,KAGpB,QAAb4C,IACR0E,EAAQ,CAACA,EAAMwC,EAAGxC,EAAM+C,EAAG/C,EAAMgD,GAAGtK,KAAK,MAG1C8C,EAAOsE,eAAexE,EAAU0E,GAAOyE,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,UA1GpEzL,IAAK+H,eAAe/H,IAAKC,cAAe2H,GAwJxC,IAAMb,EAAQ,CACbtG,KAAM,CACL,QAAW,WAEZ+H,KAAM,SAGQ,WACdR,eAAgB,CACf4D,MAAO,CACNnL,KAAM,CACL,KAAQ,eACR,MAAS,0BAGXoL,MAAO,CACN7H,MAAO,SAAAD,GAAG,OAAIA,EAAM,GAAKA,GAAO,EAAU,IAANA,EAAYA,GAChDyE,KAAM,SAAAzE,GAAG,OAAIA,EAAM,EAAI,KAAO,MAC9BtD,KAAM,CACL,QAAW,eACX,EAAK,yBAEN6B,MAAO,CACN,EAAKtC,IAAKkH,EAAE,qBAGd4E,iBAAkB,CACjBrL,KAAM,CACL,QAAW,eAEZ+H,KAAM,UAEPuD,IAAKhF,EACLiF,IAAKjF,EACLkF,IAAKlF,EACLmF,IAAKnF,GAENvG,WAAY,CACXqL,MAAOhD,UAASrI,WAAWsI,eAC3BgD,iBAtIF,SAAwCvL,GACvC,IAAMqI,EAAQC,UAASrI,WAAWsI,eAClC,OACC,kBAACF,EAAD,eAAOG,IAAK,IAAMC,IAAK,KAAMmD,KAAM,IAAQ5L,KAoI3CyL,IAAKb,EACLc,IAAKd,EACLe,IAAKf,EACLY,IAnIF,SAA2BxL,GAAQ,IAC1BgC,EAAsChC,EAAtCgC,OAAQF,EAA8B9B,EAA9B8B,SAAU8H,EAAoB5J,EAApB4J,SAAU5D,EAAUhG,EAAVgG,MADH,EAQX6D,mBAASD,GARE,mBAQ1B4B,EAR0B,KAQrBK,EARqB,KASjC7B,qBAAU,kBAAM6B,EAAOjC,KAAW,CAACA,IAEnC,IAAMzE,EAAYmD,UAASrI,WAAWkF,UAChCqB,EAAQsE,EAAQpB,SAASoB,EAAQ/B,SAASyC,IAChD,OAED,kBAACrG,EAAD,CAAWa,MAAOA,GAASlE,GAC1B,kBAAC,YAAD,CACC0E,MAAOA,EACPjG,MAAO,OACPwK,iBAhBwB,SAACvE,EAAOwE,GAChCa,EAAO9M,KAAK0K,MAAMjD,EAAMsF,IAAI9C,IAC5BhH,EAAOsE,eAAexE,EAAU/C,KAAK0K,MAAMjD,EAAMsF,IAAI9C,IAAIiC,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,YAgIrFpD,QAAS,CACRuD,MAAO/C,UAASR,QAAQY,YACxB4C,MAhMF,SAA0BtL,GAAQ,IACzBgC,EAA+BhC,EAA/BgC,OAAQF,EAAuB9B,EAAvB8B,SAAU8H,EAAa5J,EAAb4J,SAEpBmC,EAAW,SAACf,GACjBgB,EAAWhB,EAAEiB,OAAOC,SACpBlK,EAAOsE,eAAexE,EAAUkJ,EAAEiB,OAAOC,QAAU,IAAM,GAAGjB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,OALxD,EAQFrB,mBAASD,EAAW,GARlB,mBAQzBsC,EARyB,KAQhBF,EARgB,KAYhC,OAHAhC,qBAAU,kBAAMgC,EAAWpC,EAAW,KAAI,CAACA,IAGvC5H,EAAOmK,QAAUnK,EAAOmK,OAAOC,OAAOf,MAClC,kBAAC/C,EAAA,QAASR,QAAQuE,OAAlB,iBAA6BrM,EAA7B,CAAoC4J,SAAUsC,EAASH,SAAUA,KAGlE,kBAACzD,EAAA,QAASR,QAAQY,YAAlB,iBAAkC1I,EAAlC,CAAyC4J,SAAUsC,EAASH,SAAUA,MAiL5EN,IAAK9B,EACL+B,IAAK/B,EACLgC,IAAKhC,GAENhK,OAAQ,CACP2M,KAAM,CAELvK,MAAO,CACN,EAAK,CACJ,MAAS,a,iMC3MRwK,EAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtC6D,MAAO,SAAAzD,GAAK,MAAK,CAChByM,MAAO,OACPC,WAAY,OACZC,YAAa,SAEdC,sBAAuB,CACtBC,gBAAiB,0BAElBA,gBAAiB,CAChBA,gBAAiBrG,IAAM5G,EAAMkN,QAAQpI,QAAQqI,MAAMC,MAAM,IAAKvB,MAAMtN,WAAc,cAEnF8O,uBAAwB,CACvBC,iBAAkB,0BAEnBA,iBAAkB,CACjBA,iBAAkB1G,IAAM5G,EAAMkN,QAAQpI,QAAQqI,MAAMC,MAAM,IAAKvB,MAAMtN,WAAc,cAEpFgP,0BAA2B,CAC1BD,iBAAkB1G,IAAM5G,EAAMkN,QAAQlI,UAAUmI,MAAMC,MAAM,IAAKvB,MAAMtN,WAAc,kBAQnFkJ,EAAeC,OAAQ,WAAa7H,IAAKC,eAAe6H,QAC5D9H,IAAK+H,eAAe/H,IAAKC,cAAe2H,GA8EzB,WACdI,eAAgB,CACf6D,MAAO,CACN7H,MAAO,SAAAD,GAAG,OAAIzE,KAAK0K,MAAMjG,IACzBtD,KAAM,CACL,QAAW,sBACX,MAAO,sBACP,OAAQ,mBAGVkN,OAAQ,CACP3J,MAAO,SAAAD,GAAG,OAAIzE,KAAK0K,MAAMjG,IACzByE,KAAM,KACN/H,KAAM,CACL,QAAW,sBACX,MAAO,sBACP,OAAQ,mBAGVmN,SAAU,CACT7J,IAAK,SAACA,EAAK1B,EAAUE,GAAhB,OChJO,SAAyBsL,EAAc9J,GAGrD,GAAqB,cAAjB8J,EAEH,OAAO9J,GACN,KAAK,EACL,KAAK,EACJA,GAAM,EACN,MAED,KAAK,EACJA,GAAM,EACN,MAED,QACCA,EAAM,UAMJ,GAAqB,WAAjB8J,EAER,OAAO9J,GACN,IAAK,OACL,IAAK,QACJA,GAAM,EACN,MAED,IAAK,OACJA,GAAM,EACN,MAED,QACCA,EAAM,KAKT,OAAOA,EDwG2B+J,CAAgBvL,EAAOqB,QAAQiK,aAAc9J,IAC7EtD,KAAM,CACLyH,KAAM,eACNC,MAAO,iBAER7F,MAAO,CACN4F,KAAMlI,IAAKkH,EAAE,uBACbiB,MAAOnI,IAAKkH,EAAE,2BAIjB1G,WAAY,CACXmN,OAAQ9E,UAASrI,WAAWsI,gBAE7BT,QAAS,CACRwD,MA1GF,SAA0BtL,GAAQ,IACzBgC,EAA4BhC,EAA5BgC,OAAQD,EAAoB/B,EAApB+B,MAAOD,EAAa9B,EAAb8B,SACjBT,EAAUkL,IAFgB,EAsBN1C,mBAAS9H,EAAM0B,OAtBT,mBAsBzB6H,EAtByB,KAsBlBkC,EAtBkB,KAuBhCxD,qBAAU,kBAAMwD,EAASzL,EAAM0B,SAAQ,CAAC1B,IAGxC,IAAMF,EAAc,SAAC4L,EAAMlE,EAAGmE,GAEhB,aAATD,GACHE,EAAYpE,EAAE/F,MA7BgB,EAkCAqG,oBAAS,GAlCT,mBAkCzBwD,EAlCyB,KAkCfM,EAlCe,KAoDhC,OAjBA3D,qBAAU,WAaT,OAXIhI,EAAOoK,OAAOiB,UAAYrL,EAAOoK,OAAOiB,SAAStL,QACpDC,EAAOoK,OAAOiB,SAAStL,MAAgD,kBAAjCC,EAAOoK,OAAOiB,SAAStL,MAAqB,CAAE,KAAQC,EAAOoK,OAAOiB,SAAStL,OAAUC,EAAOoK,OAAOiB,SAAStL,MAGpJC,EAAO4L,mBAAmB,YAAY,GAAM3C,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,MAGvElJ,EAAOc,OAAOjB,IAIR,kBAAMG,EAAOe,SAASlB,MAE3B,CAACG,EAAQD,IAIb,kBAAC,IAAMgC,SAAP,KAEC,yBAAKrC,UAAWL,EAAQoC,OACtB6H,EAAQvJ,EAAMkG,MAGhB,kBAAC1B,EAAA,EAAD,CAAaE,KAAK,SACjB,kBAACC,EAAA,EAAD,CAAQF,MAAM,UAAU9E,UAAWC,YAAkB,OAAb0L,IAAuBA,EAAsChM,EAAQ4L,uBAAnC5L,EAAQ6L,mBAAqD9I,QAzDzH,WACdoJ,EAAS,KACTG,GAAY,GACZ3L,EAAOsE,eAAexE,EAAU,KAAKmJ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,QAsDwF,kBAAC,IAAD,OAC1I,OAAbmC,GAAqB,kBAAC3G,EAAA,EAAD,CAAQF,MAAM,YAAY9E,UAAWC,YAAM0L,EAA+EhM,EAAQ8L,0BAA5E,CAAE9L,EAAQuL,sBAAuBvL,EAAQ4L,yBAA+D7I,QA9CtK,WACduJ,GAAY,GACZ3L,EAAOsE,eAAe,YAAY,GAAM2E,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,OA4CkI2C,UAAWR,GAAU,kBAAC,IAAD,OAC1N,kBAAC3G,EAAA,EAAD,CAAQF,MAAM,UAAU9E,UAAWC,YAAkB,OAAb0L,IAAuBA,EAAqChM,EAAQuL,sBAAlCvL,EAAQwL,kBAAmDzI,QArDrH,WAChBoJ,EAAS,GACTG,GAAY,GACZ3L,EAAOsE,eAAexE,EAAU,GAAGmJ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,QAkD0F,kBAAC,IAAD,WA6CzJvL,OAAQ,K,iCEjKT,qE,iCCAA,OAAe,WAEd,iBAAkB,eAClB,cAAe,gBACf,eAAgB,mBAGhB,sBAAuB,cACvB,uBAAwB,U,iCCRzB,OAAe,WAEd,iBAAkB,WAClB,cAAe,QACf,eAAgB,UAGhB,sBAAuB,SACvB,uBAAwB,S,iCCRzB,OAAe,WAEd,YAAa,UACb,YAAa,YACb,YAAa,SAGb,iBAAkB,QAClB,kBAAmB,gB,iCCRpB,OAAe,WAEd,YAAa,OACb,YAAa,OACb,YAAa,OAGb,iBAAkB,OAClB,kBAAmB,W,iCCRpB,OAAe,WACd,gBAAiB,QACjB,mBAAoB,mBACpB,yBAA0B,0BAC1B,sBAAuB,e,iCCJxB,OAAe,WACd,gBAAiB,QACjB,mBAAoB,WACpB,yBAA0B,kBAC1B,sBAAuB,gB,qGCGHmO,E,yGAaD/G,GAClB,QAAIA,IACH+G,EAAS/G,SAAT,eAAyB+G,EAAS/G,SAAlC,GAA+CA,GAAY,IAC3DoE,QAAQ4C,IAAI,eAAgBD,EAAS/G,WAC9B,K,iCAYSiH,GACjB,OAAOF,EAAS/G,SAASiH,IAAY,K,sCA+BrC,GAnBIF,EAAS/G,SAASkH,UACrBxO,IAAKyO,YAAYJ,EAAS/G,SAASkH,UACnCxO,IAAK0O,gBAAgBL,EAAS/G,SAASkH,WAGvCxO,IAAK0O,kBAIFL,EAAS/G,SAASqH,YACrBC,SAASrI,MAAQ8H,EAAS/G,SAASqH,WAIhCN,EAAS/G,SAASuH,aAA8D,UAA/CR,EAAS/G,SAASuH,YAAYrP,OAAO,EAAG,KAC5EoP,SAASE,eAAe,WAAWC,KAAOV,EAAS/G,SAASuH,aAIzDR,EAAS/G,SAASM,aAAc,CAEnC,IAAIA,EAAeyG,EAAS/G,SAASM,aACrC,IAAK,IAAI4G,KAAY5G,EACpB5H,IAAK+H,eAAeyG,EAAU5G,EAAa4G,S,KAjE1BH,EAKb/G,SAAW,I,iCCZnB,OAAe,WAEd,yBAA0B,iBAC1B,YAAa,cACb,YAAa,sCACb,YAAa,cACb,cAAe,aACf,cAAe,QACf,YAAa,kCAGb,kBAAmB,kB,iCCXpB,OAAe,WAEd,yBAA0B,oBAC1B,YAAa,cACb,YAAa,wCACb,YAAa,cACb,cAAe,aACf,cAAe,QACf,YAAa,kCAGb,kBAAmB,Q,iCCXpB,OAAe,WAEd,oBAAqB,WACrB,oBAAqB,cACrB,iBAAkB,WAGlB,yBAA0B,WAC1B,0BAA2B,WAC3B,uBAAwB,qB,iCCTzB,OAAe,WAEd,oBAAqB,WACrB,oBAAqB,WACrB,iBAAkB,QAGlB,yBAA0B,UAC1B,0BAA2B,SAC3B,uBAAwB,mB,iCCTzB,OAAe,WACd,gBAAiB,WACjB,gBAAiB,a,iCCFlB,OAAe,WACd,gBAAiB,WACjB,gBAAiB,a,iCCFlB,OAAe,WAEd,cAAe,UAGf,mBAAoB,QACpB,oBAAqB,gB,iCCNtB,OAAe,WAEd,cAAe,SAGf,mBAAoB,OACpB,oBAAqB,W,iSCiEhB0H,E,YAEL,WAAYzO,GAAQ,IAAD,8BAClB,4CAAMA,KAED+B,MAAQ,CACZ2M,mBAAoB,GACpBC,mBAAoB,GACpBC,YAAY,EACZC,YAAa,GACbC,gBAAiB,IAGlB,EAAKC,OAASC,IAAWC,cACzB,EAAKC,KAAO,EAAKlP,MAAM+G,SAASmI,KAAQ3N,MAAMC,QAAQ,EAAKxB,MAAM+G,SAASmI,MAAQ,EAAKlP,MAAM+G,SAASmI,KAAO,EAAKlP,MAAM+G,SAASmI,KAAK7Q,MAAM,KAAQ,KACpJ,EAAK8Q,UAAY,EAAKnP,MAAM+G,SAASoI,UAAa5N,MAAMC,QAAQ,EAAKxB,MAAM+G,SAASoI,WAAa,EAAKnP,MAAM+G,SAASoI,UAAY,EAAKnP,MAAM+G,SAASoI,UAAU9Q,MAAM,KAAQ,KAb3J,E,iFAgBE,IAAD,OAGnB,IAAoC,IAAhCqE,KAAK1C,MAAM+G,SAASqI,QAAmB,CAE1C,IAAIC,EAAe,CAAC,0BAA2B,+BAAgC,4BAC/E3M,KAAKqM,OAAOO,UAAUD,GAAc,SAACnE,EAAKkB,GAEzC,EAAKjK,SAAS,CACbyM,WAAYxC,EAAO,2BAA2B5I,IAC9CsL,gBAAiB1C,EAAO,gCAAgC5I,IACxDqL,YAAazC,EAAO,4BAA4B5I,MAIjD,EAAKuL,OAAOQ,gBAAgBF,GAAc,SAACnK,EAAIsK,GAE9CtK,EAAKA,EAAGjG,OAAOiG,EAAGuK,YAAY,KAAK,GAC/B,EAAK1N,MAAMmD,KAAQsK,EAAOhM,KAC7B,EAAKrB,SAAL,eAAiB+C,EAAKsK,EAAOhM,YAOjCd,KAAKqM,OAAOW,qBAAoB,SAACxE,EAAKyE,GAErC,IAAIvD,EAAS,GACb,GAAIuD,GAAaA,EAAUC,KAAM,CAChC,IAAIC,EAAW,GAGfF,EAAUC,KAAKxJ,SAAQ,SAAC0J,EAAU5I,KAG3B,EAAKgI,MAAS,EAAKA,MAAQ,EAAKA,KAAK9Q,QAAQ0R,EAASrM,MAAMsM,OAAOC,OAAS,MAAS,EAAKb,WAAc,EAAKA,YAAqE,IAAxD,EAAKA,UAAU/Q,QAAQ0R,EAASrM,MAAMsM,OAAOC,SAE5KH,EAAS/I,KAAKgJ,GACd1D,EAASA,EAAO6D,OAAO,CACtBH,EAAS5K,GAAK,SACd4K,EAAS5K,GAAK,aACd4K,EAAS5K,GAAGgL,QAAQ,kBAAmB,IAAM,yBAMhD,EAAK/N,SAAS,CAAEuM,mBAAoBmB,EAASM,MAAK,SAACC,EAAOC,GACxD,OAAID,EAAMlL,GAAKmL,EAAMnL,GAAW,EACvBmL,EAAMnL,GAAKkL,EAAMlL,IAAY,EAC1B,OAKd,EAAK6J,OAAOO,UAAUlD,GAAQ,SAAClB,EAAKyD,GACnC,EAAKxM,SAAS,CAAEwM,uBAGhB,EAAKI,OAAOQ,gBAAgBnD,GAAQ,SAAClH,EAAIoL,IAEpCA,GAAiB,EAAKvO,MAAM4M,mBAAmBzJ,IAAQoL,EAAY9M,MAAQ,EAAKzB,MAAM4M,mBAAmBzJ,GAAI1B,KAChH,EAAKrB,UAAS,SAAAoO,GAAS,MAAK,CAAE5B,mBAAmB,eAAM4B,EAAU5B,mBAAjB,eAAsCzJ,EAAKoL,oB,+BAQvF,IAAD,OACAjP,EAAYqB,KAAK1C,MAAjBqB,QAGFmP,EAAc9N,KAAKX,MAAM8M,aAAe4B,KAAKC,MAAMhO,KAAKX,MAAM8M,cAAiB,GAC/EO,EAAUuB,OAAOC,KAAKJ,GAAYlS,OAGpCuS,EAAc,kBAAC,IAAD,CAAU5L,IAAI,UAAUvD,UAAWL,EAAQyP,SAAS,kBAAC,IAAD,CAAkBrK,KAAM,MAwC9F,OAtCI/D,KAAKX,MAAM2M,mBAAmBpQ,OAAS,IAE1CuS,EAAcnO,KAAKX,MAAM2M,mBAAmBjN,KAAI,SAAAsP,GAC/CA,EAAQvB,OAASgB,EAAWO,EAAQtN,MAAMsM,OAAOC,QAAS,EAE1D,IAAMgB,EAAUD,EAAQtN,MAAMsM,OAAOiB,QAC/BC,EAAS,EAAKlP,MAAM4M,mBAAmBoC,EAAQ7L,GAAK,WAAa,EAAKnD,MAAM4M,mBAAmBoC,EAAQ7L,GAAK,UAAU1B,MAAQ,EAC9H0N,EAAa,EAAKnP,MAAM4M,mBAAmBoC,EAAQ7L,GAAK,eAAiB,EAAKnD,MAAM4M,mBAAmBoC,EAAQ7L,GAAK,cAAc1B,MAAQ,EAC1I2N,GAAa,EAAKpP,MAAM4M,mBAAmBoC,EAAQ7L,GAAGgL,QAAQ,kBAAmB,IAAM,qBAAsB,EAAKnO,MAAM4M,mBAAmBoC,EAAQ7L,GAAGgL,QAAQ,kBAAmB,IAAM,oBAAoB1M,IAE3M4N,EAAU3R,IAAKkH,EAAE,WAAa,KAAOqK,EAAWC,GAASC,GAAaC,EAAa1R,IAAKkH,EAAE,SAAWlH,IAAKkH,EAAE,aAAgBlH,IAAKkH,EAAE,aAEzI,OAEC,kBAAC,IAAD,CAAU1B,IAAK,WAAa8L,EAAQ7L,IACnC,kBAAC,IAAD,KACC,kBAAC,IAAD,CAAQmM,IAAKN,EAAQtN,MAAMsM,OAAOC,KAAMsB,IAAKP,EAAQtN,MAAMsM,OAAOwB,QAAS7P,UAAWL,EAAQmQ,SAE/F,kBAAC,IAAD,CACC9M,QAASqM,EAAQtN,MAAMsM,OAAO/J,MAC9BpB,UAAW,CACV,IAAMmM,EAAQtN,MAAMsM,OAAO0B,QAC1BV,EAAQvB,QAAUuB,EAAQtN,MAAMsM,OAAO0B,UAAYV,EAAQvB,OAAOkC,kBAAqB,0BAAMzM,IAAK,WAAa8L,EAAQ7L,IAAhC,KAAsC,0BAAMxD,UAAWL,EAAQsQ,iBAAkBlS,IAAKkH,EAAE,oBAAsB,KAAOoK,EAAQvB,OAAOkC,mBAC3NX,EAAQtN,MAAMsM,OAAO6B,kBAAoB,KAAOnS,IAAKkH,EAAE,gBAAkB,IAAMlH,IAAKkH,EAAE,MAAQ,KAAOlH,IAAKkH,EAAE,SAAW,IAAMoK,EAAQtN,MAAMsM,OAAO8B,aAAe,OAIpK,kBAAC,IAAD,CAAyBnQ,UAAWC,YAAKN,EAAQyQ,gBAAiBd,EAAWC,GAASC,GAAaC,EAAa9P,EAAQ4P,MAAQ5P,EAAQ0Q,SAAY1Q,EAAQwM,WAC3J,kBAAC,IAAD,CAAS7H,MAAOoL,GACf,0BAAM1P,UAAWsP,EAAWC,GAASC,GAAaC,EAAa,uBAAyB,gBAAmB,yBAWnH,kBAAC,IAAD,CAAMlK,OAAK,IACiB,IAA1BvE,KAAKX,MAAM6M,WAAwBlM,KAAKX,MAAM+M,iBAC/C,kBAAC,IAAD,CAAU7J,IAAI,UAAU5D,QAAS,CAAE2Q,KAAM3Q,EAAQ4Q,YAChD,kBAAC,IAAD,CACCvN,QAASjF,IAAKkH,EAAE,eAAiB,KAAOtH,YAAO,IAAIC,KAAKoD,KAAKX,MAAM+M,iBAAkB,sBAAuB,CAAEvP,OAAQC,IAAQC,IAAKC,oBAKrI,kBAAC,IAAD,CAAUuF,IAAI,UAAU5D,QAAS,CAAE6Q,UAAW7Q,EAAQ8Q,kBACrD,kBAAC,IAAD,KACC,kBAAC,IAAD,OAED,kBAAC,IAAD,CACCzN,QAASjF,IAAKkH,EAAE,qBAAuB,MAGxC,kBAAC,IAAD,CAAyBjF,UAAWC,YAAKN,EAAQyQ,gBAAiBzQ,EAAQ+Q,mBACxEhD,IAKFyB,O,GAlK0BtO,IAAM4C,WAyKrBkN,EAAiB,CAC7BC,kBAAkB,EAClBtM,MAAOvG,IAAKkH,EAAE,kBACdzG,KAAM,iBAGQgB,uBA/NA,SAAAtB,GAAK,MAAK,CACxBqS,UAAW,CACVM,UAAW,SACXlS,UAAW,QACXmG,MAAO,uBAERmL,gBAAiB,CAChBnL,MAAO,WAER2L,gBAAiB,CAChBK,gBAAiB,UACjBhM,MAAO,OACP1G,OAAQF,EAAM6S,QAAQ,GAAI,GAC1BC,YAAa9S,EAAM6S,QAAQ,IAE5BL,iBAAkB,CACjBvR,MAAOjB,EAAM6S,QAAQ,MACrBD,gBAAiB,UACjBG,aAAc,MACdpS,MAAOX,EAAM6S,QAAQ,GACrBG,OAAQhT,EAAM6S,QAAQ,GACtBjM,MAAO,OACPnG,UAAW,SACXwS,SAAU,mBAEXf,gBAAiB,CAChBe,SAAU,UAEX/B,QAAS,CACRzQ,UAAW,SACXG,UAAW,OAEZgR,MAAO,CACNjR,MAAOX,EAAM6S,QAAQ,GACrBG,OAAQhT,EAAM6S,QAAQ,IAEvBxB,MAAO,CACNzK,MAAO,WAERuL,SAAU,CACTvL,MAAO,WAERqH,SAAU,CACTrH,MAAO,cAoLMtF,CAAmBuN,I,0ZC7I5BqE,E,YAEL,WAAY9S,GAAQ,IAAD,8BAClB,4CAAMA,KAwIP+S,cAAgB,SAAA1P,GAAO,OAAI,SAACvB,EAAUkR,EAASjR,EAAOC,GACrD,EAAKiR,cAAcjR,EAAQgR,EAA3B,eAAyC3P,EAAzC,CAAkD6P,KAAM,EAAKC,QAAQ9P,EAAQ+P,MAAO/P,EAAQgQ,QAC5F,EAAKlR,SAAS,CAAE2O,SAAS,MA3IP,EA8InBjP,YAAc,SAAAwB,GAAO,OAAI,SAACvB,EAAU0B,EAAKzB,EAAOC,GAAvB,OAAkC,EAAKsR,iBAAiBtR,EAAQwB,EAA9B,eAAwCH,EAAxC,CAAiD6P,KAAM,EAAKC,QAAQ9P,EAAQgQ,IAAK,IAAI/T,WA1I/I,EAAKiU,YAAc,EAAKvT,MAAM+G,SAASwM,aAAe,GACtD,EAAKC,YAAc,EAAKxT,MAAM+G,SAASyM,aAAe,GAEtD,EAAKA,YAAYC,MAAQ,EAAKD,YAAYC,OAAS,GACnD,EAAKD,YAAYC,MAAMC,QAAQ,CAC9BxO,GAAI,OACJyO,KAAM,SACN7S,SAAU,OACV8S,MAAO,CACNC,SAAU,SAAApQ,GAAK,OAAK,EAAK+P,YAAYM,qBAAuB,IAAMjV,OAAOkV,WAAWtQ,GAAOuE,QAAQ,IAAM,EAAKwL,YAAYQ,oBAAsB,QAKlJ,EAAKjS,MAAQ,CACZ+O,SAAS,EACTmD,OAAQ,GAERC,YAAY,EACZC,uBAAyB,EAAKZ,aAAe,EAAKA,YAAYY,wBAA2B,EACzFC,sBAAwB,EAAKb,aAAe,EAAKA,YAAYa,uBAA0B,OACvFC,iBAAmB,EAAKd,aAAe,EAAKA,YAAYc,kBAAoB,IAAI/U,KAAK,EAAKiU,YAAYc,mBAAsB,IAAI/U,KAChIgV,SAAS,EAAKf,cAAe,EAAKA,YAAYc,iBAE9CE,YAAa,GACbC,UAAW,CACVtK,OAAQ,GACRuK,SAAU,IAGXC,UAAU,EACVC,WAAW,GAIZ,EAAKC,MAAQ,KACb,EAAKC,aAAetS,IAAMC,YAG1B,EAAKsS,SAAWvS,IAAMC,YACtB,EAAKuS,aAAe,GACpB,EAAKC,aAAe,CACnBC,qBAAqB,EACrBC,UAAU,EACVC,OAAQ,CACP/Q,QAAS,EAAKgR,mBAAmB/Q,KAAxB,iBAEVgR,SAAU,CACTC,UAAW,CACV5K,MAAO,SAAC6K,EAAMC,GAAP,OAAgBA,EAAKf,SAASc,EAAKE,cAAc/K,MAAQ,KAAO6K,EAAK9R,MAAQ+R,EAAKf,SAASc,EAAKE,cAAcxN,QAGvHyN,OAAQ,CACPjC,MAAO,EAAKD,YAAYC,OAGzBkC,QAAS,CACRC,aAAc,CACbC,OAAQ,kBAETC,KAAM,CAELC,IAAK,CAEJ/E,SAAS,EAGTgF,KAAM,MAIPF,KAAM,CAEL9E,SAAS,EAGTgF,KAAM,SAhFQ,E,iFAuFE,IAAD,OAGf3S,EAAO,eAAQX,KAAKuT,eAAb,CAA6B/C,KAAMxQ,KAAKyQ,YAEnDzQ,KAAK1C,MAAM6G,QAAQT,SAAQ,SAAApE,GAC1BA,EAAO0I,MAAQ1I,EAAOgO,KAAO,KAAOvQ,IAAKkH,EAAE3E,EAAOC,iBAAmB,IACrED,EAAOkU,0BAA0BlU,EAAOqB,QAAQ2P,SAAW,MAAM,EAAM,CAAE,MAAS3P,EAAQ+P,MAAO,IAAO/P,EAAQgQ,IAAK,KAAQhQ,EAAQuI,KAAM,UAAa,UAAW,YAAc,IAAQX,OAAM,SAAAC,GAC9LC,QAAQC,MAAMF,MAIflJ,EAAOc,OAAO,iBAAiB,SAACO,GAAD,OAAa,EAAK0P,iBAGT,OAApC,EAAK/S,MAAM+G,SAASoP,cAA4D,IAApC,EAAKnW,MAAM+G,SAASoP,aAAyB,EAAKpU,MAAMuS,SACvGtS,EAAOc,QAAO,SAACO,GAAD,OAAa,EAAKxB,oB,6CAKX,IAAD,OACtBa,KAAK1C,MAAM6G,QAAQT,SAAQ,SAAApE,GAC1BA,EAAOe,SAAS,EAAKlB,kB,yCAIJuU,EAAW7F,GAAY,IAAD,QAEpC7N,KAAKX,MAAMoS,wBACZ5D,EAAU8D,mBAAqB3R,KAAKX,MAAMsS,kBAAoB9D,EAAU4D,yBAA2BzR,KAAKX,MAAMoS,wBAA0B5D,EAAU6D,wBAA0B1R,KAAKX,MAAMqS,wBAIzL1R,KAAKP,SAAS,CAAE2O,SAAS,EAAMmD,OAAQ,KAEvCoC,aAAa3T,KAAKkS,OAClBlS,KAAKkS,MAAQ0B,YAAW,WAEvB,IAAMjT,EAAU,EAAK4S,eACrB,EAAKjW,MAAM6G,QAAQT,SAAQ,SAAApE,GAC1BA,EAAOkU,0BAA0BlU,EAAOqB,QAAQ2P,SAAW,MAAM,EAAM,CAAE,MAAS3P,EAAQ+P,MAAO,IAAO/P,EAAQgQ,IAAK,KAAQhQ,EAAQuI,KAAM,UAAa,UAAW,YAAc,IAAQX,OAAM,SAAAC,GAC9LC,QAAQC,MAAMF,WAId,Q,qCAaJ,IAAMmI,EAAM3Q,KAAKX,MAAMsS,iBAAiBkC,UACpCC,EAAY9T,KAAKX,MAAMoS,uBACvBvI,EAAO,EACP6K,EAAiB,sBAErB,OAAO/T,KAAKX,MAAMqS,uBACjB,QACC,MAED,IAAK,UACJqC,EAAiB,yBACjB,MAED,IAAK,UACJA,EAAiB,yBACjBD,GAAsB,GAEtB,MAED,IAAK,QACJC,EAAiB,sBACjBD,EAAsB,GAAVA,EAAa,GACzB5K,GAAY,GACZ,MAED,IAAK,OACJ6K,EAAiB,sBACjBD,EAAsB,GAAVA,EAAa,GAAG,GAC5B5K,EAAY,GAALA,EAAQ,GACf,MAED,IAAK,SACJ6K,EAAiB,eACjBD,EAAsB,GAAVA,EAAa,GAAG,GAAG,GAC/B5K,EAAY,GAALA,EAAQ,GAAG,GAClB,MAED,IAAK,QACJ6K,EAAiB,eACjBD,EAAsB,GAAVA,EAAa,GAAG,GAAG,IAC/B5K,EAAY,GAALA,EAAQ,GAAG,GAAG,GAIvB,MAAO,CACN,eAAkB6K,EAClB,MAASpD,EAAc,IAAVmD,EACb,IAAOnD,EACP,UAAuB,IAAVmD,EACb,KAAa,IAAL5K,K,8BAIFwH,EAAOC,GAKd,IALoB,IAAD,EAEc3Q,KAAKuT,eAA9BrK,EAFW,EAEXA,KAAM6K,EAFK,EAELA,eACVvD,EAAO,GAEFhV,EAAOkV,EAAOlV,GAAQmV,EAAKnV,GAAQ0N,EAC3CsH,EAAKhV,GAAQ4M,IAAQ3L,kBAAkBjB,EAAK,IAAMuY,GAGnD,OAAOvD,I,qCAGOsB,EAAWtB,GAEzB,IAAIwD,EACAlB,EAAO,GAEPmB,EAAUhG,OAAOC,KAAKsC,GAyC1B,OAxCAyD,EAAQvQ,SAAQ,SAACwQ,EAAQ1P,GAGxB,IAAK,IAAI2P,KAFTH,EAAaC,EAASzP,EAAE,EAAI,EAAIA,EAAE,EAAI,GAEpBsN,EAAW,CAC5B,IAAIsC,EAAQtC,EAAUqC,GAItB,GAHAC,EAAMtT,IAAMuQ,WAAW+C,EAAMtT,KAGxBsT,EAAMC,IAAoB,OAAdD,EAAMtT,OAKnBkT,EAAaI,EAAMC,IAKlB,GAAIL,EAAaI,EAAMC,IAAMD,EAAMC,IAAMH,EAC7CpB,EAAKtO,GAAMsO,EAAKtO,GAAN,sBAAgCsO,EAAKtO,IAArC,CAAyC4P,EAAMtT,MAApC,CAAEsT,EAAMtT,UAIzB,GAAIsT,EAAMC,GAAKH,EACnB,MAKGpB,EAAKtO,KAGkB,IAAnBsO,EAAKtO,GAAG5I,OAChBkX,EAAKtO,GAAKsO,EAAKtO,GAAG,GAGlBsO,EAAKtO,GAAKsO,EAAKtO,GAAG8P,QAAO,SAACC,EAAE9N,GAAH,OAAS8N,EAAI9N,IAAG,GAAKqM,EAAKtO,GAAG5I,WAIjDkX,I,uCAGSxT,EAAQyB,EAAOJ,GAE/B,IAAM6T,EAAaxU,KAAKX,MAAMwS,YAAY4C,WAAU,SAAAL,GAAK,OAAIA,IAAU9U,EAAO0I,SAC9E,IAAoB,IAAhBwM,EACH,OAAO,EAGRxU,KAAKqS,aAAamC,GAAcxU,KAAKqS,aAAamC,IAAe,GACjExU,KAAKqS,aAAamC,GAAYpQ,KAAK,CAClC,GAAMrD,EAAMsT,GACZ,IAAOtT,EAAMD,MAId,IAAMgS,EAAO9S,KAAK0U,eAAe1U,KAAKqS,aAAamC,GAAa7T,EAAQ6P,MAMxExQ,KAAKoS,SAASnS,QAAQ0U,cAAc7B,KAAKtL,OAAzC,sBAAuDxH,KAAKX,MAAMyS,UAAUtK,QAA5E,YAAuFyG,OAAO2G,OAAOjU,EAAQ6P,QAC7GxQ,KAAKoS,SAASnS,QAAQ0U,cAAc7B,KAAKf,SAASyC,GAAY1B,KAA9D,sBAA0E9S,KAAKX,MAAMyS,UAAUC,SAASyC,GAAY1B,MAApH,YAA6HA,IAC7H9S,KAAKoS,SAASnS,QAAQ0U,cAAc7H,W,oCAGvBxN,EAAQgR,EAAS3P,GAG9B,IAAK2P,IAAYA,EAAQ1U,OAAQ,CAChC,IAAI8M,EAAQ3L,IAAKkH,EAAE,gCAAgCuJ,QAAQ,KAAMlO,EAAO0I,OAAS,IAEjF,OADAhI,KAAKP,UAAS,SAAAoV,GAAU,MAAK,CAAEtD,OAAO,GAAD,mBAAOsD,EAAWtD,QAAlB,CAA0B7I,SACxD,EAIR,IAAMoK,EAAO9S,KAAK0U,eAAepE,EAAS3P,EAAQ6P,MAG5CgE,EAAaxU,KAAKX,MAAMwS,YAAY4C,WAAU,SAAAL,GAAK,OAAIA,IAAU9U,EAAO0I,SAC9E,GAAIwM,GAAc,EACjBxU,KAAKoS,SAASnS,QAAQ0U,cAAc7B,KAAKtL,OAASyG,OAAO2G,OAAOjU,EAAQ6P,MACxExQ,KAAKoS,SAASnS,QAAQ0U,cAAc7B,KAAKf,SAASyC,GAAY1B,KAAOA,EACrE9S,KAAKoS,SAASnS,QAAQ0U,cAAc7H,aAIhC,CACJ9M,KAAKP,UAAS,SAAAoV,GAAU,MAAK,CAAEhD,YAAY,GAAD,mBAAOgD,EAAWhD,aAAlB,CAA+BvS,EAAO0I,YAGhF,IAAI8M,EAAO,aACV9M,MAAO1I,EAAO0I,MACdzC,KAAMjG,EAAOoK,OAAOpK,EAAOC,iBAAiBF,MAAM0B,MAAMwE,MAAQ,GAChEwP,MAAM,GACHzV,EAAOqB,QAAQqU,aAAe,GAJvB,CAKVlC,KAAMA,IAIP9S,KAAKP,UAAS,SAAAoV,GAAU,MAAK,CAC5Bd,eAAgBpT,EAAQoT,eACxBjC,UAAW,CACVtK,OAAQyG,OAAO2G,OAAOjU,EAAQ6P,MAC9BuB,SAAS,GAAD,mBAAO8C,EAAW/C,UAAUC,UAA5B,CAAsC+C,Y,yCAM/BxM,EAAG2M,GAErB,IAAId,EAAQc,EAAWlC,aACnBmC,EAAKlV,KAAKoS,SAASnS,QAAQ0U,cAC3BQ,EAAOD,EAAGE,eAAejB,GAE7BgB,EAAKE,OAAyB,OAAhBF,EAAKE,QAAmBH,EAAGpC,KAAKf,SAASoC,GAAOkB,OAAS,KACvEH,EAAGpI,SACHoI,EAAGI,c,mCAIH,IAAIjC,EAAMrT,KAAKoS,SAASnS,QAAQ0U,cAAchU,QAAQsS,QAAQG,KAAKC,IAAI/E,QACvEtO,KAAKoS,SAASnS,QAAQ0U,cAAchU,QAAQsS,QAAQG,KAAKC,IAAI/E,SAAmB,IAAR+E,EACxErT,KAAKP,SAAS,CAAEuS,UAAmB,IAARqB,M,oCAI3B,IAAID,EAAOpT,KAAKoS,SAASnS,QAAQ0U,cAAchU,QAAQsS,QAAQG,KAAKA,KAAK9E,QACzEtO,KAAKoS,SAASnS,QAAQ0U,cAAchU,QAAQsS,QAAQG,KAAKA,KAAK9E,SAAoB,IAAT8E,EACzEpT,KAAKP,SAAS,CAAEwS,WAAqB,IAATmB,M,+BAGnB,IAAD,SACsBpT,KAAK1C,MAA3BqB,EADA,EACAA,QAAS0F,EADT,EACSA,SACjB,OAEF,6BACC,yBAAKrF,UAAWL,EAAQgC,SAEvB,kBAAC,IAAD,CAAO3B,UAAWL,EAAQ6S,YACzB,kBAAC,IAAD,CAASlO,MAAOvG,IAAKkH,EAAE,0BACtB,kBAAC,IAAD,CAAajF,UAAWL,EAAQnB,QAGjC,kBAAC,IAAD,CACC+X,SAAUvV,KAAKmS,aACfnT,UAAWL,EAAQ6W,MACnBzU,MAAOf,KAAKX,MAAMoS,uBAClBpI,SAAU,SAAAoM,GAAK,OAAI,EAAKhW,SAAS,CAAEgS,uBAAwBgE,EAAMlM,OAAOxI,WAGzE,kBAAC,IAAD,CACCA,MAAOf,KAAKX,MAAMqS,sBAClBrI,SAAU,SAAAoM,GAAK,OAAI,EAAKhW,SAAS,CAAEiS,sBAAuB+D,EAAMlM,OAAOxI,SACvE2U,cAAY,EACZC,kBAAgB,EAChB3W,UAAWL,EAAQiX,QAGnB,kBAAC,IAAD,CAAU7U,MAAM,WAAWhE,IAAKkH,EAAE,YAClC,kBAAC,IAAD,CAAUlD,MAAM,WAAWhE,IAAKkH,EAAE,YAClC,kBAAC,IAAD,CAAUlD,MAAM,SAAShE,IAAKkH,EAAE,UAChC,kBAAC,IAAD,CAAUlD,MAAM,QAAQhE,IAAKkH,EAAE,SAC/B,kBAAC,IAAD,CAAUlD,MAAM,UAAUhE,IAAKkH,EAAE,WACjC,kBAAC,IAAD,CAAUlD,MAAM,SAAShE,IAAKkH,EAAE,YAUlC,kBAAC,IAAD,CAAOjF,UAAWL,EAAQ6S,YACzB,kBAAC,IAAD,CAASlO,MAAOvG,IAAKkH,EAAE,aACtB,kBAAC,IAAD,CAAgBjF,UAAWL,EAAQnB,QAGpC,kBAAC,IAAD,CAAyBX,OAAQC,IAAQC,IAAKC,eAAgB6Y,MAAOC,KACpE,kBAAC,IAAD,CACC9W,UAAWL,EAAQ6W,MACnBzU,MAAOf,KAAKX,MAAMsS,iBAClBtI,SAAU,SAAAsI,GAAgB,OAAI,EAAKlS,SAAS,CAAEkS,iBAAkBA,EAAkBC,SAAS,KAE3F5M,KAAMhF,KAAKX,MAAMmS,WACjBuE,OAAQ,kBAAM,EAAKtW,SAAS,CAAE+R,YAAY,KAC1CwE,QAAS,kBAAM,EAAKvW,SAAS,CAAE+R,YAAY,KAE3CyE,QAAQ,SACRC,MAAM,EACNvZ,OAAO,mBACPwZ,WAAY,CACXR,kBAAkB,MAMrB,kBAAC,IAAD,CAASrS,MAAOvG,IAAKkH,EAAE,oBACtB,kBAAC,IAAD,CAAYH,MAAM,UAAU9E,UAAWL,EAAQyX,WAAY1U,QAAS,kBAAM,EAAKjC,SAAS,CAAE+R,YAAY,MACrG,kBAAC,IAAD,QAGF,kBAAC,IAAD,CAASxS,UAAWL,EAAQ0X,gBAAiBC,YAAY,aACzD,kBAAC,IAAD,CAAShT,MAAOvG,IAAKkH,EAAE,6BACtB,kBAAC,IAAD,CAAYjF,UAAWL,EAAQyX,WAAY1U,QAAS,kBAAM,EAAKjC,SAAS,CAAEkS,iBAAkB,IAAI/U,KAAQgV,SAAS,MAChH,kBAAC,IAAD,SAKH,kBAAC,IAAD,CAAStO,MAAOvG,IAAKkH,EAAE,qBAA2D,OAApCjE,KAAK1C,MAAM+G,SAASoP,cAA4D,IAApCzT,KAAK1C,MAAM+G,SAASoP,aAAyBzT,KAAKX,MAAMuS,QAAU,KAAO,QAAS2E,UAAU,MAAMlU,MAAO,CAAE3E,QAAS,SAC7M,8BACC,kBAAC,IAAD,CAAQyN,UAAU,EAAMnM,UAAWC,YAAKN,EAAQ6S,WAAgD,OAApCxR,KAAK1C,MAAM+G,SAASoP,cAA4D,IAApCzT,KAAK1C,MAAM+G,SAASoP,aAAyBzT,KAAKX,MAAMuS,QAAUjT,EAAQ8C,OAAS9C,EAAQ6X,iBAClM,kBAAC,IAAD,UAMJ,kBAAC,IAAD,CAASxX,UAAWL,EAAQ2C,UAE5B,yBAAKtC,UAAWL,EAAQ8X,SACvB,yBAAKzX,UAAWL,EAAQ+X,cACtB1W,KAAKX,MAAMkS,OAAO3V,OAAS,GAAK,kBAAC,IAAD,CAAO+a,SAAS,SAAS3W,KAAKX,MAAMkS,OAAOxS,KAAI,SAAC2J,EAAOlE,GAAR,MAAc,CAAEkE,EAAO7I,IAAM+W,cAAc,KAAM,CAAErU,IAAK,YAAciC,UAGvJ,kBAAC,IAAD,CAAaxF,UAAWL,EAAQkY,eAAgB/S,MAAM,WAarD,kBAAC,IAAD,CAAQgT,kBAAkB,EAAMb,QAAQ,YAAYvU,QAAS,kBAAM,EAAK0Q,SAASnS,QAAQ0U,cAAcW,cACtG,kBAAC,IAAD,CAAShS,MAAOvG,IAAKkH,EAAE,eACtB,kBAAC,IAAD,UAMJ,yBAAKjF,UAAW,kBAAmBqD,MAAO,CAAEjE,SAAU,WAAY8R,OAAQ7L,EAAS0S,aAAe,UAChG/W,KAAKX,MAAM+O,SAAW,yBAAKpP,UAAWL,EAAQyP,SAC9C,kBAAC,IAAD,OAGD,kBAAC,IAAD,CACCtM,IAAK9B,KAAKoS,SACVU,KAAM9S,KAAKX,MAAMyS,UACjBnR,QAASX,KAAKsS,qB,GA/dGzS,IAAM4C,WAyeXjE,uBAziBA,SAAAtB,GAAK,MAAK,CACxBkR,QAAS,CACRhQ,SAAU,WACV0R,gBAAiB,qBACjBjS,MAAO,OACPqS,OAAQ,OACRxS,QAAS,OACTsZ,WAAY,SACZC,eAAgB,UAEjBP,aAAc,CACbQ,aAAc,EACdjN,YAAa,GACbpM,MAAO,QAER4Y,QAAS,CACR/Y,QAAS,QAEVmZ,eAAgB,CACfnZ,QAAS,UACTyZ,WAAY,UAEbxW,QAAS,CACRjD,QAAS,OACTuZ,eAAgB,UAEjBzF,WAAY,CACX5O,QAAS,UACTlF,QAAS,OACTsZ,WAAY,SACZ5Z,OAAQ,GAEToY,MAAO,CACN4B,WAAYla,EAAM6S,QAAQ,GAC1BzN,KAAM,GAEPsT,OAAQ,CACP/X,MAAO,KAERL,KAAM,CACLJ,OAAQ,IAETgZ,WAAY,CACXxT,QAAS,IAEVtB,QAAS,CACRlE,OAAQ,UAETiZ,gBAAiB,CAChBnG,OAAQ,GACR9S,OAAQ,GAETqE,OAAQ,CACPqO,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,KACvCvG,MAAO,kBACP1G,OAAQ,OAEToZ,eAAgB,CACf1G,gBAAiB,OACjB1S,OAAQ,UA8eKoB,CAAmB4R,I,4MCxkBnB,SAASiH,EAAS/Z,GAAQ,IAChC+G,EAAa/G,EAAb+G,SAEFiT,EAAWC,mBAHsB,EAIPpQ,mBAASxK,YAAO,IAAIC,KAAQyH,EAAS1H,OAAQ,CAAEE,OAAQC,IAAQC,IAAKC,kBAJ7D,mBAIhCqa,EAJgC,KAItBG,EAJsB,OAKfrQ,mBAAS,IALM,mBAKhCsQ,EALgC,KAK1BC,EAL0B,OAMTvQ,mBAAS,IANA,mBAMhCwQ,EANgC,KAMvBC,EANuB,OAOXzQ,mBAAS,IAPE,mBAOhC0Q,EAPgC,KAOxBC,EAPwB,KA8BvC,OApBAzT,EAAShC,MAAT,aAAmB8N,SAAU,SAAUxS,UAAW,UAAa0G,EAAShC,OACxEgC,EAAS1H,OAAS0H,EAAS1H,QAAU,sBACrC0H,EAAS0T,QAAU1T,EAAS1H,OAAOjB,QAAQ,MAAQ,EAAI,IAAQ2I,EAAS1H,OAAOjB,QAAQ,MAAQ,EAAI,IAAU,KAE7G4L,qBAAU,WACTqM,aAAa2D,EAASrX,SACtBqX,EAASrX,QAAU2T,YAAW,kBAAM4D,EAAY7a,YAAO,IAAIC,KAAQyH,EAAS1H,OAAQ,CAAEE,OAAQC,IAAQC,IAAKC,oBAAoBqH,EAAS0T,SAGpI3M,IAAS4M,WAAW,YAAYC,UAAY7M,IAAS4M,WAAW,YAAYE,YAC/EN,EAAWO,qBAAW/M,IAAS4M,WAAW,YAAYC,SAAU7M,IAAS4M,WAAW,YAAYE,YAChGJ,EAAUM,oBAAUhN,IAAS4M,WAAW,YAAYC,SAAU7M,IAAS4M,WAAW,YAAYE,aAG3F9M,IAAS4M,WAAW,YAAYP,MACnCC,EAAQtM,IAAS4M,WAAW,YAAYP,QAGvC,CAACpT,IAIL,yBAAKhC,MAAOgC,EAAShC,OACnBtF,IAAKkH,EAAE,aAAauJ,QAAQ,YAAa6J,IAExB,IAAjBhT,EAASgU,KAAiB,yBAAKhW,MAAO,CAAEjF,OAAQ,QAAS+S,SAAU,WAEnE,0BAAMnR,UAAU,iCAFU,IAE8ByY,GAAc,kBAAC,IAAD,CAAkB1T,KAAK,WAC7F,0BAAM1B,MAAO,CAAEjF,OAAQ,YAEvB,0BAAM4B,UAAU,8BALU,IAK2B2Y,EAAUhb,YAAOgb,EAAS,SAAW,kBAAC,IAAD,CAAkB5T,KAAK,WACjH,0BAAM1B,MAAO,CAAEjF,OAAQ,YAEvB,0BAAM4B,UAAU,gCARU,IAQ6B6Y,EAASlb,YAAOkb,EAAQ,SAAW,kBAAC,IAAD,CAAkB9T,KAAK,aAS5G,IAAM4L,EAAiB,CAC7BC,kBAAkB,EAClBtM,MAAOvG,IAAKkH,EAAE,QACdzG,KAAM,kB,kPC/CDqM,EAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtC6B,IAAK,CACJlB,MAAO,OACPqS,OAAQ,QAEToI,YAAa,CACZxU,MAAO,OACP1F,SAAU,WACVma,KAAM,EACNC,OAAQ,EACR3a,MAAO,OACPqS,OAAQ,OACRuI,OAAQ,IACR/a,QAAS,OACTsZ,WAAY,SAEZ,QAAS,CACR5Z,OAAQF,EAAM6S,QAAQ,GACtB2I,OAAQ,YAGVC,iBAAkB,GAElBC,cAAe,CACd9I,gBAAiB,OACjB+I,UAAW,qCACX5I,aAAc,MACdpS,MAAO,OACPqS,OAAQ,QAET4I,QAAS,CACR3I,SAAU,OACVrM,MAAO5G,EAAMkN,QAAQpI,QAAQqI,KAC7BhM,UAAW,2BACXX,QAAS,QAET,UAAW,CACVqb,QAAS,KACTrb,QAAS,QACTkF,QAAS,WAGXoW,WAAY,OAKE,SAASC,EAAI3b,GAAQ,IAC3B+G,EAAsB/G,EAAtB+G,SAAUF,EAAY7G,EAAZ6G,QACZxF,EAAUkL,IAFkB,EAIlB1C,mBAAS9C,EAAS5D,UAAUyY,aAArC9F,EAJ2B,sBAKdjM,mBAAS9C,EAAS5D,UAAU0Y,gBAAmBta,MAAMC,QAAQuF,EAAS5D,UAAU0Y,iBAAmB9U,EAAS5D,UAAU0Y,gBAAkB9U,EAAS5D,UAAU0Y,gBAAgBxd,MAAM,KAAQ,CAAEyP,IAAS4M,WAAW,YAAYC,SAAU7M,IAAS4M,WAAW,YAAYE,YAAlR9Z,EAL2B,sBAMJ+I,mBAAS,IANL,mBAM3B8M,EAN2B,KAMlBmF,EANkB,KAS5Bra,EAAMwY,mBACN8B,EAAyBC,uBAAY,WAAYva,EAAIkB,QAAUD,OAAO,IAGtEuZ,EAAsBD,uBAAY,SAAAE,GAAK,OAAIza,EAAIkB,QAAQuZ,MAAMA,EAAM7d,MAAM,QAAO,IAGhFwD,EAAc,SAACC,EAAUC,EAAOC,GAEpB,aAAbF,GAEHga,GAAW,SAAAK,GACV,OAAKA,EAAYna,EAAOkD,KAAOiX,EAAYna,EAAOkD,IAAIpE,WAAaiB,EAAMyB,IAKlE2Y,GAJNna,EAAOqB,QAAQvC,SAAWiB,EAAMyB,IACzB,eAAK2Y,EAAZ,eAA0Bna,EAAOkD,GAAKlD,SAS1CgI,qBAAU,WAqBT,OApBAnD,EAAQT,SAAQ,SAAApE,GAGfA,EAAO4L,mBAAmB,YAAY3C,OAAM,SAAAC,GAC3CC,QAAQC,MAAMF,GAEd4Q,GAAW,SAAAK,GACV,OAAKA,EAAYna,EAAOkD,IAIjBiX,EAHC,eAAKA,EAAZ,eAA0Bna,EAAOkD,GAAK,aAQzClD,EAAOc,OAAOjB,MAIR,kBAAMgF,EAAQT,SAAQ,SAAApE,GAAM,OAAIA,EAAOe,SAASlB,SAErD,CAACgF,IAGJ,IAAIuV,EAAa,GAAIpB,EAAc,GACnC,GAAInU,EAAQvI,OAAS,GAAKuI,EAAQvI,SAAWqS,OAAOC,KAAK+F,GAASrY,OAAQ,CAAC,IAAD,WAEhE2G,GACR,IAAIjD,EAAS2U,EAAQ1R,GACrB,GAAe,OAAXjD,EAAiB,CACpB,IAAI4U,EAAS,kBAACyF,EAAD,CAAQpX,IAAK,UAAYjD,EAAOkD,GAAIpE,SAAUkB,EAAOqB,QAAQvC,SAAUkB,OAAQA,EAAQ+E,SAAUA,EAAS5D,YACvHiZ,EAAWtV,KAAK8P,GAEhB,IAAIrB,EAAO,KACX,GAAIvT,EAAOsa,WAAWC,OACrBhH,EAAO,kBAAC,IAAD,CAAQtQ,IAAK,YAAcjD,EAAOkD,GAAImM,IAAKrP,EAAOgO,KAAMsB,IAAKtP,EAAOsa,WAAWC,OAAQnY,QAAS,kBAAM6X,EAAoBja,EAAOqB,QAAQvC,iBAE5I,CACJ,IAAIiB,EAAQC,EAAOK,iBACbnC,EAAO8B,EAAOuB,QAAQ,KAAMxB,QAAuBya,IAAdza,EAAMyB,IAAoBzB,EAAMyB,IAAM,MAC3E7D,EAASqC,EAAOuC,SAAS,OAAQ,KAAMxC,QAAuBya,IAAdza,EAAMyB,IAAoBzB,EAAMyB,IAAM,MAC5F2H,QAAQ4C,IAAIhM,QAAuBya,IAAdza,EAAMyB,IAAoBzB,EAAMyB,IAAM,MAC3D2H,QAAQ4C,IAAIpO,GAEZ4V,EAAO,kBAAC,IAAD,CAAQxQ,MAAOpF,EAAQsF,IAAK,YAAcjD,EAAOkD,GAAImM,IAAKrP,EAAOgO,KAAM5L,QAAS,kBAAM6X,EAAoBja,EAAOqB,QAAQvC,YAAW,0BAAMY,UAAWC,YAAK,WAAazB,MAG/K8a,EAAYlU,KAAK,kBAAC,IAAD,CAAS7B,IAAK,WAAajD,EAAOkD,GAAIc,MAAOhE,EAAOgO,KAAMyM,aAAYza,EAAOgO,KAAM0M,OAAK,GAAEnH,MApB7G,IAAK,IAAItQ,KAAO0R,EAAU,EAAjB1R,GAyBV,OAED,kBAAC,IAAMlB,SAAP,KACC,kBAAC,IAAD,CAAKrC,UAAWL,EAAQ2Z,aACvB,kBAAC,IAAD,KAAavb,IAAKkH,EAAE,WAApB,KACCqU,GAEF,kBAAC,IAAD,CAAY2B,UAAU,EAAMC,OAAQ9b,EAAUgV,KAAMA,EAAMpU,UAAWL,EAAQI,IAAKob,UAAWd,GAC5F,kBAAC,IAAD,CACCe,YAAY,0EACZC,IAAI,6CAGJX,IAQH,SAASC,EAAOrc,GAAQ,IACfc,EAA+Bd,EAA/Bc,SAAUkB,EAAqBhC,EAArBgC,OAAQ+E,EAAa/G,EAAb+G,SACpB1F,EAAUkL,IAEZyQ,EAAa,KAAMC,EAAS,GAIhC,GAHA9R,QAAQ+R,KAAK,cAAgBlb,EAAOmb,SAAW,IAAMnb,EAAOgO,KAAO,kBAG/DhO,EAAOsa,YAActa,EAAOsa,WAAWC,QAAqD,gBAA3Cva,EAAOsa,WAAWC,OAAOtd,OAAO,EAAG,IACvF+d,EAAaI,IAAEC,QAAQ,CACtB3b,UAAWL,EAAQga,iBACnBiC,KAAM,aAAetb,EAAOsa,WAAWC,OAAS,YAAclb,EAAQia,cAAgB,OACtFiC,SAAU,CAAE,GAAI,UAKb,CACJN,EAAS,GACT,IAAIlb,EAAQC,EAAOK,iBACbnC,EAAO8B,EAAOuB,QAAQ,KAAMxB,QAAuBya,IAAdza,EAAMyB,IAAoBzB,EAAMyB,IAAM,MAC3E7D,EAASqC,EAAOuC,SAAS,OAAQ,KAAMxC,QAAuBya,IAAdza,EAAMyB,IAAoBzB,EAAMyB,IAAM,MAE5F2H,QAAQ4C,IAAIpO,GACZ,IAAM4M,EAAYC,YAAW,CAACwF,KAAMrS,GAAS,CAACqQ,KAAK,UACnD7E,QAAQ4C,IAAIxB,EAAUyF,MAEtBgL,EAAaI,IAAEC,QAAQ,CACtB3b,UAAWL,EAAQga,iBACnBiC,KAAM,eAAiB3b,YAAKN,EAAQia,eAAiB,kBAAoB3Z,YAAKN,EAAQma,QAAS,WAAatb,GAAQ,kBACpHqd,SAAU,CAAE,GAAI,MAKlB,IAAMC,EAA2BxB,uBAAY,WAAYtZ,KAAK+a,eAAeC,gBAAgB,IAE7F,OAED,kBAAC,IAAD,CAAeC,aAAa,EAAM7c,SAAUS,MAAMC,QAAQV,GAAYA,EAAWA,EAASzC,MAAM,KAAM6B,KAAM8c,EAAYY,YAAaJ,GACpI,kBAAC,IAAD,CAAgB9b,UAAWL,EAAQqa,WAAYmC,UAAW9W,EAAS+W,kBAAoB,SAAUC,UAAWhX,EAASiX,mBAAoB,EAAMf,OAAQ,CAAC,EAAEA,IACxJjb,EAAOgO,S,iCCrNV,4EAKe,SAASiO,EAAoBje,GAC3C,OAAQ,kBAAC,UAAD,eAAWkD,YAAY,GAAUlD,M,4MCQpCuM,EAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtCse,MAAO,CACN3d,MAAO,IACPqS,OAAQ,IACRtN,QAAS,EACTjF,UAAW,cAKE,SAAS8d,EAAQne,GAAQ,IAC/B+G,EAAa/G,EAAb+G,SACF1F,EAAUkL,IAFsB,EAIf1C,mBAAS,MAJM,mBAI/B2L,EAJ+B,KAI1B4I,EAJ0B,KAKtCpU,qBAAU,WAETgF,IAAWC,cAAcoP,kBAAkBtX,EAASgW,KAAKuB,MACxD,SAAAC,GAE6B,MAAxBA,EAASC,YACZJ,EAAQ3N,KAAKC,MAAM6N,EAASE,UAG9B,SAAArT,GAAK,OAAID,QAAQC,MAAMA,QAGtB,CAACrE,EAASgW,MAEb,IAAI2B,EAAkB,GAGtB,IAAKlJ,EACJ,OAAO,KAGP,IAAK,IAAImJ,KAAOnJ,EAAKmJ,IAAK,CACzB,IAAIC,EAAWpJ,EAAKmJ,IAAIA,GACxBC,EAAS5Y,MAAgB,IAAR2Y,EAAYlf,IAAKkH,EAAE,SAAoB,IAARgY,EAAYlf,IAAKkH,EAAE,YAAciY,EAAS5O,KAE1F,IAAM6O,EAET,kBAAC,IAAD,CAAM5Z,IAAK,OAAS0Z,EAAKpJ,MAAI,GAC5B,kBAAC,IAAD,CAAO7T,UAAWL,EAAQ6c,OACzB,kBAAC,IAAD,CAAYvF,QAAQ,SAClBiG,EAAS5Y,OAEX,kBAAC,IAAD,CAAY2S,QAAQ,WAClBiG,EAASE,QASVJ,EAAgB5X,KAAK+X,GAIvB,OAED,kBAAC,IAAD,CAAM3M,WAAS,EAAC6M,QAAQ,gBAAgBtM,QAAS,GAC/CiM,GAOK,IAAMrM,EAAiB,CAC7BC,kBAAkB,EAClBtM,MAAOvG,IAAKkH,EAAE,WACdzG,KAAM,0B,uPCeD8e,E,YAEL,WAAYhf,GAAQ,IAAD,8BAClB,4CAAMA,KAoBP6B,YAAc,SAACC,EAAUC,GAGP,aAAbD,GAA2BC,IAAqC,IAA5BA,EAAMyB,IAAIpF,QAAQ,OACzD2D,EAAMyB,IAAMsH,IAAQnM,0BAA0BoD,EAAMyB,MAIpC,cAAb1B,GAA4BC,GAA8B,kBAAdA,EAAMyB,MACrDzB,EAAMyB,IAAMzB,EAAMyB,IAAIpF,QAAQ,SAAW,GAG1C,EAAK+D,SAAL,eAAiBL,EAAWC,IAAS,WACpC,EAAKkd,eA/BN,EAAKld,MAAQ,GAHK,E,iFASlB,IAAK,IAAID,KAAYY,KAAK1C,MAAMgC,OAAOoK,OACtC1J,KAAK1C,MAAMgC,OAAO4L,mBAAmB9L,GAAU,GAAMmJ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,MAIjFxI,KAAK1C,MAAMgC,OAAOc,OAAOJ,KAAKb,e,6CAI9Ba,KAAK1C,MAAMgC,OAAOe,SAASL,KAAKb,e,iCAoBrB,IAAD,OACVwU,aAAa3T,KAAKwc,iBAEdxc,KAAKX,MAAMod,YAA0C,IAA7Bzc,KAAKX,MAAMod,UAAU3b,KAAgBd,KAAKX,MAAMkd,UAAYvc,KAAKX,MAAMkd,SAASzb,KAAOd,KAAKX,MAAMqd,UAAY1c,KAAKX,MAAMqd,SAAS5b,MAC7Jd,KAAKwc,gBAAkB5I,YAAW,WACjC,EAAKnU,UAAS,SAAAoO,GAAS,MAAK,CAAE0O,SAAS,eAAM1O,EAAU0O,SAAjB,CAA2Bzb,IAAKsH,IAAQ7M,cAAcsS,EAAU0O,SAASzb,KAAO,QAAO,kBAAM,EAAKyb,gBACtI,Q,mCAKJvc,KAAK1C,MAAMiD,WAAWP,KAAK1C,MAAMgC,U,qCAGnBF,EAAU2B,GACxBf,KAAK1C,MAAMgC,OAAOsE,eAAexE,EAAU2B,GAAOwH,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,Q,+BAGpE,IAAD,EACqCxI,KAAK1C,MAA1CqB,EADA,EACAA,QAASge,EADT,EACSA,SAAUxI,EADnB,EACmBA,MAAO7U,EAD1B,EAC0BA,OAC9Bsd,EAAa,GAAsBC,EAAiB,GAGpD7c,KAAKX,MAAMyd,YAA4C,KAA9B9c,KAAKX,MAAMyd,WAAWhc,MAClD8b,EAAWG,gBAAkB,SAAWzd,EAAOqB,QAAQqc,sBAAwB,IAAMhd,KAAKX,MAAMyd,WAAWhc,KAAO,KAI/Gd,KAAKX,MAAMqd,UAAY1c,KAAKX,MAAMqd,SAAS5b,MAC9C+b,EAAehf,OAAUmC,KAAKX,MAAMkd,UAAYvc,KAAKX,MAAMkd,SAASzb,KAAQ,GAAK,MAGlF,IAAMmc,EAAmBjd,KAAKX,MAAMod,WAAazc,KAAKX,MAAMod,UAAU3b,IAAM,CAAC,kBAAC,IAAD,CAAWY,QAAS1B,KAAK4D,eAAejC,KAAK3B,KAAM,SAAS,KAAW,kBAAC,IAAD,OAAgB,CAAC,kBAAC,IAAD,CAAU0B,QAAS1B,KAAK4D,eAAejC,KAAK3B,KAAM,QAAQ,MAK/N,OAEF,kBAAC,IAAMqB,SAAP,KAEE8S,EAAQ,GAAK,kBAAC+I,EAAA,EAAD,CAASle,UAAWL,EAAQ2C,UAC1C,yBAAKtC,UAAWC,YAAKN,EAAQ6Q,UAAWmN,GAAYhe,EAAQge,WAE3D,yBAAK3d,UAAWC,YAAKe,KAAKX,MAAMyd,YAA4C,KAA9B9c,KAAKX,MAAMyd,WAAWhc,IAAanC,EAAQwe,MAAQxe,EAAQye,SAAU/a,MAAQua,EAAalb,QAAS1B,KAAKO,WAAWoB,KAAK3B,OAErK,yBAAKhB,UAAWL,EAAQ0e,aACvB,uBAAGre,UAAWL,EAAQ2e,iBACpBtd,KAAKX,MAAMke,aAAevd,KAAKX,MAAMke,YAAYzc,KAAO,CAACd,KAAKX,MAAMke,YAAYzc,IAAK,wBAAIyB,IAAK,MAAQjD,EAAOkD,MAC7GxC,KAAKX,MAAMoK,QAAUzJ,KAAKX,MAAMoK,OAAO3I,KAAOd,KAAKX,MAAMoK,OAAO3I,IAAM,MAAOd,KAAKX,MAAMiE,OAAStD,KAAKX,MAAMiE,MAAMxC,KAEpH,uBAAG9B,UAAWL,EAAQ6e,kBACpBxd,KAAKX,MAAMkd,UAAYnU,IAAQnM,0BAA0B+D,KAAKX,MAAMkd,SAASzb,KAD/E,MACwFd,KAAKX,MAAMqd,UAAY1c,KAAKX,MAAMqd,SAAS5b,OAKrI,yBAAK9B,UAAWL,EAAQ/C,OAAQyG,MArCG,IAsClC,yBAAKrD,UAAWL,EAAQ8e,UAAWpb,MAAQwa,KAG5C,yBAAK7d,UAAWL,EAAQ+e,UACvB,yBAAK1e,UAAWC,YAAKN,EAAQgf,YAAahf,EAAQif,mBAWlD,yBAAK5e,UAAWC,YAAKN,EAAQgf,YAAahf,EAAQkf,oBAEjD,kBAACC,EAAA,EAAD,CAAK9e,UAAWL,EAAQof,cAAeha,KAAK,QAAQD,MAAM,aACzD,kBAAC,IAAD,CAAkBpC,QAAS1B,KAAK4D,eAAejC,KAAK3B,KAAM,YAAY,MAGtEid,EAAiBle,KAAI,SAACvB,EAAMgH,GAAP,OACtB,kBAACsZ,EAAA,EAAD,CAAKvb,IAAK,QAAUiC,EAAGxF,UAAWL,EAAQof,cAAeha,KAAK,QAAQD,MAAM,WAC1EtG,MAIF,kBAACsgB,EAAA,EAAD,CAAK9e,UAAWL,EAAQof,cAAeha,KAAK,QAAQD,MAAM,aACzD,kBAAC,IAAD,CAAcpC,QAAS1B,KAAK4D,eAAejC,KAAK3B,KAAM,QAAQ,OAIhE,yBAAKhB,UAAWC,YAAKN,EAAQgf,YAAahf,EAAQqf,2B,GAlI5Bne,IAAM4C,WAoJhBjE,eAxOA,SAAAtB,GAAK,MAAK,CACxBoE,QAAS,CACRlE,OAAQ,cAEToS,UAAW,CACVpS,OAAQF,EAAM6S,QAAQ,GAAI,IAE3B4M,SAAU,CACT7e,UAAWZ,EAAM6S,SAAS,IAE3BoN,MAAO,CACNjN,OAAQ,QACRxS,QAAS,OACTsZ,WAAY,WACZiH,mBAAoB,SACpBvF,OAAQ,WAET0E,QAAS,CACRtN,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,KACvC3M,QAAS,OACTgb,OAAQ,WAET2E,YAAa,CACZvN,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,KAAO,KAC9CvG,MAAO,OACPlB,QAAS,OACTxF,OAAQ,EACRS,MAAO,OACPqgB,UAAW,QAEZZ,gBAAiB,CAChBzf,MAAO,MACPkM,MAAO,OACP3M,OAAQ,GAETogB,iBAAkB,CACjB3f,MAAO,MACPkM,MAAO,QACP3M,OAAQ,EACRO,UAAW,SAEZ/B,OAAQ,CACPkU,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,KACvCxM,MAAO,OACPqS,OAAQ,OAETuN,UAAW,CACV3N,gBAAiB5S,EAAMkN,QAAQlI,UAAUmI,KACzC6F,OAAQ,QAETwN,SAAU,CACThgB,QAAS,OACTsZ,WAAY,WAEb2G,YAAa,CACZjgB,QAAS,OACTuZ,eAAgB,SAChBD,WAAY,SACZmH,WAAY,QAEbP,gBAAiB,CAChBtb,KAAM,EACNW,cAAe,SACf+T,WAAY,YAEb6G,kBAAmB,CAClBvb,KAAM,GAEP0b,iBAAkB,CACjB1b,KAAM,EACN2U,eAAgB,OAEjB8G,cAAe,CACd3gB,OAAQ,SAETghB,mBAAoB,CACnBhhB,OAAQ,SACR+S,SAAU,SACVD,OAAQ,OACRrS,MAAO,WAyJMW,CAAmB8d,GCtPnB,SAASpY,EAAU5G,GAAQ,IACjC6G,EAAsB7G,EAAtB6G,QAASE,EAAa/G,EAAb+G,SACjB,OAAOF,EAAQpF,KAAI,SAACO,EAAQkF,GAAT,OAAe,kBAAC6Z,EAAD,eAAgB9b,IAAK,kBAAoBjD,EAAOkD,IAAQlF,EAAxD,CAA+D6W,MAAO3P,EAAGmY,SAAgB,IAANnY,GAA6B,OAAlBH,EAAS7G,MAAoC,OAAnB6G,EAASf,MAAgBhE,OAAQA,QAP5L,yC,gFCAA,IAAIP,EAAM,CACT,UAAW,IACX,UAAW,KAIZ,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCCvBpB,OAAe,WAId,sBAAuB,+BAKvB,cAAe,wBACf,oBAAqB,8BAKrB,GAAM,KACN,IAAO,MAEP,KAAQ,OACR,MAAS,QAET,KAAQ,SACR,OAAU,UAEV,KAAQ,QACR,OAAU,cAEV,UAAW,aACX,MAAS,mBACT,QAAW,mBAEX,WAAc,aACd,KAAQ,OACR,QAAW,WAEX,YAAa,gBAKb,QAAW,oBACX,YAAe,c,iCCzChB,OAAe,c,wCCAf,IAAIzD,EAAM,CACT,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,aAAc,KAIf,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCC1BpB,qE,oBCAA,IAAIzD,EAAM,CACT,YAAa,IACb,eAAgB,IAChB,YAAa,IACb,eAAgB,IAChB,YAAa,KAId,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCC1BpB,qE,oBCAA,IAAIzD,EAAM,CACT,eAAgB,IAChB,kBAAmB,IACnB,eAAgB,IAChB,kBAAmB,IACnB,eAAgB,KAIjB,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCC1BpB,qE,oJCyBMqH,EAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtCuD,UAAW,CACVmC,QAAS1F,EAAM6S,QAAQ,EAAG,EAAG,EAAG,IAEjCiP,gBAAgB,eACd9hB,EAAM4F,YAAYC,KAAK,MAAQ,CAC/BrF,QAAS,OACT,iBAAkB,CAAEA,QAAS,SAC7B,kBAAmB,CAAEA,QAAS,SAC9B,kBAAmB,CAAEA,QAAS,eAU3BiM,EAASnL,aA9BA,SAAAtB,GAAK,MAAK,CACxBgE,cAAe,SAAA5D,GAAK,sBAChBA,EAAML,SAEVmE,gBAAiB,SAAA9D,GAAK,oBACrBwG,MAAO,OACPqM,SAAU,QACP7S,EAAML,YAuBIuB,EAAmB,SAAAlB,GAAU,IACnCqB,EAAqCrB,EAArCqB,QAASW,EAA4BhC,EAA5BgC,OAAQD,EAAoB/B,EAApB+B,MAAOD,EAAa9B,EAAb8B,SAChC,OAED,0BAAMJ,UAAWC,YAAMG,IAAaE,EAAOC,iBAAmBZ,EAAQuC,eAAmB9B,IAAaE,EAAOE,mBAAqBb,EAAQyC,kBACxI/B,GAASA,EAAM0B,MADjB,IACyB1B,GAASA,EAAMkG,SAMxC,SAASS,EAAY1I,GAAQ,IACpBgC,EAAyDhC,EAAzDgC,OAAQF,EAAiD9B,EAAjD8B,SAAU8H,EAAuC5J,EAAvC4J,SAAoB+X,EAAmB3hB,EAA7B+L,SADT,EAQGlC,mBAASD,GARZ,mBAQpBsC,EARoB,KAQXF,EARW,KAW3B,OAFAhC,qBAAU,kBAAMgC,EAAWpC,KAAW,CAACA,IAIxC,kBAAC,IAAD,CACCsC,QAASA,EACTH,SAAU4V,GAZO,SAAC3W,GACjBgB,EAAWhB,EAAEiB,OAAOC,SACpBlK,EAAOsE,eAAexE,EAAUkJ,EAAEiB,OAAOC,SAASjB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,OAW9EzH,OAAmB,IAAZyI,EACP1F,MAAM,YAMP,SAASob,EAAc5hB,GAAQ,IACtBgC,EAA+BhC,EAA/BgC,OAAQF,EAAuB9B,EAAvB8B,SAAU8H,EAAa5J,EAAb4J,SAO1B,IAAiB,IAAbA,GAAqBA,EAAW,EACnC,OAAO,kBAACyC,EAAD,iBAAYrM,EAAZ,CAAmB+L,SAAU,QAIrC,OAED,kBAAC,IAAD,CACC4M,QAAQ,WACRnS,MAAM,UACNC,KAAK,QACLob,UAAW,0BAAMngB,UAAW,kBAC5B0C,QAjBgB,WACfpC,EAAOsE,eAAexE,GAAU,GAAMmJ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,QAmBjEzL,IAAKkH,EAAE,YAWT,SAAS8D,EAAMzK,GAAQ,IACd0K,EAAc1K,EAAd0K,MACFoX,EADgB9hB,EAAP2K,KACS,EAExB,OAED,kBAAC,IAAM5G,SAAP,KACE2G,EACAoX,GAAa,8BAMf,SAAS3c,EAAUnF,GAAQ,IAClBgG,EAAoBhG,EAApBgG,MAAO5E,EAAapB,EAAboB,SACTC,EAAUkL,IAEhB,OAED,kBAAC,IAAMxI,SAAP,KACC,kBAAC0G,EAAD,CAAOC,MAAO1E,IACd,yBAAKtE,UAAWL,EAAQ8B,WACtB/B,IAQH,SAASmH,EAAevI,GAAQ,IACzBgC,EAAiEhC,EAAjEgC,OAAQF,EAAyD9B,EAAzD8B,SAAU8H,EAA+C5J,EAA/C4J,SAAU5D,EAAqChG,EAArCgG,MAAOwC,EAA8BxI,EAA9BwI,IAAKC,EAAyBzI,EAAzByI,IAAKmD,EAAoB5L,EAApB4L,KAAMmW,EAAc/hB,EAAd+hB,UACnD1gB,EAAUkL,IAFc,EASJ1C,mBAASD,GATL,mBASvB0B,EATuB,KAShBkC,EATgB,KAU9BxD,qBAAU,kBAAMwD,EAAS5D,KAAW,CAACA,IAKrCgC,EAAOA,GAAQ,EAEf,IAAIoW,IAHJvZ,EAAMA,GAAO,MADbD,EAAMA,GAAO,MAGbuZ,EAAYA,GAAa,IACY,IAAO,GAC5C,OAED,kBAAC5c,EAAD,CAAWa,MAAOA,GAASlE,GAC1B,kBAAC,IAAD,CACCT,QAAS,CAAE4gB,UAAW5gB,EAAQqgB,iBAE9BQ,kBApBgB,SAAClX,EAAGxH,GACpBgK,EAAShK,GACTxB,EAAOsE,eAAexE,EAAU0B,GAAKyH,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,OAmBhEzH,MAAO6H,EACP6W,kBAAkB,OAClBC,MAAO,YAAI7gB,MAAMwgB,GAAWnR,QAAQnP,KAAI,SAAA4gB,GAAM,MAAK,CAAE,MAAS7Z,EAAI6Z,EAAOL,EAAU,MAASxZ,EAAI6Z,EAAOL,MACvGxZ,IAAKA,EACLC,IAAKA,EACLmD,KAAMA,KAUO,WACdnE,eAAgB,CACf6E,KAAM,CACL7I,MAAO,SAACD,GAAD,OAASA,EAAIrF,aAKrB2K,QAAS,CACRb,KAAM,KACN/H,KAAM,kBAEPoiB,KAAM,CACLpiB,KAAM,CACL,KAAQ,YACR,MAAS,eAEV6B,MAAO,CACN,KAAQ,OACR,MAAS,WAGXoG,SAAU,CACTF,KAAM,KACN/H,KAAM,iBAEPoL,MAAO,CACNrD,KAAM,MAEPnH,SAAU,CACTZ,KAAM,cAEPmL,MAAO,CACNtJ,MAAO,CACN,KAAQ,KACR,MAAS,OAEV7B,KAAM,SAEP6H,YAAa,CACZE,KAAM,SACN/H,KAAM,eAEPqiB,QAAS,CACRxgB,MAAO,CACN,KAAQ,KACR,MAAS,OAEV7B,KAAM,SAEPsiB,KAAM,CACLva,KAAM,QACN/H,KAAM,kBAGRD,WAAY,CACXwK,QACAtF,YACAoD,iBAEA+C,MAAO/C,GAERT,QAAS,CACRuE,SACA3D,cACAkZ,gBAEAvW,MAAO3C,EACP6Z,QAASX,GAEVjiB,OAAQ,CACP2M,KAAM,CAELvK,MAAO,CACN4F,KAAM,CACL,MAAS,OACT,WAAc,QAEfC,MAAO,CACN,MAAS,a,wHCrPO6a,E,YAEpB,aAAuC,IAAD,EAA1B1F,EAA0B,uDAApB,KAAM1Z,EAAc,uDAAJ,GAAI,4BACrC,+CAGK0L,OAAS2T,IAAG3F,EAAD,aAAQ4F,QAAS,KAAUtf,EAA3B,CAAoCuf,MAAO,aAC3D,EAAKC,iBAAmB,GAQxB,EAAK9T,OAAO+T,GAAG,WAAW,kBAAM,EAAKC,KAAK,cAG1C,EAAKhU,OAAO+T,GAAG,aAAa,SAAAE,GAAQ,OAAI,EAAKD,KAAK,YAAaC,MAG/D,EAAKjU,OAAO+T,GAAG,mBAAmB,SAAA1X,GAAK,OAAI,EAAK2X,KAAK,QAAS,CAAE,KAAQ,YAAa,MAAS,kBAAmB,QAAW3X,EAAM6X,aAGlI,EAAKlU,OAAO+T,GAAG,oBAAoB,kBAAM,EAAKC,KAAK,QAAS,CAAE,KAAQ,YAAa,MAAS,mBAAoB,QAAW,4BAG3H,EAAKhU,OAAO+T,GAAG,cAAc,SAAAI,GAAM,OAAI,EAAKH,KAAK,aAAcG,MAG/D,EAAKnU,OAAO+T,GAAG,iBAAiB,SAAA1X,GAAK,OAAI,EAAK2X,KAAK,QAAS,CAAE,KAAQ,UAAW,MAAS,gBAAiB,QAAW3X,EAAM6X,aAG5H,EAAKlU,OAAO+T,GAAG,mBAAmB,kBAAM,EAAKC,KAAK,QAAS,CAAE,KAAQ,UAAW,MAAS,kBAAmB,QAAW,iCAGvH,EAAKhU,OAAO+T,GAAG,SAAS,SAAA1X,GAAK,OAAI,EAAK2X,KAAK,QAAS,CAAE,KAAQ,QAAS,MAAS,QAAS,QAAW3X,EAAM6X,aAM1G,EAAKlU,OAAO+T,GAAG,eAAe,SAAC5d,EAAInD,GAAL,OAAeuU,YAAW,kBAAM,EAAKzU,YAAYqD,EAAInD,KAAQ,MAxCtD,E,6EA+CtBohB,EAAKC,GAAK,IAAD,QACxBD,EAAM5hB,MAAMC,QAAQ2hB,GAAOA,EAAM,CAACA,IAC9B/c,SAAQ,SAAAlB,GAAE,OAAI,EAAKme,eAAene,EAAIke,Q,qCAO5Ble,EAAIke,GAElB,GAAK1gB,KAAKmgB,iBAAiB3d,IAoBqB,IAA/CxC,KAAKmgB,iBAAiB3d,GAAIoe,IAAIllB,QAAQglB,IAAc1gB,KAAKmgB,iBAAiB3d,GAAIoe,IAAIxc,KAAKsc,OApBxD,CAC/B,IAAIG,EAAMre,EACRgL,QAAQ,MAAO,OACfA,QAAQ,MAAO,MACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OACfA,QAAQ,MAAO,QAES,IAAtBqT,EAAInlB,QAAQ,OACfmlB,GAAO,KAGR7gB,KAAKmgB,iBAAiB3d,GAAM,CAAEqe,IAAK,IAAIC,OAAOD,GAAMD,IAAK,CAACF,IAEtD1gB,KAAKqM,OAAOmC,WACfxO,KAAKqM,OAAOgU,KAAK,YAAa7d,M,kCAYrBA,EAAInD,GAGf,IAAK,IAAM0hB,KADXve,EAAKA,EAAKA,EAAGgL,QAAQ,UAAW,KAAO,GACpBxN,KAAKmgB,iBACnBngB,KAAKmgB,iBAAiBa,eAAeD,IAAS/gB,KAAKmgB,iBAAiBY,GAAMF,IAAII,KAAKze,IACtFxC,KAAKmgB,iBAAiBY,GAAMH,IAAIld,SAAQ,SAAAgd,GAAE,OAAIA,EAAGle,EAAInD,Q,0CASpCgP,EAASqS,GAO5B,MALuB,oBAAZrS,IACVqS,EAAKrS,EACLA,EAAU,MAGJrO,KAAKkhB,cAAc,SAAU,WAAY,CAAE,SAAY,mBAAqB7S,EAAUA,EAAU,IAAM,IAAK,OAAU,mBAAqBA,EAAUA,EAAU,OAAS,QAAUqS,K,gCAO/Kle,EAAIke,GAAK,IAAD,OAEjB,IAAKA,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAKC,UAAU7e,GAAI,SAACgG,EAAK8Y,GAAN,OAAc9Y,EAAM4Y,EAAO5Y,GAAOqW,EAAQyC,SAErGthB,KAAKqM,OAAOgU,KAAK,YAAa7d,EAAIke,K,oCAQtBa,EAAQC,EAAQC,EAAQf,GAAK,IAAD,OAEzC,IAAKA,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAKF,cAAcK,EAAQC,EAAQC,GAAQ,SAAAjZ,GAAG,OAAIA,EAAM4Y,EAAO5Y,GAAOqW,UAE9G7e,KAAKqM,OAAOgU,KAAK,gBAAiBkB,EAAQC,EAAQC,EAAQf,K,wCAQ1CrG,EAAKqG,GAAK,IAAD,OAE1B,IAAKA,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAKzF,kBAAkBtB,GAAK,SAAC7R,EAAKnJ,GAAN,OAAgBmJ,EAAM4Y,EAAO5Y,GAAOqW,EAAQxf,SAEhHW,KAAKqM,OAAOgU,KAAK,UAAWhG,EAAKqG,K,+BAQ1Ble,EAAIke,GAAK,IAAD,OAEhB,IAAKA,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAKM,SAASlf,GAAI,SAACgG,EAAKnJ,GAAN,OAAgBmJ,EAAM4Y,EAAO5Y,GAAOqW,EAAQxf,SAEtGW,KAAKqM,OAAOgU,KAAK,WAAY7d,EAAIke,K,gCAQzBiB,EAASjB,GAAK,IAAD,OAEtB,IAAKA,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAKxU,UAAU+U,GAAS,SAACnZ,EAAKnJ,GAAN,OAAgBmJ,EAAM4Y,EAAO5Y,GAAOqW,EAAQxf,SAE5GW,KAAKqM,OAAOgU,KAAK,YAAasB,EAASjB,K,sCAQzBle,EAAI7B,EAAS+f,GAAK,IAAD,OAOhC,GALuB,oBAAZ/f,IACV+f,EAAK/f,EACLA,EAAU,KAGN+f,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAKQ,gBAAgBpf,EAAI7B,GAAS,SAAC6H,EAAKnJ,GAAN,OAAgBmJ,EAAM4Y,EAAO5Y,GAAOqW,EAAQxf,SAEtHW,KAAKqM,OAAOgU,KAAK,aAAc7d,EAAI7B,EAAS+f,K,+BAQrCle,EAAI1B,EAAK4f,GAAK,IAAD,OAErB,IAAKA,EACJ,OAAO,IAAIS,SAAQ,SAACtC,EAASuC,GAAV,OAAqB,EAAK3hB,SAAS+C,EAAI1B,GAAK,SAAA0H,GAAG,OAAIA,EAAM4Y,EAAO5Y,GAAOqW,UAE1F7e,KAAKqM,OAAOgU,KAAK,WAAY7d,EAAI1B,EAAK4f,O,GA5MLmB,K,sCCVfvV,E,uGAmB0B,IAA/B+N,EAA8B,uDAAxB,KAAMyH,EAAkB,uDAAN,KAgBtC,OAbIzH,IACH/N,EAAWyV,OAAS1H,GAIrB/N,EAAWmC,WAAa,IAAIsR,EAAOzT,EAAW+N,KAG1CyH,IACHxV,EAAW0V,aAAeF,GAIpBxV,EAAWmC,a,oCAUlB,OAAOnC,EAAWmC,YAAc,O,6BAUhC,OAAOnC,EAAW+N,M,gCAUlB,OAAO/N,EAAW2V,U,gCAWIC,GACtB5V,EAAWmC,WAAW2R,GAAG8B,EAASzM,MAAOyM,EAAS/Q,Y,mCASV,IAAjB2Q,EAAgB,uDAAJ,GAEnC,SAAKA,IAAcjjB,MAAMC,QAAQgjB,MAIjCA,EAAUpe,SAAQ,SAAAwe,GAAQ,OAAI5V,EAAW6V,YAAcD,MAChD,K,2BASU7H,GACjB/N,EAAW+N,IAAMA,M,KAvGE/N,EAKb+N,IAAM+H,OAAOjc,SAASkc,SALT/V,EAUbmC,WAAa,M,oBCjBrB,IAAI1P,EAAM,CACT,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,aAAc,KAIf,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCC1BpB,qE,oBCAA,IAAIzD,EAAM,CACT,gBAAiB,IACjB,mBAAoB,IACpB,gBAAiB,IACjB,mBAAoB,IACpB,gBAAiB,KAIlB,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCC1BpB,qE,oBCAA,IAAIzD,EAAM,CACT,YAAa,IACb,eAAgB,IAChB,YAAa,IACb,eAAgB,IAChB,YAAa,KAId,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,iCC1BpB,qE,oBCAA,IAAIzD,EAAM,CACT,cAAe,IACf,iBAAkB,IAClB,cAAe,IACf,iBAAkB,IAClB,cAAe,KAIhB,SAASuf,EAAeC,GACvB,IAAI/b,EAAKgc,EAAsBD,GAC/B,OAAOE,EAAoBjc,GAE5B,SAASgc,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE3f,EAAKwf,GAAM,CACpC,IAAIjW,EAAI,IAAIqW,MAAM,uBAAyBJ,EAAM,KAEjD,MADAjW,EAAEsW,KAAO,mBACHtW,EAEP,OAAOvJ,EAAIwf,GAEZD,EAAepQ,KAAO,WACrB,OAAOD,OAAOC,KAAKnP,IAEpBuf,EAAeO,QAAUL,EACzBM,EAAOC,QAAUT,EACjBA,EAAe9b,GAAK,K,0MCjBdqH,EAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtColB,cAAc,aACbtS,YAAa9S,EAAM6S,QAAQ,IAC1B7S,EAAM4F,YAAYC,KAAK,MAAQ,CAC/BiN,YAAa9S,EAAM6S,QAAQ,UAMf,SAASwS,EAAcjlB,GAOrC,IAP6C,IAAD,EAClBA,EAAlBklB,gBADoC,MACzB,GADyB,EAGtC7jB,EAAUkL,IACV4Y,EAAUxU,OAAOC,KAAKsU,GAAU5mB,OAElC8mB,EAAO,GACFC,EAAS,EAAGA,GAAUF,EAASE,IAElCH,EAASG,GAKdD,EAAKte,KACJ,kBAACwe,EAAA,EAAD,CAAMrgB,IAAKogB,EAAQ9P,MAAI,EACtBgQ,GAAI,GACJC,GAAI,EACJC,GAAI,EACJC,GAAI3mB,KAAK0K,MAAM,GAAG0b,GAClBQ,GAAI5mB,KAAK0K,MAAM,GAAG0b,IAGjBD,EAASG,KAbXla,QAAQya,KAAK,0BAA4BP,EAAS,KAkBpD,OAED,kBAACC,EAAA,EAAD,CAAMpT,WAAS,EAACO,QAAS,EAAG/Q,UAAWL,EAAQ2jB,eAC7CI,G,2JC7BI7Y,EAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtCimB,QAAS,CACRrT,gBAAiBsT,IAAM,MAExB1a,MAAO,CACNoH,gBAAiB5S,EAAMkN,QAAQ1B,MAAM2a,MAEtC7I,KAAM,CACL1K,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,MAExCiZ,QAAS,CACRxT,gBAAiByT,IAAM,MAExB/lB,KAAM,CACL2S,SAAU,IAEXqT,YAAa,CACZC,QAAS,GACTxZ,YAAa/M,EAAM6S,QAAQ,IAE5BwQ,QAAS,CACR7iB,QAAS,OACTsZ,WAAY,cAKR0M,EAAc,CACnBP,QAASQ,IACTL,QAASM,IACTlb,MAAOmb,IACPrJ,KAAMsJ,KAIQ,SAASC,EAAezmB,GACtC,IAAMqB,EAAUkL,IACV7K,EAAwF1B,EAAxF0B,UAAWgG,EAA6E1H,EAA7E0H,KAAMgf,EAAuE1mB,EAAvE0mB,iBAAkBzD,EAAqDjjB,EAArDijB,QAAS0D,EAA4C3mB,EAA5C2mB,YAAajO,EAA+B1Y,EAA/B0Y,QAASC,EAAsB3Y,EAAtB2Y,QAAYiO,EAFvC,YAEiD5mB,EAFjD,qFAGvC6mB,EAAOT,EAAYzN,GAIzB,OAFAjR,EAAOA,IAAQ,EACfgf,EAAmBA,GAAoB,KAGxC,kBAACI,EAAA,EAAD,CACCC,aAAc,CACbC,SAAU,SACV9jB,WAAY,UAEbwE,KAAMA,EACNgf,iBAAkBA,EAClBhO,QAASA,GAET,kBAACuO,EAAA,EAAD,eACCvlB,UAAWC,YAAKN,EAAQsX,GAAUjX,GAClCuhB,QACC,0BAAM/d,GAAG,kBAAkBxD,UAAWL,EAAQ4hB,SAC7C,kBAAC4D,EAAD,CAAMnlB,UAAWC,YAAKN,EAAQnB,KAAMmB,EAAQ6kB,eAC3CjD,GAGH7f,OAAQujB,GAAe,CACtB,kBAACO,EAAA,EAAD,CAAYjiB,IAAI,QAAQwX,aAAW,QAAQjW,MAAM,UAAUpC,QAASsU,GACnE,kBAAC,IAAD,CAAWhX,UAAWL,EAAQnB,UAG5B0mB,KCvFS,MACW,8B,iDCAX,GACdte,SAAUhB,EAAQ,IAAcC,QAEhC4f,MAAO7f,EAAQ,KAAYC,QAC3B+a,KAAMhb,EAAQ,KAAWC,QACzB6f,QAAS9f,EAAQ,KAAcC,QAC/B8f,SAAU/f,EAAQ,KAAYC,QAC9B+f,MAAOhgB,EAAQ,KAAYC,QAC3BsB,SAAUvB,EAAQ,KAAeC,QACjCggB,KAAMjgB,EAAQ,KAAWC,QACzBud,OAAQxd,EAAQ,KAAaC,SCATigB,E,YAEpB,WAAYC,GAAe,IAAD,EAKzB,GALyB,qBACzB,+CAEKtK,SAAWsK,GAEX,EAAKtK,SACT,MAAM,IAAIkE,MAAM,sBANQ,OASzB,EAAKqG,WAAa,EAAKvK,SAASwK,cAGhC,EAAKrf,SAAWsf,EAAS,SAAangB,eACtC,EAAKA,eAAkBmgB,EAAU,EAAKF,aAAeE,EAAU,EAAKF,YAAYjgB,gBAAmB,GAGnG,EAAKogB,cAAgBD,EAAS,SAAajoB,OAC3C,EAAKA,OAAUioB,EAAU,EAAKF,aAAeE,EAAU,EAAKF,YAAY/nB,QAAW,GAGnF,EAAKM,WAAL,eAAuB2nB,EAAS,SAAa3nB,WAA7C,GAA6D2nB,EAAU,EAAKF,aAAeE,EAAU,EAAKF,YAAYznB,YAAe,IACrI,EAAK6H,QAAL,eAAoB8f,EAAS,SAAa9f,QAA1C,GAAuD8f,EAAU,EAAKF,aAAeE,EAAU,EAAKF,YAAY5f,SAAY,IArBnG,E,4EA8BX7C,EAAKzB,GACnB,OAAOd,KAAKolB,YAAY7iB,GAAOA,EAAIzB,GAAOA,I,4CASrBuD,GAA0B,IAAhBuB,EAAe,uDAAJ,GAE1C,IAAK,IAAIrD,KAAO8B,EACf,QAAsByV,IAAlBzV,EAAS9B,GACZ,OAAO8B,EAAS9B,GAIlB,OAAOqD,I,kCASIrD,GACX,OAAOA,GAAsB,oBAARA,I,+BASbzB,GACR,YAAegZ,IAARhZ,I,0CASYwgB,GAAgC,IAA3B+D,EAA0B,4DAAXvL,EASvC,OAPKwH,GAAqB,iBAAPA,EAGI,iBAAPA,GAAoBA,EAAIzc,UACvCyc,EAAIzc,QAAUwgB,GAHd/D,EAAM,CAAE,QAAWA,GAAO+D,GAMpB/D,M,GAxF6BO,KCXvB,GACd,SAAU,YACV,OAAU,SACV,OAAU,U,SCqBUyD,G,YAEpB,WAAYC,EAAkBlZ,GAAS,IAAD,sBACrC,IACC,4CAAMkZ,EAAiB9K,WAExB,MAAMjS,GACL,MAAM,IAAImW,MAAM,gCAAkC4G,EAAiBjY,KAAO,KAgB3E,GAZA,EAAK9K,GAAK+iB,EAAiB/iB,GAC3B,EAAK8K,KAAOiY,EAAiBjY,KAE7B,EAAKkY,KAAOD,EAAiBC,MAAQ,KAErC,EAAK9b,OAAS6b,EAAiB7b,OAC/B,EAAK/I,QAAU4kB,EAAiB5kB,QAChC,EAAKiZ,WAAa2L,EAAiB3L,YAAc,GAEjD,EAAKvN,OAASA,GAGT,EAAK1L,SAAmC,kBAAjB,EAAKA,SAA6D,IAArCsN,OAAOC,KAAK,EAAKvN,SAAS/E,OAClF,MAAM,IAAI+iB,MAAM,UAAY4G,EAAiB/iB,IAAM+iB,EAAiBjY,KAAO,KAAOiY,EAAiBjY,MAAQiY,EAAiB/iB,IAAM,IAAM,4BAEpI,IAAK,EAAKkH,QAAiC,kBAAhB,EAAKA,QAA2D,IAApCuE,OAAOC,KAAK,EAAKxE,QAAQ9N,OACpF,MAAM,IAAI+iB,MAAM,mCAAqC4G,EAAiB/iB,IAAM+iB,EAAiBjY,KAAO,gBAAkBiY,EAAiBjY,MAAQiY,EAAiB/iB,IAAM,IAAM,yBAExK,KAAK,EAAKA,IAAO,EAAK8K,MAAS,EAAKmN,UACxC,MAAM,IAAIkE,MAAM,mCAAqC4G,EAAiB/iB,IAAM+iB,EAAiBjY,KAAO,gBAAkBiY,EAAiBjY,MAAQiY,EAAiB/iB,IAAM,IAAM,uCAExK,IAAK,EAAK6J,OACd,MAAM,IAAIsS,MAAM,oBA/BoB,OAmCrC,EAAKjgB,SAAW6mB,EAAiB7mB,UAAY,GAC7C,EAAK+K,OAAS8b,EAAiB9b,QAAU,KAGzC,EAAKgc,iBACL,EAAKC,mBAAqB,GAG1B,EAAKtF,GAAG,SAAS,SAAA5X,GAAG,OAAIC,QAAQC,MAAM,wBAAyBF,MA3C1B,E,gFAoDkB,IAAvCpJ,EAAsC,uDAA3B,KAAMumB,EAAqB,uDAAT,QAG7C,GAAIvmB,GAAgC,kBAAbA,EACtB,OAAOA,EAIR,IAAIyH,EAAI7G,KAAK0J,OAAOtK,GAAYY,KAAKT,iBAGrC,YAAUua,IAANjT,EACI9J,IAAKkH,EAAE,2CAA2CuJ,QAAQ,YAAaxN,KAAKsN,MAAQ,KAItE,kBAANzG,GACf7G,KAAK0J,OAAOtK,GAAYY,KAAKT,iBAA7B,eAAmDomB,EAAY,CAAE,KAAQ9e,IACzEA,EAAI7G,KAAK0J,OAAOtK,GAAYY,KAAKT,kBAED,kBAAjBsH,EAAE8e,KACjB3lB,KAAK0J,OAAOtK,GAAYY,KAAKT,iBAAiBomB,GAAa,CAAE,KAAQ9e,EAAE8e,IACvE9e,EAAI7G,KAAK0J,OAAOtK,GAAYY,KAAKT,kBAI7BsH,GAAMA,EAAE8e,GAGmB,iBAAhB9e,EAAE8e,IAA2B9e,EAAE8e,GAAWC,KAInD/e,EAHC9J,IAAKkH,EAAE,gDAAgDuJ,QAAQ,YAAaxN,KAAKsN,MAAME,QAAQ,eAAgBmY,GAAa,IAH5H5oB,IAAKkH,EAAE,0DAA0DuJ,QAAQ,YAAaxN,KAAKsN,MAAME,QAAQ,eAAgBmY,GAAa,O,+CActHE,EAAQzmB,EAAU0mB,EAAW5e,GAAW,IAAD,OAE/D,GAAIlH,KAAK6lB,GAAQzmB,GAAW,CAG3B,GAAiD,kBAAtCY,KAAK6lB,GAAQzmB,GAAU0mB,GAAyB,CAE1D,IAAMC,EAAe9X,OAAOC,KAAKlO,KAAK6lB,GAAQzmB,GAAU0mB,IACxD,GAAIC,EAAatqB,WAAWC,QAAQ,MAAQ,GAAKqqB,EAAatqB,WAAWC,QAAQ,MAAQ,GAAKqqB,EAAatqB,WAAWC,QAAQ,OAAS,EAAG,CAEzI,IAAIoF,EAAMd,KAAK6lB,GAAQzmB,GAAU0mB,GAAvB,QAqBV,OApBAC,EAAariB,SAAQ,SAAAsiB,GAEpB,IAAIC,EAAgBD,EAAYxY,QAAQ,KAAM,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,KAAM,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,KAAM,IAChHwY,EAAYtqB,QAAQ,OAAS,GAAKwL,GAAY+e,EACjDnlB,EAAM,EAAK+kB,GAAQzmB,GAAU0mB,GAAWE,GAEhCA,EAAYtqB,QAAQ,MAAQ,GAAKwL,EAAW+e,EACpDnlB,EAAM,EAAK+kB,GAAQzmB,GAAU0mB,GAAWE,GAEhCA,EAAYtqB,QAAQ,OAAS,GAAKwL,GAAY+e,EACtDnlB,EAAM,EAAK+kB,GAAQzmB,GAAU0mB,GAAWE,GAEhCA,EAAYtqB,QAAQ,MAAQ,GAAKwL,EAAW+e,EACpDnlB,EAAM,EAAK+kB,GAAQzmB,GAAU0mB,GAAWE,GAEhCD,EAAatqB,WAAWC,QAAQ,OAAS,GAAKwL,GAAY+e,IAClEnlB,EAAM,EAAK+kB,GAAQzmB,GAAU0mB,GAAWE,OAInCllB,EAGP,OAAO,gEAAed,KAAK6lB,GAAQzmB,GAAU0mB,GAAW5e,IAAalH,KAAK6lB,GAAQzmB,GAAU0mB,GAAW5e,GAAYlH,KAAK6lB,GAAQzmB,GAAU0mB,GAAvB,QAKhH,sEAAsB9lB,KAAK6lB,GAAQzmB,GAAU0mB,IACjD,OAAO9lB,KAAK6lB,GAAQzmB,GAAU0mB,GAAW5e,EAAU9H,EAAUY,MAIzD,GAAiD,kBAAtCA,KAAK6lB,GAAQzmB,GAAU0mB,GACtC,OAAO9lB,KAAK6lB,GAAQzmB,GAAU0mB,QAG3B,GAAI9lB,KAAK6lB,GAAL,KAAsB,CAG9B,GAA+C,kBAApC7lB,KAAK6lB,GAAL,KAAqBC,GAC/B,OAAO,gEAAe9lB,KAAK6lB,GAAL,KAAqBC,GAAW5e,IAAalH,KAAK6lB,GAAL,KAAqBC,GAAW5e,GAAYlH,KAAK6lB,GAAL,KAAqBC,GAArB,QAI3G,sEAAsB9lB,KAAK6lB,GAAL,KAAqBC,IAC/C,OAAO9lB,KAAK6lB,GAAL,KAAqBC,GAAW5e,EAAU9H,EAAUY,S,sCAa9CZ,EAAU0mB,EAAW5e,GAA2B,IAAjBjK,EAAgB,wDAE1D0D,EAAUX,KAAKW,QAEnB,GAAI1D,EAAQ,CACX0D,EAAUX,KAAKW,QAAL,OACV,IAAIulB,EAAMJ,EACVA,EAAY1mB,EACZA,EAAW8mB,EAGZ,GAAIvlB,EAAQmlB,IAAcnlB,EAAQmlB,GAAW1mB,GAC5C,MAA4C,kBAAjCuB,EAAQmlB,GAAW1mB,GACtB,gEAAeuB,EAAQmlB,GAAW1mB,GAAU8H,IAAavG,EAAQmlB,GAAW1mB,GAAU8H,GAAYvG,EAAQmlB,GAAW1mB,GAAnB,QAErG,mEAAsBuB,EAAQmlB,GAAW1mB,IACtCuB,EAAQmlB,GAAW1mB,GAAU8H,EAAU9H,EAAUY,MAGjDW,EAAQmlB,GAAW1mB,K,uCAeX,IAAD,OAEZsK,EAASuE,OAAOC,KAAKlO,KAAK0J,QAG1B1J,KAAKW,QAAQwlB,gBAChBnmB,KAAKW,QAAQwlB,cAAgBtnB,MAAMC,QAAQkB,KAAKW,QAAQwlB,eAAiBnmB,KAAKW,QAAQwlB,cAAgB,CAACnmB,KAAKW,QAAQwlB,eAEpHnmB,KAAKW,QAAQwlB,cAAcziB,SAAQ,SAAA0iB,GAC9B,EAAK1c,OAAO0c,WACR,EAAK1c,OAAO0c,OAMtBpmB,KAAKW,QAAQ0lB,aAAe,GACxBrmB,KAAKW,QAAQ2lB,aAChBtmB,KAAKW,QAAQ2lB,WAAaznB,MAAMC,QAAQkB,KAAKW,QAAQ2lB,YAActmB,KAAKW,QAAQ2lB,WAAa,CAACtmB,KAAKW,QAAQ2lB,YAE3GtmB,KAAKW,QAAQ2lB,WAAW5iB,SAAQ,SAAA6iB,GAC3B,EAAK7c,OAAO6c,IACf,EAAK5lB,QAAQ0lB,aAAajiB,KAAKmiB,OAMlCvmB,KAAKT,gBAAkBS,KAAKW,QAAQqB,SAAW0H,EAAO,GACtD1J,KAAKR,kBAAoBQ,KAAKW,QAAQuB,WAAa,KAGnD,CAAC,QAAS,QAAS,OAAQ,OAAQ,UAAUwB,SAAQ,SAAAnB,GAEpD,IAAIikB,EAAmB,EAAK7lB,QAAQ4B,IAAQ0L,OAAOC,KAAK,EAAKvN,QAAQ4B,IAAM,GAC3E,EAAK5B,QAAQ4B,GAAQ,EAAK5B,QAAQ4B,GAAd,qEAAoDikB,GAAoB9c,EAAOhO,QAAQ8qB,IAAqB,EAAI,EAAK7lB,QAAQ4B,GAAzE,eAAmF,EAAKhD,gBAAkB,EAAKoB,QAAQ4B,KAAtJ,MAI1CvC,KAAK0J,OAAO1J,KAAKT,iBAAmBS,KAAKymB,iBAAiBzmB,KAAKT,iBAC/DS,KAAKW,QAAQiK,aAAgB5K,KAAKT,iBAAmBmnB,EAAS1mB,KAAK0J,OAAO1J,KAAKT,iBAAiBF,MAAMumB,KAAKrpB,OAAO,EAAGyD,KAAK0J,OAAO1J,KAAKT,iBAAiBF,MAAMumB,KAAKlqB,QAAQ,QAAW,UAGrLsE,KAAKW,QAAQgmB,OAAS9nB,MAAMC,QAAQkB,KAAKW,QAAQimB,OAAS5mB,KAAKW,QAAQimB,MAAQ,CAAC5mB,KAAKW,QAAQimB,OAC7F5mB,KAAKW,QAAQ8M,KAAOzN,KAAKW,QAAQ8M,MAAQ,IAEzCzN,KAAKW,QAAQqH,MAAShI,KAAKW,QAAQqH,OAAwC,kBAAvBhI,KAAKW,QAAQqH,OAAsBhI,KAAKW,QAAQqH,MAAMwF,QAAQ,UAAWxN,KAAKsN,OAAWtN,KAAKW,QAAQqH,OAAShI,KAAKsN,KAExKtN,KAAKW,QAAQW,QAAUtB,KAAKW,QAAQW,UAAW,I,yCAU7BlC,EAAUC,GAAQ,IAAD,OAGnCA,EAAM+C,YAAcykB,YAAoB,IAAIjqB,KAAKyC,EAAMynB,GAAG,KAAS,CAAEjqB,OAAQC,IAAQC,IAAKC,eAAgB+pB,gBAAgB,EAAMC,WAAW,IAG3I3nB,EAAMkG,KAAO,GAGb,IAAIzE,EAAMd,KAAKinB,yBAAyB,iBAAkB7nB,EAAU,MAAOC,EAAMyB,KAwBjF,OAvBAzB,EAAMyB,SAAcgZ,IAARhZ,EAAoBA,EAAMzB,EAAMyB,IAG5CzB,EAAM0B,MAAQ1B,EAAMyB,IAGpB,CAAC,CAAE,MAAS,SAAW,CAAE,MAAS,SAAW,CAAE,KAAQ,SAAU4C,SAAQ,SAAAwjB,GACxE,IAAIpB,EAAY7X,OAAOC,KAAKgZ,GAAMzrB,WAC9B0rB,EAASlZ,OAAO2G,OAAOsS,GAAMzrB,WAC7B4I,EAAW,GAGfA,EAAQ,QAAc,EAAK+iB,gBAAgBhoB,EAAU0mB,EAAWzmB,EAAMyB,KAGtE,CAAC,iBAAkB,YAAY4C,SAAQ,SAAAmiB,GACtCxhB,EAASwhB,GAAU,EAAKoB,yBAAyBpB,EAAQzmB,EAAU0mB,EAAWzmB,EAAMyB,QAGrFzB,EAAM8nB,GAAN,uEAA4C9iB,EAAUhF,EAAM8nB,OAG7D9nB,EAAM0B,MAAQhE,IAAKkH,EAAE5E,EAAM0B,OACpB1B,I,0BAOJgoB,GACH,OAAOrnB,KAAKqnB,IAAa,O,kCASwB,IAAxCjoB,EAAuC,uDAA5B,KAAMkoB,EAAsB,wDAChDloB,EAAWA,GAAYY,KAAKT,gBAE5B,IAAMF,EAAQW,KAAK0J,OAAOtK,GAAUC,MAAM0B,MACpCmG,EAAW7H,EAAQA,EAAMyB,IAAM,KAE/B6I,GAAW2d,GAAgBtnB,KAAKoF,QAAQhG,IAAcY,KAAKoF,QAAQuE,OACzE,OAAO,kBAACA,EAAD,CAAQpH,IAAK,UAAYvC,KAAKwC,GAAK,IAAMpD,EAAUE,OAAQU,KAAMX,MAAOA,EAAOD,SAAUA,EAAU8H,SAAUA,EAAUjK,OAAQ+C,KAAK6B,SAAS,QAASzC,EAAU8H,O,mCAS3J9H,GACZA,EAAWA,GAAYY,KAAKT,gBAE5B,IAAMF,EAAQW,KAAK0J,OAAOtK,GAAUC,MAAM0B,MACpCmG,EAAW7H,EAAQA,EAAMyB,IAAM,KAE/B2B,EAAYzC,KAAKzC,WAAW6B,GAClC,OAAQqD,GAAa,kBAACA,EAAD,CAAWa,MAAOtD,KAAK0J,OAAOtK,GAAU4I,OAASjL,IAAKkH,EAAEjE,KAAKya,SAAW,IAAMrb,GAAWE,OAAQU,KAAMZ,SAAUA,EAAU8H,SAAUA,KAAiBlH,KAAK0J,OAAOtK,GAAU4I,OAASjL,IAAKkH,EAAEjE,KAAKya,SAAW,IAAMrb,K,uCAUjL,IAAxCA,EAAuC,uDAA5B,KAAMmoB,EAAsB,uDAAN,KACzC1gB,EAAI7G,KAAK0J,OAAOtK,GAAYY,KAAKT,iBAEnCioB,EAAc,KASlB,OAPI3gB,GAAKA,EAAExH,OAA2B,OAAlBkoB,QAA4CzN,IAAlBjT,EAAExH,MAAM0B,YAAwD+Y,IAAjCjT,EAAExH,MAAM0B,MAAMwmB,GAC1FC,EAAc3gB,EAAExH,MAAM0B,MAAMwmB,GAEpB1gB,GAAKA,EAAExH,OAA2B,OAAlBkoB,QAA4CzN,IAAlBjT,EAAExH,MAAM0B,QAC1DymB,EAAc3gB,EAAExH,MAAM0B,OAGhBymB,I,8BAWApoB,GAAmD,IAAD,OAAxC8H,EAAwC,uDAA7B,GAAIugB,EAAyB,4DAAX3N,EAE9C1a,EAAWA,GAAYY,KAAKT,gBAE5B,IAAI8E,EAAW,GAUf,OAPAA,EAAQ,QAAcrE,KAAKonB,gBAAgBhoB,EAAU,OAAQ8H,GAG7D,CAAC,iBAAkB,YAAYxD,SAAQ,SAAAmiB,GACtCxhB,EAASwhB,GAAU,EAAKoB,yBAAyBpB,EAAQzmB,EAAU,OAAQ8H,MAGrE,6EAA4B7C,EAAUojB,K,gCAOpCN,GAA+B,IAAvBjgB,EAAsB,uDAAX,UAC5B,OAAQlH,KAAKW,QAAQwmB,KAAYnnB,KAAKW,QAAQwmB,GAAQjgB,IAAalH,KAAKW,QAAQwmB,GAAb,UAAqCnnB,KAAKW,QAAQwmB,IAAW,O,+BAOxHrB,GAAmD,IAAD,OAAvC1mB,EAAuC,uDAA5B,KAAM8H,EAAsB,uDAAX,UAC3C7C,EAAW,GAWf,OAVAjF,EAAWA,GAAYY,KAAKT,gBAG5B8E,EAAQ,QAAcrE,KAAKonB,gBAAgBhoB,EAAU0mB,EAAW5e,GAAU,GAG1E,CAAC,SAAU,iBAAiBxD,SAAQ,SAAAmiB,GACnCxhB,EAASwhB,GAAU,EAAKoB,yBAAyBpB,EAAQzmB,EAAU0mB,EAAW5e,MAGxE,6EAA4B7C,EAAU,M,6BAOvCqjB,EAAWvW,GAEQ,oBAAduW,IACVvW,EAAWuW,EACXA,EAAY,eAIG1nB,KAAK8hB,UAAU4F,GAAWjT,WAAU,SAAAyN,GAAQ,OAAIA,EAASzmB,YAAc0V,EAAS1V,eAAe,GAI9GuE,KAAKogB,GAAGsH,EAAWvW,K,4CAWmB,IAApBwW,EAAmB,wDAElCC,EAAY,GAChB,IAAK,IAAIxoB,KAAYY,KAAK0J,OACzBke,EAAUxjB,KAAKpE,KAAKkL,mBAAmB9L,EAAUuoB,IAGlD,OAAOC,I,2CAWgD,IAAD,OAApCxoB,EAAoC,uDAAzB,KAAMuoB,EAAmB,wDAEtDvoB,EAAWA,GAAYY,KAAKT,gBAC5B,IAAIsH,EAAI7G,KAAKymB,iBAAiBrnB,GAC9B,MAAgB,iBAALyH,EACHsa,QAAQC,OAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASyH,IAGnE,IAAIsa,SAAQ,SAACtC,EAASuC,QAGNtH,IAAlBjT,EAAExH,MAAM0B,OAAuB,EAAK2kB,mBAAmBhqB,QAAQ0D,IAAa,GAG/E,EAAKihB,KAAK,cAAejhB,EAAUyH,EAAExH,MAAM0B,MAAO,GAGlD8d,EAAQ,CAAE,SAAW,EAAM,SAAYzf,EAAU,QAAU,KAK3D,EAAKiN,OAAOqV,SAAS7a,EAAExH,MAAMumB,MAC3BhK,MAAK,SAAAvc,GAGS,OAAVA,GACH+hB,EAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAAS,SAAWyH,EAAExH,MAAMumB,KAAO,gBAIrF/e,EAAExH,MAAM0B,MAAQ,EAAK8mB,mBAAmBzoB,EAAUC,GAGlD,EAAKghB,KAAK,cAAejhB,EAAUyH,EAAExH,MAAM0B,MAAO,GAG9C4mB,GACH,EAAKG,qBAAqB1oB,GAAUmJ,OAAM,SAAAC,GAAG,OAAI4Y,EAAO5Y,MAIzDqW,EAAQ,CAAE,SAAW,EAAM,SAAYzf,EAAU,QAAU,OAE3DmJ,OAAM,SAAAC,GAAG,OAAI4Y,EAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASoJ,Y,kDAeC,IAAD,OAAlDpJ,EAAkD,uDAAvC,KAAMuoB,EAAiC,wDAAdhnB,EAAc,uDAAJ,GAEvEvB,EAAWA,GAAYY,KAAKT,gBAC5B,IAAIsH,EAAI7G,KAAKymB,iBAAiBrnB,GAC9B,MAAgB,iBAALyH,EACHsa,QAAQC,OAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASyH,IAGnE,IAAIsa,SAAQ,SAACtC,EAASuC,GAC5Bva,EAAExH,MAAM0oB,aAAelhB,EAAExH,MAAM0oB,cAAgB,GAG3CpnB,EAAQ+P,OAAS/P,EAAQgQ,KAAOhQ,EAAQuI,WAAyF4Q,IAAjFjT,EAAExH,MAAM0oB,aAAapnB,EAAQ+P,MAAQ,IAAM/P,EAAQgQ,IAAM,IAAMhQ,EAAQuI,OAG1H,EAAKmX,KAAK,gBAAiBjhB,EAAUyH,EAAExH,MAAM0oB,aAAapnB,EAAQ+P,MAAQ,IAAM/P,EAAQgQ,IAAM,IAAMhQ,EAAQuI,MAAOrC,EAAExH,MAAO,GAG5Hwf,EAAQ,CAAE,SAAW,EAAM,SAAYzf,EAAU,QAAU,KAK3D,EAAKiN,OAAOuV,gBAAgB/a,EAAExH,MAAMumB,KAAMjlB,GACxCib,MAAK,SAAAtL,GAGW,OAAZA,GACH8Q,EAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAAS,SAAWyH,EAAExH,MAAMumB,KAAO,gBAIjFjlB,EAAQ+P,OAAS/P,EAAQgQ,KAAOhQ,EAAQuI,OAC3CrC,EAAExH,MAAM0oB,aAAapnB,EAAQ+P,MAAQ,IAAM/P,EAAQgQ,IAAM,IAAMhQ,EAAQuI,MAAQoH,GAIhFzJ,EAAExH,MAAMiR,QAAUA,EAGlB,EAAK+P,KAAK,gBAAiBjhB,EAAUyH,EAAExH,MAAMiR,QAASzJ,EAAExH,MAAO,GAG3DsoB,GACH,EAAKG,qBAAqB1oB,GAAUmJ,OAAM,SAAAC,GAAG,OAAI4Y,EAAO5Y,MAIzDqW,EAAQ,CAAE,SAAW,EAAM,SAAYzf,EAAU,QAAU,OAE3DmJ,OAAM,SAAAC,GAAG,OAAI4Y,EAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASoJ,Y,gCASlE9H,GACTV,KAAKW,QAAQD,OAASA,I,mCAOVD,GACZT,KAAKW,QAAQqH,MAAQvH,I,uCAUkB,IAAD,OAAxBrB,EAAwB,uDAAb,KAAM2B,EAAO,uCAEtC3B,EAAWA,GAAYY,KAAKT,gBAC5B,IAAIsH,EAAI7G,KAAKymB,iBAAiBrnB,EAAU,UACxC,MAAgB,iBAALyH,EACHsa,QAAQC,OAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASyH,IAGnE,IAAIsa,SAAQ,SAACtC,EAASuC,GAC5B,EAAK/U,OAAO5M,SAASoH,EAAEnG,OAAOklB,KAAM7kB,GAClC6a,MAAK,SAAAoM,IAG8C,IAA/C,EAAKtC,mBAAmBhqB,QAAQ0D,IACnC,EAAK8L,mBAAmB9L,GAIzByf,EAAQ,CAAE,SAAW,EAAM,SAAYzf,OAEvCmJ,OAAM,SAAAC,GAAG,OAAI4Y,EAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASoJ,Y,6CAUpC,IAAD,OAAjBpJ,EAAiB,uDAAN,KAE/BA,EAAWA,GAAYY,KAAKT,gBAC5B,IAAIsH,EAAI7G,KAAKymB,iBAAiBrnB,GAC9B,MAAgB,iBAALyH,EACHsa,QAAQC,OAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAASyH,KAIvB,IAA/C7G,KAAK0lB,mBAAmBhqB,QAAQ0D,IACnCY,KAAK0lB,mBAAmBthB,KAAKhF,GAGtB,IAAI+hB,SAAQ,SAAAtC,GAClB,EAAKxS,OAAOsU,eAAe9Z,EAAExH,MAAMumB,MAAM,SAACpjB,EAAInD,EAAOoiB,GAEhDpiB,GAASA,EAAMyB,MAAQ,EAAKnB,eAAeP,EAAU,SAGxDyH,EAAExH,MAAM0B,MAAQ,EAAK8mB,mBAAmBzoB,EAAUC,GAGlD,EAAKghB,KAAK,cAAejhB,EAAUyH,EAAExH,MAAM0B,MAAO,GAGlD,EAAKrC,SAASgF,SAAQ,SAAAukB,GAAK,OAAIA,EAAM5H,KAAK,cAAejhB,EAAUyH,EAAExH,MAAM0B,MAAO,UAIpF8d,EAAQ,CAAE,SAAW,EAAM,SAAYzf,QAIjC+hB,QAAQC,OAAO,CAAE,SAAW,EAAO,SAAYhiB,EAAU,MAAS,gC,+BAQlEsoB,EAAWvW,GAEM,oBAAduW,IACVvW,EAAWuW,EACXA,EAAY,eAGb1nB,KAAKkoB,IAAIR,EAAWvW,O,GA3pBc2T,G,mBCvBrB,IACdzgB,SAAUO,EAAQ,KAAkBC,S,sCCkB/BgF,GAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtCirB,OAAQ,CACPC,SAAU,EACVvP,UAAW,OACXxa,UAAW,QAEZoY,QAAS,CACR3G,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,MAExCge,WAAY,CACXpe,YAAa/M,EAAM6S,QAAQ,IAE5BzM,MAAO,CACN8kB,SAAU,GAEX5qB,KAAK,eACDN,EAAMK,WAAWC,KADjB,CAEHsG,MAAO,OACPlG,aAAc,MACdC,MAAO,MACPqS,OAAQ,MACRxS,QAAS,eACTyS,SAAU,SACVmY,WAAY,8CACZC,WAAY,EACZC,WAAY,aAKC,SAASC,GAAOnrB,GAC9B,IAAMqB,EAAUkL,KAERnL,EAA6EpB,EAA7EoB,SAAU4E,EAAmEhG,EAAnEgG,MAAOolB,EAA4DprB,EAA5DorB,iBAHY,GAGgDprB,EAA1CqrB,aAA0CrrB,EAA5BsrB,SAA4BtrB,EAAlBurB,cAC3CvlB,EAAM5H,QAAQ,MAAQ,EAAI4H,EAAM3H,MAAM,KAAO,CAAE,KAAM2H,IAJxC,oBAI7B9F,EAJ6B,KAIvBwK,EAJuB,KAM/B8gB,EAAuBJ,EAAmB,cAAsC,YAArBA,EAAiC,cAAgB,iBAC5GK,EAA0BL,EAAmB3rB,IAAKkH,EAAE,yBAAiD,YAArBykB,EAAiC3rB,IAAKkH,EAAE,6CAA+ClH,IAAKkH,EAAE,iDAEpL,OAED,kBAAC+kB,GAAA,EAAD,CAAQxmB,GAAG,SAASpE,SAAS,SAASY,UAAWL,EAAQwpB,QAExD,kBAACc,GAAA,EAAD,CAASjqB,UAAWL,EAAQ8X,SAE3B,kBAACyS,EAAA,EAAD,CAAYjT,QAAQ,KAAKjX,UAAWL,EAAQ2E,OAC1C9F,GAAQ,0BAAMwB,UAAWC,YAAKN,EAAQnB,KAAM,WAAaA,KAC/C,SAAVwK,GAAoBA,GAEtB,kBAACwc,EAAA,EAAD,CAAY1gB,MAAM,WACjB,kBAACqlB,GAAA,EAAD,CAAS7lB,MAAOvG,IAAKkH,EAAE8kB,IACtB,0BAAM/pB,UAAW,WAAa8pB,OAiBhCpqB,GClFF,SAAS0qB,KAAuB,IAAD,EACsBhH,OACnD,MAAO,CACLvkB,MAH2B,EACrBwrB,WAGNnZ,OAJ2B,EACFoZ,a,kCCQvBzf,GAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtCM,KAAK,eACDN,EAAMK,WAAWC,KADjB,CAEHsG,MAAO,OACPylB,cAAe,MACf1rB,MAAO,MACPqS,OAAQ,MACRxS,QAAS,eACTyS,SAAU,SACVmY,WAAY,8CACZC,WAAY,EACZC,WAAY,SAEbgB,KAAM,CACL1Z,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,KACvC2F,YAAa9S,EAAM6S,UACnBjM,MAAO,OACPjG,MAAO,eAAiBX,EAAM6S,UAAY,MAC1C0I,OAAQ,IACRgR,aAAc,kBAEfC,MAAO,CACNtrB,SAAU,QACVF,IAAK,GAENyrB,UAAW,CACV7Z,gBAAiB,QAElB8Z,WAAY,CACXxS,YAAala,EAAM6S,UACnBjS,UAAW,QAEZ4kB,KAAM,CACL6G,cAAe,YAKF,SAASM,GAAOvsB,GAAQ,IAChCksB,EAAoBlsB,EAApBksB,KAAMM,EAAcxsB,EAAdwsB,UACNnrB,EAAUkL,KACZkgB,EAAcxS,iBAAO,IAHY,EAMfpQ,mBAAS,GANM,oBAM9B6iB,EAN8B,KAMzBC,EANyB,OAaX9iB,oBAAS,GAbE,oBAa9BuiB,EAb8B,KAavBQ,EAbuB,KAc/BC,EAAe7Q,uBAAY,WAChC,IAAM8Q,EAAaL,EAAY9pB,QAAQ/B,IAAM6rB,EAAY9pB,QAAQiQ,OAAS,GACpEwZ,EAAQtH,OAAOiI,SAAWD,EAEhCF,GAAS,SAAAI,GACR,OAAIA,IAAcZ,GACjB/d,SAASE,eAAe,QAAQxJ,MAAM8b,WAAauL,EAASU,EAAU,EAAE,EAAK,KAAO,EAC7EV,GAGDY,OAGN,CAACP,IAEJziB,qBAAU,WAOT,OANAyiB,EAAY9pB,QAAU,CACrB/B,IAAKyN,SAASE,eAAe,UAAU0e,UACvCra,OAAQvE,SAASE,eAAe,UAAU2e,cAG3CpI,OAAOqI,iBAAiB,SAAUN,GAC3B,kBAAM/H,OAAOsI,oBAAoB,UAAWP,EAAc,MAE/D,CAACA,IAGJ,IAAMQ,EAAenB,EAAKzqB,KAAI,SAACirB,EAAKxlB,GAAO,IAAD,EACjBwlB,EAAItuB,QAAQ,MAAQ,EAAIsuB,EAAIruB,MAAM,KAAO,CAAE,KAAMquB,GADhC,oBACjCxsB,EADiC,KAC3BwK,EAD2B,KAEzC,OAAO,kBAAC4iB,GAAA,EAAD,CAAKroB,IAAK,MAAQiC,EAAGhH,KAAM,0BAAMwB,UAAWC,YAAKN,EAAQnB,KAAM,WAAaA,KAAgBwK,MAAQ0hB,IAAqC,IAA5Bte,IAASyf,gBAAqC,SAAV7iB,EAA2B,KAARA,OAG5K,OAED,kBAAC8iB,GAAA,EAAD,CACCtoB,GAAG,SACHzB,MAAOipB,EACP3gB,SA5CqB,SAACoM,EAAOsV,GAC5BjB,EAAUiB,EAAavB,EAAKuB,IAC5Bd,EAAOc,IA2CR9U,QAAQ,aACRtX,QAAS,CACR2Q,KAAMrQ,YAAKN,EAAQ6qB,KAAME,GAAS/qB,EAAQ+qB,OAC1CC,UAAWhrB,EAAQgrB,YAGnBgB,GAOK,SAASK,GAAS1tB,GAAQ,IACxBoB,EAAmDpB,EAAnDoB,SAAUqsB,EAAyCztB,EAAzCytB,YAAaE,EAA4B3tB,EAA5B2tB,YAAarB,EAAetsB,EAAfssB,WACtCjrB,EAAUkL,KAIRqG,ED9GM,WAAgC,IAAD,EACI/I,mBAASiiB,MADb,oBACrC8B,EADqC,KACnBC,EADmB,KAY5C,OATA7jB,qBAAU,WACR,SAAS8jB,IACPD,EAAoB/B,MAItB,OADAhH,OAAOqI,iBAAiB,SAAUW,GAC3B,kBAAMhJ,OAAOsI,oBAAoB,SAAUU,MACjD,IAEIF,ECkGWG,GAAXnb,OANuB,EAOG/I,mBAAS+I,GAPZ,oBAOxBob,EAPwB,KAObC,EAPa,KAQ3BC,EAAejU,iBAAO,IAE1BjQ,qBAAU,WACTkkB,EAAavrB,QAAU0L,SAASE,eAAe,UAAU2e,aACzDe,EAAarb,EAAOsb,EAAavrB,QAAQ,KAEvC,CAACiQ,IAd2B,MAsBH/I,mBAAS,MAtBN,oBAsBxBkO,EAtBwB,KAsBhBoW,EAtBgB,KA4B/B,OALAnkB,qBAAU,WACTsM,YAAW,kBAAM6X,EAAUV,IAAgBE,KAAc,MAEvD,CAACF,EAAaE,IAIlB,kBAACS,GAAA,EAAD,CACCC,KAAK,WACLtW,OAAQA,EACR7S,GAAI,YAAcyoB,EAClBjsB,UAAWC,YAAK2qB,EAAajrB,EAAQirB,WAAajrB,EAAQ+jB,MAC1DrgB,MAAO,CAAE6N,OAAQob,EAAY,OAG5B5sB,G,sBCpIIktB,G,YAEL,WAAYtuB,GAAQ,IAAD,8BAClB,4CAAMA,KAED+B,MAAQ,GAHK,E,sEAOT,IAAD,SAC2BW,KAAK1C,MAAhCqB,EADA,EACAA,QADA,EACSkqB,cAEjB,OAEF,kBAACgD,GAAA,EAAD,CACCC,OAAO,QACP9mB,KAAMhF,KAAK1C,MAAM0H,KACjBgR,QAAS,kBAAM,EAAK1Y,MAAMqrB,aAAa,sBAAsB,IAC7DhqB,QAAS,CACR6c,MAAO7c,EAAQotB,c,GAnBWlsB,IAAM4C,WA6BnBjE,iBApCA,SAAAtB,GAAK,MAAK,CACxB6uB,OAAQ,CACPluB,MAAO,QAkCMW,CAAmBotB,I,wCCpDrBjc,GAAiB,CAC7B5D,cAAenH,EAAQ,KAAmB+K,gBAAkB,GAC5DS,MAAOxL,EAAQ,KAAW+K,gBAAkB,GAC5C0H,SAAUzS,EAAQ,KAAc+K,gBAAkB,GAClDsJ,IAAKrU,EAAQ,KAAS+K,gBAAkB,GACxC2M,WAAY1X,EAAQ,KAAgB+K,gBAAkB,GACtDzL,UAAWU,EAAQ,KAAe+K,gBAAkB,GACpD4L,oBAAqB3W,EAAQ,KAAyB+K,gBAAkB,GACxE8L,QAAS7W,EAAQ,KAAa+K,gBAAkB,IAGlC,IACd5D,cAAenH,EAAQ,KAAmBC,QAC1CuL,MAAOxL,EAAQ,KAAWC,QAC1BwS,SAAUzS,EAAQ,KAAcC,QAChCoU,IAAKrU,EAAQ,KAASC,QACtByX,WAAY1X,EAAQ,KAAgBC,QACpCX,UAAWU,EAAQ,KAAeC,QAClC0W,oBAAqB3W,EAAQ,KAAyBC,QACtD4W,QAAS7W,EAAQ,KAAaC,SCczBmnB,GAAcxtB,cAdL,SAAAtB,GAAK,MAAK,CACxBoS,KAAM,CACLlS,OAAQ,EACRwF,QAAS1F,EAAM6S,QAAQ,IAExBkU,YAAa,CACZ7lB,SAAU,WACVD,MAAOjB,EAAM6S,QAAQ,GACrB7R,IAAKhB,EAAM6S,QAAQ,GACnBjM,MAAO5G,EAAMkN,QAAQ6hB,KAAK,SAKRztB,EAAmB,SAAAlB,GAAU,IACxCoB,EAAyCpB,EAAzCoB,SAAUC,EAA+BrB,EAA/BqB,QAASqX,EAAsB1Y,EAAtB0Y,QAAYkO,EADQ,YACE5mB,EADF,kCAE/C,OAED,kBAAC,KAAD,eAAgByE,mBAAiB,EAAC/C,UAAWL,EAAQ2Q,MAAU4U,GAC9D,kBAACgF,EAAA,EAAD,CAAYjT,QAAQ,MAAMvX,GACzBsX,EACD,kBAACwO,EAAA,EAAD,CAAYzK,aAAW,QAAQ/a,UAAWL,EAAQslB,YAAaviB,QAASsU,GACvE,kBAAC,IAAD,OAEG,SAMCkW,GAAgB1tB,cAAW,SAAAtB,GAAK,MAAK,CAC1CoS,KAAK,aACJ1M,QAAS1F,EAAM6S,QAAQ,IACtB7S,EAAM4F,YAAYC,KAAK,MAAQ,CAC/BiN,YAAa9S,EAAM6S,QAAQ,QAJRvR,CAOlB2tB,MAEEC,GAAgB5tB,cAAW,SAAAtB,GAAK,MAAK,CAC1CoS,KAAM,CACLlS,OAAQ,EACRwF,QAAS1F,EAAM6S,QAAQ,OAHHvR,CAKlB6tB,MAGiBC,G,YAEpB,WAAYhvB,GAAQ,IAAD,8BAClB,4CAAMA,KAED+B,MAAQ,CACZX,SAAU,IAJO,E,gFAQAgV,EAAW7F,GAAY,IAAD,OAEpCvO,EAASU,KAAK1C,MAAMklB,UAAYxiB,KAAK1C,MAAMklB,SAASljB,OACxD,GAAIA,EAAOkD,IAAMxC,KAAK1C,MAAMklB,SAASnO,KAAOX,EAAU8O,SAASnO,GAG9D,GAAI/U,EAAOZ,SAAS9C,OACnB6M,QAAQ+R,KAAK,OAASvM,OAAOC,KAAK5O,EAAOZ,UAAU9C,OAAS,sBAAwB0D,EAAOgO,KAAO,eAAgBhO,EAAOZ,UACzHsB,KAAKP,SAAS,CAAE,SAAYH,EAAOZ,WAAY,kBAAM,EAAK6tB,qBAItD,CAEJ,IAAI3E,EAAY,GACZlpB,EAAW,GAEf,IAAK,IAAIU,KAAYE,EAAOoK,OAE3B,UAAsCoQ,IAAlCxa,EAAOoK,OAAOtK,GAAUC,OAAuBC,EAAOqB,QAAQ0lB,aAAa3qB,QAAQ0D,IAAa,GAApG,CAIA,IAAI6oB,EAAQ,IAAI3C,GAAO,CACrB,OAAUhmB,EACV,GAAMA,EAAOkD,GAAK,IAAMpD,EACxB,KAAQE,EAAOgO,KACf,SAAYhO,EAAOmb,SAEnB,OAAUnb,EAAOoK,OACjB,QAAU,eACNpK,EAAOqB,QADX,CAEC,QAAWvB,EACX,UAAa,KACb,QAA+B,IAApBV,EAAS9C,OACpB,SAAY,KACZ,SAAY,QAId0Q,IAAWC,cACX6V,OAAO7W,UAIRjM,EAAOZ,SAAS0F,KAAK6jB,GAGrBL,EAAUxjB,KAAK6jB,EAAM/c,mBAAmB,MAAM,IAC9CxM,EAAS0F,KAAK6jB,GAGf9G,QAAQqL,WAAW5E,GAAWhM,MAAK,WAClCnT,QAAQ+R,KAAK,aAAevM,OAAOC,KAAKxP,GAAU9C,OAAS,sBAAwB0D,EAAOgO,KAAO,IAAK5O,GACtG,EAAKe,SAAS,CAAE,SAAYf,IAAY,kBAAM,EAAK6tB,yBAI5CjtB,EAAOkD,IAAMxC,KAAK1C,MAAMklB,SAASnO,KAAOX,EAAU8O,SAASnO,IACpErU,KAAKP,SAAS,CAAE,SAAY,KAAM,kBAAM,EAAK8sB,mB,4CAIzBE,EAAWC,GAChC,OAAQ1sB,KAAK1C,MAAMklB,UAAYxiB,KAAK1C,MAAMklB,SAASnO,KAAOoY,EAAUjK,SAASnO,K,+BAGpE,IAAD,EACgCrU,KAAK1C,MAArC0H,EADA,EACAA,KAAM2nB,EADN,EACMA,YACNrtB,EAFA,EACmBkjB,SACnBljB,OAER,OAEF,kBAACstB,GAAA,EAAD,CAAQ5W,QAAS2W,EAAa3nB,KAAMA,IAAQ,EAAO6nB,SAAU,KAAMC,WAAW,GAC7E,kBAAC,GAAD,CAAa9W,QAAS2W,GACpBrtB,EAAOgO,MAET,kBAAC,GAAD,CAAeyf,UAAQ,EAAC1qB,MAAO,CAAEO,QAAS,IAEzC,kBAAC,GAAQsB,UAAT,CAAmB3D,WAAY,KAAM4D,QAASnE,KAAKX,MAAMX,SAAU+B,WAAW,EAAMC,QAAQ,KAG7F,kBAAC,GAAD,KACC,kBAACsD,GAAA,EAAD,CAAQgpB,WAAS,EAACtrB,QAASirB,EAAa7oB,MAAM,WAA9C,e,GA7FiCjE,IAAM4C,W,wCCtDnCoH,GAAYC,aAAW,SAAA5M,GAAK,MAAK,CACtC+vB,KAAK,aACJ7vB,OAAQF,EAAM6S,QAAQ,EAAG,EAAG,EAAG,IAC9B7S,EAAM4F,YAAYC,KAAK,MAAQ,CAC/B3F,OAAQF,EAAM6S,QAAQ,GAAK,GAAK,EAAG,KAGrCmd,qBAAsB,CACrBtqB,QAAS1F,EAAM6S,WAEhBod,WAAY,SAAA7vB,GAAK,oBAChBwS,gBAAiB5S,EAAMkN,QAAQpI,QAAQqI,KACvCvG,MAAO,OACPqM,SAAU,QACP7S,IAEJ8vB,YAAY,aACXxqB,QAAS1F,EAAM6S,QAAQ,EAAG,IACzB7S,EAAM4F,YAAYC,KAAK,MAAQ,CAC/BH,QAAS1F,EAAM6S,QAAQ,SAMX,SAASsd,GAAO/vB,GAAQ,IAC9BgG,EAA2BhG,EAA3BgG,MAAO9F,EAAoBF,EAApBE,KAAM8vB,EAAchwB,EAAdgwB,UACf3uB,EAAUkL,GAAUyjB,GAE1B,OAED,kBAACC,GAAA,EAAD,CAAMvuB,UAAWL,EAAQsuB,MACxB,kBAACO,GAAA,EAAD,CACC3T,OAAiB,OAATrc,GACP,kBAACiwB,GAAA,EAAD,CAAQxX,QAAQ,UAAUtX,QAAS,CAAE2Q,KAAM3Q,EAAQwuB,aACjDttB,IAAM+W,cAAc,OAAQ,CAAE,UAAa,YAAcpZ,GAAQ,WAGpE8F,MAAOA,GACN,kBAAC4lB,EAAA,EAAD,CAAYjT,QAAQ,KAAKxV,UAAU,MACjC6C,KAIJ,kBAACoqB,GAAA,EAAD,CAAa1uB,UAAWL,EAAQyuB,aAC9B9vB,EAAMoB,WCtCT,IAAMivB,GAAW,SAACC,EAAShH,GAAuB,IAAhBtpB,EAAe,uDAAP,GAGzC,IAAKspB,IAA8E,IAArEjX,GAAeiX,EAAMviB,SAAS5D,UAAUqe,QAAQlP,iBAE7D,OADAnH,QAAQC,MAAM,SAAWklB,EAAU,wDAC5B,KAIRhH,EAAMviB,SAAS5D,UAAgD,kBAA7BmmB,EAAMviB,SAAS5D,UAAyB,CAAE,OAAUmmB,EAAMviB,SAAS5D,WAAemmB,EAAMviB,SAAS5D,WAAa,GAChJ,IAAMotB,EAAMC,GAAQlH,EAAMviB,SAAS5D,UAAUqe,QAAU,aAGvD,YAAYhF,IAAR+T,GACHplB,QAAQC,MAAM,wBAA0Bke,EAAMviB,SAAS5D,UAAUqe,OAAS,WACnE,MAGD,kBAAC+O,EAAD,CAAKtrB,IAAK,MAAQqrB,EAASzpB,QAASyiB,EAAMziB,QAAS5D,WAAYjD,EAAMoD,OAASpD,EAAMoD,OAAS,KAAM2D,SAAQ,eAAOuiB,EAAMviB,SAAb,GAA0B/G,MAOvIywB,GAAkB,SAACvL,EAAUmE,GAKlC,IAL0D,IAAhBrpB,EAAe,uDAAP,GAE9C0wB,EAAe,GACbvL,EAAUxU,OAAOC,KAAKsU,GAAU5mB,OAE7B+mB,EAAS,EAAGA,GAAUF,EAASE,IAAU,CAEjD,IAAIsL,EAAiBzL,EAASG,GAI9B,GAHAqL,EAAarL,GAAUqL,EAAarL,IAAW,GAG1CsL,GAAmBhgB,OAAOC,KAAK+f,GAAgBryB,OAMnD,IAAK,IAAIgyB,KAAWK,EAAgB,CAEnC,IAAIrH,EAAQD,EAAOiH,IAAY,GAC/BhH,EAAMziB,QAAUyiB,EAAMziB,SAAW,GACjCyiB,EAAMviB,SAAW4pB,EAAeL,IAAY,GAC5ChH,EAAMviB,SAAS5D,UAAgD,kBAA7BmmB,EAAMviB,SAAS5D,UAAyB,CAAE,OAAUmmB,EAAMviB,SAAS5D,WAAemmB,EAAMviB,SAAS5D,WAAa,GAChJmmB,EAAMviB,SAASya,OAASnP,GAAeiX,EAAMviB,SAAS5D,UAAUqe,SAAW,GAE3E,IAAI/F,EAAU4U,GAASC,EAAShH,EAAOtpB,IAClCspB,EAAMziB,QAAQvI,OAAS,GAAKgrB,EAAMviB,SAASya,OAAOlP,mBAAqBmJ,GAC3EiV,EAAarL,GAAQve,KACpB,kBAACipB,GAAD,CAAQ9qB,IAAK,OAASqrB,EACrBtqB,MAAgC,OAAzBsjB,EAAMviB,SAASf,MAAiB,KAAQsjB,EAAMviB,SAASf,OAASsjB,EAAMtZ,MAAQsZ,EAAMviB,SAASya,OAAOxb,MAC3G9F,KAA8B,OAAxBopB,EAAMviB,SAAS7G,KAAgB,KAAQopB,EAAMviB,SAAS7G,MAAQopB,EAAMviB,SAASya,OAAOthB,KAC1F8vB,UAAW1G,EAAMviB,SAASipB,WAGzBvU,SAtBLiV,EAAarL,GAAQve,KAAK,MA8B5B,OAAO4pB,GAIaE,G,YAEjB,WAAY5wB,GAAQ,IAAD,8BACrB,4CAAMA,KAED+B,MAAQ,CACZqpB,iBAAkB,EAAKprB,MAAMorB,mBAAoB,EAEjDqC,YAAa,EACboD,SAAU,GAEVC,KAAM,OAENC,oBAAoB,EACpBxF,cAAe,GACfyF,oBAAqB,EAErBC,QAAQ,EACRC,eAAgB,CACf,GAAM,EACN,OAAU,KAKZ,EAAK7B,YAAc,EAAKA,YAAYhrB,KAAjB,iBACnB,EAAKpB,WAAa,EAAKA,WAAWoB,KAAhB,iBAClB,EAAKmoB,UAAY,EAAKA,UAAUnoB,KAAf,iBACjB,EAAKgnB,aAAe,EAAKA,aAAahnB,KAAlB,iBACpB,EAAKinB,SAAW,EAAKA,SAASjnB,KAAd,iBAGhB,EAAK0K,OAASC,IAAWC,cAGzB,EAAKyhB,aAAe,GACpB,EAAKS,OAASrjB,IAAS4M,WAAW,UAClC,EAAKwR,KAAOvb,OAAOC,KAAK,EAAKugB,QAC7B,EAAKC,YAA+B,IAAjB,EAAKlF,KAAK,GAC7B,EAAKnqB,MAAM8uB,SAAW,EAAK3E,KAAK,EAAKnqB,MAAM0rB,aAGtC,EAAK2D,cACT,EAAKD,OAAS,CAAE,KAAQ,EAAKA,QAC7B,EAAKjF,KAAKplB,KAAK,MAIhB,EAAKuqB,YAAc,GA9CE,E,iFAiDD,IAAD,OAGnB3uB,KAAKqM,OAAOqV,SAAS,0BAA0B9F,MAAK,SAAAiN,GACnDA,EAAiBA,GAAiBA,EAAc/nB,KAAOiN,KAAKC,MAAM6a,EAAc/nB,MAAS,GAEzF,EAAKrB,SAAS,CACb6uB,oBAAqBzF,EAAc+F,QAAO,SAAAC,GAAY,OAAKA,EAAaC,SAAkC,IAAxBD,EAAaC,UAAkBlzB,OACjHitB,cAAeA,OAIjB7oB,KAAKqM,OAAOsU,eAAe,0BAA0B,SAAAkI,GAAa,OAAIpgB,QAAQ4C,IAAIwd,Q,qCAKlF,IAAImB,EAAM,EACN+E,EAAY,GAChB,IAAK,IAAIC,KAAYhvB,KAAKyuB,OAAQ,CACjC,IAAMjM,EAAWxiB,KAAKyuB,OAAOO,GAGzBpB,EAAU3f,OAAOC,KAAKsU,GAAU,GAChCoH,EAAaztB,OAAOC,MAAMJ,SAAS4xB,KAElC5tB,KAAKguB,aAAagB,IAAapF,EACnC5pB,KAAKguB,aAAagB,GAAYrB,GAASnL,EAAD,eAAgBxiB,KAAK1C,MAAMqpB,OAAOiH,GAAlC,CAA4CvpB,SAAUme,EAASoL,KAA/D,aAA6EltB,OAAQV,KAAKO,YAAeP,KAAK2uB,cAI3I3uB,KAAKguB,aAAagB,KAC3BhvB,KAAKguB,aAAagB,GAAY,kBAACzM,EAAD,CAAeC,SAAUuL,GAAgBvL,EAAUxiB,KAAK1C,MAAMqpB,OAAtB,aAAgCjmB,OAAQV,KAAKO,YAAeP,KAAK2uB,iBAGxI,IAAIM,EACH,kBAACjE,GAAD,CAAUzoB,IAAK,YAAcynB,EAAKiB,YAAajB,EAAKe,YAAa/qB,KAAKX,MAAM0rB,YAAanB,WAAYA,GACnG5pB,KAAKguB,aAAagB,IAIrBD,EAAU3qB,KAAK6qB,GACfjF,IAGD,OAAO+E,I,oCAIP/uB,KAAKP,SAAS,CAAE,QAAU,EAAO,eAAkB,CAAE,GAAM7C,KAAKsyB,MAAO,OAAU,Q,iCAGvE5vB,GACVU,KAAKP,SAAS,CAAE,QAAU,EAAM,eAAkB,CAAE,GAAM7C,KAAKsyB,MAAO,OAAU5vB,O,gCAGvE0qB,EAAK1mB,GACdtD,KAAKP,SAAS,CAAEsrB,YAAaf,EAAKmE,SAAU7qB,M,mCAGhCyoB,EAAQ/mB,GACpBhF,KAAKP,SAAL,eAAiBssB,EAAS/mB,M,+BAGlBopB,GACRpuB,KAAKP,SAAS,CAAE2uB,W,+BAGJ,IAAD,OACLe,EAAOC,GAAMpvB,KAAKX,MAAM+uB,OAAS,KACjC,OAER,kBAAC,IAAM/sB,SAAP,KACC,kBAAConB,GAAD,CACCnlB,MAAO8H,IAASikB,aAAgBrvB,KAAK0uB,aAAe1uB,KAAKX,MAAM8uB,UAAa,SAC5EzF,iBAAkB1oB,KAAKX,MAAMqpB,iBAC7BC,aAAc3oB,KAAK2oB,aACnBC,SAAU5oB,KAAK4oB,SACfC,cAAe7oB,KAAKX,MAAMivB,qBAGzBtuB,KAAK0uB,aAAe,kBAAC7E,GAAD,CAAQL,KAAMxpB,KAAKwpB,KAAMM,UAAW9pB,KAAK8pB,aAK/D,kBAAC,GAAD,CACC9kB,KAAMhF,KAAKX,MAAMgvB,mBACjB1F,aAAc3oB,KAAK2oB,aACnBE,cAAe7oB,KAAKX,MAAMwpB,gBAK1BsG,GAAQ,kBAACvC,GAAA,EAAD,CAAQE,WAAW,EAAMD,SAAU,KAAM7nB,KAA2B,SAApBhF,KAAKX,MAAM+uB,KAAkBpY,QAAS,kBAAM,EAAK4S,SAAS,UAClH,kBAACuG,EAAD,CACChrB,QAASnE,KAAK1C,MAAM6G,QACpB6R,QAAS,kBAAM,EAAK4S,SAAS,YAO/B,kBAAC,GAAD,CAAO5jB,KAAMhF,KAAKX,MAAMkvB,OAAQ/L,SAAUxiB,KAAKX,MAAMmvB,eAAgB7B,YAAa3sB,KAAK2sB,cACtF3sB,KAAKsvB,oB,GA5J6BzvB,IAAM4C,W,UCjDpC8sB,G,YAEF,WAAYjyB,GAAQ,IAAD,8BACrB,4CAAMA,KAED+B,MAAQ,CACZmwB,OAAQ,GACRhhB,WAAW,EACX9F,OAAO,EACPgO,aAAc,GAEdxZ,MAAO,MATa,E,iFAaD,IAAD,OAGbuyB,EAAe,SAAAjnB,GACpB,EAAK/I,SAAS,CAAE+O,WAAW,EAAO9F,OAAO,EAAMgO,aAAc3Z,IAAKkH,EAAiB,kBAARuE,EAAmBA,EAAMA,EAAI+X,SAAW,OACnH3M,YAAW,SAAS8b,IAEnBjnB,QAAQ4C,IAAItO,IAAKkH,EAAE,wBAA0B,MAC7CqI,IAAWojB,YACX9b,YAAW,kBAAM8b,IAAW,QAE1B,MAGErV,EAA+B,SAAzB+H,OAAOjc,SAASwpB,KAAkB9J,EAC7CzD,OAAOjc,SAASypB,SAAW,KAAOxN,OAAOjc,SAASkc,UAAYD,OAAOjc,SAASwpB,KAAO,IAAMvN,OAAOjc,SAASwpB,KAAO,IAE7G7N,EAAY,CACjB,CAAE,MAAS,UAAW,SAAY,kBAAM,EAAKriB,SAAS,CAAE+O,WAAW,EAAM9F,OAAO,EAAOgO,aAAc,OACrG,CAAE,MAAS,YAAa,SAAY,kBAAM,EAAKjX,SAAS,CAAE+O,UAAW,UAAW9F,OAAO,EAAOgO,aAAc,OAC5G,CAAE,MAAS,aAAc,SAAY+Y,GACrC,CAAE,MAAS,QAAS,SAAYA,IAGjChnB,QAAQ4C,IAAI,cAAgBgP,EAAM,OAClCra,KAAKqM,OAASC,IAAW2V,QAAQ5H,EAAKyH,GAGtC9hB,KAAKqE,SAAW,GAChBrE,KAAKqM,OAAOqV,SAASmO,IAAMC,UACzBlU,MAAK,SAAAvc,GAEL,IACKA,IACH,EAAKgF,SAAL,eAAqB,EAAKA,SAA1B,GAAuC0J,KAAKC,MAAM3O,EAAMyB,MAAQ,IAChEsK,IAAS2kB,YAAY,EAAK1rB,UAC1B+G,IAAS4kB,gBAGT,8BAAkBpU,MAAK,SAAA1e,GAAK,OAAI,EAAKuC,SAAS,CAAEvC,MAAOA,EAAM2H,mBAIlDiV,IADA7L,OAAOC,KAAK,EAAK7J,SAASoqB,QAAQ,GAE7C,EAAKhvB,SAAS,CACbiJ,OAAO,EACPgO,aAAc3Z,IAAKkH,EAAE,yDAItB,EAAKxE,SAAS,CAAE+vB,OAAO,GAAD,mBAAO,EAAKnwB,MAAMmwB,QAAlB,CAA0B,eAGlD,MAAMhnB,GACLC,QAAQC,MAAM,iBAAmBF,EAAI+X,SACrC,EAAK9gB,SAAS,CACbiJ,OAAO,EACPgO,aAAc3Z,IAAKkH,EAAE,0BAA4B,UAKnDsE,OAAM,SAAAC,GACNC,QAAQC,MAAM,iBAAmBF,EAAI+X,SACrC,EAAK9gB,SAAS,CACbiJ,OAAO,EACPgO,aAA6B,kBAARlO,EAAmBzL,IAAKkH,EAAEuE,GAAOzL,IAAKkH,EAAEuE,EAAI+X,cAKpEvgB,KAAKqE,SAAS4rB,SAAW,GACzBjwB,KAAKqM,OAAOgV,UAAU,iBAAiB,SAAC7Y,EAAKsK,GACxCA,GAAQA,EAAKzF,SAChB,EAAKhJ,SAAS4rB,SAAWnd,EAAKzF,OAC9BjC,IAAS2kB,YAAY,CAAEE,SAAU,EAAK5rB,SAAS4rB,eAKjDjwB,KAAKmE,QAAU,GACfnE,KAAK2mB,OAAS,GAEd3mB,KAAKqM,OAAOqV,SAASmO,IAAMK,SACzBtU,MAAK,SAAAvc,GAEL,IACC,EAAK8E,QAAU4J,KAAKC,MAAM3O,EAAMyB,KAChC,EAAKqvB,eAAe,EAAKhsB,SAASyX,MAAK,SAAA+K,GACtC,EAAKA,OAASA,EACd,EAAKlnB,SAAS,CAAE+vB,OAAO,GAAD,mBAAO,EAAKnwB,MAAMmwB,QAAlB,CAA0B,gBAGlD,MAAMhnB,GACLC,QAAQC,MAAM,gBAAkBF,EAAI+X,SACpC,EAAK9gB,SAAS,CACbiJ,OAAO,EACPgO,aAAc3Z,IAAKkH,EAAE,yBAA2B,UAIlDsE,OAAM,SAAAC,GACNC,QAAQC,MAAM,gBAAkBF,EAAI+X,SACpC,EAAK9gB,SAAS,CACbiJ,OAAO,EACPgO,aAAc3Z,IAAKkH,EAAE,uCAAyC,W,kCAUtD0iB,EAAQrnB,GAenB,OAZcA,EAAOsB,IAAI,WACjB+lB,OAAOjjB,SAAQ,SAAAkjB,GAEtB,IAAIgH,EAAUhH,EAAM3B,cAAczX,QAAQ,KAAM,IAC3CmZ,EAAOiH,GAIXjH,EAAOiH,GAASzpB,QAAQC,KAAK9E,GAH7BqnB,EAAOiH,GAAW,CAAE,GAAMA,EAAS,KAAQhH,EAAO,QAAW,CAACtnB,OAOzDqnB,I,oCAOMpB,GAEb,IAAI6K,EAAW,GACX9wB,EAAS,KACb,IACCA,EAAS,IAAIgmB,GAAOC,EAAkBvlB,KAAKqM,QAG3C+jB,EAAShsB,KAAK9E,EAAO4L,mBAAmB,MAAM,IAG1C5L,EAAOE,mBACV4wB,EAAShsB,KAAK9E,EAAO4L,mBAAmB5L,EAAOE,mBAAmB,IAIpE,MAAMgJ,GACLC,QAAQya,KAAK1a,EAAI+X,SAGlB,OAAO,IAAIY,SAAQ,SAAAtC,GAClBsC,QAAQqL,WAAW4D,GAAUxU,MAAK,SAAAyU,GAEjCA,EAAQ3sB,SAAQ,SAAA4sB,GACO,aAAlBA,EAAO3sB,QACV8E,QAAQC,MAAM4nB,MAIhBzR,EAAQvf,W,qCASIixB,GAAa,IAAD,OAGtBH,EAAW,GACXzJ,EAAS,GAETxiB,EAAU,EAAGqsB,EAAiB,EANR,WAOjBC,GACRtsB,IAEAosB,EAAWE,GAAU9vB,QAAU4vB,EAAWE,GAAUC,cAC7CH,EAAWE,GAAUC,OAE5B,IAAInL,EAAgB,eAAQgL,EAAWE,GAAnB,CAA8B,GAAMA,IACxDL,EAAShsB,KAAK,IAAI+c,SAAQ,SAACtC,EAASuC,GAEnC,EAAKuP,cAAcpL,GAAkB3J,MAAK,SAAAtc,GAE1B,OAAXA,IACHkxB,IACA7J,EAAS,EAAKiK,YAAYjK,EAAQrnB,GAClCuf,EAAQ4R,IAGTrP,EAAOqP,UAxBgB,eA6BhBrxB,GAER,IAAIC,EAAQkmB,EAAiB7b,OAAOtK,GAChCC,QAA0Bya,IAAjBza,EAAMqxB,QAElBN,EAAShsB,KAAK,IAAI+c,SAAQ,SAACtC,EAASuC,GAEnC,EAAKuP,cAAL,eAAwBpL,EAAxB,CAA0C,GAAMkL,EAAW,IAAMrxB,EAAU,OAAS,eAAIA,EAAWC,GAAS,QAAWA,EAAMqxB,UAAU9U,MAAK,SAAAtc,GAE5H,OAAXA,IACHkxB,IACA7J,EAAS,EAAKiK,YAAYjK,EAAQrnB,GAClCuf,EAAQ4R,IAGTrP,EAAOqP,WAfX,IAAK,IAAIrxB,KAAYmmB,EAAiB7b,OAAS,EAAtCtK,IAtBV,IAAK,IAAIqxB,KAAYF,EAAa,EAAzBE,GA6CT,OAAO,IAAItP,SAAQ,SAAAtC,GAAO,OAAIsC,QAAQqL,WAAW4D,GAAUxU,MAAK,SAAAoM,GAG/D,IAAK,IAAI4F,KAAWjH,EACnBA,EAAOiH,GAASzpB,QAAQsJ,MAAK,SAACC,EAAOC,GACpC,OAAID,EAAM/M,QAAQ8M,KAAOE,EAAMhN,QAAQ8M,KAAa,EAC3CE,EAAMhN,QAAQ8M,KAAOC,EAAM/M,QAAQ8M,MAAc,EAC9C,KAKdhF,QAAQ+R,KAAK,aAAerW,EAAU,mBAAqBqsB,EAAiB,eAAiBviB,OAAOC,KAAKyY,GAAQ/qB,OAAS,WAAYosB,EAAKrB,GAC3I9H,EAAQ8H,W,kCAIEje,GAGX,OAFAA,EAAQA,GAAS1I,KAAKX,MAAMqX,aAC5BjO,QAAQC,MAAM,SAAUA,GAG1B,kBAACqb,EAAD,CACCxhB,IAAK,iBACL0T,QAAQ,QACRgO,aAAa,EACb1D,QAAS7X,EAAMjN,e,8CAMU,IAChBkD,EAAYqB,KAAK1C,MAAjBqB,QACR,OAEF,kBAACikB,EAAA,EAAD,CACCrgB,IAAI,iBACJiN,WAAS,EACTO,QAAS,EACToL,UAAU,SACVkB,QAAQ,SACRrF,WAAW,SACX3U,MAAO,CAAE6b,UAAW,UAGpB,kBAAC2S,EAAA,EAAD,MACA,kBAAC3H,EAAA,EAAD,CAAYlqB,UAAWL,EAAQyP,SAAUrR,IAAKkH,EAAE,uBAAhD,U,4CAOsB3G,GAOrB,IAP6B,IACrBqB,EAAYqB,KAAK1C,MAAjBqB,QACAmyB,EAAgCxzB,EAAhCwzB,OAAQC,EAAwBzzB,EAAxByzB,OAAQC,EAAgB1zB,EAAhB0zB,YAElBC,EAAiB,SAAC3zB,GAAD,OAAW,kBAAC4zB,EAAA,EAAD,CAAUC,UAAU,OAAOlb,QAAQ,OAAOjX,UAAWL,EAAQyyB,SAAUlhB,OAAQ5S,EAAM4S,UAEnH8d,EAAe,GACVrL,EAAS,EAAGA,GAAUqO,EAAarO,IAAU,CACrDqL,EAAarL,GAAUqL,EAAarL,IAAW,GAG/C,IADA,IAAI0O,EAAU,EAAAh1B,KAAKi1B,SAAqB,EAC/BC,EAAS,EAAGA,GAAUF,EAASE,IACvCvD,EAAarL,GAAQve,KAAK,kBAAC6sB,EAAD,CAAgB1uB,IAAKogB,EAAS,IAAM4O,EAAQrhB,OAAS,IAAA7T,KAAKi1B,SAAyB,OAI/G,OAEF,kBAAC,IAAMjwB,SAAP,KACEyvB,GAAU,kBAACI,EAAA,EAAD,CAAUC,UAAU,OAAOlb,QAAQ,OAAO/F,OAAQ,KAC5D6gB,GAAU,kBAACG,EAAA,EAAD,CAAUC,UAAU,OAAOlb,QAAQ,OAAO/F,OAAQ,KAC7D,kBAACqS,EAAD,CAAehgB,IAAI,kBAAkBigB,SAAUwL,O,+BAS9C,IAAMtlB,EAAQ1I,KAAKX,MAAMqJ,MAAQ1I,KAAKwxB,cAAgB,KAGtD,GAAIxxB,KAAKX,MAAMqJ,OAAS1I,KAAKX,MAAMmwB,OAAO5zB,OAAS,EAClD,OAAO8M,EAEH,IAA+C,IAA3C1I,KAAKX,MAAMmwB,OAAO9zB,QAAQ,YAClC,OAAOsE,KAAKyxB,wBAER,IAA6C,IAAzCzxB,KAAKX,MAAMmwB,OAAO9zB,QAAQ,UAAkB,CACpD,IAAMsuB,EAAM/b,OAAOC,KAAKlO,KAAKqE,SAASoqB,QAAQ,GAC9C,YAAe3U,IAARkQ,EAAoB,KAAOhqB,KAAK0xB,sBAAsB,CAAEZ,QAAQ,EAAMC,OAAgB,IAAR/G,EAAWgH,YAAsB,IAARhH,EAAY/b,OAAOC,KAAKlO,KAAKqE,SAASoqB,OAAOzE,IAAMpuB,OAASouB,EAAIpuB,SAK/K,OADA6M,QAAQ4C,IAAI,aAAcrL,KAAKX,MAAMmP,WAGvC,kBAACmjB,GAAA,EAAD,CAAez0B,MAAO8C,KAAKX,MAAMnC,OAC/BwL,EACD,kBAAC,GAAD,CAAQnG,IAAI,SAASmmB,iBAAkB1oB,KAAKX,MAAMmP,UAAWrK,QAASnE,KAAKmE,QAASwiB,OAAQ3mB,KAAK2mB,c,GA1VhF9mB,IAAM4C,WAiWTjE,iBAnXA,SAAAtB,GAAK,MAAK,CACxBkR,QAAS,CACRhR,OAAQ,aACR0G,MAAO,QAERstB,SAAS,aACRh0B,OAAQF,EAAM6S,QAAQ,EAAG,EAAG,EAAG,IAC9B7S,EAAM4F,YAAYC,KAAK,MAAQ,CAC/BkH,YAAa/M,EAAM6S,QAAQ,GAAK,GAAK,EAAG,QA2W5BvR,CAAmB+wB,IC/XdqC,QACW,cAA7BxP,OAAOjc,SAASkc,UAEe,UAA7BD,OAAOjc,SAASkc,UAEhBD,OAAOjc,SAASkc,SAASwP,MACvB,2DCXNC,IAASC,OAAO,kBAAC,GAAD,MAASpmB,SAASE,eAAe,SD4H3C,kBAAmBmmB,WACrBA,UAAUC,cAAcC,MAAMtW,MAAK,SAAAuW,GACjCA,EAAaC,iB,4eEpHbC,GAAmBvoB,aAAW,SAAA5M,GAAK,MAAK,CAC5CoS,KAAM,CACJU,YAAa9S,EAAM6S,QAAQ,GAC3BnS,aAAcV,EAAM6S,QAAQ,IAE9BuiB,UACyB,UAAvBp1B,EAAMkN,QAAQ6G,KACV,CACEnN,MAAO5G,EAAMkN,QAAQlI,UAAUmI,KAC/ByF,gBAAiByiB,YAAQr1B,EAAMkN,QAAQlI,UAAU0iB,MAAO,MAE1D,CACE9gB,MAAO5G,EAAMkN,QAAQooB,KAAKxwB,QAC1B8N,gBAAiB5S,EAAMkN,QAAQlI,UAAUmhB,MAEjD/f,MAAO,CACLhB,KAAM,gBAIK,SAASmwB,GAAqBn1B,GAC3C,IAAMqB,EAAU0zB,KACR/uB,EAAuBhG,EAAvBgG,MAAOovB,EAAgBp1B,EAAhBo1B,YAEf,OACE,kBAACzJ,EAAA,EAAD,CACEjqB,UAAWC,YAAKN,EAAQ2Q,KAAT,eACZ3Q,EAAQ2zB,UAAYI,EAAc,KAGpCA,EAAc,EACb,kBAACxJ,EAAA,EAAD,CAAYlqB,UAAWL,EAAQ2E,MAAOQ,MAAM,UAAUmS,QAAQ,aAC3Dyc,EADH,aAIA,kBAACxJ,EAAA,EAAD,CAAYlqB,UAAWL,EAAQ2E,MAAO2S,QAAQ,KAAKzT,GAAG,cAC1Dc,GAIGovB,EAAc,GACb,kBAACvJ,EAAA,EAAD,CAAS7lB,MAAM,UACb,kBAACkhB,EAAA,EAAD,CAAYzK,aAAW,UACrB,kBAAC,KAAD,S,wBC7CG,SAAS4Y,GAAkBr1B,GAAQ,IACxCqB,EAA+FrB,EAA/FqB,QAASi0B,EAAsFt1B,EAAtFs1B,UAAWC,EAA2Ev1B,EAA3Eu1B,iBAAkBC,EAAyDx1B,EAAzDw1B,MAAOC,EAAkDz1B,EAAlDy1B,QAASL,EAAyCp1B,EAAzCo1B,YAAaM,EAA4B11B,EAA5B01B,SAAUC,EAAkB31B,EAAlB21B,cAKrF,OACE,kBAACC,GAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAWxwB,QAAQ,YACjB,kBAACywB,EAAA,EAAD,CACEC,cAAeZ,EAAc,GAAKA,EAAcM,EAChDxpB,QAASwpB,EAAW,GAAKN,IAAgBM,EACzC3pB,SAAUwpB,EACVU,WAAY,CAAE,aAAc,iBAG/BX,EAAU7zB,KAAI,SAAAy0B,GAAQ,OACrB,kBAACJ,EAAA,EAAD,CACE7wB,IAAKixB,EAAShxB,GACdixB,MAAOD,EAASC,OAAS,OACzB7wB,QAAS4wB,EAASE,eAAiB,OAAS,UAC5CC,cAAeZ,IAAYS,EAAShxB,IAAKswB,GAEzC,kBAACc,GAAA,EAAD,CACEC,OAAQd,IAAYS,EAAShxB,GAC7B2Y,UAAW4X,IAAYS,EAAShxB,GAAKswB,EAAQ,MAC7CpxB,SAzBc2lB,EAyBamM,EAAShxB,GAzBV,SAAAiT,GACpCwd,EAAcxd,EAAO4R,MA0BX,gCAASmM,EAASxrB,OACjB+qB,IAAYS,EAAShxB,GACpB,0BAAMxD,UAAWL,EAAQm1B,gBACZ,SAAVhB,EAAmB,oBAAsB,oBAE1C,OAhCU,IAAAzL,OCJb,SAAS0M,GAAcz2B,GAAQ,IACpCmlB,EAAoDnlB,EAApDmlB,QAASuR,EAA2C12B,EAA3C02B,SAAUC,EAAiC32B,EAAjC22B,UAAWC,EAAsB52B,EAAtB42B,SAAUxyB,EAAYpE,EAAZoE,QAGhD,OAEF,kBAAC,IAAD,KACGsyB,EAASj1B,KAAI,SAACo1B,EAAKhgB,GACnB,IANkB3R,EAMZ4xB,GANY5xB,EAMgB2xB,EAAI3xB,IANY,IAA1B0xB,EAASx4B,QAAQ8G,IAOnC6xB,EAAO,kCAA8BlgB,GAE3C,OACD,kBAACgf,EAAA,EAAD,CACEmB,OAAK,EACL5yB,QAAS,SAAA+T,GAAK,OAAI/T,EAAQ+T,EAAO0e,EAAI3xB,KACrCmpB,KAAK,WACL4I,eAAcH,EACdI,UAAW,EACXjyB,IAAK4xB,EAAI3xB,GACT0xB,SAAUE,GAEV,kBAAChB,EAAA,EAAD,CAAWxwB,QAAQ,YACpB,kBAACywB,EAAA,EAAD,CACE7pB,QAAS4qB,EACTb,WAAY,CAAE,kBAAmBc,MAIjC5R,EAAQ1jB,KAAI,SAAA4jB,GAAM,OACpB,kBAACyQ,EAAA,EAAD,CAAW7wB,IAAK,aAAe4R,EAAQ,IAAMwO,EAAOngB,GAAIA,GAAI6xB,EAASI,MAAM,MAAM7xB,QAAQ,QAAQuxB,EAAIxR,EAAOngB,KAAO,WAMnHyxB,EAAY,GACd,kBAACd,EAAA,EAAD,CAAU9wB,MAAO,CAAE6N,OAAQ,GAAK+jB,IAC9B,kBAACb,EAAA,EAAD,CAAWsB,QAAS,MCjCvB,IAAM7qB,GAAYC,aAAW,SAAA5M,GAAK,MAAK,CACrCoS,KAAM,CACJzR,MAAO,QAET2d,MAAO,CACL3d,MAAO,OACPqZ,aAAcha,EAAM6S,QAAQ,IAE9B4kB,MAAO,CACL32B,SAAU,KAEZ81B,eAAgB,CACdc,OAAQ,EACRC,KAAM,gBACN3kB,OAAQ,EACR9S,QAAS,EACT03B,SAAU,SACVlyB,QAAS,EACTxE,SAAU,WACVF,IAAK,GACLL,MAAO,OAKX,SAASk3B,GAAqBxgB,EAAG9N,EAAGssB,GAClC,OAAItsB,EAAEssB,GAAWxe,EAAEwe,IACT,EAENtsB,EAAEssB,GAAWxe,EAAEwe,GACV,EAEF,EAGT,SAASiC,GAAclC,EAAOC,GAC5B,MAAiB,SAAVD,EACH,SAACve,EAAG9N,GAAJ,OAAUsuB,GAAqBxgB,EAAG9N,EAAGssB,IACrC,SAACxe,EAAG9N,GAAJ,OAAWsuB,GAAqBxgB,EAAG9N,EAAGssB,IAG5C,SAASkC,GAAWC,EAAOC,GACzB,IAAMC,EAAiBF,EAAMn2B,KAAI,SAACs2B,EAAIlhB,GAAL,MAAe,CAACkhB,EAAIlhB,MAMrD,OALAihB,EAAe3nB,MAAK,SAAC8G,EAAG9N,GACtB,IAAMqsB,EAAQqC,EAAW5gB,EAAE,GAAI9N,EAAE,IACjC,OAAc,IAAVqsB,EAAoBA,EACjBve,EAAE,GAAK9N,EAAE,MAEX2uB,EAAer2B,KAAI,SAAAs2B,GAAE,OAAIA,EAAG,MAGtB,SAAStB,GAAcz2B,GACpC,IAAMqB,EAAUkL,KAERvG,EAAwIhG,EAAxIgG,MAAOsvB,EAAiIt1B,EAAjIs1B,UAAW0C,EAAsHh4B,EAAtHg4B,gBAAiBpoB,EAAqG5P,EAArG4P,KAAMqoB,EAA+Fj4B,EAA/Fi4B,WAAYC,EAAmFl4B,EAAnFk4B,aAAcC,EAAqEn4B,EAArEm4B,eAAgBC,EAAqDp4B,EAArDo4B,gBAAiBC,EAAoCr4B,EAApCq4B,YAAaC,EAAuBt4B,EAAvBs4B,mBAH9E,EAKjB/1B,IAAMsH,SAASquB,GAAgB,OALd,mBAKpC1C,EALoC,KAK7B+C,EAL6B,OAMbh2B,IAAMsH,SAASsuB,GAAkB7C,EAAU,GAAGpwB,IANjC,mBAMpCuwB,EANoC,KAM3B+C,EAN2B,OAOXj2B,IAAMsH,SAASuuB,GAAmB,IAPvB,mBAOpCxB,EAPoC,KAO1B6B,EAP0B,OAQnBl2B,IAAMsH,SAASwuB,GAAe,GARX,mBAQpCvH,EARoC,KAQ9B4H,EAR8B,OASLn2B,IAAMsH,SAASouB,EAAcK,GAAsB,EAAK1oB,EAAKtR,QATxD,mBASpCq6B,EAToC,KASvBC,EATuB,KAuDrCC,EAAYb,GAAmBc,GACrC,OACD,kBAAC,IAAM/0B,SAAP,KACO,kBAACoxB,GAAD,CAAsBnvB,MAAOA,EAAOovB,YAAawB,EAASt4B,SAC1D,kBAACy6B,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEt3B,UAAWL,EAAQg2B,MACnB4B,kBAAgB,aAChBxc,aAAW,kBAEX,kBAAC4Y,GAAD,CACPC,UAAWA,EACFj0B,QAASA,EACT+zB,YAAawB,EAASt4B,OACtBk3B,MAAOA,EACPC,QAASA,EACTF,iBAtDiB,SAAApd,GAC3B,GAAIA,EAAMlM,OAAOC,QAAjB,CACE,IAAMgtB,EAAetpB,EAAKnO,KAAI,SAAA03B,GAAC,OAAIA,EAAEj0B,MACrCuzB,EAAYS,QAGdT,EAAY,KAiDF9C,cA7Dc,SAACxd,EAAO4R,GAEhCwO,EADc9C,IAAY1L,GAAsB,QAAVyL,EACrB,OAAS,OAC1BgD,EAAWzO,IA2DD2L,SAAU9lB,EAAKtR,SAG1B,kBAACu6B,EAAD,CACC1T,QAASmQ,EACToB,SAAUiB,GAAW/nB,EAAM8nB,GAAclC,EAAOC,IAAU2D,MAAMtI,EAAO6H,EAAa7H,EAAO6H,EAAcA,GACzGhC,UAAWgC,EAAc55B,KAAKyJ,IAAImwB,EAAa/oB,EAAKtR,OAASwyB,EAAO6H,GACpE/B,SAAUA,EACVxyB,QA9CkB,SAAC+T,EAAOjT,GAC1B,IAAMm0B,EAAgBzC,EAASx4B,QAAQ8G,GACnCo0B,EAAc,IAEK,IAAnBD,EACFC,EAAcA,EAAYrpB,OAAO2mB,EAAU1xB,GAChB,IAAlBm0B,EACTC,EAAcA,EAAYrpB,OAAO2mB,EAASwC,MAAM,IACvCC,IAAkBzC,EAASt4B,OAAS,EAC7Cg7B,EAAcA,EAAYrpB,OAAO2mB,EAASwC,MAAM,GAAI,IAC3CC,EAAgB,IACzBC,EAAcA,EAAYrpB,OACxB2mB,EAASwC,MAAM,EAAGC,GAClBzC,EAASwC,MAAMC,EAAgB,KAInCZ,EAAYa,QAkCbrB,GAAc,kBAACsB,EAAA,EAAD,CACPC,mBAAoB,CAAC,EAAG,GAAI,IAC5Br2B,UAAU,MACVs2B,MAAO7pB,EAAKtR,OACZq6B,YAAaA,EACb7H,KAAMA,EACN4I,aAlEiB,SAACvhB,EAAOwhB,GAC/BjB,EAAQiB,IAkEFC,oBA/DwB,SAAAzhB,GAC9BygB,EAAel6B,SAASyZ,EAAMlM,OAAOxI,MAAO,KAC5Ci1B,EAAQ,O,YCXNpD,GAAY,CAChB,CAAEpwB,GAAI,OAAQkxB,gBAAgB,EAAM1rB,MAAOjL,IAAKkH,EAAE,SAClD,CAAEzB,GAAI,WAAYkxB,gBAAgB,EAAO1rB,MAAOjL,IAAKkH,EAAE,aACvD,CAAEzB,GAAI,SAAUkxB,gBAAgB,EAAO1rB,MAAOjL,IAAKkH,EAAE,WACrD,CAAEzB,GAAI,SAAUkxB,gBAAgB,EAAO1rB,MAAOjL,IAAKkH,EAAE,WACrD,CAAEzB,GAAI,aAAckxB,gBAAgB,EAAO1rB,MAAOjL,IAAKkH,EAAE,gBAGrDkzB,G,YAEL,WAAY75B,GAAQ,IAAD,8BAClB,4CAAMA,KAeP85B,gBAAkB,SAAC3hB,EAAOuU,GAAR,OAAgB,EAAKvqB,SAAS,CAAEuqB,SAhB/B,EAiBnBqN,kBAAoB,SAAAC,GAAK,OAAI,SAAC7hB,EAAO8hB,GAAR,OAAuB,EAAK93B,SAAS,CAAE63B,QAAOC,GAAaD,MAjBrE,EAkBnBE,mBAAqB,SAAAj1B,GAAG,OAAI,SAAAkT,GAC3B,IAAIgiB,EAAahiB,GAASA,EAAMlM,QAAUkM,EAAMlM,OAAOC,UAAY,EACnE,EAAK/J,UAAS,SAAAoO,GAAS,MAAK,CAAExJ,SAAS,eAAMwJ,EAAUxJ,SAAjB,eAA4B9B,EAAMk1B,UApBtD,EAuBnBC,iBAAmB,SAAAn1B,GAAG,OAAI,SAAAkT,GACzB,IAAIgiB,EAAahiB,GAASA,EAAMlM,QAAUkM,EAAMlM,OAAOxI,OAAU,GAE7DwB,EACH,EAAK9C,UAAS,SAAAoO,GAAS,MAAK,CAAExJ,SAAS,eAAMwJ,EAAUxJ,SAAjB,eAA4B9B,EAAMk1B,QAGxE,EAAKh4B,SAAS,CAAE4E,SAAU0J,KAAKC,MAAMypB,OA9BpB,EAqCnBE,KAAO,WAENvsB,IAAS2kB,YAAY,EAAK1wB,MAAMgF,UAChCiI,IAAWC,cAAc9M,SAASowB,IAAMC,SAAU/hB,KAAK6pB,UAAUxsB,IAAS/G,WACxEuX,MAAK,kBAAMwG,OAAOjc,SAAS0xB,YAC3BtvB,OAAM,SAAAC,GAAG,OAAIC,QAAQC,MAAMF,OA1CX,EAgKnBsvB,sBAAwB,SAACx6B,GACoCA,EAApDmlB,QAAoDnlB,EAA3C02B,SAA2C12B,EAAjC22B,UADQ,IACGC,EAAsB52B,EAAtB42B,SAAsB52B,EAAZoE,QAGhD,OAEF,kBAAC,IAAD,KACE,EAAKwL,KAAKnO,KAAI,SAACO,EAAQ6U,GACvB,IANmB3R,EAMb4xB,GANa5xB,EAMelD,EAAOkD,IANU,IAA1B0xB,EAASx4B,QAAQ8G,IAOpC6xB,EAAO,iBAAalgB,GAE1B,OACC,kBAACgf,EAAA,EAAD,CACCmB,OAAK,EACL5yB,QAAS,SAAA+T,GAAK,OAAInY,EAAMoE,QAAQ+T,EAAOnW,EAAOkD,KAC9CmpB,KAAK,WACL4I,eAAcH,EACdI,UAAW,EACXjyB,IAAKjD,EAAOkD,GACZ0xB,SAAUE,GAGV,kBAAChB,EAAA,EAAD,CAAWxwB,QAAQ,YAAW,kBAACywB,EAAA,EAAD,CAAU7pB,QAAS4qB,EAAgBb,WAAY,CAAE,kBAAmBc,MAClG,kBAACjB,EAAA,EAAD,CAAW5wB,GAAI6xB,EAASI,MAAM,OAAM,kBAACsD,EAAA,EAAD,CAAW5hB,WAAY,CAAER,kBAAkB,GAAQtT,MAAO,CAAExE,MAAO,KAAOkD,MAAOzB,EAAOgO,QAC5H,kBAAC8lB,EAAA,EAAD,CAAW5wB,GAAI6xB,EAASI,MAAM,OAAM,kBAACsD,EAAA,EAAD,CAAW5hB,WAAY,CAAER,kBAAkB,GAAQtT,MAAO,CAAExE,MAAO,KAAOkD,MAAOzB,EAAOmb,YAE5H,kBAAC2Y,EAAA,EAAD,CAAW5wB,GAAI6xB,EAASI,MAAM,OAAM,kBAACsD,EAAA,EAAD,OAEpC,kBAAC3E,EAAA,EAAD,CAAW5wB,GAAI6xB,EAASI,MAAM,OAAM,kBAACsD,EAAA,EAAD,OAEpC,kBAAC3E,EAAA,EAAD,CAAW5wB,GAAI6xB,EAASI,MAAM,OAAM,kBAACsD,EAAA,EAAD,oBA3L/B3sB,IAAS/G,SAAS4rB,SACzB,EAAK5wB,MAAQ,CACZ2qB,IAAK,EACLsN,OAAO,EACPjzB,SAAU+G,IAAS/G,UAAY,IAGhC,EAAK6I,KAAOe,OAAOC,KAAK,EAAK5Q,MAAM6G,SAASpF,KAAI,SAAA0xB,GAAQ,oBAAOjuB,GAAIiuB,GAAa,EAAKnzB,MAAM6G,QAAQssB,OAVjF,E,oFAgDIluB,EAAK+I,GAAU,IAC7B3M,EAAYqB,KAAK1C,MAAjBqB,QAER2M,EAAQ3K,QAAU2K,EAAQ3K,SAAW,GACrC,IAAMA,EAAUsN,OAAOC,KAAK5C,EAAQ3K,SAAS5B,KAAI,SAAAooB,GAAM,OAAI,kBAAC6Q,EAAA,EAAD,CAAUz1B,IAAK,YAAcA,EAAM,IAAM4kB,EAAQpmB,MAAOomB,GAAS7b,EAAQ3K,QAAQwmB,OAC5I,OAEF,kBAAC8Q,EAAA,EAAD,CAAa11B,IAAK,eAAiBA,EAAKvD,UAAWL,EAAQu5B,aAC1D,kBAACC,EAAA,EAAD,KAAa7sB,EAAQtD,OACrB,kBAACowB,EAAA,EAAD,CACC71B,IAAK,UAAYA,EACjBvD,UAAWL,EAAQ6W,MACnBzU,MAAOf,KAAKX,MAAMgF,SAAS9B,IAAQ+I,EAAQzG,SAAW,GACtDwE,SAAUrJ,KAAK03B,iBAAiBn1B,IAG/B5B,GAEF,kBAAC03B,EAAA,EAAD,KAAiB/sB,EAAQgtB,YAAc,O,2CASlB/1B,EAAK+I,GAAU,IAC3B3M,EAAYqB,KAAK1C,MAAjBqB,QAER,OAEF,kBAACo5B,EAAA,EAAD,CACCx1B,IAAK,aAAeA,EACpBvD,UAAWC,YAAKN,EAAQ6W,MAAO7W,EAAQ45B,WACvCvwB,MAAOsD,EAAQtD,MACfwwB,YAAaltB,EAAQzG,SAAW,GAChCyzB,WAAYhtB,EAAQgtB,YAAc,GAClCjvB,SAAUrJ,KAAK03B,iBAAiBn1B,GAChCxB,MAAOf,KAAKX,MAAMgF,SAAS9B,IAAQ,O,6CASZA,EAAK+I,GAE3B,OAEF,kBAACmtB,EAAA,EAAD,CACCl2B,IAAK,oBAAsBA,EAC3Bm2B,QAAS,kBAACC,EAAA,EAAD,CAAQnvB,aAAsCsQ,IAA7B9Z,KAAKX,MAAMgF,SAAS9B,GAAqBvC,KAAKX,MAAMgF,SAAS9B,GAAQ+I,EAAQzG,UAAW,EAAQwE,SAAUrJ,KAAKw3B,mBAAmBj1B,KAC5JyF,MAAOsD,EAAQtD,U,oCASDzF,EAAK+I,GAElB,OAAOA,EAAQ2F,MACd,IAAK,OACJ,OAAOjR,KAAK44B,qBAAqBr2B,EAAK+I,GAEvC,IAAK,SACJ,OAAOtL,KAAK64B,uBAAuBt2B,EAAK+I,GAEzC,IAAK,SACJ,OAAOtL,KAAK84B,uBAAuBv2B,EAAK+I,GAEzC,QACC,OAAO,Q,kCAOE/I,EAAK+0B,GAAQ,IAAD,OACf34B,EAAYqB,KAAK1C,MAAjBqB,QAEF0F,EAAW4J,OAAOC,KAAKopB,EAAMjzB,UAAUtF,KAAI,SAAAuM,GAAO,OAAI,EAAKytB,cAAcztB,EAASgsB,EAAMjzB,SAASiH,OACvG,OAEF,kBAAC0tB,EAAA,EAAD,CACCz2B,IAAK,kBAAoBA,EACzB02B,SAAUj5B,KAAKX,MAAMi4B,QAAU/0B,EAC/B8G,SAAUrJ,KAAKq3B,kBAAkB90B,IAGjC,kBAAC22B,EAAA,EAAD,CACCC,WAAY,kBAAC,IAAD,MACZ32B,GAAI,gBAAkBD,GAGtB,kBAAC2mB,EAAA,EAAD,CAAYlqB,UAAWL,EAAQy6B,SAAU9B,EAAMtvB,OAC9CsvB,EAAM+B,aAAe,kBAACnQ,EAAA,EAAD,CAAYlqB,UAAWL,EAAQ26B,kBAAmBhC,EAAM+B,cAE/E,kBAACE,EAAA,EAAD,KACEl1B,M,+BAkDQ,IAAD,OACA1F,EAAYqB,KAAK1C,MAAjBqB,QAEF66B,EAASvrB,OAAOC,KAAK2X,KAAQ9mB,KAAI,SAAAu4B,GAAK,OAAI,EAAKmC,YAAYnC,EAAOzR,IAAOyR,OAC/E,OAEF,kBAAC,IAAMj2B,SAAP,KACC,kBAAC2qB,EAAA,EAAD,CAAajqB,mBAAiB,GAC7B,kBAACmnB,EAAA,EAAD,CAAYjT,QAAQ,MAApB,iBACA,kBAACuO,EAAA,EAAD,CAAYzK,aAAW,QAAQ/a,UAAWL,EAAQslB,YAAaviB,QAAS,kBAAM,EAAKpE,MAAM0Y,YACxF,kBAAC,IAAD,QAGF,kBAACkW,EAAA,EAAD,CAAeltB,UAAWL,EAAQ+6B,eAEjC,kBAACC,EAAA,EAAD,CAAOC,QAAM,GACZ,kBAAC9O,EAAA,EAAD,CACC9rB,UAAWL,EAAQ6qB,KACnBzoB,MAAOf,KAAKX,MAAM2qB,IAClB6P,eAAe,UACfC,UAAU,UACVzwB,SAAUrJ,KAAKo3B,iBAGf,kBAACxM,EAAA,EAAD,CAAK5iB,MAAM,YACX,kBAAC4iB,EAAA,EAAD,CAAK5iB,MAAM,aACX,kBAAC4iB,EAAA,EAAD,CAAK5iB,MAAM,WACX,kBAAC4iB,EAAA,EAAD,CAAK5iB,MAAO,CAAC,oBAAqB,wBAAIzF,IAAI,QAAU,kBAGtD,yBAAK8S,OAA2B,IAAnBrV,KAAKX,MAAM2qB,KACvB,kBAAC2P,EAAA,EAAD,CAAO36B,UAAWL,EAAQ6c,OACzB,kBAAC,GAAD,CACClY,MAAM,UACNsvB,UAAWA,GACX1lB,KAAMlN,KAAKkN,KACXooB,gBAAiBt1B,KAAK83B,0BAKzB,yBAAKziB,OAA2B,IAAnBrV,KAAKX,MAAM2qB,IAAW3nB,MAAO,CAAExE,MAAO,SAClD,kBAAC87B,EAAA,EAAD,CAAO36B,UAAWL,EAAQ2E,OACzB,kBAAC4lB,EAAA,EAAD,CAAYjT,QAAQ,KAAKzT,GAAG,cAC1BzF,IAAKkH,EAAE,cAGTu1B,GAGF,yBAAKnkB,OAA2B,IAAnBrV,KAAKX,MAAM2qB,KAAxB,UAIA,yBAAK3U,OAA2B,IAAnBrV,KAAKX,MAAM2qB,IAAW3nB,MAAO,CAAExE,MAAO,SAClD,kBAAC87B,EAAA,EAAD,CAAO36B,UAAWL,EAAQ6c,OACzB,kBAAC0N,EAAA,EAAD,CAAYlqB,UAAWL,EAAQ2E,MAAO2S,QAAQ,KAAKzT,GAAG,cACpDzF,IAAKkH,EAAE,eAET,kBAAC8zB,EAAA,EAAD,CACC5hB,WAAY,CAAEnX,UAAWL,EAAQo7B,WACjCx3B,IAAK,gBACLy3B,WAAS,EACTlN,WAAS,EACTzjB,SAAUrJ,KAAK03B,iBAAiB,MAChC32B,MAAOgN,KAAK6pB,UAAU53B,KAAKX,MAAMgF,SAAU,KAAM,QAOrD,kBAAC+nB,EAAA,EAAD,KACC,kBAACpoB,EAAA,EAAD,CAAQgpB,WAAS,EAACtrB,QAAS,kBAAM,EAAKpE,MAAM0Y,WAAWlS,MAAM,aAC3D/G,IAAKkH,EAAE,WAET,kBAACD,EAAA,EAAD,CAAQtC,QAAS1B,KAAK23B,KAAM7zB,MAAM,WAChC/G,IAAKkH,EAAE,e,GA1RgBpE,IAAM4C,WAmSlBjE,wBAtVA,SAAAtB,GAAK,MAAK,CACxBssB,KAAM,CACLtS,aAAc,QAEfkiB,QAAS,CACRjpB,SAAUjT,EAAM+8B,WAAWC,QAAQ,IACnCC,UAAW,SACX5R,WAAY,GAEb+Q,iBAAkB,CACjBnpB,SAAUjT,EAAM+8B,WAAWC,QAAQ,IACnCp2B,MAAO5G,EAAMkN,QAAQooB,KAAKtwB,WAE3B+hB,YAAa,CACZ7lB,SAAU,WACVD,MAAOjB,EAAM6S,QAAQ,GACrB7R,IAAKhB,EAAM6S,QAAQ,GACnBjM,MAAO5G,EAAMkN,QAAQ6hB,KAAK,MAE3ByN,cAAe,CACd5pB,gBAAiB,WAElBxM,MAAO,CACN0M,YAAa9S,EAAM6S,QAAQ,GAC3BnS,aAAcV,EAAM6S,QAAQ,GAC5BmO,UAAW,OACXxgB,QAAS,OACTU,SAAU,WACV4Y,WAAY,UAEbxB,MAAO,CACN3X,MAAO,KAER06B,UAAW,CACVnhB,WAAYla,EAAM6S,QAAQ,GAC1B9F,YAAa/M,EAAM6S,QAAQ,IAE5BgqB,UAAW,CACVK,WAAY,4DAgTC57B,CAAmB24B,K,+HCnYrBr6B,EAAU,CAAEu9B,G,OAAAA,GAWJt9B,E,yGAkBDwO,GAClB,QAAIA,IACHxO,EAAKwO,SAAWA,EAChB9C,QAAQ4C,IAAI,yBAA2BE,EAAW,MAC3C,K,uCAYe+uB,GAEvB,QAAIA,KACHA,EAAYz7B,MAAMC,QAAQw7B,GAAaA,EAAY,CAACA,IAC1C52B,SAAQ,SAAA6H,GAAQ,OAAIxO,EAAK0O,gBAAgBF,OAE5C,K,wCAYyC,IAA3BA,EAA0B,uDAAfxO,EAAKwO,SAEtC,GAAIA,EAAU,CACb,IAAIgvB,EACJ,IACCA,EAAc31B,OAAQ,KAAY2G,EAAW,OAAO1G,QAErD,MAAM2D,GAEL,OADAC,QAAQC,MAAMF,EAAI+X,UACX,EAIR,OADAxjB,EAAK+H,eAAeyG,EAAUgvB,IACvB,EAGR,OAAO,I,qCAWchvB,EAAUgvB,GAC/B,SAAIhvB,IAAYgvB,KACfx9B,EAAK4H,aAAa4G,GAAlB,eAAmCxO,EAAK4H,aAAa4G,IAAa,GAAlE,GAAyEgvB,GACzE9xB,QAAQ4C,IAAI,uCAAyCE,EAAW,MACzD,K,oCAY4B,IAAlBivB,EAAiB,wDACnC,OAAOz9B,EAAKwO,SAAShP,OAAO,EAAGi+B,EAAU,EAAI,K,0BAakC,IAAvEC,EAAsE,uDAA/D,GAAI95B,EAA2D,uDAAjD,GAAI+5B,EAA6C,uDAA9B,GAAInvB,EAA0B,uDAAfxO,EAAKwO,SAGpE,GADAkvB,EAAOA,EAAKh/B,WACRsB,EAAK4H,aAAa4G,GAGrB,GAAIkvB,EAAK/+B,QAAQ,MAAQ,EAAG,CAG3B,IADA,IAAIi/B,EAAQF,EAAK9+B,MAAM,KAChBg/B,EAAM/+B,OAAS,IAAMmB,EAAK4H,aAAa4G,GAAUovB,EAAMn+B,KAAK,OAClEm+B,EAAMC,QAGPH,EAAO19B,EAAK4H,aAAa4G,GAAUovB,EAAMn+B,KAAK,OAASi+B,OAGvDA,EAAO19B,EAAK4H,aAAa4G,GAAUkvB,IAASA,EAK9C,IAAK,IAAIl4B,KAAOm4B,EACfD,EAAOA,EAAKjtB,QAAQsT,OAAO,IAAMve,EAAM,IAAK,KAAMm4B,EAAan4B,IAQhE,OAJI5B,EAAQk6B,UACXJ,EAAOA,EAAKK,OAAO,GAAGC,cAAgBN,EAAK/D,MAAM,IAG3C+D,M,KA3IY19B,EAKb4H,aAAe,GALF5H,EAUbwO,SAAYymB,UAAUzmB,UAAYymB,UAAUgJ,cAAgB,S,gCCtBpE,6CAEanL,EAAQ,CACpB,SAAY,oBACZ,QAAW,oBAGG,KACdoL,aAAc,CACbjzB,MAAO,gBACP3D,SAAU,CACTkH,SAAU,CACTvD,MAAO,+BACPiJ,KAAM,SACNtQ,QAAS,CACR05B,GAAI,UACJa,GAAI,WAELr2B,QAAS9H,IAAKC,eAEf4O,YAAa,CACZ5D,MAAO,qBACPwS,KAAM,yBACNvJ,KAAM,QAEPvF,UAAW,CACV1D,MAAO,mBACPiJ,KAAM,OACNpM,QAAS,0CAIZs2B,YAAa,CACZnzB,MAAO,eACP3D,SAAU,CACTwmB,eAAgB,CACf7iB,MAAO,gCACPwS,KAAM,kDACNvJ,KAAM,SACNpM,SAAS,KAIZu2B,cAAe,CACdpzB,MAAO,iBACP3D,SAAU,CACTg3B,kBAAmB,CAClBrzB,MAAO,8BACPiJ,KAAM,OACNpM,QAAS,YAEVy2B,oBAAqB,CACpBtzB,MAAO,gCACPiJ,KAAM,OACNpM,QAAS,a","file":"static/js/main.b186717b.chunk.js","sourcesContent":["import { format } from 'date-fns'\r\nimport i18n, { locales } from '../i18n'\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToSeconds(time) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\ttime = time.toString();\r\n\t\tlet format = time.split(':').length-1;\r\n\t\tlet [ hours, minutes, seconds ] = format > 1 ? time.split(':') : ('0:' + time).split(':');\r\n\t\ttime = parseInt(hours) * 3600 + parseInt(minutes) * 60 + parseInt(seconds);\r\n\t}\r\n\t\r\n\treturn parseInt(time);\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToHoursMinutesSeconds(time, withHours = false) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\treturn time;\r\n\t}\r\n\t\r\n\ttime = parseInt(time);\r\n\twithHours = withHours || (time > 3600);\r\n\t\r\n\tif (Number.isNaN(time)) {\r\n\t\treturn withHours ? '00:00:00' : '00:00';\r\n\t}\r\n\t\r\n\tlet hours = '0' + Math.floor(time/3600);\r\n\tlet minutes = '0' + Math.floor(time/60);\r\n\tlet seconds = '0' + (time % 60);\r\n\t\r\n\treturn withHours ? [ hours.substr(-2), minutes.substr(-2), seconds.substr(-2) ].join(':') : [ minutes.substr(-2), seconds.substr(-2) ].join(':');\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction secondsToDateTime(seconds, dateTimeFormat = 'dd. MMM yyyy, HH:mm') {\r\n\treturn format(new Date(seconds*1000), dateTimeFormat, { locale: locales[i18n.getLanguage()] });\r\n}\r\n\r\n\r\nexport default {\r\n\ttimeToSeconds,\r\n\ttimeToHoursMinutesSeconds,\r\n\tsecondsToDateTime\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListDivider: {\r\n\t\tmargin: '0 0 5px 0'\r\n\t},\r\n\tdefaultListIcon: props => ({\r\n\t\t...theme.components.icon,\r\n\t\t...props.styles\r\n\t}),\r\n\thorizontalListItem: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'center',\r\n\t\tpaddingRight: '16px',\r\n\t\twidth: '140px',\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\thorizontalListItemIcon: {\r\n\t\tminWidth: 'auto'\r\n\t},\r\n\thorizontalListItemAction: {\r\n\t\ttextAlign: 'center',\r\n\t\ttop: 0,\r\n\t\tright: 0,\r\n\t\tposition: 'static',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tverticalListItemAction: {\r\n\t\ttextAlign: 'right'\r\n\t},\r\n});\r\n\r\n\r\nconst ListItemIconElement = withStyles(styles)(props => {\r\n\tconst { customClassNames, children, classes } = props;\r\n\t\r\n\tlet classNames = Array.isArray(customClassNames) ? customClassNames : [customClassNames];\r\n\tclassNames = classNames.map(className => (classes[className] ? classes[className] : className));\r\n\t\r\n\treturn <span className={clsx(classNames)}>{children}</span>\r\n});\r\n\r\n\r\nclass StateListItem extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tListItemTextWidth: '100%'\r\n\t\t}\r\n\t\t\r\n\t\tthis.state[this.props.device.primaryStateKey] = this.props.device.getDeviceState() || {}\r\n\t\t\r\n\t\tif (this.props.device.secondaryStateKey) {\r\n\t\t\tthis.state[this.props.device.secondaryStateKey] = this.props.device.getDeviceState(this.props.device.secondaryStateKey) || {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.ListItemText = React.createRef();\r\n\t\tthis.ListItemSecondaryAction = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.ListItemTextWidth = Math.floor(this.ListItemText.current.offsetWidth);\r\n\t\tthis.resizeComponent();\r\n\t\t\r\n\t\t// get state changes\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate() {\r\n\t\tthis.resizeComponent();\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\tif (stateKey === this.props.device.primaryStateKey || stateKey === this.props.device.secondaryStateKey) {\r\n\t\t\tthis.setState({ [stateKey]: state });\r\n\t\t}\r\n\t}\r\n\t\r\n\tresizeComponent() {\r\n\t\tconst ListItemSecondaryActionWidth = Math.floor(this.ListItemSecondaryAction.current.offsetWidth*1.08);\r\n\t\t\r\n\t\tif (this.state.ListItemSecondaryActionWidth !== ListItemSecondaryActionWidth) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tListItemSecondaryActionWidth: ListItemSecondaryActionWidth,\r\n\t\t\t\tListItemTextWidth: this.ListItemTextWidth-ListItemSecondaryActionWidth + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, device, component, action } = this.props;\r\n\t\t\r\n\t\tconst state = this.state[device.primaryStateKey];\r\n\t\tconst options = device.get('options');\r\n\t\t\r\n\t\tconst icon = device.getIcon(device.primaryStateKey, state.val) || device.getIcon(device.primaryStateKey, state.value);\r\n\t\tconst primaryComponent = component && device.getComponent();\r\n\t\tconst primaryAction = device.getAction(device.primaryStateKey, device.options.primaryAction === false);\r\n\t\tconst secondaryAction = action && this.state[device.secondaryStateKey] ? device.getAction(device.secondaryStateKey) : null;\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{options.divider && options.divider !== 'after' && <ListItem divider className={classes.defaultListDivider} />}\r\n\t\r\n\t<ListItem\r\n\t\tclassName={clsx(this.props.openDialog && classes.finger, horizontal && classes.horizontalListItem)}\r\n\t\tbutton={this.props.openDialog !== null}\r\n\t\tonClick={this.props.openDialog && this.openDialog.bind(this)}\r\n\t\t>\r\n\t\t\r\n\t\t<ListItemIcon className={clsx(horizontal && classes.horizontalListItemIcon)}>\r\n\t\t{icon === null ? <React.Fragment /> :\r\n\t\t\t<ListItemIconElement customClassNames={['defaultListIcon','mdi mdi-' + icon]} styles={device.getStyle('icon', device.primaryStateKey, state.val)} />\r\n\t\t}\r\n\t\t</ListItemIcon>\r\n\t\t\r\n\t\t<ListItemText\r\n\t\t\tref={this.ListItemText}\r\n\t\t\tdisableTypography={primaryComponent !== false}\r\n\t\t\tprimary={primaryComponent || device.getOption('label')}\r\n\t\t\tsecondary={(options.subtitle !== null ? (options.subtitle || (state && state.timeChanged) || null) : null)}\r\n\t\t\tstyle={{ flex: 'initial', width: this.state.ListItemTextWidth }}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction\r\n\t\t\tref={this.ListItemSecondaryAction}\r\n\t\t\tclassName={ horizontal ? classes.horizontalListItemAction : classes.verticalListItemAction }\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{!secondaryAction ? primaryAction : [ primaryAction, <br key={'br_' + device.id} />, secondaryAction ]}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t\r\n\t{options.divider && options.divider === 'after' && <ListItem divider style={{margin: '5px 0'}} />}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateListItem);\r\n","import React from 'react'\r\nimport i18n from '../i18n'\r\n\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport StateListItem from './StateListItem'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListSectionDivider: {\r\n\t\tmargin: '5px 0 0 0'\r\n\t},\r\n\tdefaultListSectionDividerItem: {\r\n\t\tmargin: '6px 0 7px 0',\r\n\t\tpadding: '0 16px !important'\r\n\t},\r\n\tdefaultListSectionText: {\r\n\t\tmargin: 0,\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: '0 0 0 10px',\r\n\t\t}\r\n\t},\r\n\thorizontalList: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tflexWrap: 'wrap'\r\n\t}\r\n});\r\n\r\n\r\nconst ListDivider = withStyles(styles)(props => {\r\n\tconst { classes, getDevicesBySubgroup, subgroup, title, subgroupActions } = props;\r\n\t\r\n\tconst handleChangeOn = () => handleChange(true);\r\n\tconst handleChangeOff = () => handleChange(false);\r\n\tconst handleChange = targetStatus => {\r\n\t\t\r\n\t\tconst devices = getDevicesBySubgroup(subgroup);\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\tlet status = targetStatus;\r\n\t\t\tif (device.primaryStateKey === 'level') {\r\n\t\t\t\tstatus = status ? 100 : 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdevice.setDeviceState(null, status);\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t<ListItem divider className={classes.defaultListSectionDivider} />\r\n\t<ListItem className={classes.defaultListSectionDividerItem}>\r\n\t\t<ListItemText\r\n\t\t\tclassName={classes.defaultListSectionText}\r\n\t\t\tprimary={title}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction>\r\n\t\t{subgroupActions === null || subgroupActions === false ? null :\r\n\t\t\t<ButtonGroup color=\"primary\" size=\"small\">\r\n\t\t\t\t<Button onClick={handleChangeOn}>{i18n.t('on')}</Button>\r\n\t\t\t\t<Button onClick={handleChangeOff}>{i18n.t('off')}</Button>\r\n\t\t\t</ButtonGroup>\r\n\t\t}\r\n\t\t\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n</React.Fragment>\r\n\t\r\n\t);\r\n});\r\n\r\nclass StateList extends React.Component {\r\n\t\r\n\tgetDevicesBySubgroup(subgroup) {\r\n\t\t\r\n\t\tlet devices = [];\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\r\n\t\t\tif (subgroup === device.getOption('subgroup')) {\r\n\t\t\t\tdevices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn devices;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, devices, settings, component, action, ...props } = this.props;\r\n\t\tlet subgroup;\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense={true} className={horizontal && classes.horizontalList}>\r\n\t{devices.map((device, i) => {\r\n\t\t\r\n\t\tconst listSection = subgroup !== null && device.options.subgroup !== null && device.options.subgroup !== subgroup && <ListDivider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={'ListDivider-' + device.get('id')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetDevicesBySubgroup={this.getDevicesBySubgroup.bind(this)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroup={device.getOption('subgroup')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={device.options.subgroup}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroupActions={settings.subgroupActions || device.options.subgroupActions}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tconst listItem = <StateListItem\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tkey={'StateListItem-' + device.get('id')}\r\n\t\t\t\t\t\t\thorizontal={horizontal}\r\n\t\t\t\t\t\t\tdevice={device}\r\n\t\t\t\t\t\t\tcomponent={component || false}\r\n\t\t\t\t\t\t\taction={action || true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tsubgroup = device.getOption('subgroup');\r\n\t\treturn [ listSection, listItem ];\r\n\t})}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateList);\r\n","import i18n from '../../i18n'\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./door.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'door-open',\r\n\t\t\t\tfalse: 'door-closed'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('door#open#true'),\r\n\t\t\t\tfalse: i18n.t('door#open#false')\r\n\t\t\t},\r\n\t\t},\r\n\t\tlock: {\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport i18n from '../../i18n'\r\nimport defaults from '../defaults'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./heating.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction HeatingSetTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={0} max={35} {...props} />\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\ttemperature: {\r\n\t\t\tvalue: val => val.toFixed(1),\r\n\t\t\tunit: ' C'\r\n\t\t},\r\n\t\tsetTemperature: {\r\n\t\t\tunit: ' C',\r\n\t\t\ticon: 'thermometer-chevron-up'\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tboost: {\r\n\t\t\ticon: 'radiator'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tsetTemperature: HeatingSetTemperatureComponent\r\n\t},\r\n\tactions: {\r\n\t\tboost: defaults.actions.PowerAction\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./location.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpresence: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'map-marker-radius',\r\n\t\t\t\tfalse: 'map-marker-remove-outline'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('location#presence#true'),\r\n\t\t\t\tfalse: i18n.t('location#presence#false'),\r\n\t\t\t},\r\n\t\t},\r\n\t\tusers: {\r\n\t\t\ticon: {\r\n\t\t\t\t'': 'account-group-outline',\r\n\t\t\t\t'default': 'account-group'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'': i18n.t('location#users#empty')\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./user.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tlocation: {\r\n\t\t\ticon: 'account'\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./window.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'window-open-variant',\r\n\t\t\t\tfalse: 'window-closed-variant'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('window#open#true'),\r\n\t\t\t\tfalse: i18n.t('window#open#false')\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","/**\r\n *\r\n *\r\n */\r\nfunction HsvToRgb(h, s = 1, v = 1) {\r\n\tif (Array.isArray(h)) {\r\n\t\tv = h[2];\r\n\t\ts = h[1];\r\n\t\th = h[0];\r\n\t}\r\n\telse if (typeof h === 'string' && h.indexOf(',')) {\r\n\t\t[h, s, v] = h.split(',');\r\n\t}\r\n\t\r\n\tif (h > 1) {\r\n\t\th = h/360;\r\n\t}\r\n\t\r\n\tlet r, g, b, i, f, p, q, t;\r\n\t\r\n\ti = Math.floor(h * 6);\r\n\tf = h * 6 - i;\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - f * s);\r\n\tt = v * (1 - (1 - f) * s);\r\n\t\r\n\tswitch (i % 6) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault: // for webpack\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn [\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t];\r\n}\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction RgbToHex(r, g, b) {\r\n\tif (Array.isArray(r)) {\r\n\t\tb = r[2];\r\n\t\tg = r[1];\r\n\t\tr = r[0];\r\n\t}\r\n\telse if (typeof r === 'string' && r.indexOf(',')) {\r\n\t\t[r, g, b] = r.split(',');\r\n\t}\r\n\t\r\n\tr = parseInt(r).toString(16);\r\n\tg = parseInt(g).toString(16);\r\n\tb = parseInt(b).toString(16);\r\n\t\r\n\tif (r.length === 1) r = '0' + r;\r\n\tif (g.length === 1) g = '0' + g;\r\n\tif (b.length === 1) b = '0' + b;\r\n\t\r\n\treturn \"#\" + r + g + b;\r\n}\r\n\r\n\r\nexport default {\r\n\tHsvToRgb,\r\n\tRgbToHex\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { HuePicker, SketchPicker as ColorPicker } from 'react-color'\r\n\r\nimport i18n from '../../i18n'\r\nimport helpers from '../../helpers/colorConverter'\r\nimport defaults from '../defaults'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./light.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction LightLevelAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked ? 100 : 0).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal > 0);\r\n\tuseEffect(() => setChecked(stateVal > 0), [stateVal]);\r\n\t\r\n\t// only show percentage if device has a switch itself\r\n\tif (device.parent && device.parent.states.power) {\r\n\t\treturn <defaults.actions.Action {...props} stateVal={checked} onChange={onChange} />;\r\n\t}\r\n\t\r\n\treturn <defaults.actions.PowerAction {...props} stateVal={checked} onChange={onChange} />\r\n}\r\n\r\nfunction LightColorAction(props) {\r\n\tconst { stateKey, stateVal } = props;\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(stateVal);\r\n\tuseEffect(() => setColorSpace(stateVal), [stateVal]);\r\n\t\r\n\tlet colors, labels = {};\r\n\tif (stateKey === 'rgb' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Red: colors[0], Green: colors[1], Blue: colors[2] };\r\n\t\t\r\n\t}\r\n\telse if (stateKey === 'hsv' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Hue: colors[0], Saturation: colors[1], Brightness: colors[2] };\r\n\t}\r\n\t\r\n\tconst Label = defaults.components.Label;\r\n\tlet label = [];\r\n\tfor (let key in labels) {\r\n\t\tlabel.push(<Label key={key} label={key + ' ' + labels[key]} br={true} />);\r\n\t}\r\n\t\r\n\treturn label;\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction LightColorTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={2000} max={6500} step={10} {...props} />\r\n\t);\r\n}\r\n\r\nfunction LightHueComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tsetHue(Math.round(color.hsl.h));\r\n\t\tdevice.setDeviceState(stateKey, Math.round(color.hsl.h)).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [hue, setHue] = useState(stateVal);\r\n\tuseEffect(() => setHue(stateVal), [stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\tconst color = helpers.RgbToHex(helpers.HsvToRgb(hue));\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<HuePicker\r\n\t\tcolor={color}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\nfunction LightColorComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tcolor = color[stateKey];\r\n\t\t\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tcolor = [color.r, color.g, color.b].join(',');\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tcolor = [color.h, color.s, color.v].join(',');\r\n\t\t}\r\n\t\t\r\n\t\tdevice.setDeviceState(stateKey, color).catch(err => console.error(err));\r\n\t};\r\n\t\r\n\tlet initialColor = stateVal || '#ffffff';\r\n\t\r\n\t// RGB\r\n\tif (stateKey === 'rgb') {\r\n\t\tinitialColor = helpers.RgbToHex(initialColor);\r\n\t}\r\n\t// HSV\r\n\telse if (stateKey === 'hsv') {\r\n\t\tinitialColor = helpers.RgbToHex(helpers.HsvToRgb(initialColor));\r\n\t}\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(initialColor);\r\n\tuseEffect(() => {\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(stateVal));\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(helpers.HsvToRgb(stateVal)));\r\n\t\t}\r\n\t\t// HEX\r\n\t\telse if (stateKey === 'hex') {\r\n\t\t\tsetColorSpace(stateVal);\r\n\t\t}\r\n\t}, [stateKey, stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<ColorPicker\r\n\t\tcolor={colorSpace}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\nconst color = {\r\n\ticon: {\r\n\t\t'default': 'palette',\r\n\t},\r\n\tunit: ' '\r\n}\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tpower: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'lightbulb-on',\r\n\t\t\t\t'false': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tvalue: val => val > 0 && val <= 1 ? val * 100 : val,\r\n\t\t\tunit: val => val > 0 ? ' %' : null,\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'lightbulb-on',\r\n\t\t\t\t'0': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'0': i18n.t('light#level#off')\r\n\t\t\t},\r\n\t\t},\r\n\t\tcolorTemperature: {\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'thermometer',\r\n\t\t\t},\r\n\t\t\tunit: ' K'\r\n\t\t},\r\n\t\thue: color,\r\n\t\trgb: color,\r\n\t\thsv: color,\r\n\t\thex: color\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel: defaults.components.LevelComponent,\r\n\t\tcolorTemperature: LightColorTemperatureComponent,\r\n\t\trgb: LightColorComponent,\r\n\t\thsv: LightColorComponent,\r\n\t\thex: LightColorComponent,\r\n\t\thue: LightHueComponent\r\n\t},\r\n\tactions: {\r\n\t\tpower: defaults.actions.PowerAction,\r\n\t\tlevel: LightLevelAction,\r\n\t\trgb: LightColorAction,\r\n\t\thsv: LightColorAction,\r\n\t\thex: LightColorAction\r\n\t},\r\n\tstyles: {\r\n\t\t_any: {\r\n\t\t\t//icon: {},\r\n\t\t\tstate: {\r\n\t\t\t\t'0': {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\nimport color from 'color'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport StopIcon from '@material-ui/icons/Stop';\r\n\r\nimport i18n from '../../i18n'\r\nimport defaults from '../defaults'\r\nimport getActivityType from './blind-manufacturers'\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tvalue: props => ({\r\n\t\tfloat: 'left',\r\n\t\tlineHeight: '32px',\r\n\t\tmarginRight: '10px'\r\n\t}),\r\n\tborderLeftTransparent: {\r\n\t\tborderLeftColor: 'transparent !important'\r\n\t},\r\n\tborderLeftColor: {\r\n\t\tborderLeftColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightTransparent: {\r\n\t\tborderRightColor: 'transparent !important'\r\n\t},\r\n\tborderRightColor: {\r\n\t\tborderRightColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightColorSecondary: {\r\n\t\tborderRightColor: color(theme.palette.secondary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./blind.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction BlindLevelAction(props) {\r\n\tconst { device, state, stateKey } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onGoUp = () => {\r\n\t\tsetLevel(100);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 100).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst onGoDown = () => {\r\n\t\tsetLevel(0);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 0).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst onStop = () => {\r\n\t\tsetActivity(false);\r\n\t\tdevice.setDeviceState('activity', true).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t// level\r\n\tconst [level, setLevel] = useState(state.value);\r\n\tuseEffect(() => setLevel(state.value), [state]);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (sKey, s, d) => {\r\n\t\t\r\n\t\tif (sKey === 'activity') {\r\n\t\t\tsetActivity(s.val);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// activity\r\n\tconst [activity, setActivity] = useState(false);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (device.states.activity && device.states.activity.state) {\r\n\t\t\tdevice.states.activity.state = typeof device.states.activity.state === 'string' ? { 'node': device.states.activity.state } : device.states.activity.state;\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('activity', true).catch(err => console.error(err));\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange)\r\n\t\t}\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => device.unlisten(stateChange);\r\n\t\t\r\n\t}, [device, state]);\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t<div className={classes.value}>\r\n\t\t{level + state.unit}\r\n\t</div>\r\n\t\r\n\t<ButtonGroup size=\"small\">\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderRightColor : classes.borderRightTransparent))} onClick={onGoUp}><ExpandLessIcon /></Button>\r\n\t\t{activity !== null && <Button color=\"secondary\" className={clsx(!activity ? [ classes.borderLeftTransparent, classes.borderRightTransparent ] : classes.borderRightColorSecondary)} onClick={onStop} disabled={!activity}><StopIcon /></Button>}\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderLeftColor : classes.borderLeftTransparent))} onClick={onGoDown}><ExpandMoreIcon /></Button>\r\n\t</ButtonGroup>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tlevel: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tlevel2: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tactivity: {\r\n\t\t\tval: (val, stateKey, device) => getActivityType(device.options.manufacturer, val),\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'pan-vertical',\r\n\t\t\t\tfalse: 'dots-vertical',\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('blind#activity#true'),\r\n\t\t\t\tfalse: i18n.t('blind#activity#false'),\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel2: defaults.components.LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tlevel: BlindLevelAction\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","export default function getActivityType(manufacturer, val) {\r\n\t\r\n\t// HomeMatic\r\n\tif (manufacturer === 'HomeMatic') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 1: // UP\r\n\t\t\tcase 2: // DOWN\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 3: // STABLE\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Shelly\r\n\telse if (manufacturer === 'Shelly') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 'open': // MOVING\r\n\t\t\tcase 'close': // MOVING\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'stop': // MOVING\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn val;\r\n}","export { default } from './blind'\r\n","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Aktivitt\",\r\n\t\"blind#level\": \"Behanghhe\",\r\n\t\"blind#level2\": \"Lamellenposition\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"in Bewegung\",\r\n\t\"blind#activity#false\": \"keine\",\r\n}","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Activity\",\r\n\t\"blind#level\": \"Level\",\r\n\t\"blind#level2\": \"Lamella\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"moving\",\r\n\t\"blind#activity#false\": \"none\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Klingel\",\r\n\t\"door#lock\": \"Schlo\",\r\n\t\"door#open\": \"Tr\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"offen\",\r\n\t\"door#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Bell\",\r\n\t\"door#lock\": \"Lock\",\r\n\t\"door#open\": \"Door\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"open\",\r\n\t\"door#open#false\": \"closed\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Luftfeuchtigkeit\",\r\n\t\"heating#setTemperature\": \"eingestellte Temperatur\",\r\n\t\"heating#temperature\": \"Temperatur\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Humidity\",\r\n\t\"heating#setTemperature\": \"Set Temperature\",\r\n\t\"heating#temperature\": \"Temperature\",\r\n}","import i18n from './i18n'\r\n\r\n/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Settings {\r\n\r\n\t/*\r\n\t * holds the settings\r\n\t */\r\n\tstatic settings = {};\r\n\r\n\t/**\r\n\t * Set settings.\r\n\t *\r\n\t * @param\t{Object}\tsettings\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setSettings(settings) {\r\n\t\tif (settings) {\r\n\t\t\tSettings.settings = { ...Settings.settings, ...settings || {} };\r\n\t\t\tconsole.log('Set settings', Settings.settings);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a setting.\r\n\t *\r\n\t * @param\t{String}\tsettings\r\n\t * @return\t{Mixed|null}\r\n\t */\r\n\tstatic getSetting(setting) {\r\n\t\treturn Settings.settings[setting] || '';\r\n\t}\r\n\t\r\n\t/**\r\n\t * Apply settings.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic applySettings() {\r\n\t\t\r\n\t\t// language\r\n\t\tif (Settings.settings.language) {\r\n\t\t\ti18n.setLanguage(Settings.settings.language);\r\n\t\t\ti18n.loadTranslation(Settings.settings.language);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ti18n.loadTranslation();\r\n\t\t}\r\n\t\t\r\n\t\t// page title\r\n\t\tif (Settings.settings.pageTitle) {\r\n\t\t\tdocument.title = Settings.settings.pageTitle;\r\n\t\t}\r\n\t\t\r\n\t\t// favicon\r\n\t\tif (Settings.settings.pageFavicon && Settings.settings.pageFavicon.substr(0, 5) === 'data:') {\r\n\t\t\tdocument.getElementById('favicon').href = Settings.settings.pageFavicon;\r\n\t\t}\r\n\t\t\r\n\t\t// translations\r\n\t\tif (Settings.settings.translations) {\r\n\t\t\t\r\n\t\t\tlet translations = Settings.settings.translations;\r\n\t\t\tfor (let language in translations) {\r\n\t\t\t\ti18n.setTranslation(language, translations[language]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Farbtemperatur\",\r\n\t\"light#hex\": \"Farbe (Hex)\",\r\n\t\"light#hsv\": \"Farbraum Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Farbe (Hue)\",\r\n\t\"light#level\": \"Helligkeit\",\r\n\t\"light#power\": \"Licht\",\r\n\t\"light#rgb\": \"Farbraum Rot-Grn-Blau (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"ausgeschaltet\",\r\n}","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Color Temperature\",\r\n\t\"light#hex\": \"Color (Hex)\",\r\n\t\"light#hsv\": \"Colorspace Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Color (Hue)\",\r\n\t\"light#level\": \"Brightness\",\r\n\t\"light#power\": \"Power\",\r\n\t\"light#rgb\": \"Colorspace Red-Green-Blue (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"off\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Anwesenheit\",\r\n\t\"location#users\": \"Benutzer\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"anwesend\",\r\n\t\"location#presence#false\": \"abwesend\",\r\n\t\"location#users#empty\": \"niemand anwesend\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Presence\",\r\n\t\"location#users\": \"Users\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"present\",\r\n\t\"location#presence#false\": \"absent\",\r\n\t\"location#users#empty\": \"nobody present\",\r\n}","export default {\r\n\t\"user#location\": \"Standort\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t\"user#location\": \"Location\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Fenster\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"offen\",\r\n\t\"window#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Window\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"open\",\r\n\t\"window#open#false\": \"closed\",\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { format } from 'date-fns'\r\n\r\nimport Connection from '../Connection'\r\nimport i18n, { locales } from '../i18n'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport List from '@material-ui/core/List'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport StarIcon from '@material-ui/icons/Star';\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tnoUpdates: {\r\n\t\tfontStyle: 'italic',\r\n\t\ttextAlign: 'right',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.54)'\r\n\t},\r\n\tUpdateAvailable: {\r\n\t\tcolor: '#CCAA00',\r\n\t},\r\n\tUpdatesListItem: {\r\n\t\tbackgroundColor: '#ffd700',\r\n\t\tcolor: '#fff',\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tUpdatesIndicator: {\r\n\t\tright: theme.spacing(3.75),\r\n\t\tbackgroundColor: '#CCAA00',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tcolor: '#fff',\r\n\t\ttextAlign: 'center',\r\n\t\tfontSize: '1rem !important'\r\n\t},\r\n\tStatusIndicator: {\r\n\t\tfontSize: '1.4rem'\r\n\t},\r\n\tloading: {\r\n\t\ttextAlign: 'center',\r\n\t\tmarginTop: '5px'\r\n\t},\r\n\tsmall: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t},\r\n\talive: {\r\n\t\tcolor: '#86d686'\r\n\t},\r\n\tnotAlive: {\r\n\t\tcolor: '#f7e43b'\r\n\t},\r\n\tdisabled: {\r\n\t\tcolor: '#bababa'\r\n\t}\r\n});\r\n\r\n\r\nclass AdapterStatus extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tadapterInformation: [],\r\n\t\t\tadapterAliveStatus: {},\r\n\t\t\tnewUpdates: false,\r\n\t\t\tupdatesJson: '',\r\n\t\t\tlastUpdateCheck: ''\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\tthis.list = this.props.settings.list ? (Array.isArray(this.props.settings.list) ? this.props.settings.list : this.props.settings.list.split(',')) : null;\r\n\t\tthis.blacklist = this.props.settings.blacklist ? (Array.isArray(this.props.settings.blacklist) ? this.props.settings.blacklist : this.props.settings.blacklist.split(',')) : null;\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// retrieve updates\r\n\t\tif (this.props.settings.updates !== false) {\r\n\t\t\t\r\n\t\t\tlet updateStates = ['admin.0.info.newUpdates', 'admin.0.info.lastUpdateCheck', 'admin.0.info.updatesJson'];\r\n\t\t\tthis.socket.getStates(updateStates, (err, states) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewUpdates: states['admin.0.info.newUpdates'].val,\r\n\t\t\t\t\tlastUpdateCheck: states['admin.0.info.lastUpdateCheck'].val,\r\n\t\t\t\t\tupdatesJson: states['admin.0.info.updatesJson'].val\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// get state updates\r\n\t\t\t\tthis.socket.subscribeStates(updateStates, (id, update) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tid = id.substr(id.lastIndexOf('.')+1);\r\n\t\t\t\t\tif (this.state[id] !== update.val) {\r\n\t\t\t\t\t\tthis.setState({ [id]: update.val });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get adapter instances\r\n\t\tthis.socket.getAdapterInstances((err, instances) => {\r\n\t\t\t\r\n\t\t\tlet states = [];\r\n\t\t\tif (instances && instances.rows) {\r\n\t\t\t\tlet adapters = [];\r\n\t\t\t\t\r\n\t\t\t\t// states per instance to retrieve\r\n\t\t\t\tinstances.rows.forEach((instance, i) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get alive / connected states\r\n\t\t\t\t\tif ((!this.list || (this.list && this.list.indexOf(instance.value.common.name) > -1)) && (!this.blacklist || (this.blacklist && this.blacklist.indexOf(instance.value.common.name) === -1))) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tadapters.push(instance);\r\n\t\t\t\t\t\tstates = states.concat([\r\n\t\t\t\t\t\t\tinstance.id + '.alive',\r\n\t\t\t\t\t\t\tinstance.id + '.connected',\r\n\t\t\t\t\t\t\tinstance.id.replace('system.adapter.', '') + '.info.connection'\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// sort instances\r\n\t\t\t\tthis.setState({ adapterInformation: adapters.sort((item1, item2) => {\r\n\t\t\t\t\t\tif (item1.id > item2.id) return 1;\r\n\t\t\t\t\t\telse if (item2.id > item1.id) return -1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// retrieve intial states\r\n\t\t\t\tthis.socket.getStates(states, (err, adapterAliveStatus) => {\r\n\t\t\t\t\tthis.setState({ adapterAliveStatus });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get state updates\r\n\t\t\t\t\tthis.socket.subscribeStates(states, (id, aliveStatus) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (aliveStatus && (!this.state.adapterAliveStatus[id] || (aliveStatus.val !== this.state.adapterAliveStatus[id].val))) {\r\n\t\t\t\t\t\t\tthis.setState(prevState => ({ adapterAliveStatus: { ...prevState.adapterAliveStatus, [id]: aliveStatus } }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// adapter updates\r\n\t\tconst updateList = (this.state.updatesJson && JSON.parse(this.state.updatesJson)) || {};\r\n\t\tconst updates = Object.keys(updateList).length\r\n\t\t\r\n\t\t// adapter instances\r\n\t\tlet adapterList = <ListItem key='loading' className={classes.loading}><CircularProgress size={20} /></ListItem>\r\n\t\t\r\n\t\tif (this.state.adapterInformation.length > 0) {\r\n\t\t\t\r\n\t\t\tadapterList = this.state.adapterInformation.map(adapter => {\r\n\t\t\t\tadapter.update = updateList[adapter.value.common.name] || false;\r\n\t\t\t\t\r\n\t\t\t\tconst enabled = adapter.value.common.enabled;\r\n\t\t\t\tconst alive = (this.state.adapterAliveStatus[adapter.id + '.alive'] && this.state.adapterAliveStatus[adapter.id + '.alive'].val) || false;\r\n\t\t\t\tconst connected = (this.state.adapterAliveStatus[adapter.id + '.connected'] && this.state.adapterAliveStatus[adapter.id + '.connected'].val) || false;\r\n\t\t\t\tconst connection = this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'] ? this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'].val : true;\r\n\t\t\t\t\r\n\t\t\t\tconst tooltip = i18n.t('Adapter') + ' ' + (enabled ? (alive && connected && connection ? i18n.t('alive') : i18n.t('not alive')) : i18n.t('disabled'));\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\r\n\t\t\t\t\t<ListItem key={'adapter-' + adapter.id}>\r\n\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t<Avatar alt={adapter.value.common.name} src={adapter.value.common.extIcon} className={classes.small} />\r\n\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={adapter.value.common.title}\r\n\t\t\t\t\t\t\tsecondary={[\r\n\t\t\t\t\t\t\t\t'v' + adapter.value.common.version,\r\n\t\t\t\t\t\t\t\t(adapter.update && adapter.value.common.version !== adapter.update.availableVersion && (<span key={'updates-' + adapter.id}>, <span className={classes.UpdateAvailable}>{i18n.t('Update available') + ' v' + adapter.update.availableVersion}</span></span>)),\r\n\t\t\t\t\t\t\t\t(adapter.value.common.runAsCompactMode && ', ' + i18n.t('Compact Mode') + ' ' + i18n.t('on') + ' (' + i18n.t('Group') + ' ' + adapter.value.common.compactGroup + ')')\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, enabled ? (alive && connected && connection ? classes.alive : classes.notAlive) : classes.disabled)}>\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<span className={enabled ? (alive && connected && connection ? 'mdi mdi-check-circle' : 'mdi mdi-alert') : 'mdi mdi-close'}></span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense>\r\n\t{this.state.newUpdates === false ? (this.state.lastUpdateCheck && \r\n\t<ListItem key=\"updates\" classes={{ root: classes.noUpdates }}>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('last update') + ': ' + format(new Date(this.state.lastUpdateCheck), 'dd.MM.yyyy HH:mm:ss', { locale: locales[i18n.getLanguage()] })}\r\n\t\t\t/>\r\n\t\t\r\n\t</ListItem>)\r\n\t:\r\n\t<ListItem key=\"updates\" classes={{ container: classes.UpdatesListItem }}>\r\n\t\t<ListItemAvatar>\r\n\t\t\t<StarIcon />\r\n\t\t</ListItemAvatar>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('Updates available') + '!'}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, classes.UpdatesIndicator)}>\r\n\t\t\t{updates}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t}\r\n\t\r\n\t{adapterList}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light'\r\n}\r\n\r\nexport default withStyles(styles)(AdapterStatus);\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { Line } from 'react-chartjs-2'\r\n// eslint-disable-next-line\r\nimport chartjs_colorschemes from 'chartjs-plugin-colorschemes'\r\n// eslint-disable-next-line\r\nimport chartjs_zoom from 'chartjs-plugin-zoom'\r\n\r\nimport DateFnsUtils from '@date-io/date-fns'\r\n\r\nimport i18n, { locales } from '../i18n'\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport Alert from '@material-ui/lab/Alert'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { MuiPickersUtilsProvider, DateTimePicker } from '@material-ui/pickers'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport Select from '@material-ui/core/Select'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/Event'\r\nimport CalendarTodayIcon from '@material-ui/icons/EventAvailable'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\nimport FastRewindIcon from '@material-ui/icons/FastRewind'\r\n//import DisablePan from '@material-ui/icons/SelectAll'\r\n//import DisableZoom from '@material-ui/icons/LocationDisabled'\r\nimport ResetZoom from '@material-ui/icons/ZoomOutMap'\r\nimport LiveUpdates from '@material-ui/icons/Update'\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tposition: 'absolute',\r\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\terrorMessage: {\r\n\t\tmarginBottom: 5,\r\n\t\tmarginRight: 15,\r\n\t\twidth: '100%'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbarButtons: {\r\n\t\tdisplay: 'initial',\r\n\t\twhiteSpace: 'nowrap'\r\n\t},\r\n\toptions: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\tdatePicker: {\r\n\t\tpadding: '2px 4px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tmargin: 2\r\n\t},\r\n\tinput: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\tselect: {\r\n\t\twidth: 100\r\n\t},\r\n\ticon: {\r\n\t\tmargin: 10,\r\n\t},\r\n\ticonButton: {\r\n\t\tpadding: 10,\r\n\t},\r\n\tdivider: {\r\n\t\tmargin: '15px 0',\r\n\t},\r\n\tdividerVertical: {\r\n\t\theight: 28,\r\n\t\tmargin: 4,\r\n\t},\r\n\tbutton: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff !important',\r\n\t\tmargin: '4px'\r\n\t},\r\n\tbuttonDisabled: {\r\n\t\tbackgroundColor: '#eee',\r\n\t\tmargin: '4px'\r\n\t}\r\n});\r\n\r\n\r\nclass Chart extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t// chart settings\r\n\t\tthis.chartFilter = this.props.settings.chartFilter || {};\r\n\t\tthis.chartConfig = this.props.settings.chartConfig || {};\r\n\t\t\r\n\t\tthis.chartConfig.yAxes = this.chartConfig.yAxes || [];\r\n\t\tthis.chartConfig.yAxes.unshift({\r\n\t\t\tid: 'left',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tticks: {\r\n\t\t\t\tcallback: value => (this.chartConfig.yLeftAxisUnitBefore || '') + Number.parseFloat(value).toFixed(1) + (this.chartConfig.yLeftAxisUnitAfter || '')\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// states\r\n\t\tthis.state = {\r\n\t\t\tloading: true,\r\n\t\t\terrors: [],\r\n\t\t\t\r\n\t\t\tdatePicker: false,\r\n\t\t\tselectedTimeRangeValue: (this.chartFilter && this.chartFilter.selectedTimeRangeValue) || 1,\r\n\t\t\tselectedTimeRangeUnit: (this.chartFilter && this.chartFilter.selectedTimeRangeUnit) || 'days',\r\n\t\t\tselectedDateTime: (this.chartFilter && this.chartFilter.selectedDateTime && new Date(this.chartFilter.selectedDateTime)) || new Date(),\r\n\t\t\tdateNow: this.chartFilter && this.chartFilter.selectedDateTime ? false : true,\r\n\t\t\t\r\n\t\t\tchartLabels: [],\r\n\t\t\tchartData: {\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchartPan: true,\r\n\t\t\tchartZoom: true\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.timer = null;\r\n\t\tthis.timeRangeRef = React.createRef();\r\n\t\t\r\n\t\t// chart instance options\r\n\t\tthis.chartRef = React.createRef();\r\n\t\tthis.chartUpdates = {};\r\n\t\tthis.chartOptions = {\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tspanGaps: true,\r\n\t\t\tlegend: {\r\n\t\t\t\tonClick: this.legendClickHandler.bind(this)\r\n\t\t\t},\r\n\t\t\ttooltips: {\r\n\t\t\t\tcallbacks: {\r\n\t\t\t\t\tlabel: (item, data) => data.datasets[item.datasetIndex].label + ': ' + item.value + data.datasets[item.datasetIndex].unit\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tscales: {\r\n\t\t\t\tyAxes: this.chartConfig.yAxes\r\n\t\t\t},\r\n\r\n\t\t\tplugins: {\r\n\t\t\t\tcolorschemes: {\r\n\t\t\t\t\tscheme: 'brewer.SetOne9'\r\n\t\t\t\t},\r\n\t\t\t\tzoom: {\r\n\t\t\t\t\t// Container for pan options\r\n\t\t\t\t\tpan: {\r\n\t\t\t\t\t\t// Boolean to enable panning\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Panning directions\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Container for zoom options\r\n\t\t\t\t\tzoom: {\r\n\t\t\t\t\t\t// Boolean to enable zooming\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Zooming directions.\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// request initial history data\r\n\t\tlet options = { ...this.getTimeRange(), axis: this.getAxis() };\r\n\t\t\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.label = device.name + ' (' + i18n.t(device.primaryStateKey) + ')';\r\n\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// add listeners for newly requested data\r\n\t\t\tdevice.listen('historyChange', (options) => this.historyChange);\r\n\t\t\t\r\n\t\t\t// add listeners for data updates\r\n\t\t\tif (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow) {\r\n\t\t\t\tdevice.listen((options) => this.stateChange);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.unlisten(this.stateChange);\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.selectedTimeRangeValue &&\r\n\t\t\t\t(prevState.selectedDateTime !== this.state.selectedDateTime || prevState.selectedTimeRangeValue !== this.state.selectedTimeRangeValue || prevState.selectedTimeRangeUnit !== this.state.selectedTimeRangeUnit)\r\n\t\t\t) {\r\n\t\t\t\r\n\t\t\t// request updated history data\r\n\t\t\tthis.setState({ loading: true, errors: [] });\r\n\t\t\t\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tconst options = this.getTimeRange();\r\n\t\t\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\t\r\n\thistoryChange = options => (stateKey, history, state, device) => {\r\n\t\tthis.addChartGraph(device, history, { ...options, axis: this.getAxis(options.start, options.end) } );\r\n\t\tthis.setState({ loading: false });\r\n\t}\r\n\t\r\n\tstateChange = options => (stateKey, val, state, device) => this.updateChartGraph(device, val, { ...options, axis: this.getAxis(options.end, new Date()) } )\r\n\t\r\n\tgetTimeRange() {\r\n\t\t\r\n\t\tconst end = this.state.selectedDateTime.getTime();\r\n\t\tlet timeRange = this.state.selectedTimeRangeValue;\r\n\t\tlet step = 1;\r\n\t\tlet axisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\r\n\t\tswitch(this.state.selectedTimeRangeUnit) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'seconds':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'minutes':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\ttimeRange = timeRange*60;\r\n\t\t\t\t//step = step;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'hours':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60;\r\n\t\t\t\tstep = step*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'days':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60*24;\r\n\t\t\t\tstep = step*60*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'months':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*31;\r\n\t\t\t\tstep = step*60*60*24;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'years':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*365;\r\n\t\t\t\tstep = step*60*60*24*31;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\t'axisTimeFormat': axisTimeFormat,\r\n\t\t\t'start': end-timeRange*1000,\r\n\t\t\t'end': end,\r\n\t\t\t'timeRange': timeRange*1000,\r\n\t\t\t'step': step*1000\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetAxis(start, end) {\r\n\t\t\r\n\t\tconst { step, axisTimeFormat } = this.getTimeRange();\r\n\t\tlet axis = {};\r\n\t\t\r\n\t\tfor (let time = start; time <= end; time += step) {\r\n\t\t\taxis[time] = helpers.secondsToDateTime(time/1000, axisTimeFormat);\r\n\t\t}\r\n\t\t\r\n\t\treturn axis;\r\n\t}\r\n\t\r\n\tgroupChartData(chartData, axis) {\r\n\t\t\r\n\t\tlet prevMarker;\r\n\t\tlet data = [];\r\n\t\t\r\n\t\tlet markers = Object.keys(axis);\r\n\t\tmarkers.forEach((marker, i) => {\r\n\t\t\tprevMarker = markers[(i-1 > 0 ? i-1 : 0)];\r\n\t\t\t\r\n\t\t\tfor (let index in chartData) {\r\n\t\t\t\tlet entry = chartData[index];\r\n\t\t\t\tentry.val = parseFloat(entry.val);\r\n\t\t\t\t\r\n\t\t\t\t// \r\n\t\t\t\tif (!entry.ts || entry.val === null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// before range, continue\r\n\t\t\t\tif (prevMarker > entry.ts) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// in range\r\n\t\t\t\telse if (prevMarker < entry.ts && entry.ts <= marker) {\r\n\t\t\t\t\tdata[i] = !data[i] ? [ entry.val ] : [ ...data[i], entry.val ]; // parseFloat((data[i] ? ((data[i]+entry.val)/2) : entry.val).toFixed(2));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// beyond range, so next marker\r\n\t\t\t\telse if (entry.ts > marker) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif (!data[i]) {\r\n\t\t\t\t// \r\n\t\t\t}\r\n\t\t\telse if (data[i].length === 1) {\r\n\t\t\t\tdata[i] = data[i][0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdata[i] = data[i].reduce((a,b) => a + b, 0) / data[i].length;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tupdateChartGraph(device, value, options) {\r\n\t\t\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.chartUpdates[chartIndex] = this.chartUpdates[chartIndex] || [];\r\n\t\tthis.chartUpdates[chartIndex].push({\r\n\t\t\t'ts': value.ts,\r\n\t\t\t'val': value.val\r\n\t\t});\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(this.chartUpdates[chartIndex], options.axis);\r\n\t\t\r\n\t\t//console.log(value);\r\n\t\t//console.log(options, options.axis, data);\r\n\t\t\r\n\t\t// update chart\r\n\t\tthis.chartRef.current.chartInstance.data.labels = [ ...this.state.chartData.labels, ...Object.values(options.axis) ];\r\n\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = [ ...this.state.chartData.datasets[chartIndex].data, ...data ];\r\n\t\tthis.chartRef.current.chartInstance.update();\r\n\t}\r\n\t\r\n\taddChartGraph(device, history, options) {\r\n\t\t\r\n\t\t// only add chart if data is given\r\n\t\tif (!history || !history.length) {\r\n\t\t\tlet error = i18n.t('No history data given for %s').replace('%s', device.label) + '!';\r\n\t\t\tthis.setState(prevStates => ({ errors: [ ...prevStates.errors, error ] }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(history, options.axis);\r\n\t\t\r\n\t\t// update chart\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex > -1) {\r\n\t\t\tthis.chartRef.current.chartInstance.data.labels = Object.values(options.axis);\r\n\t\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = data;\r\n\t\t\tthis.chartRef.current.chartInstance.update();\r\n\t\t}\r\n\t\t\r\n\t\t// index chart\r\n\t\telse {\r\n\t\t\tthis.setState(prevStates => ({ chartLabels: [ ...prevStates.chartLabels, device.label ] }));\r\n\t\t\t\r\n\t\t\t// chart dataset\r\n\t\t\tlet dataSet = {\r\n\t\t\t\tlabel: device.label,\r\n\t\t\t\tunit: device.states[device.primaryStateKey].state.value.unit || '',\r\n\t\t\t\tfill: false,\r\n\t\t\t\t...device.options.graphConfig || {},\r\n\t\t\t\tdata: data\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// add data to chart\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\taxisTimeFormat: options.axisTimeFormat,\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tlabels: Object.values(options.axis),\r\n\t\t\t\t\tdatasets: [ ...prevStates.chartData.datasets, dataSet ],\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\tlegendClickHandler(e, legendItem) {\r\n\t\t\r\n\t\tlet index = legendItem.datasetIndex;\r\n\t\tlet ci = this.chartRef.current.chartInstance;\r\n\t\tlet meta = ci.getDatasetMeta(index);\r\n\r\n\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\t\tci.update();\r\n\t\tci.resetZoom();\r\n\t}\r\n\t\r\n\tdisablePan() {\r\n\t\tlet pan = this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled = (pan === false);\r\n\t\tthis.setState({ chartPan: (pan === false) });\r\n\t}\r\n\t\r\n\tdisableZoom() {\r\n\t\tlet zoom = this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled = (zoom === false);\r\n\t\tthis.setState({ chartZoom: (zoom === false) });\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, settings } = this.props;\r\n\t\treturn (\r\n\r\n<div>\r\n\t<div className={classes.options}>\r\n\t\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('Period shown in Chart')}>\r\n\t\t\t\t<HistoryIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<InputBase\r\n\t\t\t\tinputRef={this.timeRangeRef}\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tvalue={this.state.selectedTimeRangeValue}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeValue: event.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<Select\r\n\t\t\t\tvalue={this.state.selectedTimeRangeUnit}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeUnit: event.target.value })}\r\n\t\t\t\tdisplayEmpty\r\n\t\t\t\tdisableUnderline\r\n\t\t\t\tclassName={classes.select}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<MenuItem value=\"seconds\">{i18n.t('Seconds')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"minutes\">{i18n.t('Minutes')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"hours\">{i18n.t('Hours')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"days\">{i18n.t('Days')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"months\">{i18n.t('Months')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"years\">{i18n.t('Years')}</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t\r\n\t\t\t{/*\r\n\t\t\t<IconButton className={classes.iconButton} onClick={() => this.timeRangeRef.current.focus()}>\r\n\t\t\t\t<CalendarIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t*/}\r\n\t\t</Paper>\r\n\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('End date')}>\r\n\t\t\t\t<FastRewindIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<MuiPickersUtilsProvider locale={locales[i18n.getLanguage()]} utils={DateFnsUtils}>\r\n\t\t\t\t<DateTimePicker\r\n\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\tvalue={this.state.selectedDateTime}\r\n\t\t\t\t\tonChange={selectedDateTime => this.setState({ selectedDateTime: selectedDateTime, dateNow: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\topen={this.state.datePicker}\r\n\t\t\t\t\tonOpen={() => this.setState({ datePicker: true })}\r\n\t\t\t\t\tonClose={() => this.setState({ datePicker: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\tampm={false}\r\n\t\t\t\t\tformat='dd.MM.yyyy HH:mm'\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tdisableUnderline: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\r\n\t\t\t<Tooltip title={i18n.t('Select end date')}>\r\n\t\t\t\t<IconButton color=\"primary\" className={classes.iconButton} onClick={() => this.setState({ datePicker: true })}>\r\n\t\t\t\t\t<CalendarIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Divider className={classes.dividerVertical} orientation=\"vertical\" />\r\n\t\t\t<Tooltip title={i18n.t('Select today as end date')}>\r\n\t\t\t\t<IconButton className={classes.iconButton} onClick={() => this.setState({ selectedDateTime: new Date(), dateNow: true })}>\r\n\t\t\t\t\t<CalendarTodayIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t</Paper>\r\n\t\t\r\n\t\t<Tooltip title={i18n.t('Live updates are ' + (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? 'on' : 'off'))} placement=\"top\" style={{ display: 'flex' }}>\r\n\t\t\t<span>\r\n\t\t\t\t<Button disabled={true} className={clsx(classes.datePicker, this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? classes.button : classes.buttonDisabled)}>\r\n\t\t\t\t\t<LiveUpdates />\r\n\t\t\t\t</Button>\r\n\t\t\t</span>\r\n\t\t</Tooltip>\r\n\t\t\r\n\t</div>\r\n\t<Divider className={classes.divider} />\r\n\t\r\n\t<div className={classes.toolbar}>\r\n\t\t<div className={classes.errorMessage}>\r\n\t\t\t{this.state.errors.length > 0 && <Alert severity=\"error\">{this.state.errors.map((error, i) => [ error, React.createElement('br', { key: 'br-error-' + i }) ])}</Alert>}\r\n\t\t</div>\r\n\t\t\r\n\t\t<ButtonGroup className={classes.toolbarButtons} color=\"primary\">\r\n\t\t{/*\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartPan ? 'contained' : 'outlined'} onClick={this.disablePan.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartPan ? 'Disable panning' : 'Enable panning')}>\r\n\t\t\t\t\t<DisablePan />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartZoom ? 'contained' : 'outlined'} onClick={this.disableZoom.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartZoom ? 'Disable Zoom' : 'Enable Zoom')}>\r\n\t\t\t\t\t<DisableZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t*/}\r\n\t\t\t<Button disableElevation={true} variant=\"contained\" onClick={() => this.chartRef.current.chartInstance.resetZoom()}>\r\n\t\t\t\t<Tooltip title={i18n.t('Reset Zoom')}>\r\n\t\t\t\t\t<ResetZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t</ButtonGroup>\r\n\t</div>\r\n\t\r\n\t<div className={'chart-container'} style={{ position: 'relative', height: settings.chartHeight || '500px' }}>\r\n\t\t{this.state.loading && <div className={classes.loading}>\r\n\t\t\t<CircularProgress />\r\n\t\t</div>}\r\n\t\t\r\n\t\t<Line\r\n\t\t\tref={this.chartRef}\r\n\t\t\tdata={this.state.chartData}\r\n\t\t\toptions={this.chartOptions}\r\n\t\t\t/>\r\n\t\t\t\r\n\t</div>\r\n</div>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Chart);\r\n","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { format } from 'date-fns'\r\nimport { getSunrise, getSunset } from 'sunrise-sunset-js'\r\n\r\nimport Settings from '../Settings'\r\nimport i18n, { locales } from '../i18n'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\n\r\nexport default function DateTime(props) {\r\n\tconst { settings } = props;\r\n\t\r\n\tconst refTimer = useRef();\r\n\tconst [DateTime, setDateTime] = useState(format(new Date(), settings.format, { locale: locales[i18n.getLanguage()] }));\r\n\tconst [city, setCity] = useState('');\r\n\tconst [sunrise, setSunrise] = useState('');\r\n\tconst [sunset, setSunset] = useState('');\r\n\t\r\n\t// https://date-fns.org/v2.9.0/docs/format\r\n\tsettings.style = { fontSize: '1.5rem', textAlign: 'center', ...settings.style };\r\n\tsettings.format = settings.format || 'dd.MM.yyyy HH:mm:ss';\r\n\tsettings.refresh = settings.format.indexOf('s') > -1 ? 1000 : (settings.format.indexOf('i') > -1 ? 60*1000 : 60*60*1000);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(refTimer.current);\r\n\t\trefTimer.current = setTimeout(() => setDateTime(format(new Date(), settings.format, { locale: locales[i18n.getLanguage()] })), settings.refresh);\r\n\t\t\r\n\t\t//\r\n\t\tif (Settings.getSetting('iobroker').latitude && Settings.getSetting('iobroker').longitude) {\r\n\t\t\tsetSunrise(getSunrise(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t\tsetSunset(getSunset(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t}\r\n\t\t\r\n\t\tif (Settings.getSetting('iobroker').city) {\r\n\t\t\tsetCity(Settings.getSetting('iobroker').city);\r\n\t\t}\r\n\t\t\r\n\t}, [settings]);\r\n\t\r\n\treturn (\r\n\r\n<div style={settings.style}>\r\n\t{i18n.t('%DateTime').replace(/%DateTime/, DateTime)}\r\n\t\r\n\t{settings.sun !== false && <div style={{ margin: '5px 0', fontSize: '1.2rem' }}>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-city-variant-outline\"></span> {city ? city : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-up\"></span> {sunrise ? format(sunrise, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-down\"></span> {sunset ? format(sunset, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t</div>\r\n\t}\r\n\t\r\n</div>\r\n\r\n\t);\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Time'),\r\n\ticon: 'clock-outline'\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport L from 'leaflet'\r\nimport { Map as LeafletMap, TileLayer, Marker as LeafletMarker, Tooltip as LeafletTooltip } from 'react-leaflet'\r\n\r\nimport Settings from '../Settings'\r\nimport i18n from '../i18n'\r\nimport Box from '@material-ui/core/Box'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tmap: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapOverview: {\r\n\t\tcolor: '#666',\r\n\t\tposition: 'absolute',\r\n\t\tleft: 0,\r\n\t\tbottom: 0,\r\n\t\twidth: '100%',\r\n\t\theight: '60px',\r\n\t\tzIndex: 999,\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\r\n\t\t'& > *': {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t},\r\n\tmapIconContainer: {\r\n\t},\r\n\tmapIconParent: {\r\n\t\tbackgroundColor: '#fff',\r\n\t\tboxShadow: '0 0 0 8px rgba(255, 255, 255, 0.3)',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapIcon: {\r\n\t\tfontSize: '2rem',\r\n\t\tcolor: theme.palette.primary.main,\r\n\t\ttransform: 'translate3d(4px, -4px,0)', /* for fontSize: '2.3rem' -> 'translate3d(2px, -8px,0)', */\r\n\t\tdisplay: 'block',\r\n\t\t\r\n\t\t'&:after': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tpadding: '50% 0%'\r\n\t\t}\r\n\t},\r\n\tmapTooltip: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Map(props) {\r\n\tconst { settings, devices } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [zoom,] = useState(settings.component.defaultZoom);\r\n\tconst [position,] = useState(settings.component.defaultPosition ? (Array.isArray(settings.component.defaultPosition) ? settings.component.defaultPosition : settings.component.defaultPosition.split(',')) : [ Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude ]);\r\n\tconst [markers, setMarkers] = useState({});\r\n\t\r\n\t// map instance\r\n\tconst map = useRef();\r\n\tconst memoizedMapInitialised = useCallback(function() {map.current = this}, [],);\r\n\t\r\n\t// Marker click in overview\r\n\tconst memoizedHandleClick = useCallback(flyTo => map.current.flyTo(flyTo.split(',')), [],);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (stateKey, state, device) => {\r\n\t\t\r\n\t\tif (stateKey === 'position') {\r\n\t\t\t\r\n\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\tif (!prevMarkers[device.id] || prevMarkers[device.id].position !== state.val) {\r\n\t\t\t\t\tdevice.options.position = state.val;\r\n\t\t\t\t\treturn { ...prevMarkers, [device.id]: device };\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn prevMarkers;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t// get gps position coordinates\r\n\tuseEffect(() => {\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('position').catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\t\r\n\t\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\t\tif (!prevMarkers[device.id]) {\r\n\t\t\t\t\t\treturn { ...prevMarkers, [device.id]: null };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn prevMarkers;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange);\r\n\t\t});\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => devices.forEach(device => device.unlisten(stateChange));\r\n\t\t\r\n\t}, [devices]);\r\n\t\r\n\t// add markers\r\n\tlet mapMarkers = [], mapOverview = [];\r\n\tif (devices.length > 0 && devices.length === Object.keys(markers).length) {\r\n\t\t\r\n\t\tfor (let key in markers) {\r\n\t\t\tlet device = markers[key];\r\n\t\t\tif (device !== null) {\r\n\t\t\t\tlet marker = <Marker key={'marker-' + device.id} position={device.options.position} device={device} settings={settings.component} />\r\n\t\t\t\tmapMarkers.push(marker);\r\n\t\t\t\t\r\n\t\t\t\tlet item = null;\r\n\t\t\t\tif (device.attributes.avatar) {\r\n\t\t\t\t\titem = <Avatar key={'overview-' + device.id} alt={device.name} src={device.attributes.avatar} onClick={() => memoizedHandleClick(device.options.position)} />\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet state = device.getDeviceState();\r\n\t\t\t\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconsole.log(state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconsole.log(styles);\r\n\t\t\t\t\t\r\n\t\t\t\t\titem = <Avatar style={styles} key={'overview-' + device.id} alt={device.name} onClick={() => memoizedHandleClick(device.options.position)}><span className={clsx('mdi mdi-' + icon)}></span></Avatar>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmapOverview.push(<Tooltip key={'tooltip-' + device.id} title={device.name} aria-label={device.name} arrow>{item}</Tooltip>);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Box className={classes.mapOverview}>\r\n\t\t<Typography>{i18n.t('Jump to')}:</Typography>\r\n\t\t{mapOverview}\r\n\t</Box>\r\n\t<LeafletMap useFlyTo={true} center={position} zoom={zoom} className={classes.map} whenReady={memoizedMapInitialised}>\r\n\t\t<TileLayer\r\n\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\turl='https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n\t\t\t/>\r\n\t\t\r\n\t\t{mapMarkers}\r\n\t</LeafletMap>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nfunction Marker(props) {\r\n\tconst { position, device, settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tlet markerIcon = null, offset = 40;\r\n\tconsole.info('Marker for ' + device.function + ' ' + device.name + ' added to map.');\r\n\t\r\n\t// Marker with avatar / picture\r\n\tif (device.attributes && device.attributes.avatar && device.attributes.avatar.substr(0, 11) === 'data:image/') {\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<img src=\"' + device.attributes.avatar + '\" class=\"' + classes.mapIconParent + '\" />',\r\n\t\t\ticonSize: [ 64, 64 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker with Icon\r\n\telse {\r\n\t\toffset = 30;\r\n\t\tlet state = device.getDeviceState();\r\n\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\r\n\t\tconsole.log(styles); \r\n\t\tconst useStyles = makeStyles({root: styles}, {name:'testi'});\r\n\t\tconsole.log(useStyles.root); \r\n\t\t\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<div class=\"' + clsx(classes.mapIconParent) + '\"><span class=\"' + clsx(classes.mapIcon, 'mdi mdi-' + icon) + '\"></span></div>',\r\n\t\t\ticonSize: [ 40, 40 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker MouseOver / MouseOut (bring tooltip to front if markers overlay)\r\n\tconst memoizedHandleMouseEvent = useCallback(function() {this.closeTooltip().openTooltip()}, [],);\r\n\r\n\treturn (\r\n\r\n<LeafletMarker riseOnHover={true} position={Array.isArray(position) ? position : position.split(',')} icon={markerIcon} onMouseOver={memoizedHandleMouseEvent}>\r\n\t<LeafletTooltip className={classes.mapTooltip} direction={settings.tooltipDirection || 'bottom'} permanent={settings.tooltipPermanent || true} offset={[0,offset]}>\r\n\t\t{device.name}\r\n\t</LeafletTooltip>\r\n</LeafletMarker>\r\n\r\n\t);\r\n}","import React from 'react'\r\n\r\nimport StateList from './StateList'\r\n\r\n\r\nexport default function StateListHorizontal(props) {\r\n\treturn (<StateList horizontal={true} {...props} />);\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport Connection from '../Connection'\r\nimport i18n from '../i18n'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\twidth: 100,\r\n\t\theight: 160,\r\n\t\tpadding: 5,\r\n\t\ttextAlign: 'center',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Weather(props) {\r\n\tconst { settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [data,setData] = useState(null);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tConnection.getConnection.getRemoteResource(settings.url).then(\r\n\t\t\tresponse => {\r\n\t\t\t\t\r\n\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\tsetData(JSON.parse(response.body));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror => console.error(error)\r\n\t\t);\r\n\t\t\r\n\t}, [settings.url]);\r\n\t\r\n\tlet weatherForecast = [];\r\n\t//console.log(data);\r\n\t\r\n\tif (!data) {\r\n\t\treturn null;\r\n\t}\r\n\telse {\r\n\t\tfor (let day in data.day) {\r\n\t\t\tlet forecast = data.day[day];\r\n\t\t\tforecast.title = day === 1 ? i18n.t('today') : (day === 2 ? i18n.t('tomorrow') : forecast.name);\r\n\t\t\t\r\n\t\t\tconst dailyForecast = (\r\n\r\n<Grid key={'day-' + day} item>\r\n\t<Paper className={classes.paper}>\r\n\t\t<Typography variant=\"body1\">\r\n\t\t\t{forecast.title}\r\n\t\t</Typography>\r\n\t\t<Typography variant=\"caption\">\r\n\t\t\t{forecast.date}\r\n\t\t</Typography>\r\n\r\n\r\n\t</Paper>\r\n</Grid>\r\n\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tweatherForecast.push(dailyForecast);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container justify=\"space-between\" spacing={1}>\r\n\t{weatherForecast}\r\n\t\r\n</Grid>\r\n\r\n\t);\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Weather'),\r\n\ticon: 'weather-partly-cloudy'\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\n//import IconButton from '@material-ui/core/IconButton'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport PlayIcon from '@material-ui/icons/PlayArrow'\r\nimport PauseIcon from '@material-ui/icons/Pause'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious'\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdivider: {\r\n\t\tmargin: '15px -16px'\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t},\r\n\tnoHeader: {\r\n\t\tmarginTop: theme.spacing(-4),\r\n\t},\r\n\timage: {\r\n\t\theight: '200px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tnoImage: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tdisplay: 'flex',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tinformation: {\r\n\t\tbackgroundColor: theme.palette.primary.main + '66',\r\n\t\tcolor: '#fff',\r\n\t\tpadding: '10px',\r\n\t\tmargin: 0,\r\n\t\twidth: '100%',\r\n\t\tminHeight: '45px'\r\n\t},\r\n\tinformationLeft: {\r\n\t\twidth: '80%',\r\n\t\tfloat: 'left',\r\n\t\tmargin: 0\r\n\t},\r\n\tinformationRight: {\r\n\t\twidth: '19%',\r\n\t\tfloat: 'right',\r\n\t\tmargin: 0,\r\n\t\ttextAlign: 'right'\r\n\t},\r\n\tlength: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\twidth: '100%',\r\n\t\theight: '7px',\r\n\t},\r\n\tlengthBar: {\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t\theight: '100%',\r\n\t},\r\n\tcontrols: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'stretch'\r\n\t},\r\n\tcontrolsBox: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tpaddingTop: '30px'\r\n\t},\r\n\tcontrolsBoxLeft: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'baseline'\r\n\t},\r\n\tcontrolsBoxCenter: {\r\n\t\tflex: 3\r\n\t},\r\n\tcontrolsBoxRight: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'end'\r\n\t},\r\n\tcontrolButton: {\r\n\t\tmargin: '0 5px'\r\n\t},\r\n\tcontrolButtonSmall: {\r\n\t\tmargin: '0 10px',\r\n\t\tfontSize: '1.2rem',\r\n\t\theight: '32px',\r\n\t\twidth: '32px'\r\n\t}\r\n});\r\n\r\n\r\nclass Multimedia extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get initial states\r\n\t\tfor (let stateKey in this.props.device.states) {\r\n\t\t\tthis.props.device.requestDeviceState(stateKey, true).catch(err => console.error(err));\r\n\t\t}\r\n\t\t\r\n\t\t// receive updates\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\t\r\n\t\t// duration\r\n\t\tif (stateKey === 'duration' && state && state.val.indexOf(':') === -1) {\r\n\t\t\tstate.val = helpers.timeToHoursMinutesSeconds(state.val);\r\n\t\t}\r\n\t\t\r\n\t\t// isRunning\r\n\t\tif (stateKey === 'isRunning' && state && typeof state.val === 'string') {\r\n\t\t\tstate.val = state.val.indexOf('play') > -1;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({ [stateKey]: state }, () => {\r\n\t\t\tthis.progress();\r\n\t\t});\r\n\t}\r\n\t\r\n\tprogress() {\r\n\t\tclearTimeout(this.progressTimeout);\r\n\t\t\r\n\t\tif (this.state.isRunning && this.state.isRunning.val === true && this.state.progress && this.state.progress.val && this.state.duration && this.state.duration.val) {\r\n\t\t\tthis.progressTimeout = setTimeout(() => {\r\n\t\t\t\tthis.setState(prevState => ({ progress: { ...prevState.progress, val: helpers.timeToSeconds(prevState.progress.val) + 1 }}), () => this.progress());\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\tsetDeviceState(stateKey, value) {\r\n\t\tthis.props.device.setDeviceState(stateKey, value).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, noHeader, index, device } = this.props;\r\n\t\tlet styleImage = {}, styleLength = {}, styleLengthBar = {};\r\n\t\t\r\n\t\t// background\r\n\t\tif (this.state.background && this.state.background.val !== '') {\r\n\t\t\tstyleImage.backgroundImage = 'url(' + ((device.options.backgroundUrlPrepend || '') + this.state.background.val) + ')';\r\n\t\t}\r\n\t\t\r\n\t\t// duration\r\n\t\tif (this.state.duration && this.state.duration.val) {\r\n\t\t\tstyleLengthBar.width = ((this.state.progress && this.state.progress.val) || 0) + 'px';\r\n\t\t}\r\n\t\t\r\n\t\tconst playIconElements = this.state.isRunning && this.state.isRunning.val ? [<PauseIcon onClick={this.setDeviceState.bind(this, 'pause', true)} />, <StopIcon />] : [<PlayIcon onClick={this.setDeviceState.bind(this, 'play', true)} />];\r\n\t\t//const repeatIcon = 'repeat'; // repeat, repeat-off, repeat-once\r\n\t\t//const shuffleIcon = 'shuffle-variant'; // shuffle-variant, shuffle-disabled\r\n\t\t//const volumeIcon = 'volume-high'; // volume-variant-off\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{index > 0 && <Divider className={classes.divider} />}\r\n\t<div className={clsx(classes.container, noHeader && classes.noHeader)}>\r\n\t\t\r\n\t\t<div className={clsx(this.state.background && this.state.background.val !== '' ? classes.image : classes.noImage)} style={ styleImage } onClick={this.openDialog.bind(this)}>\r\n\t\t\t\r\n\t\t\t<div className={classes.information}>\r\n\t\t\t\t<p className={classes.informationLeft}>\r\n\t\t\t\t\t{this.state.grandParent && this.state.grandParent.val && [this.state.grandParent.val, <br key={'br-' + device.id} />]}\r\n\t\t\t\t\t{this.state.parent && this.state.parent.val && this.state.parent.val + ' - '}{this.state.title && this.state.title.val}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className={classes.informationRight}>\r\n\t\t\t\t\t{this.state.progress && helpers.timeToHoursMinutesSeconds(this.state.progress.val)} / {this.state.duration && this.state.duration.val}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div className={classes.length} style={ styleLength }>\r\n\t\t\t<div className={classes.lengthBar} style={ styleLengthBar }></div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div className={classes.controls}>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxLeft)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + repeatIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + shuffleIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxCenter)}>\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipPreviousIcon onClick={this.setDeviceState.bind(this, 'previous', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t\t{playIconElements.map((icon, i) => \r\n\t\t\t\t<Fab key={'icon-' + i} className={classes.controlButton} size=\"large\" color=\"primary\">\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t</Fab>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipNextIcon onClick={this.setDeviceState.bind(this, 'next', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxRight)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + volumeIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Multimedia);\r\n","import React from 'react'\r\n\r\nimport MultimediaItem from './MultimediaItem'\r\n\r\n\r\nexport default function StateList(props) {\r\n\tconst { devices, settings } = props;\r\n\treturn devices.map((device, i) => <MultimediaItem key={'MultimediaItem-' + device.id} {...props} index={i} noHeader={i === 0 && settings.icon === null && settings.title === null} device={device} />)\r\n}\r\n","var map = {\n\t\"./de.js\": 368,\n\t\"./en.js\": 369\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 367;","export default {\r\n\t/*\r\n\t * LOADING SCREEN\r\n\t */\r\n\t\"Retrieving settings\": \"Einstellungen werden geladen\",\r\n\t\r\n\t/*\r\n\t * GENERAL\r\n\t */\r\n\t\"last update\": \"letzte Aktualisierung\",\r\n\t\"Updates available\": \"Aktualisierung verfgbar\",\r\n\t\r\n\t/*\r\n\t * STATES\r\n\t */\r\n\t\"on\": \"an\",\r\n\t\"off\": \"aus\",\r\n\t\r\n\t\"user\": \"User\",\r\n\t\"users\": \"Users\",\r\n\t\r\n\t\"door\": \"Tr\",\r\n\t\"window\": \"Fenster\",\r\n\t\r\n\t\"open\": \"offen\",\r\n\t\"closed\": \"geschlossen\",\r\n\t\r\n\t\"turn on\": \"anschalten\",\r\n\t\"power\": \"Gerte Status\",\r\n\t\"trigger\": \"Gerte Status\",\r\n\t\r\n\t\"brightness\": \"Helligkeit\",\r\n\t\"wind\": \"Wind\",\r\n\t\"battery\": \"Batterie\",\r\n\t\r\n\t\"%DateTime\": \"%DateTime Uhr\",\r\n\t\r\n\t/*\r\n\t * HOUSEHOLD\r\n\t */\r\n\t\"running\": \"Gert luft\",\r\n\t\"consumption\": \"Verbrauch\"\r\n}","export default {\r\n}","var map = {\n\t\"./blind.de\": 258,\n\t\"./blind.de.js\": 258,\n\t\"./blind.en\": 259,\n\t\"./blind.en.js\": 259,\n\t\"./blind.js\": 217\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 409;","export { default } from './door'\r\n","var map = {\n\t\"./door.de\": 260,\n\t\"./door.de.js\": 260,\n\t\"./door.en\": 261,\n\t\"./door.en.js\": 261,\n\t\"./door.js\": 193\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 411;","export { default } from './heating'\r\n","var map = {\n\t\"./heating.de\": 262,\n\t\"./heating.de.js\": 262,\n\t\"./heating.en\": 263,\n\t\"./heating.en.js\": 263,\n\t\"./heating.js\": 194\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 413;","export { default } from './light'\r\n","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport Slider from '@material-ui/core/Slider'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tprimaryAction: props => ({\r\n\t\t...props.styles\r\n\t}),\r\n\tsecondaryAction: props => ({\r\n\t\tcolor: '#999',\r\n\t\tfontSize: '14px',\r\n\t\t...props.styles\r\n\t}),\r\n});\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcomponent: {\r\n\t\tpadding: theme.spacing(2, 0, 2, 0)\r\n\t},\r\n\tsliderMarkLabel: {\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tdisplay: 'none',\r\n\t\t\t'&:nth-child(5)': { display: 'block' },\r\n\t\t\t'&:nth-child(15)': { display: 'block' },\r\n\t\t\t'&:nth-child(25)': { display: 'block' }\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nconst Action = withStyles(styles)(props => {\r\n\tconst { classes, device, state, stateKey } = props;\r\n\treturn (\r\n\r\n<span className={clsx((stateKey === device.primaryStateKey && classes.primaryAction) || (stateKey === device.secondaryStateKey && classes.secondaryAction))}>\r\n\t{state && state.value} {state && state.unit}\r\n</span>\r\n\r\n\t);\r\n});\r\n\r\nfunction PowerAction(props) {\r\n\tconst { device, stateKey, stateVal, onChange: parentOnChange } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal);\r\n\tuseEffect(() => setChecked(stateVal), [stateVal]);\r\n\t\r\n\treturn (\r\n\r\n<Switch\r\n\tchecked={checked}\r\n\tonChange={parentOnChange || onChange}\r\n\tvalue={checked !== true}\r\n\tcolor=\"primary\"\r\n\t/>\r\n\r\n\t);\r\n}\r\n\r\nfunction TriggerAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onClick = () => {\r\n\t\tdevice.setDeviceState(stateKey, true).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t//\r\n\tif (stateVal === true || stateVal > 0) {\r\n\t\treturn <Action {...props} onChange={null} />;\r\n\t}\r\n\t\r\n\tconst icon = 'power';\r\n\treturn (\r\n\r\n<Button\r\n\tvariant=\"outlined\"\r\n\tcolor=\"primary\"\r\n\tsize=\"small\"\r\n\tstartIcon={<span className={'mdi mdi-' + icon}></span>}\r\n\tonClick={onClick}\r\n\t>\r\n\t\r\n\t{i18n.t('turn on')}\r\n</Button>\r\n\r\n\t);\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction Label(props) {\r\n\tconst { label, br } = props;\r\n\tconst linebreak = br || false;\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t{label}\r\n\t{linebreak && <br />}\r\n</React.Fragment>\r\n\t\r\n\t);\r\n}\r\n\r\nfunction Component(props) {\r\n\tconst { title, children } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Label label={title} />\r\n\t<div className={classes.component}>\r\n\t\t{children}\r\n\t\r\n\t</div>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\nfunction LevelComponent(props) {\r\n\tlet { device, stateKey, stateVal, title, min, max, step, markSteps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onChange = (e, val) => {\r\n\t\tsetLevel(val);\r\n\t\tdevice.setDeviceState(stateKey, val).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [level, setLevel] = useState(stateVal);\r\n\tuseEffect(() => setLevel(stateVal), [stateVal]);\r\n\t\r\n\t// default settings\r\n\tmin = min || 0;\r\n\tmax = max || 100;\r\n\tstep = step || 1;\r\n\tmarkSteps = markSteps || 11; // 0 to 10\r\n\tlet markStep = ((max-min)/(markSteps-1)) || 10;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<Slider\r\n\t\tclasses={{ markLabel: classes.sliderMarkLabel }}\r\n\t\t//onChange\r\n\t\tonChangeCommitted={onChange}\r\n\t\tvalue={level}\r\n\t\tvalueLabelDisplay=\"auto\"\r\n\t\tmarks={[...Array(markSteps).keys()].map(number => ({ 'value': min+number*markStep, 'label': min+number*markStep }))}\r\n\t\tmin={min}\r\n\t\tmax={max}\r\n\t\tstep={step}\r\n\t/>\r\n\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\t_any: {\r\n\t\t\tvalue: (val) => val.toString(),\r\n\t\t\t//unit\r\n\t\t\t//icon\r\n\t\t\t//state\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'battery-medium'\r\n\t\t},\r\n\t\tdoor: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'door-open',\r\n\t\t\t\t'false': 'door-closed'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'open',\r\n\t\t\t\t'false': 'closed'\r\n\t\t\t},\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'water-percent'\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpower: {\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\ttemperature: {\r\n\t\t\tunit: ' C',\r\n\t\t\ticon: 'thermometer'\r\n\t\t},\r\n\t\ttrigger: {\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\twind: {\r\n\t\t\tunit: ' km/h',\r\n\t\t\ticon: 'weather-windy'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tLabel,\r\n\t\tComponent,\r\n\t\tLevelComponent,\r\n\t\t\r\n\t\tlevel: LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tAction,\r\n\t\tPowerAction,\r\n\t\tTriggerAction,\r\n\t\t\r\n\t\tpower: PowerAction,\r\n\t\ttrigger: TriggerAction\r\n\t},\r\n\tstyles: {\r\n\t\t_any: {\r\n\t\t\t//icon: {},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: {\r\n\t\t\t\t\t'color': '#090',\r\n\t\t\t\t\t'fontWeight': 'bold'\r\n\t\t\t\t},\r\n\t\t\t\tfalse: {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import EventEmitter from 'events'\r\nimport io from 'socket.io-client'\r\n\r\n\r\n/**\r\n * Class for Socket.io conncetion handling.\r\n *\r\n * @description This is based on an implementation @GermanBluefox (https://github.com/GermanBluefox), see https://github.com/ioBroker/adapter-react/blob/master/src/Connection.js\r\n *\t\t\t\tOnly required functions are taken from source class. Major change is that all events are emitted, so proper error handling is possible in the App.\r\n *\r\n *\r\n * @param\t{String}\t\turl\r\n * @param\t{Object}\t\toptions\r\n * @return\t{Socket}\r\n * @see https://github.com/ioBroker/ioBroker.socketio/blob/master/lib/socket.js https://github.com/ioBroker/ioBroker.js-controller/blob/master/lib/adapter.js#L635\r\n *\r\n */\r\nexport default class Socket extends EventEmitter {\r\n\t\r\n\tconstructor(url = null, options = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// socket connection\r\n\t\tthis.socket = io(url, { timeout: 10000, ...options, query: 'ws=true' });\r\n\t\tthis.statesSubscribes = {}; // subscribed states\r\n\t\t\r\n\t\t/*\r\n\t\t * API events\r\n\t\t * @see https://github.com/socketio/socket.io-client/blob/HEAD/docs/API.md#socket\r\n\t\t *\r\n\t\t */\r\n\t\t// connect\r\n\t\tthis.socket.on('connect', () => this.emit('connect'));\r\n\t\t\r\n\t\t// reconnect: Fired upon a successful reconnection.\r\n\t\tthis.socket.on('reconnect', attempts => this.emit('reconnect', attempts));\r\n\t\t\r\n\t\t// reconnect_error: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_error', error => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_error', 'message': error.message }));\r\n\t\t\r\n\t\t// reconnect_failed: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_failed', () => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_failed', 'message': 'Reconnection failed!' }));\r\n\t\t\r\n\t\t// discconect\r\n\t\tthis.socket.on('disconnect', reason => this.emit('disconnect', reason));\r\n\t\t\r\n\t\t// connect_error\r\n\t\tthis.socket.on('connect_error', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': error.message }));\r\n\t\t\r\n\t\t// connect_timeout\r\n\t\tthis.socket.on('connect_timeout', () => this.emit('error', { 'type': 'connect', 'event': 'connect_timeout', 'message': 'Connect ran into timeout!' }));\r\n\t\t\r\n\t\t// error\r\n\t\tthis.socket.on('error', error => this.emit('error', { 'type': 'error', 'event': 'error', 'message': error.message }));\r\n\t\t\r\n\t\t/*\r\n\t\t * ioBroker events\r\n\t\t *\r\n\t\t */\r\n\t\tthis.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeStates(ids, cb) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.subscribeState(id, cb));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to a state by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeState(id, cb) {\r\n\t\t\r\n\t\tif (!this.statesSubscribes[id]) {\r\n\t\t\tlet reg = id\r\n\t\t\t\t.replace(/\\./g, '\\\\.')\r\n\t\t\t\t.replace(/\\*/g, '.*')\r\n\t\t\t\t.replace(/\\(/g, '\\\\(')\r\n\t\t\t\t.replace(/\\)/g, '\\\\)')\r\n\t\t\t\t.replace(/\\+/g, '\\\\+')\r\n\t\t\t\t.replace(/\\[/g, '\\\\[');\r\n\r\n\t\t\tif (reg.indexOf('*') === -1) {\r\n\t\t\t\treg += '$';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.statesSubscribes[id] = { reg: new RegExp(reg), cbs: [cb] };\r\n\t\t\t\r\n\t\t\tif (this.socket.connected) {\r\n\t\t\t\tthis.socket.emit('subscribe', id);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Fires pre-registered callbacks (via subscribeState) upon state change.\r\n\t *\r\n\t */\r\n\tstateChange(id, state) {\r\n\t\t\r\n\t\tid = id ? id.replace(/[\\s'\"]/g, '_') : '';\r\n\t\tfor (const task in this.statesSubscribes) {\r\n\t\t\tif (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\r\n\t\t\t\tthis.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetAdapterInstances(adapter, cb) {\r\n\t\t\r\n\t\tif (typeof adapter === 'function') {\r\n\t\t\tcb = adapter;\r\n\t\t\tadapter = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.getObjectView('system', 'instance', { 'startkey': 'system.adapter.' + (adapter ? adapter + '.' : ''), 'endkey': 'system.adapter.' + (adapter ? adapter + '.999' : 'zzz') }, cb);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object.\r\n\t *\r\n\t */\r\n\tgetObject(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObject(id, (err, obj) => err ? reject(err) : resolve(obj)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObject', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetObjectView(design, search, params, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObjectView(design, search, params, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObjectView', design, search, params, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a remote ressource.\r\n\t *\r\n\t */\r\n\tgetRemoteResource(url, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getRemoteResource(url, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('httpGet', url, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a state.\r\n\t *\r\n\t */\r\n\tgetState(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getState', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets multiple states at once.\r\n\t *\r\n\t */\r\n\tgetStates(pattern, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStates(pattern, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getStates', pattern, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the state history.\r\n\t *\r\n\t */\r\n\tgetStateHistory(id, options, cb) {\r\n\t\t\r\n\t\tif (typeof options === 'function') {\r\n\t\t\tcb = options;\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStateHistory(id, options, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getHistory', id, options, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a state.\r\n\t *\r\n\t */\r\n\tsetState(id, val, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.setState(id, val, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('setState', id, val, cb);\r\n\t\t}\r\n\t}\r\n}\r\n","import Socket from './Socket'\r\n\r\n/**\r\n * Connection\r\n +\r\n *\r\n */\r\nexport default class Connection {\r\n\r\n\t/*\r\n\t * URL\r\n\t */\r\n\tstatic url = window.location.hostname;\r\n\t\r\n\t/*\r\n\t * Connection\r\n\t */\r\n\tstatic connection = null;\r\n\t\r\n\t/**\r\n\t * Connects to the Socket.\r\n\t *\r\n\t * @param\t{String}\turl\r\n\t * @param\t{Array}\t\tlisteners\r\n\t * @return\t{Connection}\r\n\t */\r\n\tstatic connect(url = null, listeners = null) {\r\n\t\t\r\n\t\t// set URL\r\n\t\tif (url) {\r\n\t\t\tConnection.setUrl = url;\r\n\t\t}\r\n\t\t\r\n\t\t// connect\r\n\t\tConnection.connection = new Socket(Connection.url);\r\n\t\t\r\n\t\t// set listeners\r\n\t\tif (listeners) {\r\n\t\t\tConnection.setListeners = listeners;\r\n\t\t}\r\n\t\t\r\n\t\t// return connection\r\n\t\treturn Connection.connection;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the current Connection.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Connection}\tCurrent Connection\r\n\t */\r\n\tstatic get getConnection() {\r\n\t\treturn Connection.connection || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the current URL.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get getUrl() {\r\n\t\treturn Connection.url;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reconnect to the Socket.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get reconnect() {\r\n\t\treturn Connection.connect;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets an event listener.\r\n\t *\r\n\t * @param\t{Object}\t\t\tlistener\r\n\t * @param\t{String}\t\t\tlistener.event\r\n\t * @param\t{Function}\t\t\tlistener.callback\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setListener(listener) {\r\n\t\tConnection.connection.on(listener.event, listener.callback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set event listeners.\r\n\t *\r\n\t * @param\t{Array<Object>}\t\tlisteners\r\n\t * @return \t{Boolean}\r\n\t */\r\n\tstatic set setListeners(listeners = []) {\r\n\t\t\r\n\t\tif (!listeners || !Array.isArray(listeners)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlisteners.forEach(listener => Connection.setListener = listener);\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a new URL (has to be set before calling connect()).\r\n\t *\r\n\t * @param\t{String}\tURL\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setUrl(url) {\r\n\t\tConnection.url = url;\r\n\t}\r\n}\r\n","var map = {\n\t\"./light.de\": 297,\n\t\"./light.de.js\": 297,\n\t\"./light.en\": 298,\n\t\"./light.en.js\": 298,\n\t\"./light.js\": 216\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 576;","export { default } from './location'\r\n","var map = {\n\t\"./location.de\": 299,\n\t\"./location.de.js\": 299,\n\t\"./location.en\": 300,\n\t\"./location.en.js\": 300,\n\t\"./location.js\": 213\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 578;","export { default } from './user'\r\n","var map = {\n\t\"./user.de\": 301,\n\t\"./user.de.js\": 301,\n\t\"./user.en\": 302,\n\t\"./user.en.js\": 302,\n\t\"./user.js\": 214\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 580;","export { default } from './window'\r\n","var map = {\n\t\"./window.de\": 303,\n\t\"./window.de.js\": 303,\n\t\"./window.en\": 304,\n\t\"./window.en.js\": 304,\n\t\"./window.js\": 215\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 582;","import React from 'react'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tgridContainer: {\r\n\t\tpaddingLeft: theme.spacing(1),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(0.4)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function GridContainer(props) {\r\n\tconst { contents = {} } = props;\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tlet grid = [];\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tif (!contents[column]) {\r\n\t\t\tconsole.warn('No content for column #' + column + '!');\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\r\n\t\tgrid.push(\r\n\t\t\t<Grid key={column} item\t\t\t\t// @see https://material-ui.com/customization/breakpoints/\r\n\t\t\t\txs={12}\t\t\t\t\t\t\t//    0 -  600px\r\n\t\t\t\tsm={6}\t\t\t\t\t\t\t//  600 -  960px\r\n\t\t\t\tmd={6}\t\t\t\t\t\t\t//  960 - 1280px\r\n\t\t\t\tlg={Math.round(12/columns)}\t\t// 1280 - 1920px\r\n\t\t\t\txl={Math.round(12/columns)}\t\t// \t\t> 1920px\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{contents[column]}\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container spacing={0} className={classes.gridContainer}>\r\n\t{grid}\r\n</Grid>\r\n\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tsuccess: {\r\n\t\tbackgroundColor: green[600],\r\n\t},\r\n\terror: {\r\n\t\tbackgroundColor: theme.palette.error.dark,\r\n\t},\r\n\tinfo: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t},\r\n\twarning: {\r\n\t\tbackgroundColor: amber[700],\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 20,\r\n\t},\r\n\ticonVariant: {\r\n\t\topacity: 0.9,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\tmessage: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n}));\r\n\r\n\r\nconst variantIcon = {\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n};\r\n\r\n\r\nexport default function StatusSnackbar(props) {\r\n\tconst classes = useStyles();\r\n\tlet { className, open, autoHideDuration, message, closeButton, onClose, variant, ...other } = props;\r\n\tconst Icon = variantIcon[variant];\r\n\t\r\n\topen = open || true;\r\n\tautoHideDuration = autoHideDuration || null;\r\n\treturn (\r\n\r\n<Snackbar\r\n\tanchorOrigin={{\r\n\t\tvertical: 'bottom',\r\n\t\thorizontal: 'center',\r\n\t}}\r\n\topen={open}\r\n\tautoHideDuration={autoHideDuration}\r\n\tonClose={onClose}\r\n\t>\r\n\t<SnackbarContent\r\n\t\tclassName={clsx(classes[variant], className)}\r\n\t\tmessage={\r\n\t\t\t<span id=\"client-snackbar\" className={classes.message}>\r\n\t\t\t\t<Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t{message}\r\n\t\t\t</span>\r\n\t\t}\r\n\t\taction={closeButton && [\r\n\t\t\t<IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t</IconButton>,\r\n\t\t]}\r\n\t\t{...other}\r\n\t\t/>\r\n\t\t\r\n</Snackbar>\r\n\r\n\t);\r\n}","export default {\r\n\t\"iobrokerWebAdapterUrl\": \"https://192.168.178.29:8082\"\r\n}","\r\nexport default {\r\n\tdefaults: require('./defaults').default,\r\n\t\r\n\tblind: require('./blind/').default,\r\n\tdoor: require('./door/').default,\r\n\theating: require('./heating/').default,\r\n\tjalousie: require('./blind/').default,\r\n\tlight: require('./light/').default,\r\n\tlocation: require('./location/').default,\r\n\tuser: require('./user/').default,\r\n\twindow: require('./window/').default\r\n}","import EventEmitter from 'events'\r\nimport functions from './functions'\r\n\r\n\r\n/**\r\n * Function\r\n *\r\n * @param\t{String}\t\tfunctionType\r\n * @return\t{Function}\r\n *\r\n */\r\nexport default class Function extends EventEmitter {\r\n\t\r\n\tconstructor(functionType) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.function = functionType;\r\n\t\t\r\n\t\tif (!this.function) {\t\r\n\t\t\tthrow new Error('No function given!');\r\n\t\t}\r\n\t\t\r\n\t\tthis.functionId = this.function.toLowerCase();\r\n\t\t\r\n\t\t// configuration\r\n\t\tthis.defaults = functions['defaults'].configurations;\r\n\t\tthis.configurations = (functions[this.functionId] && functions[this.functionId].configurations) || {};\r\n\t\t\r\n\t\t// styles\r\n\t\tthis.defaultStyles = functions['defaults'].styles;\r\n\t\tthis.styles = (functions[this.functionId] && functions[this.functionId].styles) || {};\r\n\t\t\r\n\t\t// components and actions\r\n\t\tthis.components = { ...functions['defaults'].components, ...(functions[this.functionId] && functions[this.functionId].components) || {} };\r\n\t\tthis.actions = { ...functions['defaults'].actions, ...(functions[this.functionId] && functions[this.functionId].actions) || {} };\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Mixed}\r\n\t * @private\r\n\t */\r\n\t_applyFunction(key, val) {\r\n\t\treturn this._isFunction(key) ? key(val) : val;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{String}\r\n\t * @private\r\n\t */\r\n\t_getValueFromSettings(settings, defaults = '') {\r\n\t\t\r\n\t\tfor (let key in settings) {\r\n\t\t\tif (settings[key] !== undefined) {\r\n\t\t\t\treturn settings[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn defaults;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isFunction(key) {\r\n\t\treturn key && typeof key === 'function';\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isValue(val) {\r\n\t\treturn val !== undefined; // || val === null || val === false; // null is considered a value, so it can be used to actually null the output\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_setObjectStructure(obj, defaultValue = undefined) {\r\n\t\t\r\n\t\tif (!obj || typeof obj != 'object') {\r\n\t\t\tobj = { 'default': obj || defaultValue };\r\n\t\t}\r\n\t\telse if (typeof obj == 'object' && !obj.default) {\r\n\t\t\tobj.default = defaultValue;\r\n\t\t}\r\n\t\t\r\n\t\treturn obj;\r\n\t}\r\n}\r\n","export default {\r\n\t\"hm-rpc\": \"HomeMatic\",\r\n\t\"shelly\": \"Shelly\",\r\n\t\"sonoff\": \"Sonoff\"\r\n}","import React from 'react'\r\n\r\nimport i18n, { locales } from './i18n'\r\nimport Function from './Function'\r\nimport Adapters from './config/adapters'\r\n\r\nimport { formatDistanceToNow } from 'date-fns'\r\n\r\n\r\n/**\r\n * Device\r\n *\r\n * @param\t{Object}\tdeviceProperties\r\n * @param\t{String}\tdeviceProperties.id\r\n * @param\t{String}\tdeviceProperties.name\r\n * @param\t{String}\t[deviceProperties.room=null]\r\n * @param\t{String}\tdeviceProperties.function\r\n * @param\t{Object}\tdeviceProperties.states\r\n * @param\t{Object}\t[deviceProperties.attributes={}]\r\n * @param\t{Object}\tdeviceProperties.options\r\n * @param\t{Object}\tsocket\r\n * @return\t{Device}\r\n *\r\n */\r\nexport default class Device extends Function {\r\n\t\r\n\tconstructor(deviceProperties, socket) {\r\n\t\ttry {\r\n\t\t\tsuper(deviceProperties.function);\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthrow new Error('No function given for device ' + deviceProperties.name + '!');\r\n\t\t}\r\n\t\t\r\n\t\t// initialise class data\r\n\t\tthis.id = deviceProperties.id;\r\n\t\tthis.name = deviceProperties.name;\r\n\t\t\r\n\t\tthis.room = deviceProperties.room || null;\r\n\t\t\r\n\t\tthis.states = deviceProperties.states;\r\n\t\tthis.options = deviceProperties.options;\r\n\t\tthis.attributes = deviceProperties.attributes || {};\r\n\t\t\r\n\t\tthis.socket = socket;\r\n\t\t\r\n\t\t// verify data\r\n\t\tif (!this.options || typeof this.options !== 'object' || Object.keys(this.options).length === 0) {\r\n\t\t\tthrow new Error('Device' + (deviceProperties.id || deviceProperties.name ? ' ' + (deviceProperties.name || deviceProperties.id) : '') + ' not defined for jarvis!');\r\n\t\t}\r\n\t\telse if (!this.states || typeof this.states !== 'object' || Object.keys(this.states).length === 0) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no states defined)!');\r\n\t\t}\r\n\t\telse if (!this.id || !this.name || !this.function) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no id, name or function defined)!');\r\n\t\t}\r\n\t\telse if (!this.socket) {\t\r\n\t\t\tthrow new Error('No socket given!');\r\n\t\t}\r\n\t\t\r\n\t\t// hierarchy\r\n\t\tthis.children = deviceProperties.children || [];\r\n\t\tthis.parent = deviceProperties.parent || null;\r\n\t\t\r\n\t\t// do some stuff\r\n\t\tthis._setProperties();\r\n\t\tthis.stateSubscriptions = [];\r\n\t\t\r\n\t\t// listen for errors of the device\r\n\t\tthis.on('error', err => console.error('Device error occured!', err));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object|String}\r\n\t * @private\r\n\t */\r\n\t_getStateFromKey(stateKey = null, stateType = 'state') {\r\n\t\t\r\n\t\t// already a state object\r\n\t\tif (stateKey && typeof stateKey === 'object') {\r\n\t\t\treturn stateKey;\r\n\t\t}\r\n\t\t\r\n\t\t// get state object\r\n\t\tlet s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\t// state does not exist\r\n\t\tif (s === undefined) {\r\n\t\t\treturn i18n.t('State does not exist in device %device%').replace(/%device%/g, this.name) + '!';\r\n\t\t}\r\n\t\t\r\n\t\t// state not an object so far\r\n\t\telse if (typeof s === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey] = { [stateType]: { 'node': s }};\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\telse if (typeof s[stateType] === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey][stateType] = { 'node': s[stateType] };\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\t\r\n\t\t// state not valid\r\n\t\tif (!s || !s[stateType]) {\r\n\t\t\treturn i18n.t('Incorrect or non-defined state key for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\telse if (typeof s[stateType] == 'object' && !s[stateType].node) {\r\n\t\t\treturn i18n.t('No %stateType% specified for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getConfigurationSetting(config, stateKey, attribute, stateVal) {\r\n\t\t\r\n\t\tif (this[config][stateKey]) {\r\n\t\t\t\r\n\t\t\t// 1. if stateKey (e.g. level, power) is available, try to replace an attribute (e.g. icon, unit or for styles state, icon) based on current state (e.g. true, false)\r\n\t\t\tif (typeof this[config][stateKey][attribute] === 'object') {\r\n\t\t\t\t\r\n\t\t\t\tconst stateValKeys = Object.keys(this[config][stateKey][attribute]);\r\n\t\t\t\tif (stateValKeys.toString().indexOf('<') > -1 || stateValKeys.toString().indexOf('>') > -1 || stateValKeys.toString().indexOf('!=') > -1) { // !=, >, >=, <, <=\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet val = this[config][stateKey][attribute]['default'];\r\n\t\t\t\t\tstateValKeys.forEach(stateValKey => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet stateValValue = stateValKey.replace('<=', '').replace('<', '').replace('>=', '').replace('>', '').replace('!=', '');\r\n\t\t\t\t\t\tif (stateValKey.indexOf('<=') > -1 && stateVal <= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('<') > -1 && stateVal < stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>=') > -1 && stateVal >= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>') > -1 && stateVal > stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKeys.toString().indexOf('!=') > -1 && stateVal != stateValValue) {  // eslint-disable-line eqeqeq\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn super._isValue(this[config][stateKey][attribute][stateVal]) ? this[config][stateKey][attribute][stateVal] : this[config][stateKey][attribute]['default'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 2. if #1 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config][stateKey][attribute])) {\r\n\t\t\t\treturn this[config][stateKey][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 3. fallback to stateKey with attribute, if defined but neither an object (thus stateless) nor a function\r\n\t\t\telse if (typeof this[config][stateKey][attribute] === 'string') {\r\n\t\t\t\treturn this[config][stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this[config]['_any']) {\r\n\t\t\t\r\n\t\t\t// 4. fallback to _any if no stateKey (e.g. level, power) is given, but consider attribute to be stateful (e.g. true, false)\r\n\t\t\tif (typeof this[config]['_any'][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(this[config]['_any'][attribute][stateVal]) ? this[config]['_any'][attribute][stateVal] : this[config]['_any'][attribute]['default'];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 5. if #4 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config]['_any'][attribute])) {\r\n\t\t\t\treturn this[config]['_any'][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// nothing, return undefined (not null, because this would mean take an empty value)\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getUserSetting(stateKey, attribute, stateVal, styles = false) {\r\n\t\t\r\n\t\tlet options = this.options;\r\n\t\t\r\n\t\tif (styles) {\r\n\t\t\toptions = this.options['styles'];\r\n\t\t\tlet tmp = attribute;\r\n\t\t\tattribute = stateKey;\r\n\t\t\tstateKey = tmp;\r\n\t\t}\r\n\t\t\r\n\t\tif (options[attribute] && options[attribute][stateKey]) {\r\n\t\t\tif (typeof options[attribute][stateKey] === 'object') {\r\n\t\t\t\treturn super._isValue(options[attribute][stateKey][stateVal]) ? options[attribute][stateKey][stateVal] : options[attribute][stateKey]['default'];\r\n\t\t\t}\r\n\t\t\telse if (super._isFunction(options[attribute][stateKey])) {\r\n\t\t\t\treturn options[attribute][stateKey](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn options[attribute][stateKey];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return void\r\n\t * @private\r\n\t *\r\n\t */\r\n\t_setProperties() {\r\n\t\t\r\n\t\tlet states = Object.keys(this.states);\r\n\t\t\r\n\t\t// delete ignored states\r\n\t\tif (this.options.ignoredStates) {\r\n\t\t\tthis.options.ignoredStates = Array.isArray(this.options.ignoredStates) ? this.options.ignoredStates : [this.options.ignoredStates];\r\n\t\t\t\r\n\t\t\tthis.options.ignoredStates.forEach(ignoredState => {\r\n\t\t\t\tif (this.states[ignoredState]) {\r\n\t\t\t\t\tdelete this.states[ignoredState];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get hidden states\r\n\t\tthis.options.hiddenStates = [];\r\n\t\tif (this.options.hideStates) {\r\n\t\t\tthis.options.hideStates = Array.isArray(this.options.hideStates) ? this.options.hideStates : [this.options.hideStates];\r\n\t\t\t\r\n\t\t\tthis.options.hideStates.forEach(hideState => {\r\n\t\t\t\tif (this.states[hideState]) {\r\n\t\t\t\t\tthis.options.hiddenStates.push(hideState);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// properties\r\n\t\tthis.primaryStateKey = this.options.primary || states[0];\r\n\t\tthis.secondaryStateKey = this.options.secondary || null;\r\n\t\t\r\n\t\t// bring user settings for value, state, unit, icon and styles in structure\r\n\t\t['value', 'state', 'unit', 'icon', 'styles'].forEach(key => {\r\n\t\t\t\r\n\t\t\tlet stateOrAttribute = this.options[key] && Object.keys(this.options[key])[0];\r\n\t\t\tthis.options[key] = !this.options[key] ? {} : super._setObjectStructure(stateOrAttribute && states.indexOf(stateOrAttribute) > -1 ? this.options[key] : { [this.primaryStateKey]: this.options[key] });\r\n\t\t});\r\n\t\t\r\n\t\t// manufacturer\r\n\t\tthis.states[this.primaryStateKey] = this._getStateFromKey(this.primaryStateKey);\r\n\t\tthis.options.manufacturer = (this.primaryStateKey && Adapters[this.states[this.primaryStateKey].state.node.substr(0, this.states[this.primaryStateKey].state.node.indexOf('.'))]) || 'unknown';\r\n\t\t\r\n\t\t// all options\r\n\t\tthis.options.groups = Array.isArray(this.options.group) ? this.options.group : [this.options.group];\r\n\t\tthis.options.sort = this.options.sort || 999;\r\n\t\t\r\n\t\tthis.options.label = (this.options.label && (typeof this.options.label === 'string' && this.options.label.replace(/%name%/g, this.name))) || this.options.label || this.name;\r\n\t\t//this.options.subtitle = this.options.subtitle;\r\n\t\tthis.options.divider = this.options.divider || false;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_updateDeviceState(stateKey, state) {\r\n\t\t\r\n\t\t// add time changed\r\n\t\tstate.timeChanged = formatDistanceToNow(new Date(state.lc-5*1000), { locale: locales[i18n.getLanguage()], includeSeconds: true, addSuffix: true })\r\n\t\t\r\n\t\t// add unit\r\n\t\tstate.unit = '';\r\n\t\t\r\n\t\t// change val\r\n\t\tlet val = this._getConfigurationSetting('configurations', stateKey, 'val', state.val);\r\n\t\tstate.val = val !== undefined ? val : state.val;\r\n\t\t\r\n\t\t// assign value\r\n\t\tstate.value = state.val;\r\n\t\t\r\n\t\t// mapping of value to state values\r\n\t\t[{ 'value': 'value' }, { 'state': 'value' }, { 'unit': 'unit' }].forEach(pair => {\r\n\t\t\tlet attribute = Object.keys(pair).toString();\r\n\t\t\tlet option = Object.values(pair).toString();\r\n\t\t\tlet settings = {};\r\n\t\t\t\r\n\t\t\t// get user setting\r\n\t\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, state.val);\r\n\t\t\t\r\n\t\t\t// get function setting or fallback to defaults\r\n\t\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, state.val);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tstate[option] = super._getValueFromSettings(settings, state[option]);\r\n\t\t});\r\n\t\t\r\n\t\tstate.value = i18n.t(state.value);\r\n\t\treturn state;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tget(property) {\r\n\t\treturn this[property] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetAction(stateKey = null, forceDefault = false) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = state ? state.val : null;\r\n\t\t\r\n\t\tconst Action = (!forceDefault && this.actions[stateKey]) || this.actions.Action;\r\n\t\treturn <Action key={'action-' + this.id + '-' + stateKey} device={this} state={state} stateKey={stateKey} stateVal={stateVal} styles={this.getStyle('state', stateKey, stateVal)} />\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetComponent(stateKey) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = state ? state.val : null;\r\n\t\t\r\n\t\tconst Component = this.components[stateKey];\r\n\t\treturn (Component && <Component title={this.states[stateKey].label || i18n.t(this.function + '#' + stateKey)} device={this} stateKey={stateKey} stateVal={stateVal} />) || this.states[stateKey].label || i18n.t(this.function + '#' + stateKey);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateProperty=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetDeviceState(stateKey = null, stateProperty = null) {\r\n\t\tconst s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\tlet deviceState = null;\r\n\t\t\r\n\t\tif (s && s.state && stateProperty !== null && s.state.value !== undefined && s.state.value[stateProperty] !== undefined) {\r\n\t\t\tdeviceState = s.state.value[stateProperty];\r\n\t\t}\r\n\t\telse if (s && s.state && stateProperty === null && s.state.value !== undefined) {\r\n\t\t\tdeviceState = s.state.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn deviceState;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get an icon based on the current device state (or falls back to a default).\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateVal=default]\r\n\t * @param\t{String}\t[defaultIcon=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetIcon(stateKey, stateVal = '', defaultIcon = undefined) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, 'icon', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, 'icon', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, defaultIcon);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetOption(option, stateVal = 'default') {\r\n\t\treturn (this.options[option] && (this.options[option][stateVal] || this.options[option]['default'])) || this.options[option] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetStyle(attribute, stateKey = null, stateVal = 'default') {\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, stateVal, true);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['styles', 'defaultStyles'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, {});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\t// check for duplicates\r\n\t\tlet duplicate = this.listeners(eventName).findIndex(listener => listener.toString() == callback.toString()) > -1; // eslint-disable-line eqeqeq\r\n\t\t\r\n\t\t// attach callback\r\n\t\tif (!duplicate) {\r\n\t\t\tthis.on(eventName, callback);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests all state values from the backend.\r\n\t *\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Array<Promises>}\r\n\t *\r\n\t */\r\n\trequestDeviceStates(subscribe = false) {\r\n\t\t\r\n\t\tlet responses = [];\r\n\t\tfor (let stateKey in this.states) {\r\n\t\t\tresponses.push(this.requestDeviceState(stateKey, subscribe));\r\n\t\t}\r\n\t\t\r\n\t\treturn responses;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Promise}\r\n\t *\r\n\t */\r\n\trequestDeviceState(stateKey = null, subscribe = false) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (s.state.value !== undefined && this.stateSubscriptions.indexOf(stateKey) > -1) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getState(s.state.node)\r\n\t\t\t\t\t.then(state => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (state === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @return\t{Promise}\r\n\t * @see https://github.com/ioBroker/ioBroker.history#access-values-from-javascript-adapter\r\n\t *\r\n\t */\r\n\trequestDeviceStateHistory(stateKey = null, subscribe = false, options = {}) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ts.state.historyCache = s.state.historyCache || {};\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (options.start && options.end && options.step && s.state.historyCache[options.start + '#' + options.end + '#' + options.step] !== undefined) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('historyChange', stateKey, s.state.historyCache[options.start + '#' + options.end + '#' + options.step], s.state, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getStateHistory(s.state.node, options)\r\n\t\t\t\t\t.then(history => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (history === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// cache result\r\n\t\t\t\t\t\tif (options.start && options.end && options.step) {\r\n\t\t\t\t\t\t\ts.state.historyCache[options.start + '#' + options.end + '#' + options.step] = history;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.history = history;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('historyChange', stateKey, s.state.history, s.state, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetAction(action) {\r\n\t\tthis.options.action = action;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetComponent(component) {\r\n\t\tthis.options.label = component;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\tvalue\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsetDeviceState(stateKey = null, value) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey, 'action');\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.socket.setState(s.action.node, value)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\r\n\t\t\t\t\t// get state value if not subscribed\r\n\t\t\t\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\t\t\t\tthis.requestDeviceState(stateKey);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// resolve\r\n\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsubscribeDeviceState(stateKey = null) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\t// add subscription\t\r\n\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\tthis.stateSubscriptions.push(stateKey);\r\n\t\t\r\n\t\t\t// subscribe\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.socket.subscribeState(s.state.node, (id, state, params) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (state && state.val !== this.getDeviceState(stateKey, 'val')) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// format value\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish to children as well\r\n\t\t\t\t\t\tthis.children.forEach(child => child.emit('stateChange', stateKey, s.state.value, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': 'State already subscribed!' });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tunlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\tthis.off(eventName, callback);\r\n\t}\r\n}\r\n","\r\nexport default {\r\n\tsettings: require('./SettingsPage').default\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/tooltip'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport NotificationsIcon from '@material-ui/icons/Notifications'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tappBar: {\r\n\t\tflexGrow: 1,\r\n\t\tboxShadow: 'none',\r\n\t\ttransform: 'none',\r\n\t},\r\n\ttoolbar: {\r\n\t\tbackgroundColor: theme.palette.primary.main\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingRight: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TopBar(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst { children, title, connectionStatus, toggleDrawer, navigate, notifications } = props;\r\n\tconst [ icon, label ] = title.indexOf('|') > -1 ? title.split('|') : [ null, title ];\r\n\t\r\n\tconst connectionStatusIcon = connectionStatus ? 'lan-connect' : (connectionStatus === 'pending' ? 'lan-pending' : 'lan-disconnect');\r\n\tconst connectionStatusTooltip = connectionStatus ? i18n.t('Connected to ioBroker') : (connectionStatus === 'pending' ? i18n.t('Not connected to ioBroker! Reconnecting..') : i18n.t('Not connected to ioBroker! Connection failed!'));\r\n\t\r\n\treturn (\r\n\r\n<AppBar id=\"appBar\" position=\"static\" className={classes.appBar}>\r\n\r\n\t<Toolbar className={classes.toolbar}>\r\n\t\t\r\n\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t{icon && <span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>}\r\n\t\t\t{label !== 'null' && label}\r\n\t\t</Typography>\r\n\t\t<IconButton color=\"inherit\">\r\n\t\t\t<Tooltip title={i18n.t(connectionStatusTooltip)}>\r\n\t\t\t\t<span className={\"mdi mdi-\" + connectionStatusIcon}></span>\r\n\t\t\t</Tooltip>\r\n\t\t</IconButton>\r\n\t\t\r\n\t\t{/*\r\n\t\t<IconButton color=\"inherit\" onClick={() => navigate('settings')}>\r\n\t\t\t<SettingsIcon />\r\n\t\t</IconButton>\r\n\t\t<IconButton color=\"inherit\" onClick={() => toggleDrawer('notificationDrawer', true)}>\r\n\t\t\t<Badge badgeContent={notifications} color=\"secondary\">\r\n\t\t\t\t<NotificationsIcon />\r\n\t\t\t</Badge>\r\n\t\t</IconButton>\r\n\t\t*/}\r\n\t\t\r\n\t</Toolbar>\r\n\t\r\n\t{children}\r\n</AppBar>\r\n\r\n\t);\r\n}\r\n","/*\r\n * by QoP <https://stackoverflow.com/users/4484822/qop>\r\n * @see https://stackoverflow.com/questions/36862334/get-viewport-window-height-in-reactjs\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Settings from '../Settings'\r\nimport useWindowDimensions from '../helpers/useWindowDimensions'\r\n\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingBottom: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t},\r\n\ttabs: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tpaddingLeft: theme.spacing(),\r\n\t\tcolor: '#fff',\r\n\t\twidth: 'calc(100% - ' + theme.spacing() + 'px)',\r\n\t\tzIndex: 101,\r\n\t\tborderBottom: '5px solid #eee'\r\n\t},\r\n\tfixed: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 0\r\n\t},\r\n\tindicator: {\r\n\t\tbackgroundColor: '#fff',\r\n\t},\r\n\tfullscreen: {\r\n\t\tmarginLeft: -theme.spacing(),\r\n\t\tmarginTop: '-5px',\r\n\t},\r\n\tgrid: {\r\n\t\tpaddingBottom: '30px'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TabBar(props) {\r\n\tlet { tabs, selectTab } = props;\r\n\tconst classes = useStyles();\r\n\tlet tabBarProps = useRef({});\r\n\t\r\n\t// tab\r\n\tconst [tab, setTab] = useState(0);\r\n\tconst handleChange = (event, selectedTab) => {\r\n\t\tselectTab(selectedTab, tabs[selectedTab]);\r\n\t\tsetTab(selectedTab);\r\n\t}\r\n\t\r\n\t// scroll\r\n\tconst [fixed, setFixed] = useState(false);\r\n\tconst handleScroll = useCallback(() => {\r\n\t\tconst threshold = (tabBarProps.current.top + tabBarProps.current.height - 53);\r\n\t\tconst fixed = window.scrollY >= threshold;\r\n\t\t\r\n\t\tsetFixed(prevFixed => {\r\n\t\t\tif (prevFixed !== fixed) {\r\n\t\t\t\tdocument.getElementById('root').style.paddingTop = fixed ? (threshold-5-8) + 'px' : 0;\r\n\t\t\t\treturn fixed;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn prevFixed;\r\n\t\t});\r\n\t\t\r\n\t}, [tabBarProps]);\r\n\r\n\tuseEffect(() => {\r\n\t\ttabBarProps.current = {\r\n\t\t\ttop: document.getElementById('tabBar').offsetTop,\r\n\t\t\theight: document.getElementById('tabBar').offsetHeight\r\n\t\t}\r\n\t\t\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\treturn () => window.removeEventListener('keydown', handleScroll, 0);\r\n\t\t\r\n\t}, [handleScroll]);\r\n\t\r\n\t// render tabs\r\n\tconst renderedTabs = tabs.map((tab, i) => {\r\n\t\tconst [ icon, label ] = tab.indexOf('|') > -1 ? tab.split('|') : [ null, tab ];\r\n\t\treturn <Tab key={'tab' + i} icon={<span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>} label={!fixed && Settings.tabsHideLabels !== true && label !== 'null' ? label : null} />\r\n\t});\r\n\t\r\n\treturn (\r\n\r\n<Tabs\r\n\tid=\"tabBar\"\r\n\tvalue={tab}\r\n\tonChange={handleChange}\r\n\tvariant=\"scrollable\"\r\n\tclasses={{\r\n\t\troot: clsx(classes.tabs, fixed && classes.fixed),\r\n\t\tindicator: classes.indicator\r\n\t}}>\r\n\t\r\n\t{renderedTabs}\r\n</Tabs>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport function TabPanel(props) {\r\n\tconst { children, selectedTab, renderedTab, fullscreen } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t// get map height based on viewport\r\n\tconst { height } = useWindowDimensions();\r\n\tconst [mapHeight, setMapHeight] = useState(height);\r\n\tlet topBarHeight = useRef({});\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttopBarHeight.current = document.getElementById('appBar').offsetHeight;\r\n\t\tsetMapHeight(height-topBarHeight.current+5);\r\n\t\t\r\n\t}, [height]);\r\n\t\r\n\t/*\r\n\t * Some components need to be visible upon loading, so proper initialise.\r\n\t * Due to the 'hidden' attribute though, they might be hidden.\r\n\t * This is a workaround to initially show everything for a short period of time and then hide according to tab settings.\r\n\t *\r\n\t */\r\n\tconst [hidden, setHidden] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => setHidden(selectedTab !== renderedTab), 10);\r\n\t\t\r\n\t}, [selectedTab, renderedTab]);\r\n\t\r\n\treturn (\r\n\r\n<Box\r\n\trole=\"tabpanel\"\r\n\thidden={hidden}\r\n\tid={'tabpanel-' + renderedTab}\r\n\tclassName={clsx(fullscreen ? classes.fullscreen : classes.grid)}\r\n\tstyle={{ height: mapHeight + 'px' }}\r\n\t>\r\n\t\r\n\t{children}\r\n</Box>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdrawer: {\r\n\t\twidth: 400\r\n\t}\r\n});\r\n\r\n\r\nclass Notifications extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, notifications } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Drawer\r\n\tanchor=\"right\"\r\n\topen={this.props.open}\r\n\tonClose={() => this.props.toggleDrawer('notificationDrawer', false)}\r\n\tclasses={{\r\n\t\tpaper: classes.drawer\r\n\t}}\r\n\t>\r\n\t\r\n</Drawer>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Notifications);\r\n","\r\nexport const ModuleSettings = {\r\n\tAdapterStatus: require('./AdapterStatus').ModuleSettings || {},\r\n\tChart: require('./Chart').ModuleSettings || {},\r\n\tDateTime: require('./DateTime').ModuleSettings || {},\r\n\tMap: require('./Map').ModuleSettings || {},\r\n\tMultimedia: require('./Multimedia').ModuleSettings || {},\r\n\tStateList: require('./StateList').ModuleSettings || {},\r\n\tStateListHorizontal: require('./StateListHorizontal').ModuleSettings || {},\r\n\tWeather: require('./Weather').ModuleSettings || {}\r\n}\r\n\r\nexport default {\r\n\tAdapterStatus: require('./AdapterStatus').default,\r\n\tChart: require('./Chart').default,\r\n\tDateTime: require('./DateTime').default,\r\n\tMap: require('./Map').default,\r\n\tMultimedia: require('./Multimedia').default,\r\n\tStateList: require('./StateList').default,\r\n\tStateListHorizontal: require('./StateListHorizontal').default,\r\n\tWeather: require('./Weather').default\r\n}","import React from 'react'\r\nimport Connection from '../Connection'\r\nimport Device from '../Device'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\r\nimport MuiDialogContent from '@material-ui/core/DialogContent'\r\nimport MuiDialogActions from '@material-ui/core/DialogActions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Modules from '../modules'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(2),\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n});\r\n\r\n\r\nconst DialogTitle = withStyles(styles)(props => {\r\n\tconst { children, classes, onClose, ...other } = props;\r\n\treturn (\r\n\r\n<MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n\t<Typography variant=\"h6\">{children}</Typography>\r\n\t{onClose ? (\r\n\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t<CloseIcon />\r\n\t</IconButton>\r\n\t) : null}\r\n</MuiDialogTitle>\r\n\r\n\t);\r\n});\r\n\r\nconst DialogContent = withStyles(theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(1)\r\n\t\t}\r\n\t},\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles(theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n}))(MuiDialogActions);\r\n\r\n\r\nexport default class Popup extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tchildren: []\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tlet device = this.props.contents && this.props.contents.device;\r\n\t\tif (device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\t\r\n\t\t\t// get from cache\r\n\t\t\tif (device.children.length) {\r\n\t\t\t\tconsole.info('Got ' + Object.keys(device.children).length + ' states for device ' + device.name + ' from cache.', device.children);\r\n\t\t\t\tthis.setState({ 'children': device.children }, () => this.forceUpdate());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// retrieve new\r\n\t\t\telse {\r\n\t\t\t\t// loop through states and request status\r\n\t\t\t\tlet responses = [];\r\n\t\t\t\tlet children = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (let stateKey in device.states) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (device.states[stateKey].state === undefined || device.options.hiddenStates.indexOf(stateKey) > -1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet child = new Device({\r\n\t\t\t\t\t\t\t'parent': device,\r\n\t\t\t\t\t\t\t'id': device.id + '#' + stateKey,\r\n\t\t\t\t\t\t\t'name': device.name,\r\n\t\t\t\t\t\t\t'function': device.function,\r\n\t\t\t\t\t\t\t//'states': { [stateKey]: device.states[stateKey] },\r\n\t\t\t\t\t\t\t'states': device.states,\r\n\t\t\t\t\t\t\t'options': {\r\n\t\t\t\t\t\t\t\t...device.options,\r\n\t\t\t\t\t\t\t\t'primary': stateKey,\r\n\t\t\t\t\t\t\t\t'secondary': null,\r\n\t\t\t\t\t\t\t\t'divider': children.length !== 0,\r\n\t\t\t\t\t\t\t\t'subgroup': null,\r\n\t\t\t\t\t\t\t\t'subtitle': null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tConnection.getConnection,\r\n\t\t\t\t\t\twindow.language\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// add child to parent\r\n\t\t\t\t\tdevice.children.push(child);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// retrieve state\r\n\t\t\t\t\tresponses.push(child.requestDeviceState(null, true));\r\n\t\t\t\t\tchildren.push(child);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tPromise.allSettled(responses).then(() => {\r\n\t\t\t\t\tconsole.info('Retrieved ' + Object.keys(children).length + ' states for device ' + device.name + '.', children);\r\n\t\t\t\t\tthis.setState({ 'children': children }, () => this.forceUpdate());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\tthis.setState({ 'children': [] }, () => this.forceUpdate());\r\n\t\t}\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\treturn !this.props.contents || this.props.contents.ts !== nextProps.contents.ts;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { open, closeDialog, contents } = this.props;\r\n\t\tconst { device } = contents;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog onClose={closeDialog} open={open || false} maxWidth={'md'} fullWidth={true}>\r\n\t<DialogTitle onClose={closeDialog}>\r\n\t\t{device.name}\r\n\t</DialogTitle>\r\n\t<DialogContent dividers style={{ padding: 0 }}>\r\n\t\t\r\n\t\t<Modules.StateList openDialog={null} devices={this.state.children} component={true} action={true} />\t\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={closeDialog} color=\"primary\">\r\n\t\t\tClose\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t\t);\r\n\t};\r\n}\r\n","import React from 'react'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tcard: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t},\r\n\tcardHeaderNoContents: {\r\n\t\tpadding: theme.spacing(),\r\n\t},\r\n\tcardAvatar: props => ({\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff',\r\n\t\tfontSize: '24px',\r\n\t\t...props\r\n\t}),\r\n\tcardContent: {\r\n\t\tpadding: theme.spacing(0, 2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpadding: theme.spacing(0)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Widget(props) {\r\n\tconst { title, icon, iconStyle } = props;\r\n\tconst classes = useStyles(iconStyle);\r\n\t\r\n\treturn (\r\n\r\n<Card className={classes.card}>\r\n\t<CardHeader\r\n\t\tavatar={icon !== null &&\r\n\t\t\t<Avatar variant=\"rounded\" classes={{ root: classes.cardAvatar }}>\r\n\t\t\t\t{React.createElement('span', { 'className': 'mdi mdi-' + (icon || 'home') })}\r\n\t\t\t</Avatar>\r\n\t\t}\r\n\t\ttitle={title &&\r\n\t\t\t<Typography variant=\"h5\" component=\"h2\">\r\n\t\t\t\t{title}\r\n\t\t\t</Typography>\r\n\t\t}\r\n\t/>\r\n\t<CardContent className={classes.cardContent}>\r\n\t\t{props.children}\r\n\t</CardContent>\r\n</Card>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\n\r\nimport Connection from './Connection'\r\nimport Settings from './Settings'\r\n\r\nimport Dialog from '@material-ui/core/Dialog'\r\n\r\nimport Pages from './pages'\r\nimport TopBar from './components/TopBar'\r\nimport TabBar, { TabPanel } from './components/TabBar'\r\nimport Notifications from './components/Notifications'\r\nimport GridContainer from './components/GridContainer'\r\nimport Popup from './components/Popup'\r\nimport Widget from './components/Widget'\r\nimport Modules, { ModuleSettings } from './modules'\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGroup = (groupId, group, props = {}) => {\r\n\t\r\n\t// group empty\r\n\tif (!group && ModuleSettings[group.settings.component.module].noDevicesAllowed !== true) {\r\n\t\tconsole.error('Group ' + groupId + ' defined in columns but not assigned to any devices!');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// get module for component\r\n\tgroup.settings.component = typeof group.settings.component === 'string' ? { 'module': group.settings.component } : (group.settings.component || {});\r\n\tconst Tag = Modules[group.settings.component.module || 'StateList'];\r\n\t\r\n\t// get tag\r\n\tif (Tag === undefined) {\r\n\t\tconsole.error('Undefined component \"' + group.settings.component.module + '\" used!');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn <Tag key={'Tag' + groupId} devices={group.devices} openDialog={props.action ? props.action : null} settings={{ ...group.settings, ...props }} />\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGridContents = (contents, groups, props = {}) => {\r\n\t\r\n\tlet gridContents = {};\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tlet columnContents = contents[column];\r\n\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\r\n\t\t// no contents, thus add placeholder\r\n\t\tif (!columnContents || !Object.keys(columnContents).length) {\r\n\t\t\tgridContents[column].push(null);\r\n\t\t}\r\n\t\t\r\n\t\t// add contents\r\n\t\telse {\r\n\t\t\tfor (let groupId in columnContents) {\r\n\t\t\t\t\r\n\t\t\t\tlet group = groups[groupId] || {};\r\n\t\t\t\tgroup.devices = group.devices || [];\r\n\t\t\t\tgroup.settings = columnContents[groupId] || {};\r\n\t\t\t\tgroup.settings.component = typeof group.settings.component === 'string' ? { 'module': group.settings.component } : (group.settings.component || {});\r\n\t\t\t\tgroup.settings.module = ModuleSettings[group.settings.component.module] || {};\r\n\t\t\t\t\r\n\t\t\t\tlet content = getGroup(groupId, group, props);\r\n\t\t\t\tif ((group.devices.length > 0 || group.settings.module.noDevicesAllowed) && content) {\r\n\t\t\t\t\tgridContents[column].push(\r\n\t\t\t\t\t\t<Widget key={'Box-' + groupId}\r\n\t\t\t\t\t\t\ttitle={group.settings.title === null ? null : (group.settings.title || group.name || group.settings.module.title)}\r\n\t\t\t\t\t\t\ticon={group.settings.icon === null ? null : (group.settings.icon || group.settings.module.icon)}\r\n\t\t\t\t\t\t\ticonStyle={group.settings.iconStyle}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t</Widget>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn gridContents;\r\n}\r\n\r\n\r\nexport default class Jarvis extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tconnectionStatus: this.props.connectionStatus || false,\r\n\t\t\t\r\n\t\t\tselectedTab: 0,\r\n\t\t\ttabTitle: '',\r\n\t\t\t\r\n\t\t\tpage: 'home',\r\n\t\t\t\r\n\t\t\tnotificationDrawer: false,\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationsUnread: 0,\r\n\t\t\t\r\n\t\t\tdialog: false,\r\n\t\t\tdialogContents: {\r\n\t\t\t\t'ts': 0,\r\n\t\t\t\t'device': {}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// bind methods\r\n\t\tthis.closeDialog = this.closeDialog.bind(this);\r\n\t\tthis.openDialog = this.openDialog.bind(this);\r\n\t\tthis.selectTab = this.selectTab.bind(this);\r\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\r\n\t\tthis.navigate = this.navigate.bind(this);\r\n\t\t\r\n\t\t// get connection\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\t// initialise\r\n\t\tthis.gridContents = {};\r\n\t\tthis.layout = Settings.getSetting('layout');\r\n\t\tthis.tabs = Object.keys(this.layout);\r\n\t\tthis.tabsEnabled = this.tabs[0] !== 1;\r\n\t\tthis.state.tabTitle = this.tabs[this.state.selectedTab];\r\n\t\t\r\n\t\t// no tabs defined, so layout wrap into default tab\r\n\t\tif (!this.tabsEnabled) {\r\n\t\t\tthis.layout = { 'Home': this.layout };\r\n\t\t\tthis.tabs.push('1');\r\n\t\t}\r\n\t\t\r\n\t\t// widget props\r\n\t\tthis.widgetProps = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get notifications\r\n\t\tthis.socket.getState('jarvis.0.notifications').then(notifications => {\r\n\t\t\tnotifications = (notifications && notifications.val && JSON.parse(notifications.val)) || [];\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotificationsUnread: notifications.filter(notification => !notification.unread || notification.unread !== false).length,\r\n\t\t\t\tnotifications: notifications\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis.socket.subscribeState('jarvis.0.notifications', notifications => console.log(notifications));\r\n\t}\r\n\t\r\n\tgetTabPanels() {\r\n\t\t\r\n\t\tlet tab = 0;\r\n\t\tlet tabPanels = [];\r\n\t\tfor (let tabLabel in this.layout) {\r\n\t\t\tconst contents = this.layout[tabLabel];\r\n\t\t\t\r\n\t\t\t// fullscreen in component\r\n\t\t\tlet groupId = Object.keys(contents)[0];\r\n\t\t\tlet fullscreen = Number.isNaN(parseInt(groupId));\r\n\t\t\t\r\n\t\t\tif (!this.gridContents[tabLabel] && fullscreen) {\r\n\t\t\t\tthis.gridContents[tabLabel] = getGroup(contents, { ...this.props.groups[groupId], settings: contents[groupId] }, { action: this.openDialog, ...this.widgetProps });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// grid layout\r\n\t\t\telse if (!this.gridContents[tabLabel]) {\r\n\t\t\t\tthis.gridContents[tabLabel] = <GridContainer contents={getGridContents(contents, this.props.groups, { action: this.openDialog, ...this.widgetProps })} />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet tabPanel = (\r\n\t\t\t\t<TabPanel key={'tabPanel-' + tab} renderedTab={tab} selectedTab={this.state.selectedTab} fullscreen={fullscreen}>\r\n\t\t\t\t\t{this.gridContents[tabLabel]}\r\n\t\t\t\t</TabPanel>\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\ttabPanels.push(tabPanel);\r\n\t\t\ttab++;\r\n\t\t}\r\n\t\t\r\n\t\treturn tabPanels;\r\n\t}\r\n\t\r\n\tcloseDialog() {\r\n\t\tthis.setState({ 'dialog': false, 'dialogContents': { 'ts': Date.now(), 'device': {} } });\r\n\t}\r\n\t\r\n\topenDialog(device) {\r\n\t\tthis.setState({ 'dialog': true, 'dialogContents': { 'ts': Date.now(), 'device': device } });\r\n\t}\r\n\t\r\n\tselectTab(tab, title) {\r\n\t\tthis.setState({ selectedTab: tab, tabTitle: title });\r\n\t}\r\n\t\r\n\ttoggleDrawer(drawer, open) {\r\n\t\tthis.setState({ [drawer]: open });\r\n\t}\r\n\t\r\n\tnavigate(page) {\r\n\t\tthis.setState({ page });\r\n\t}\r\n\t\r\n    render() {\r\n\t\tconst Page = Pages[this.state.page] || null;\r\n        return (\r\n\r\n<React.Fragment>\r\n\t<TopBar\r\n\t\ttitle={Settings.topBarTitle || (this.tabsEnabled && this.state.tabTitle) || 'jarvis'}\r\n\t\tconnectionStatus={this.state.connectionStatus}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnavigate={this.navigate}\r\n\t\tnotifications={this.state.notificationsUnread}\r\n\t\t>\r\n\t\t\r\n\t\t{this.tabsEnabled && <TabBar tabs={this.tabs} selectTab={this.selectTab} />}\r\n\t</TopBar>\r\n\t\r\n\t\r\n\t{/* DRAWER: NOTIFICATIONS */}\r\n\t<Notifications\r\n\t\topen={this.state.notificationDrawer}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnotifications={this.state.notifications}\r\n\t\t/>\r\n\t\r\n\t\r\n\t{/* PAGE */}\r\n\t{Page && <Dialog fullWidth={true} maxWidth={'xl'} open={(this.state.page !== 'home')} onClose={() => this.navigate('home')}>\r\n\t\t<Page\r\n\t\t\tdevices={this.props.devices}\r\n\t\t\tonClose={() => this.navigate('home')}\r\n\t\t\t/>\r\n\t\t\r\n\t</Dialog>}\r\n\t\r\n\t\r\n\t{/* POPUP */}\r\n\t<Popup open={this.state.dialog} contents={this.state.dialogContents} closeDialog={this.closeDialog} />\r\n\t{this.getTabPanels()}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\nimport { NODES } from './config/config'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nimport GridContainer from './components/GridContainer'\r\nimport StatusSnackbar from './components/StatusSnackbar'\r\n\r\nimport config from './config/config.dev.js'\r\nimport i18n from './i18n'\r\nimport Connection from './Connection'\r\nimport Settings from './Settings'\r\nimport Device from './Device'\r\nimport Jarvis from './Jarvis'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tmargin: '10px 0 0 0',\r\n\t\tcolor: '#999'\r\n\t},\r\n\tgridItem: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmarginRight: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n/*\r\n * CONSTANTS\r\n *\r\n */\r\nclass App extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tloaded: [],\r\n\t\t\tconnected: false,\r\n\t\t\terror: false,\r\n\t\t\terrorMessage: '',\r\n\t\t\t\r\n\t\t\ttheme: null\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// connect and get connection\r\n\t\tconst errorHandler = err => {\r\n\t\t\tthis.setState({ connected: false, error: true, errorMessage: i18n.t(typeof err === 'string' ? err : err.message) + '..' });\r\n\t\t\tsetTimeout(function reconnect() {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(i18n.t('Attempting reconnect') + '..');\r\n\t\t\t\tConnection.reconnect();\r\n\t\t\t\tsetTimeout(() => reconnect, 15*1000);\r\n\t\t\t\t\r\n\t\t\t}, 10*1000);\r\n\t\t};\r\n\t\t\r\n\t\tconst url = window.location.port === '3000' ? config.iobrokerWebAdapterUrl :\r\n\t\t\twindow.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n\t\t\r\n\t\tconst listeners = [\r\n\t\t\t{ 'event': 'connect', 'callback': () => this.setState({ connected: true, error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'reconnect', 'callback': () => this.setState({ connected: 'pending', error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'disconnect', 'callback': errorHandler },\r\n\t\t\t{ 'event': 'error', 'callback': errorHandler }\r\n\t\t];\r\n\t\t\r\n\t\tconsole.log('Connect to ' + url + '...');\r\n\t\tthis.socket = Connection.connect(url, listeners);\r\n\t\t\r\n\t\t// retrieve settings\r\n\t\tthis.settings = {};\r\n\t\tthis.socket.getState(NODES.SETTINGS)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\tthis.settings = { ...this.settings, ...JSON.parse(state.val) || {} };\r\n\t\t\t\t\t\tSettings.setSettings(this.settings);\r\n\t\t\t\t\t\tSettings.applySettings();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// get theme\r\n\t\t\t\t\t\timport('./theme').then(theme => this.setState({ theme: theme.default }));\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\t\t\tif (tab === undefined) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\t\terrorMessage: i18n.t('Please create the configuration. See documentation.')\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState({ loaded: [ ...this.state.loaded, 'settings' ] });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tconsole.error('GET_SETTINGS: ' + err.message);\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing settings') + '!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error('GET_SETTINGS: ' + err.message);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: typeof err === 'string' ? i18n.t(err) : i18n.t(err.message)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n\t\t// retrieve ioBroker config\r\n\t\tthis.settings.iobroker = {};\r\n\t\tthis.socket.getObject('system.config', (err, data) => {\r\n\t\t\tif (data && data.common) {\r\n\t\t\t\tthis.settings.iobroker = data.common;\r\n\t\t\t\tSettings.setSettings({ iobroker: this.settings.iobroker });\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// retrieve devices\r\n\t\tthis.devices = {};\r\n\t\tthis.groups = {};\r\n\t\t\r\n\t\tthis.socket.getState(NODES.DEVICES)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.devices = JSON.parse(state.val);\r\n\t\t\t\t\tthis.processDevices(this.devices).then(groups => {\r\n\t\t\t\t\t\tthis.groups = groups;\r\n\t\t\t\t\t\tthis.setState({ loaded: [ ...this.state.loaded, 'groups' ] });\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tconsole.error('GET_DEVICES: ' + err.message);\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing devices') + '!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error('GET_DEVICES: ' + err.message);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: i18n.t('Socket failed while getting devices') + '!'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n    }\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgroupDevice(groups, device) {\r\n\t\t\r\n\t\t// add device to group(s)\r\n\t\tlet options = device.get('options');\r\n\t\toptions.groups.forEach(group => {\r\n\t\t\t\r\n\t\t\tlet groupId = group.toLowerCase().replace(/ /g, '');\r\n\t\t\tif (!groups[groupId]) {\r\n\t\t\t\tgroups[groupId] = { 'id': groupId, 'name': group, 'devices': [device] };\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgroups[groupId].devices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn groups;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevice(deviceProperties) {\r\n\t\t\r\n\t\tlet promises = [];\r\n\t\tlet device = null;\r\n\t\ttry {\r\n\t\t\tdevice = new Device(deviceProperties, this.socket);\r\n\t\t\t\r\n\t\t\t// request primary state value\r\n\t\t\tpromises.push(device.requestDeviceState(null, true));\r\n\t\t\t\r\n\t\t\t// request secondary state value\r\n\t\t\tif (device.secondaryStateKey) {\r\n\t\t\t\tpromises.push(device.requestDeviceState(device.secondaryStateKey, true));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tconsole.warn(err.message);\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tPromise.allSettled(promises).then(results => {\r\n\t\t\t\t\r\n\t\t\t\tresults.forEach(result => {\r\n\t\t\t\t\tif (result.status === 'rejected') {\r\n\t\t\t\t\t\tconsole.error(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve(device);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevices(deviceList) {\r\n\t\t\r\n\t\t// loop through all devices of in the device list\r\n\t\tlet promises = [];\r\n\t\tlet groups = {};\r\n\t\t\r\n\t\tlet devices = 0, groupedDevices = 0;\r\n\t\tfor (let deviceId in deviceList) {\r\n\t\t\tdevices++;\r\n\t\t\t\r\n\t\t\tdeviceList[deviceId].options = deviceList[deviceId].jarvis;\r\n\t\t\tdelete deviceList[deviceId].jarvis;\r\n\t\t\t\r\n\t\t\tlet deviceProperties = { ...deviceList[deviceId], 'id': deviceId };\r\n\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.processDevice(deviceProperties).then(device => {\r\n\t\t\t\r\n\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treject(deviceId);\r\n\t\t\t\t});\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\t// check states for own device settings\r\n\t\t\tfor (let stateKey in deviceProperties.states) {\r\n\t\t\t\t\r\n\t\t\t\tlet state = deviceProperties.states[stateKey];\r\n\t\t\t\tif (state && state.jarvis !== undefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.processDevice({ ...deviceProperties, 'id': deviceId + '#' + stateKey, 'states': { [stateKey]: state }, 'options': state.jarvis }).then(device => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treject(deviceId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}));\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => Promise.allSettled(promises).then(res => {\r\n\t\t\t\r\n\t\t\t// sort groups\r\n\t\t\tfor (let groupId in groups) {\r\n\t\t\t\tgroups[groupId].devices.sort((item1, item2) => {\r\n\t\t\t\t\tif (item1.options.sort > item2.options.sort) return 1;\r\n\t\t\t\t\telse if (item2.options.sort > item1.options.sort) return -1;\r\n\t\t\t\t\telse return 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// return\r\n\t\t\tconsole.info('Processed ' + devices + ' devices. Added ' + groupedDevices + ' devices in ' + Object.keys(groups).length + ' groups.', res, groups);\r\n\t\t\tresolve(groups);\r\n\t\t}));\r\n\t}\r\n\t\r\n\trenderError(error) {\r\n\t\terror = error || this.state.errorMessage;\r\n\t\tconsole.error('Error:', error);\r\n\t\treturn (\r\n\r\n<StatusSnackbar\r\n\tkey={'StatusSnackbar'}\r\n\tvariant=\"error\"\r\n\tcloseButton={false}\r\n\tmessage={error.toString()}\r\n\t/>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingProgress() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\r\n<Grid\r\n\tkey=\"loadingProcess\"\r\n\tcontainer\r\n\tspacing={0}\r\n\tdirection=\"column\"\r\n\tjustify=\"center\"\r\n\talignItems=\"center\"\r\n\tstyle={{ minHeight: \"100vh\" }}\r\n\t>\r\n\r\n\t<CircularProgress />\r\n\t<Typography className={classes.loading}>{i18n.t('Retrieving settings')}...</Typography>\r\n\r\n</Grid>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingSkeleton(props) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst { topBar, tabBar, gridColumns } = props;\r\n\t\t\r\n\t\tconst SkeletonLoader = (props) => <Skeleton animation=\"wave\" variant=\"rect\" className={classes.gridItem} height={props.height} />;\r\n\t\t\r\n\t\tlet gridContents = {}\r\n\t\tfor (let column = 1; column <= gridColumns; column++) {\r\n\t\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\t\r\n\t\t\tlet loaders = Math.random() * (5 - 2) + 2;\r\n\t\t\tfor (let loader = 1; loader <= loaders; loader++) {\r\n\t\t\t\tgridContents[column].push(<SkeletonLoader key={column + '#' + loader} height={(Math.random() * (400 - 100) + 100)} />);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t{topBar && <Skeleton animation=\"wave\" variant=\"rect\" height={64} />}\r\n\t{tabBar && <Skeleton animation=\"wave\" variant=\"rect\" height={48} />}\r\n\t<GridContainer key=\"loadingSkeleton\" contents={gridContents} />\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n    render() {\r\n\t\t\r\n\t\t// error message\r\n\t\tconst error = this.state.error ? this.renderError() : null;\r\n\t\t\r\n\t\t// loading screens\r\n\t\tif (this.state.error && this.state.loaded.length < 2) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\telse if (this.state.loaded.indexOf('settings') === -1) {\r\n\t\t\treturn this.renderLoadingProgress();\r\n\t\t}\r\n\t\telse if (this.state.loaded.indexOf('groups') === -1) {\r\n\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\treturn tab === undefined ? null : this.renderLoadingSkeleton({ topBar: true, tabBar: tab !== 1, gridColumns: (tab !== 1 ? Object.keys(this.settings.layout[tab]).length : tab.length) });\r\n\t\t}\r\n\t\t\r\n\t\t// App\r\n\t\tconsole.log('Connected:', this.state.connected)\r\n\t\treturn (\r\n\r\n<ThemeProvider theme={this.state.theme}>\r\n\t{error}\r\n\t<Jarvis key=\"jarvis\" connectionStatus={this.state.connected} devices={this.devices} groups={this.groups} />\r\n</ThemeProvider>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\n\r\nimport { lighten, makeStyles } from '@material-ui/core/styles'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\n\r\nconst useToolbarStyles = makeStyles(theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: '1 1 100%',\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTableToolbar(props) {\r\n  const classes = useToolbarStyles();\r\n  const { title, numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t{title}\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 && (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\nexport default function EnhancedTableHead(props) {\r\n  const { classes, headCells, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort } = props;\r\n  const createSortHandler = property => event => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ 'aria-label': 'select all' }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map(headCell => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.align || 'left'}\r\n            padding={headCell.disablePadding ? 'none' : 'default'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              <strong>{headCell.label}</strong>\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\nexport default function EnhancedTable(props) {\r\n  const { columns, pageRows, emptyRows, selected, onClick } = props;\r\n  const isSelected = id => selected.indexOf(id) !== -1;\r\n\r\n  return (\r\n\r\n<TableBody>\r\n  {pageRows.map((row, index) => {\r\n\t  const isItemSelected = isSelected(row.id);\r\n\t  const labelId = `enhanced-table-checkbox-${index}`;\r\n\r\n\t  return (\r\n\t\t<TableRow\r\n\t\t  hover\r\n\t\t  onClick={event => onClick(event, row.id)}\r\n\t\t  role=\"checkbox\"\r\n\t\t  aria-checked={isItemSelected}\r\n\t\t  tabIndex={-1}\r\n\t\t  key={row.id}\r\n\t\t  selected={isItemSelected}\r\n\t\t>\r\n\t\t  <TableCell padding=\"checkbox\">\r\n\t\t\t<Checkbox\r\n\t\t\t  checked={isItemSelected}\r\n\t\t\t  inputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t/>\r\n\t\t  </TableCell>\r\n\t\t  \r\n\t\t  {columns.map(column => (\r\n\t\t\t<TableCell key={'TableCell-' + index + '-' + column.id} id={labelId} scope=\"row\" padding=\"none\">{row[column.id] || ''}</TableCell>\r\n\t\t  ))}\r\n\t\t  \r\n\t\t</TableRow>\r\n\t  );\r\n\t})}\r\n  {emptyRows > 0 && (\r\n\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t  <TableCell colSpan={6} />\r\n\t</TableRow>\r\n  )}\r\n</TableBody>\r\n\r\n  );\r\n}","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TablePagination from '@material-ui/core/TablePagination'\r\n\r\nimport EnhancedTableToolbar from '../components/EnhancedTableToolbar'\r\nimport EnhancedTableHead from '../components/EnhancedTableHead'\r\nimport EnhancedTableBody from '../components/EnhancedTableBody'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  \r\n  const { title, headCells, CustomTableBody, rows, pagination, defaultOrder, defaultOrderBy, defaultSelected, defaultPage, defaultRowsPerPage } = props;\r\n  \r\n  const [order, setOrder] = React.useState(defaultOrder || 'asc');\r\n  const [orderBy, setOrderBy] = React.useState(defaultOrderBy || headCells[0].id);\r\n  const [selected, setSelected] = React.useState(defaultSelected || []);\r\n  const [page, setPage] = React.useState(defaultPage || 0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(pagination ? (defaultRowsPerPage || 5) : rows.length);\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map(n => n.id);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = event => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const handleClick = (event, id) => {\r\n    const selectedIndex = selected.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TableBody = CustomTableBody || EnhancedTableBody;\r\n  return (\r\n\t<React.Fragment>\r\n        <EnhancedTableToolbar title={title} numSelected={selected.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n\t\t\t  headCells={headCells}\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={rows.length}\r\n            />\r\n\t\t\t\r\n\t\t\t<TableBody\r\n\t\t\t\tcolumns={headCells}\r\n\t\t\t\tpageRows={stableSort(rows, getComparator(order, orderBy)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)}\r\n\t\t\t\temptyRows={rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage)}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\tonClick={handleClick}\r\n\t\t\t\t/>\r\n\t\t\t\r\n          </Table>\r\n        </TableContainer>\r\n\t\t{pagination && <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={rows.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />}\r\n\t</React.Fragment>\r\n\t\r\n  );\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport config, { NODES } from '../config/config'\r\nimport Connection from '../Connection'\r\nimport Settings from '../Settings'\r\nimport i18n from '../i18n'\r\n\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Select from '@material-ui/core/Select'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n\r\nimport EnhancedTable from '../components/EnhancedTable'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\ttabs: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\theading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tflexBasis: '33.33%',\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tsecondaryHeading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n\tdialogContent: {\r\n\t\tbackgroundColor: '#fafafa'\r\n\t},\r\n\ttitle: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center'\r\n\t},\r\n\tinput: {\r\n\t\twidth: 300\r\n\t},\r\n\ttextField: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tmarginRight: theme.spacing(1)\r\n\t},\r\n\trawEditor: {\r\n\t\tfontFamily: 'Roboto Mono,Consolas,Courier New,monospace !important'\r\n\t}\r\n});\r\n\r\n\r\nconst headCells = [\r\n  { id: 'name', disablePadding: true, label: i18n.t('Name') },\r\n  { id: 'function', disablePadding: false, label: i18n.t('Function') },\r\n  { id: 'states', disablePadding: false, label: i18n.t('States') },\r\n  { id: 'jarvis', disablePadding: false, label: i18n.t('Jarvis') },\r\n  { id: 'attributes', disablePadding: false, label: i18n.t('Attributes') },\r\n];\r\n\r\nclass SettingsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tdelete Settings.settings.iobroker;\r\n\t\tthis.state = {\r\n\t\t\ttab: 0,\r\n\t\t\tpanel: false,\r\n\t\t\tsettings: Settings.settings || {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.rows = Object.keys(this.props.devices).map(deviceId => ({ id: deviceId, ...this.props.devices[deviceId] }));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\thandleTabChange = (event, tab) => this.setState({ tab });\r\n\thandlePanelChange = panel => (event, isExpanded) => this.setState({ panel: isExpanded ? panel : false });\r\n\thandleSwitchChange = key => event => {\r\n\t\tlet userInput = (event && event.target && event.target.checked) || false;\r\n\t\tthis.setState(prevState => ({ settings: { ...prevState.settings, [key]: userInput } }));\r\n\t}\r\n\t\r\n\thandleTextChange = key => event => {\r\n\t\tlet userInput = (event && event.target && event.target.value) || '';\r\n\t\t\r\n\t\tif (key) {\r\n\t\t\tthis.setState(prevState => ({ settings: { ...prevState.settings, [key]: userInput } }));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setState({ settings: JSON.parse(userInput) });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tsave = () => {\r\n\t\t\r\n\t\tSettings.setSettings(this.state.settings);\r\n\t\tConnection.getConnection.setState(NODES.SETTINGS, JSON.stringify(Settings.settings))\r\n\t\t\t.then(() => window.location.reload())\r\n\t\t\t.catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSettingForSelect(key, setting) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tsetting.options = setting.options || {};\r\n\t\tconst options = Object.keys(setting.options).map(option => <MenuItem key={'MenuItem-' + key + '-' + option} value={option}>{setting.options[option]}</MenuItem>);\r\n\t\treturn (\r\n\r\n<FormControl key={'FormControl-' + key} className={classes.formControl}>\r\n\t<InputLabel>{setting.label}</InputLabel>\r\n\t<Select\r\n\t\tkey={'Select-' + key}\r\n\t\tclassName={classes.input}\r\n\t\tvalue={this.state.settings[key] || setting.default || ''}\r\n\t\tonChange={this.handleTextChange(key)}\r\n\t\t>\r\n\t\t\r\n\t\t{options}\r\n\t</Select>\r\n\t<FormHelperText>{setting.helperText || ''}</FormHelperText>\r\n</FormControl>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSettingForText(key, setting) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<TextField\r\n\tkey={'TextField-' + key}\r\n\tclassName={clsx(classes.input, classes.textField)}\r\n\tlabel={setting.label}\r\n\tplaceholder={setting.default || ''}\r\n\thelperText={setting.helperText || ''}\r\n\tonChange={this.handleTextChange(key)}\r\n\tvalue={this.state.settings[key] || ''}\r\n\t/>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSettingForSwitch(key, setting) {\r\n\t\t\r\n\t\treturn (\r\n\r\n<FormControlLabel\r\n\tkey={'FormControlLabel-' + key}\r\n\tcontrol={<Switch checked={this.state.settings[key] !== undefined ? this.state.settings[key] : (setting.default || false)} onChange={this.handleSwitchChange(key)} />}\r\n\tlabel={setting.label}\r\n\t/>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSetting(key, setting) {\r\n\t\t\r\n\t\tswitch(setting.type) {\r\n\t\t\tcase 'text':\r\n\t\t\t\treturn this.renderSettingForText(key, setting);\r\n\t\t\t\r\n\t\t\tcase 'switch':\r\n\t\t\t\treturn this.renderSettingForSwitch(key, setting);\r\n\t\t\t\r\n\t\t\tcase 'select':\r\n\t\t\t\treturn this.renderSettingForSelect(key, setting);\r\n\t\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderPanel(key, panel) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst settings = Object.keys(panel.settings).map(setting => this.renderSetting(setting, panel.settings[setting]));\r\n\t\treturn (\r\n\r\n<ExpansionPanel\r\n\tkey={'ExpansionPanel-' + key}\r\n\texpanded={this.state.panel === key}\r\n\tonChange={this.handlePanelChange(key)}\r\n\t>\r\n\t\r\n\t<ExpansionPanelSummary\r\n\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\tid={'panel-header-' + key}\r\n\t\t>\r\n\t\t\r\n\t\t<Typography className={classes.heading}>{panel.label}</Typography>\r\n\t\t{panel.description && <Typography className={classes.secondaryHeading}>{panel.description}</Typography>}\r\n\t</ExpansionPanelSummary>\r\n\t<ExpansionPanelDetails>\r\n\t\t{settings}\r\n\t</ExpansionPanelDetails>\r\n</ExpansionPanel>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\trenderTableForDevices = (props) => {\r\n\t\tconst { columns, pageRows, emptyRows, selected, onClick } = props;\r\n\t\tconst isSelected = id => selected.indexOf(id) !== -1;\r\n\t\t\r\n\t\treturn (\r\n\r\n<TableBody>\r\n\t{this.rows.map((device, index) => {\r\n\t\tconst isItemSelected = isSelected(device.id);\r\n\t\tconst labelId = `device-${index}`;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\tonClick={event => props.onClick(event, device.id)}\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\taria-checked={isItemSelected}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={device.id}\r\n\t\t\t\tselected={isItemSelected}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell padding=\"checkbox\"><Checkbox checked={isItemSelected} inputProps={{ 'aria-labelledby': labelId }} /></TableCell>\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField InputProps={{ disableUnderline: true }} style={{ width: 400 }} value={device.name} /></TableCell>\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField InputProps={{ disableUnderline: true }} style={{ width: 400 }} value={device.function} /></TableCell>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField /></TableCell>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField /></TableCell>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField /></TableCell>\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t})}\r\n</TableBody>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst panels = Object.keys(config).map(panel => this.renderPanel(panel, config[panel]));\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t<DialogTitle disableTypography>\r\n\t\t<Typography variant=\"h6\">Configuration</Typography>\r\n\t\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={() => this.props.onClose()}>\r\n\t\t\t<CloseIcon />\r\n\t\t</IconButton>\r\n\t</DialogTitle>\r\n\t<DialogContent className={classes.dialogContent}>\r\n\t\t\r\n\t\t<Paper square>\r\n\t\t\t<Tabs\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tvalue={this.state.tab}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tonChange={this.handleTabChange}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Tab label=\"Devices\" />\r\n\t\t\t\t<Tab label=\"Settings\" />\r\n\t\t\t\t<Tab label=\"Layout\" />\r\n\t\t\t\t<Tab label={[\"Settings & Layout\", <br key='tab' />, \"Raw Editor\"]} />\r\n\t\t\t</Tabs>\r\n\t\t</Paper>\r\n\t\t<div hidden={this.state.tab !== 0}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<EnhancedTable\r\n\t\t\t\t\ttitle=\"Devices\"\r\n\t\t\t\t\theadCells={headCells}\r\n\t\t\t\t\trows={this.rows}\r\n\t\t\t\t\tCustomTableBody={this.renderTableForDevices}\r\n\t\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div hidden={this.state.tab !== 1} style={{ width: '100%' }}>\r\n\t\t\t<Paper className={classes.title}>\r\n\t\t\t\t<Typography variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\t\t{i18n.t('Settings')}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Paper>\r\n\t\t\t{panels}\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div hidden={this.state.tab !== 2}>\r\n\t\t\tLayout\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div hidden={this.state.tab !== 3} style={{ width: '100%' }}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\t\t{i18n.t('Raw Editor')}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tInputProps={{ className: classes.rawEditor }}\r\n\t\t\t\t\tkey={'TextField-Raw'}\r\n\t\t\t\t\tmultiline\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tonChange={this.handleTextChange(null)}\r\n\t\t\t\t\tvalue={JSON.stringify(this.state.settings, null, 3)}\r\n\t\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={() => this.props.onClose()} color=\"secondary\">\r\n\t\t\t{i18n.t('Cancel')}\r\n\t\t</Button>\r\n\t\t<Button onClick={this.save} color=\"primary\">\r\n\t\t\t{i18n.t('Save')}\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SettingsPage);\r\n","import { de } from 'date-fns/locale'\r\nexport const locales = { de }\r\n\r\n/**\r\n * Internationalization\r\n * Based on https://raw.githubusercontent.com/ioBroker/adapter-react/master/src/i18n.js.\r\n * Copyright 2018-2019 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n *\r\n */\r\nexport default class i18n {\r\n\r\n\t/*\r\n\t * holds the translations\r\n\t */\r\n\tstatic translations = {};\r\n\r\n\t/*\r\n\t * default language\r\n\t */\r\n\tstatic language = (navigator.language || navigator.userLanguage || 'en-EN');\r\n\r\n\t/**\r\n\t * Override default language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setLanguage(language) {\r\n\t\tif (language) {\r\n\t\t\ti18n.language = language;\r\n\t\t\tconsole.log('i18n: Set language to ' + language + '.');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads multiple translations.\r\n\t *\r\n\t * @param\t{String|Array}\tlanguages\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslations(languages) {\r\n\t\t\r\n\t\tif (languages) {\r\n\t\t\tlanguages = Array.isArray(languages) ? languages : [languages];\r\n\t\t\tlanguages.forEach(language => i18n.loadTranslation(language));\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads a translation.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslation(language = i18n.language) {\r\n\t\t\r\n\t\tif (language) {\r\n\t\t\tlet translation;\r\n\t\t\ttry {\r\n\t\t\t\ttranslation = require('./i18n/' + language + '.js').default;\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.error(err.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ti18n.setTranslation(language, translation);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a translation for language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @param\t{Object}\ttranslation\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setTranslation(language, translation) {\r\n\t\tif (language && translation) {\r\n\t\t\ti18n.translations[language] = { ...i18n.translations[language] || {}, ...translation };\r\n\t\t\tconsole.log('i18n: Set translations for language ' + language + '.');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getLanguage(isoLong = false) {\r\n\t\treturn i18n.language.substr(0, isoLong ? 5 : 2);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\t{String}\tword\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @param\t{Boolean}\t[options.ucFirst=false]\r\n\t * @param\t{Object}\t[placeholders={}]\r\n\t * @param\t{String}\t[language=i18n.language]\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic t(word = '', options = {}, placeholders = {}, language = i18n.language) {\r\n\t\t\r\n\t\tword = word.toString();\r\n\t\tif (i18n.translations[language]) {\r\n\t\t\t\r\n\t\t\t// check if word is concatenated\r\n\t\t\tif (word.indexOf('#') > -1) {\r\n\t\t\t\t\r\n\t\t\t\tlet parts = word.split('#');\r\n\t\t\t\twhile (parts.length > 0 && !i18n.translations[language][parts.join('#')]) {\r\n\t\t\t\t\tparts.shift();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tword = i18n.translations[language][parts.join('#')] || word;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tword = i18n.translations[language][word] || word;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// replace placeholders\r\n\t\tfor (let key in placeholders) {\r\n\t\t\tword = word.replace(RegExp('%' + key + '%', 'g'), placeholders[key]);\r\n\t\t}\r\n\t\t\r\n\t\t// options\r\n\t\tif (options.ucFirst) {\r\n\t\t\tword = word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}\r\n\t\t\r\n\t\treturn word;\r\n\t}\r\n}\r\n","import i18n from '../i18n'\r\n\r\nexport const NODES = {\r\n\t'SETTINGS': 'jarvis.0.settings',\r\n\t'DEVICES': 'jarvis.0.devices'\r\n}\r\n\r\nexport default {\r\n\tpageSettings: {\r\n\t\tlabel: 'Page Settings',\r\n\t\tsettings: {\r\n\t\t\tlanguage: {\r\n\t\t\t\tlabel: 'Spracheinstellung von jarvis',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tde: 'Deutsch',\r\n\t\t\t\t\ten: 'English'\r\n\t\t\t\t},\r\n\t\t\t\tdefault: i18n.getLanguage()\r\n\t\t\t},\r\n\t\t\tpageFavicon: {\r\n\t\t\t\tlabel: 'Favicon im Browser',\r\n\t\t\t\tinfo: 'base64 Wert der Grafik',\r\n\t\t\t\ttype: 'text'\r\n\t\t\t},\r\n\t\t\tpageTitle: {\r\n\t\t\t\tlabel: 'Titel im Browser',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdefault: 'jarvis - just another remarkable vis'\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ttabSettings: {\r\n\t\tlabel: 'Tab Settings',\r\n\t\tsettings: {\r\n\t\t\ttabsHideLabels: {\r\n\t\t\t\tlabel: 'Tab Bar Labels nicht anzeigen',\r\n\t\t\t\tinfo: 'Zeigt nur die Icons im Tab und nicht die Labels',\r\n\t\t\t\ttype: 'switch',\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tthemeSettings: {\r\n\t\tlabel: 'Theme Settings',\r\n\t\tsettings: {\r\n\t\t\tthemeColorPrimary: {\r\n\t\t\t\tlabel: 'Primre Farbe des Themes',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdefault: 'blue|700'\r\n\t\t\t},\r\n\t\t\tthemeColorSecondary: {\r\n\t\t\t\tlabel: 'Sekundre Farbe des Themes',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdefault: 'pink'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":""}