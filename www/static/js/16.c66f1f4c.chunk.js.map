{"version":3,"sources":["pages/ConfigurationPage/DevicesPage/ComponentConfigPage.js","pages/ConfigurationPage/DevicesPage/JsonEditor.js","pages/ConfigurationPage/DevicesPage/i18n/de.js","pages/ConfigurationPage/DevicesPage/i18n/en.js","pages/ConfigurationPage/DevicesPage/Devices.config.js","pages/ConfigurationPage/DevicesPage/StateExplorer.js","pages/ConfigurationPage/DevicesPage/DevicesPage.js","pages/ConfigurationPage/DevicesPage/DevicesListPage.js","../node_modules/@material-ui/icons/Edit.js","../node_modules/@material-ui/icons/Add.js","pages/ConfigurationPage/DevicesPage/i18n sync /^/.*$","../node_modules/@material-ui/icons/CloudDownload.js","../node_modules/@material-ui/icons/FileCopy.js"],"names":["ComponentConfig","React","memo","props","Log","_","_onClose","_onChange","id","config","attributes","useState","open","setOpen","useEffect","undefined","componentConfiguration","Object","keys","map","configKey","configOption","val","_translate","info","otherConfigOption","label","i18n","t","selection","Tag","Inputs","type","key","divider","disableTypography","container","spacing","item","width","inputProps","style","textAlign","onChange","header","actions","Button","variant","onClick","color","dense","maxWidth","fullWidth","disablePadding","JsonEditor","forwardRef","ref","height","value","mode","allowedModes","htmlElementProps","JsonEditorPopup","indexOf","Error","useStyles","makeStyles","theme","flexGrow","TreeView","padding","backgroundColor","TreeItem","palette","text","secondary","action","hover","TreeItemContent","paddingRight","TreeItemError","error","light","textDecoration","cursor","fontWeight","TreeItemExpanded","TreeItemSelected","TreeItemGroup","paddingLeft","TreeItemLabel","Entry","display","alignItems","Group","EntryIcon","marginRight","EntryText","indexObjects","list","index","objectsTree","root","objectId","substr","lastIndexOf","namespace","push","StateExplorer","classes","Cache","get","objectList","setObjectList","selectedItem","useRef","searchTimeout","Connection","connection","getObjects","then","res","forEach","promise","i","status","Array","isArray","rows","obj","sort","tree","_objectList","Date","now","set","catch","message","stack","renderTree","states","children","channelKey","length","concat","stateKey","Item","nodeId","channel","details","group","Fieldset","Text","clearTimeout","current","setTimeout","data","filter","toLowerCase","prevObjectList","className","margin","timeConverter","parseDate","updated","startIcon","defaultCollapseIcon","defaultExpandIcon","onNodeSelect","e","otherProps","clsx","content","expanded","selected","common","name","GroupIcon","StateIcon","caption","title","arrow","role","getLanguage","StateExplorerPopup","state","onClose","s","iconContainer","flexDirection","alignRight","justifyContent","marginLeft","ModifyIcon","verticalAlign","heading","ListItem","drag","userSelect","isDragging","_merge","require","_copy","DevicesPage","device","setDevice","errors","setErrors","EDITOR","useCallback","prevErrors","nextErrors","_addState","newStateKey","replace","prevDevice","_addDefaultStates","func","FUNCTIONS","stateKeys","reverse","substitute","xs","onDelete","savedDevice","options","split","base","characteristic","param","_updated","onSave","_onSave","disabled","FieldsetItem","columns","autoFocus","required","Select","function","funcKey","FUNCTION_ICONS","sortOptionsByKey","icon","Switch","suppressPopup","DeviceStates","_renameState","nextDevice","position","splice","sKey","_moveState","source","destination","_deleteState","AddDeviceState","StateAddRef","setError","onAddState","_setNewStateKey","size","shrink","onEnter","renderedStates","DragDeviceState","onDragEnd","droppableId","provided","snapshot","innerRef","droppableProps","placeholder","draggableId","draggableProps","dragHandleProps","DeviceState","fields","DevicesStates","field","DeviceStateField","prompt","stopPropagation","fontSize","noPadding","fieldProps","deviceDefaults","json","DeviceStateFieldJsonEditor","DeviceStateFieldAutoComplete","DeviceStateFieldStateExplorer","DeviceStateFieldOther","node","setValue","showJsonEditor","setShowJsonEditor","additionalProps","Fragment","DeviceStateFieldInput","setVal","showStateExplorer","setShowStateExplorer","components","option","getComponents","componentConfig","setComponentConfig","property","componentsOptions","userConfig","c","renderOption","Input","ucFirst","deleteButton","marginTop","hr","CustomTextInput","CustomDialogTitle","TableCell","paper","marginBottom","minHeight","zIndex","right","left","newlyCreatedDevice","DeviceList","paddingTop","setTranslations","language","DevicesListPage","_groupDevices","groupBy","d","g","deviceId","manufacturer","sortObject","selectedDevice","setSelectedDevice","importDevices","setImportDevices","devices","settings","configGroupDevices","lastDeviceAdded","filterBy","filterByTimeout","groups","setGroups","setWidth","_onDevicesChange","document","getElementById","scrollTop","offsetTop","_saveDevices","saveDevices","_filterBy","_copyDevice","uuid","_deleteInWidgets","layout","drawerKey","drawer","tabs","tab","columnIndex","_fullscreen","column","widget","secondaryStatesKeys","secondaryStatesKeyIndex","primaryStateKey","bodyStateKey","_onLayoutsChange","filters","match","RegExp","labels","values","trim","result","groupedDevices","labelId","_selectDevice","paperComponent","el","boxWidth","parentNode","offsetWidth","p","link","orientation","saveDevice","prevDeviceStates","_renamed","prevStateKey","onImport","prevProps","nextProps","DeviceTable","toolbar","headCells","defaultOrderBy","selectable","sortable","stickyHeader","CustomTableBody","CustomTableProps","sortedRows","ignore","tabIndex","_created","scope","align","join","_interopRequireDefault","_interopRequireWildcard","defineProperty","exports","default","_default","createElement","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","resolve","module"],"mappings":"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","file":"static/js/16.c66f1f4c.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Info from '../../../components/Info'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n}));\r\n */\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst ComponentConfig = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER ComponentConfig', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onClose, _onChange, id, config, attributes } = props;\r\n\t\r\n\tconst [open,setOpen] = useState(false);\r\n\tconst onClose = () => {\r\n\t\tsetOpen(false)\r\n\t\t_onClose();\r\n\t}\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetOpen(config !== null);\r\n\t}, [config]);\r\n\t\r\n\tif (id === null || config === null || config === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// component configuration\r\n\tconst componentConfiguration = Object.keys(config).map(configKey => {\r\n\t\tlet configOption = config[configKey];\r\n\t\tconfigOption = typeof configOption === 'object' ? configOption : { 'label': configKey, 'val': configOption.val !== undefined ? configOption.val : configOption }\r\n\t\tlet { _translate, info, ...otherConfigOption } = configOption;\r\n\t\t\r\n\t\totherConfigOption.label = configOption.label || configKey;\r\n\t\totherConfigOption.label = _translate ? i18n.t(configOption.label) : configOption.label;\r\n\t\totherConfigOption.val = _translate ? i18n.t(configOption.val) : configOption.val;\r\n\t\totherConfigOption.selection = typeof otherConfigOption.selection === 'function' ? otherConfigOption.selection(props) : otherConfigOption.selection;\r\n\t\t\r\n\t\tconst Tag = Inputs[configOption.type || 'Text'];\r\n\t\treturn (\r\n\t\t\t<ListItem key={'Config-' + configKey} divider>\r\n\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t\t\t<Grid item><Info info={info} /></Grid>\r\n\t\t\t\t\t\t<Grid item><Typography>{i18n.t(otherConfigOption.label)}</Typography></Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t\t\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<Tag\r\n\t\t\t\t\t\tkey={'componentConfig.' + id + '.' + configKey}\r\n\t\t\t\t\t\tid={'componentConfig.' + id + '.' + configKey}\r\n\t\t\t\t\t\t{...otherConfigOption}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel=''\r\n\t\t\t\t\t\twidth={180}\r\n\t\t\t\t\t\tinputProps={{\r\n\t\t\t\t\t\t\tstyle: { textAlign: 'right' }\r\n\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={(props, val) => _onChange(props, val, attributes)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Component configuration')}\r\n\t\t\tactions={\r\n\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={onClose} color=\"primary\" label=\"Apply\" />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='xs'\r\n\t\t\tfullWidth={true}\r\n\t\t\topen={open}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<List dense disablePadding>\r\n\t\t\t\t{componentConfiguration}\r\n\t\t\t</List>\r\n\t\t</Dialog>\r\n\t);\r\n});\r\n\r\nexport default ComponentConfig;\r\n","import React from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport i18n from '../../../controller/i18n'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\nimport { JsonEditor as Editor } from 'jsoneditor-react'\r\nimport 'jsoneditor-react/es/editor.min.css'\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst JsonEditor = React.forwardRef((props, ref) => {\r\n\tconst { val, height, _onChange } = props;\r\n\t\r\n\treturn (\r\n\t\t<Editor\r\n\t\t\tref={ref}\r\n\t\t\tvalue={val || {}}\r\n\t\t\tmode='text'\r\n\t\t\tallowedModes={['tree', 'view', 'form', 'text']}\r\n\t\t\thtmlElementProps={{ style: { 'height': height || 0, 'display': !height ? 'none' : 'block' } }}\r\n\t\t\tonChange={_onChange}\r\n\t\t\t/>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nexport const JsonEditorPopup = React.memo(props => {\r\n\tconst { open, _onClose } = props;\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('JSON Editor')}\r\n\t\t\tactions={\r\n\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={_onClose} color=\"primary\" label=\"Apply\" />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='sm'\r\n\t\t\tfullWidth={true}\r\n\t\t\topen={open}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<JsonEditor {...props} />\r\n\t\t</Dialog>\r\n\t);\r\n});\r\n\r\nexport default JsonEditor;\r\n","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Devices#state#label\": \"Datenpunkt (Anzeige)\",\r\n\t\"config#Devices#state#info\": \"Datenpunkt dessen State als Wert angezeigt wird\",\r\n\t\"config#Devices#stateStyle#label\": \"Datenpunkt Stil\",\r\n\t\"config#Devices#stateStyle#info\": \"Stil des angezeigten Wertes (im JSON Format)\",\r\n\t\"config#Devices#properties#label\": \"Datenpunkt Eigenschaften\",\r\n\t\"config#Devices#properties#info\": \"Eigenschaften des Datenpunkts: on, off, min, max sowie level (im JSON Format)\",\r\n\t\"config#Devices#display#label\": \"Anzeigevariante\",\r\n\t\"config#Devices#display#info\": \"Texte die den angezeigten Wert ersetzen (im JSON Format)\",\r\n\t\"config#Devices#label#label\": \"Label\",\r\n\t\"config#Devices#unit#label\": \"Einheit\",\r\n\t\"config#Devices#unit#info\": \"Einheit des Datenpunkts, z. B. % oder °\",\r\n\t\"config#Devices#action#label\": \"Datenpunkt (Trigger)\",\r\n\t\"config#Devices#action#info\": \"Datenpunkt der zum Schalten getriggert wird\",\r\n\t\"config#Devices#icon#label\": \"Icon\",\r\n\t\"config#Devices#icon#info\": \"Material Icon (klick zur Ansicht aller Icons)\",\r\n\t\"config#Devices#iconStyle#label\": \"Icon Stil\",\r\n\t\"config#Devices#iconStyle#info\": \"Stil des Icons (im JSON Format)\",\r\n\t\"config#Devices#hide#label\": \"im Popup verstecken\",\r\n\t\"config#Devices#hide#info\": \"Datenpunkt nicht in den Geräte-Details (Popup) zeigen\",\r\n\t\"config#Devices#bodyElement#label\": \"Body Element\",\r\n\t\"config#Devices#actionElement#label\": \"Action Element\",\r\n\t\r\n\t\"import#warning\": \"Damit ein Gerät vom Importer erkannt wird, müssen die Datenpunkte des Geräts unter einem gemeinsamen Datenpunkt des Typs \\\"{deviceObjectType}\\\" strukturiert sein.\",\r\n\t\r\n\t\r\n\t// Component\r\n\t\"State Explorer\": \"Datenpunkt Explorer\",\r\n\t\"State\": \"Datenpunkt (Anzeige)\",\r\n\t\"Action\": \"Datenpunkt (Trigger)\",\r\n\t\"(Un)Select all adapters\": \"alle Adapter (de)selektieren\",\r\n\t\"(Un)Select all devices\": \"alle Geräte (de)selektieren\",\r\n\t\"Suppress Popup\": \"Popup unterdrücken\",\r\n\t\"Do not open the device details in the popup when the device is clicked\": \"Keine Geräte-Details (Popup) öffnen, wenn das Gerät im Widget angeklickt wird\",\r\n\t\"add default states\": \"Standard Datenpunkte\",\r\n\t\r\n\t\"No whitespaces allowed in the state\": \"Keine Leerzeichen im Datenpunkt erlaubt\",\r\n\t\"JSON format\": \"JSON Format\",\r\n\t\"Devices List\": \"Geräteliste\",\r\n\t\"Group by\": \"Gruppieren nach\",\r\n\t\"Filter\": \"Filtern\",\r\n\t\"add device\": \"Gerät hinzufügen\",\r\n\t\"import devices\": \"Geräte importieren\",\r\n\t\r\n\t\"Device ID\": \"Geräte ID\",\r\n\t\"Name\": \"Name\",\r\n\t\"Function\": \"Gewerk\",\r\n\t\"States\": \"States\",\r\n\t\"Options\": \"Optionen\",\r\n\t\"adapter\": \"Adapter\",\r\n\t\r\n\t\"add state\": \"Datenpunkt hinzufügen\",\r\n\t\"new state key\": \"neuer Datenpunkt Bezeichner\",\r\n\t\"State Key\": \"Datenpunkt Bezeichner\",\r\n\t\r\n\t\"No input given\": \"Bitte etwas eingeben\",\r\n\t\"Wrong JSON format\": \"Falsches JSON Format\",\r\n\t\"Type in a state key / identifier\": \"State Bezeichnung eingeben\",\r\n\t\"State key already used\": \"State bereits in Benutzung\",\r\n\t\r\n\t\"Device Configuration\": \"Gerätekonfiguration\",\r\n\t\"Delete Device\": \"Gerät löschen\",\r\n\t\"General\": \"Allgemein\",\r\n\t\"Device\": \"Gerät\",\r\n\t\"Displayed Name\": \"Anzeigename\",\r\n\t\r\n\t\"New Devices\": \"neue Geräte\",\r\n\t\"Devices that have been added already\": \"bereits hinzugefügte Geräte\",\r\n\t\"Devices with incorrect configuration (states not found)\": \"Geräte mit inkorrekter Konfiguration (Datenpunkte nicht gefunden)\",\r\n\t\"Devices marked as ignored\": \"ignorierte Geräte\",\r\n\t\"Devices Import\": \"Geräte importieren\",\r\n\t\"Read adapters\": \"Adapter lesen\",\r\n\t\"Import selected devices\": \"ausgewählte Geräte importieren\",\r\n\t\"Adapters\": \"Adapter\",\r\n\t\"Search the adapter structure for all devices or only devices added to enums\": \"Adapter-Struktur entweder nach allen oder nur nach in Enums vorhandenen Geräten durchsuchen\",\r\n\t\"Search adapter structure for all devices\": \"nach allen Geräten durchsuchen\",\r\n\t\"Search only for devices added to enums\": \"nur nach in Enums hinzugefügten Geräten durchsuchen\",\r\n\t\"ignore\": \"ignorieren\",\r\n\t\"move to new devices\": \"zu den neuen Geräten verschieben\"\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Devices#state#label\": \"State (to display)\",\r\n\t\"config#Devices#state#info\": \"State which value is shown\",\r\n\t\"config#Devices#stateStyle#label\": \"State Style\",\r\n\t\"config#Devices#stateStyle#info\": \"State Style of the displayed values (in JSON Format)\",\r\n\t\"config#Devices#properties#label\": \"State Properties\",\r\n\t\"config#Devices#properties#info\": \"State Properties such as min, max, dimmerOn Werte (in JSON Format)\",\r\n\t\"config#Devices#display#label\": \"Display variant\",\r\n\t\"config#Devices#display#info\": \"Texts replacing the displayed value (in JSON Format)\",\r\n\t\"config#Devices#label#label\": \"Label\",\r\n\t\"config#Devices#unit#label\": \"Unit\",\r\n\t\"config#Devices#action#label\": \"State (to trigger)\",\r\n\t\"config#Devices#action#info\": \"State used to trigger an action\",\r\n\t\"config#Devices#icon#label\": \"Icon\",\r\n\t\"config#Devices#icon#info\": \"Material Icon (click to view icons)\",\r\n\t\"config#Devices#iconStyle#label\": \"Icon Style\",\r\n\t\"config#Devices#iconStyle#info\": \"Icon Style of the icon (in JSON Format)\",\r\n\t\"config#Devices#hide#label\": \"Hide state in popup\",\r\n\t\"config#Devices#hide#info\": \"Don't show state in the device details (popup)\",\r\n\t\"config#Devices#bodyElement#label\": \"Body Element\",\r\n\t\"config#Devices#actionElement#label\": \"Action Element\",\r\n\t\r\n\t\"import#warning\": \"For a device to be detected the states have to be grouped using a state of the type \\\"{deviceObjectType}\\\".\"\r\n}","\r\n\r\nexport default {\r\n\t\"state\": {\r\n\t\t\"label\": \"config#Devices#state#label\",\r\n\t\t\"info\": \"config#Devices#state#info\",\r\n\t\t\r\n\t\t//<IGNORE>\r\n\t\t// white space not allowed\r\n\t\t\"onValidate\": val => {\r\n\t\t\tif (val.indexOf(' ') > -1) {\r\n\t\t\t\tthrow new Error('No whitespaces allowed in the state');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn val;\r\n\t\t}//</IGNORE>\r\n\t},\r\n\t\"stateStyle\": {\r\n\t\t\"label\": \"config#Devices#stateStyle#label\",\r\n\t\t\"info\": \"config#Devices#stateStyle#info\",\r\n\t\t\"json\": true\r\n\t},\r\n\t\"properties\": {\r\n\t\t\"label\": \"config#Devices#properties#label\",\r\n\t\t\"info\": \"config#Devices#properties#info\",\r\n\t\t\"json\": true\r\n\t},\r\n\t\"display\": {\r\n\t\t\"label\": \"config#Devices#display#label\",\r\n\t\t\"info\": \"config#Devices#display#info\",\r\n\t\t\"json\": true\r\n\t},\r\n\t\"label\": {\r\n\t\t\"label\": \"config#Devices#label#label\",\r\n\t\t\"info\": \"config#Devices#label#info\"\r\n\t},\r\n\t\"unit\": {\r\n\t\t\"label\": \"config#Devices#unit#label\",\r\n\t\t\"info\": \"config#Devices#unit#info\",\r\n\t\t\"json\": true,\r\n\t\t\r\n\t\t// if only a single string is given for a unit, convert it to a json compatible format to it will pass validation later\r\n\t\t\"onValidate\": val => val.indexOf(\" \") === -1 && val.indexOf('\"') === -1 && val.indexOf(\"}\") === -1 && val.indexOf(\"{\") === -1 ? '\"' + val + '\"' : val\r\n\t},\r\n\t\"icon\": {\r\n\t\t\"label\": \"config#Devices#icon#label\",\r\n\t\t\"info\": \"config#Devices#icon#info\",\r\n\t\t\"link\": \"https://materialdesignicons.com/\",\r\n\t\t\"json\": true,\r\n\t\t\r\n\t\t// if only a single string is given for an icon, convert it to a json compatible format to it will pass validation later\r\n\t\t\"onValidate\": val => val.indexOf(\" \") === -1 && val.indexOf('\"') === -1 && val.indexOf(\"}\") === -1 && val.indexOf(\"{\") === -1 ? '\"' + val + '\"' : val\r\n\t},\r\n\t\"iconStyle\": {\r\n\t\t\"label\": \"config#Devices#iconStyle#label\",\r\n\t\t\"info\": \"config#Devices#iconStyle#info\",\r\n\t\t\"json\": true\r\n\t},\r\n\t\"placeholder_1\": {\r\n\t\t\"type\": \"Placeholder\"\r\n\t},\r\n\t\"action\": {\r\n\t\t\"label\": \"config#Devices#action#label\",\r\n\t\t\"info\": \"config#Devices#action#info\",\r\n\t\t\r\n\t\t//<IGNORE>\r\n\t\t// white space not allowed\r\n\t\t\"onValidate\": val => {\r\n\t\t\tif (val.indexOf(' ') > -1) {\r\n\t\t\t\tthrow new Error('No whitespaces allowed in the state');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn val;\r\n\t\t}//</IGNORE>\r\n\t},\r\n\t\"bodyElement\": {\r\n\t\t\"label\": \"config#Devices#bodyElement#label\",\r\n\t\t\"autoComplete\": true,\r\n\t\t\"autoHighlight\": true,\r\n\t\t\"options\": null,\r\n\t\t\"renderOption\": null\r\n\t},\r\n\t\"actionElement\": {\r\n\t\t\"label\": \"config#Devices#actionElement#label\",\r\n\t\t\"autoComplete\": true,\r\n\t\t\"autoHighlight\": true,\r\n\t\t\"options\": null,\r\n\t\t\"renderOption\": null\r\n\t},\r\n\t\"hide\": {\r\n\t\t\"label\": \"config#Devices#hide#label\",\r\n\t\t\"info\": \"config#Devices#hide#info\",\r\n\t\t\"type\": \"Switch\"\r\n\t}\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Cache from '../../../controller/Cache'\r\nimport Connection from '../../../controller/Connection'\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\nimport timeConverter from '../../../helpers/timeConverter'\r\n\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TreeItem from '@material-ui/lab/TreeItem'\r\nimport TreeView from '@material-ui/lab/TreeView'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport CollapseIcon from '@material-ui/icons/ArrowDropDown'\r\nimport ExpandIcon from '@material-ui/icons/ArrowRight'\r\nimport GroupIcon from '@material-ui/icons/Folder'\r\nimport RefreshIcon from '@material-ui/icons/Refresh'\r\nimport StateIcon from '@material-ui/icons/BookmarkBorder'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tdivider: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tTreeView: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\t'&:focus > $TreeItemContent $TreeItemLabel, &:hover > $TreeItemContent $TreeItemLabel, &$TreeItemSelected > $TreeItemContent $TreeItemLabel': {\r\n\t\t\tbackgroundColor: 'transparent',\r\n\t\t},\r\n\t},\r\n\tTreeItem: {\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t\t'&:hover > $TreeItemContent': {\r\n\t\t\tbackgroundColor: theme.palette.action.hover,\r\n\t\t},\r\n\t},\r\n\tTreeItemContent: {\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\t//fontWeight: theme.typography.fontWeightMedium,\r\n\t\t'$TreeItemExpanded > &': {\r\n\t\t\t//fontWeight: theme.typography.fontWeightRegular,\r\n\t\t},\r\n\t},\r\n\tTreeItemError: {\r\n\t\tbackgroundColor: theme.palette.error.light,\r\n\t\ttextDecoration: 'line-through',\r\n\t\tcursor: 'not-allowed !important',\r\n\t\tfontWeight: 'normal',\r\n\t},\r\n\tTreeItemExpanded: {\r\n\t},\r\n\tTreeItemSelected: {\r\n\t\tfontWeight: 'bold !important',\r\n\t},\r\n\tTreeItemGroup: {\r\n\t\tfontWeight: 'initial',\r\n\t\t'& $TreeItemContent': {\r\n\t\t\tpaddingLeft: theme.spacing(2),\r\n\t\t},\r\n\t},\r\n\tTreeItemLabel: {\r\n\t\tfontWeight: 'inherit',\r\n\t\tcolor: 'inherit',\r\n\t},\r\n\tEntry: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tpadding: theme.spacing(0.5, 0),\r\n\t},\r\n\tGroup: {\r\n\t\t//fontWeight: 'bold'\r\n\t},\r\n\tEntryIcon: {\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\tEntryText: {\r\n\t\tfontWeight: 'inherit',\r\n\t\tflexGrow: 1,\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst indexObjects = (list, index) => {\r\n\tlet objectsTree = {}\r\n\tlet root = [];\r\n\t\r\n\tfor (let objectId of list) {\r\n\t\t\r\n\t\t// index state\r\n\t\tobjectsTree[objectId.substr(0, objectId.lastIndexOf('.'))] = objectsTree[objectId.substr(0, objectId.lastIndexOf('.'))] || {}\r\n\t\tobjectsTree[objectId.substr(0, objectId.lastIndexOf('.'))][objectId] = index[objectId];\r\n\t\t\r\n\t\t// make sure state is added to all its parents\r\n\t\tlet namespace = objectId;\r\n\t\twhile (namespace.indexOf('.') > -1) {\r\n\t\t\tconst id = namespace;\r\n\t\t\tnamespace = namespace.substr(0, namespace.lastIndexOf('.'));\r\n\t\t\t\r\n\t\t\tif (objectsTree[namespace] === undefined || objectsTree[namespace][id] === undefined) {\r\n\t\t\t\tobjectsTree[namespace] = objectsTree[namespace] || {}\r\n\t\t\t\tobjectsTree[namespace][id] = {}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (namespace && namespace.indexOf('.') === -1 && root.indexOf(namespace) === -1) {\r\n\t\t\t\troot.push(namespace);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn [ root, objectsTree ];\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst StateExplorer = React.memo(props => {\r\n\tconst { val, _onChange } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\tconst [objectList,setObjectList] = useState(Cache.get('objectList') || null);\r\n\tconst selectedItem = useRef(val);\r\n\tconst searchTimeout = useRef();\r\n\t\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (objectList === null || !objectList.root) {\r\n\t\t\tconst socket = Connection.connection;\r\n\t\t\tsocket.getObjects()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tlet list = [];\r\n\t\t\t\t\tlet index = {}\r\n\t\t\t\t\t\r\n\t\t\t\t\tres.forEach((promise, i) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (promise.status === 'fulfilled' && promise.value && Array.isArray(promise.value.rows)) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// read results and sort\r\n\t\t\t\t\t\t\tfor (let obj of promise.value.rows) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// skip system\r\n\t\t\t\t\t\t\t\tif (obj.id.substr(0,6) === 'system') {\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// index result\r\n\t\t\t\t\t\t\t\tindex[obj.id] = obj.value;\r\n\t\t\t\t\t\t\t\tlist.push(obj.id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// index sorted results\r\n\t\t\t\t\tlist.sort();\r\n\t\t\t\t\tconst [ root, tree ] = indexObjects(list, index);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst _objectList = {\r\n\t\t\t\t\t\t'updated': Date.now(),\r\n\t\t\t\t\t\t'root': root.sort(),\r\n\t\t\t\t\t\t'list': list,\r\n\t\t\t\t\t\t'tree': tree\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tCache.set('objectList', _objectList);\r\n\t\t\t\t\tsetObjectList(_objectList);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tLog._('StateExplorer', error.message, 'error', true, error.stack);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t}, [objectList]);\r\n\t\r\n\t//\r\n\tconst search = (props, val) => {\r\n\t\tclearTimeout(searchTimeout.current);\r\n\t\tsearchTimeout.current = setTimeout(() => {\r\n\t\t\tconst data = Cache.get('objectList');\r\n\t\t\t\r\n\t\t\tconst [ root, tree ] = indexObjects(data.list.filter(obj => obj.toLowerCase().indexOf(val.toLowerCase()) > -1), data.tree);\r\n\t\t\tsetObjectList(prevObjectList => ({\r\n\t\t\t\t...prevObjectList,\r\n\t\t\t\t'root': root.sort(),\r\n\t\t\t\t'tree': tree\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t}, 750);\r\n\t}\r\n\t\r\n\t//\r\n\tconst selectObject = (e, val) => {\r\n\t\tconst selected = objectList.tree[val] || null; // tree only holds channels, thus null will be a state\r\n\t\t\r\n\t\tif (selected === null) {\r\n\t\t\tval = val.indexOf(' ') === -1 ? val : '';\r\n\t\t\tselectedItem.current = val;\r\n\t\t\t_onChange(val);\r\n\t\t}\r\n\t}\r\n\t\r\n\t//\r\n\tconst renderTree = key => {\r\n\t\tlet states = [];\r\n\t\tlet children = [];\r\n\t\t\r\n\t\t// channels\r\n\t\tif (objectList.tree[key]) {\r\n\t\t\tObject.keys(objectList.tree[key]).forEach(channelKey => {\r\n\t\t\t\tconst child = objectList.tree[key][channelKey];\r\n\t\t\t\t\r\n\t\t\t\tif (child.type === 'state') {\r\n\t\t\t\t\tstates.push(channelKey);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tchildren.push(renderTree(channelKey));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t// states\r\n\t\tif (states.length > 0) {\r\n\t\t\tchildren = children.concat(\r\n\t\t\t\tstates.map(stateKey => <Item key={stateKey} error={(stateKey.indexOf(' ') > -1)} nodeId={stateKey} label={<Entry key={stateKey} error={(stateKey.indexOf(' ') > -1)} id={stateKey.substr(stateKey.lastIndexOf('.')+1)} {...objectList.tree[stateKey.substr(0, stateKey.lastIndexOf('.'))][stateKey]} />} />)\r\n\t\t\t);\r\n\t\t}\r\n\t\t\r\n\t\tconst channel = key.substr(key.lastIndexOf('.')+1);\r\n\t\tconst details = key.indexOf('.') > -1 ? objectList.tree[key.substr(0, key.lastIndexOf('.'))][key] : {}\r\n\t\treturn (\r\n\t\t\t<Item key={key} nodeId={key} children={children} label={<Entry key={key} group id={channel} {...details} />} />\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Paper>\r\n\t\t\t<Inputs.Fieldset>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tid='search'\r\n\t\t\t\t\tlabel='Search'\r\n\t\t\t\t\tonChange={search}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<div className={classes.divider} />\r\n\t\t\t\t<div style={{ margin: 'auto 0' }}>\r\n\t\t\t\t\t{objectList !== null && <span style={{ margin: 'auto 0' }}>{i18n.t('Last refresh') + ': ' + timeConverter.parseDate(objectList.updated, 'dd.MM.yyyy, HH:mm:ss')}</span>}\r\n\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\tlabel='refresh'\r\n\t\t\t\t\t\tstartIcon={<RefreshIcon />}\r\n\t\t\t\t\t\tonClick={() => setObjectList(null)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t\t<Divider />\r\n\t\t\t\r\n\t\t\t{(objectList === null || !objectList.root) ?\r\n\t\t\t<LinearProgress />\r\n\t\t\t:\r\n\t\t\t<TreeView\r\n\t\t\t\tclassName={classes.TreeView}\r\n\t\t\t\tdefaultCollapseIcon={<CollapseIcon />}\r\n\t\t\t\tdefaultExpandIcon={<ExpandIcon />}\r\n\t\t\t\tonNodeSelect={selectObject}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{objectList.root.map(key => renderTree(key))}\r\n\t\t\t</TreeView>}\r\n\t\t</Paper>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst Item = props => {\r\n\tconst { children, error, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<TreeItem\r\n\t\t\tclasses={{\r\n\t\t\t\troot: clsx(error && classes.TreeItemError, classes.TreeItem),\r\n\t\t\t\tcontent: classes.TreeItemContent,\r\n\t\t\t\texpanded: classes.TreeItemExpanded,\r\n\t\t\t\tselected: classes.TreeItemSelected,\r\n\t\t\t\tgroup: classes.TreeItemGroup,\r\n\t\t\t\tlabel: classes.TreeItemLabel\r\n\t\t\t}}\r\n\t\t\t\r\n\t\t\t{...otherProps}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{children || null}\r\n\t\t</TreeItem>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst Entry = props => {\r\n\tconst { id, error, type, group, common } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst name = common && common.name ? common.name : '';\t\r\n\tconst EntryIcon = group ? GroupIcon : StateIcon;\r\n\treturn (\r\n\t\t<div className={clsx(error && classes.TreeItemError, classes.Entry, group && classes.Group)}>\r\n\t\t\t<EntryIcon color=\"inherit\" className={classes.EntryIcon} />\r\n\t\t\t<EntryText width=\"40%\" caption label={id} />\r\n\t\t\t{name.length > 60 ? \r\n\t\t\t\t<Tooltip title={name} arrow>\r\n\t\t\t\t\t<div style={{ width: '40%' }}>\r\n\t\t\t\t\t\t<EntryText label={name.substr(0, 60) + '...'} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t:\r\n\t\t\t\t<EntryText width=\"40%\" label={name} />\r\n\t\t\t}\r\n\t\t\t<EntryText width=\"10%\" label={type} />\r\n\t\t\t<EntryText width=\"10%\" label={common && common.role} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst EntryText = props => {\r\n\tconst { label, width, caption } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<div style={{ width: width || '100%' }}>\r\n\t\t\t<Typography variant={caption ? 'caption' : 'body2'} className={classes.EntryText}>\r\n\t\t\t\t{(label && label[i18n.getLanguage()]) || label || ''}\r\n\t\t\t</Typography>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport const StateExplorerPopup = React.memo(props => {\r\n\tconst { open, _onClose, _onChange } = props;\r\n\t\r\n\tconst state = useRef(props.val);\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('State Explorer')}\r\n\t\t\tactions={[\r\n\t\t\t\t<Inputs.Button key='action-cancel' variant=\"text\" onClick={_onClose} color=\"secondary\" label=\"Cancel\" />,\r\n\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={() => _onChange(state.current)} color=\"primary\" label=\"Apply\" />\r\n\t\t\t]}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='lg'\r\n\t\t\tfullWidth={true}\r\n\t\t\t\r\n\t\t\topen={open}\r\n\t\t\tonClose={_onClose}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<StateExplorer {...props} _onChange={s => state.current = s} />\r\n\t\t</Dialog>\r\n\t);\r\n});\r\n\r\nexport default StateExplorer;\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\r\n\r\nimport DevicesStates from './Devices.config'\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\nimport FUNCTIONS, { icons as FUNCTION_ICONS, componentsOptions } from '../../../functions'\r\nimport ucFirst from '../../../helpers/utils'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport ComponentConfig from '../DevicesPage/ComponentConfigPage'\r\nimport { JsonEditorPopup } from '../DevicesPage/JsonEditor'\r\nimport { StateExplorerPopup } from '../DevicesPage/StateExplorer'\r\nimport { Screenshot, getComponents } from '../../../modules/StateList/StateList.settings'\r\n\r\nimport Collapsible, { CollapsibleSummary, CollapsibleDetails } from '../../../components/Collapsible'\r\nimport Dialog from '../../../components/Dialog'\r\nimport Icon from '../../../components/Icon'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tfullWidth: {\r\n\t\twidth: '100%',\r\n\t},\r\n\ticonContainer: {\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t},\r\n\tModifyIcon: {\r\n\t\tverticalAlign: 'bottom'\r\n\t},\r\n\theading: {\r\n\t\tmargin: 'auto auto auto 0'\r\n\t},\r\n\tListItem: {\r\n\t\tpadding: 0\r\n\t},\r\n\tdrag: {\r\n\t\tcursor: 'grab !important',\r\n\t\tuserSelect: 'none',\r\n\t\t\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: theme.palette.action.hover,\r\n\t\t}\r\n\t},\r\n\tisDragging: {\r\n\t\tbackgroundColor: theme.palette.action.selected,\r\n\t}\r\n}));\r\n\r\n\r\nconst _merge = require('deepmerge');\r\nconst _copy = require('rfdc')();\r\n\r\nconst DevicesPage = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [device,setDevice] = useState(_copy(props.device));\r\n\tconst [errors,setErrors] = useState({});\r\n\tconst EDITOR = useRef({});\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onChange = useCallback((props, val) => {\r\n\t\t\r\n\t\t// error handler\r\n\t\tsetErrors(prevErrors => {\r\n\t\t\tlet nextErrors = { ...prevErrors }\r\n\t\t\t\r\n\t\t\t// error occured\r\n\t\t\tif (props.error && props.error !== prevErrors[props.id]) {\r\n\t\t\t\tnextErrors[props.id] = props.error;\r\n\t\t\t\treturn nextErrors;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// no error -> remove old error\r\n\t\t\telse if (!props.error && prevErrors[props.id]) {\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn nextErrors;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn prevErrors;\r\n\t\t});\r\n\t\t\r\n\t\t// set value\r\n\t\tEDITOR.current[props.id] = val;\r\n\t\t\r\n\t}, []);\r\n\t\r\n\t/*\r\n\t * trigger initial validation\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tif (!props.device.name) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t'device->name': true\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t}, [props.device.name]);\r\n\t\r\n\tif (device === null) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onSave = () => {\r\n\t\tlet savedDevice = { ...device }\r\n\t\tsavedDevice.options = savedDevice.options || {}\r\n\t\tsavedDevice.attributes = savedDevice.attributes || {}\r\n\t\t\r\n\t\tfor (const key in EDITOR.current) {\r\n\t\t\tconst val = EDITOR.current[key];\r\n\t\t\tconst [ type, base, characteristic, param ] = key.split('->');\r\n\t\t\t\r\n\t\t\t// states\r\n\t\t\tif (type === 'states') {\r\n\t\t\t\tif (typeof savedDevice[type][base] === 'object' && characteristic.toLowerCase().indexOf('config') > -1) {\r\n\t\t\t\t\tsavedDevice[type][base][characteristic] = savedDevice[type][base][characteristic] || {}\r\n\t\t\t\t\tsavedDevice[type][base][characteristic][param] = val;\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof savedDevice[type][base] === 'object') {\r\n\t\t\t\t\tsavedDevice[type][base][characteristic] = val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsavedDevice[type][base] = {\r\n\t\t\t\t\t\t'state': savedDevice[type][base],\r\n\t\t\t\t\t\t[characteristic]: val\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// options or attributes\r\n\t\t\telse if (type === 'options' || type === 'attributes') {\r\n\t\t\t\tsavedDevice[type][base] = val;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// device\r\n\t\t\telse {\r\n\t\t\t\tsavedDevice[base] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// save\r\n\t\tsavedDevice.attributes._updated = Date.now();\r\n\t\tprops.onSave(savedDevice);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteDevice = () => props.onDelete && props.onDelete(device.id);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addState = newStateKey => {\r\n\t\t\r\n\t\tconst stateKey = newStateKey.replace(/ /g, '');\r\n\t\tsetDevice(prevDevice => ({\r\n\t\t\t...prevDevice,\r\n\t\t\tstates: {\r\n\t\t\t\t[stateKey]: {},\r\n\t\t\t\t...prevDevice.states || {}\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _renameState = (stateKey, newStateKey) => {\r\n\t\tnewStateKey = newStateKey.replace(/ /g, '');\r\n\t\t\r\n\t\t// verify state key does not exist\r\n\t\tif (device.states[newStateKey] !== undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// replace state key in layout\r\n\t\t//props.onReplaceStateKey(device.id, stateKey, newStateKey); // this is wrong here because Device has to be saved first\r\n\t\tEDITOR.current['states->' + newStateKey + '->_renamed'] = stateKey;\r\n\t\t\r\n\t\t// change state key in EDITOR\r\n\t\tlet state = {}\r\n\t\tfor (let key in EDITOR.current) {\r\n\t\t\tconst [ type, base, characteristic ] = key.split('->');\r\n\t\t\t\r\n\t\t\tif (type === 'states' && base === stateKey) {\r\n\t\t\t\tstate[characteristic] = EDITOR.current[key];\r\n\t\t\t\tEDITOR.current[type + '->' + newStateKey + '->' + characteristic] = EDITOR.current[key];\r\n\t\t\t\tdelete EDITOR.current[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// change state key in device\r\n\t\tsetDevice(prevDevice => {\r\n\t\t\tconst nextDevice = { ...prevDevice, 'states': {} }\r\n\t\t\t\r\n\t\t\tconst states = Object.keys(prevDevice.states);\r\n\t\t\tconst position = states.indexOf(stateKey);\r\n\t\t\tstates.splice(position, 1, newStateKey);\r\n\t\t\t\r\n\t\t\tfor (let sKey of states) {\r\n\t\t\t\tnextDevice.states[sKey] = {\r\n\t\t\t\t\t...prevDevice.states[sKey === newStateKey ? stateKey : sKey],\r\n\t\t\t\t\t...state\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn nextDevice;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addDefaultStates = func => {\r\n\t\t\r\n\t\tif (FUNCTIONS[func] !== undefined) {\r\n\t\t\tconst stateKeys = Object.keys(device.states || {});\r\n\t\t\tObject.keys(FUNCTIONS[func]).reverse().forEach(stateKey => {\r\n\t\t\t\tconst state = FUNCTIONS[func][stateKey];\r\n\t\t\t\t\r\n\t\t\t\tif (state.substitute !== true && stateKeys.indexOf(stateKey) === -1 && stateKey.substr(0,1) !== '_') {\r\n\t\t\t\t\t_addState(stateKey);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _moveState = res => {\r\n\t\t\r\n\t\tif (res.source && res.destination && res.source.index !== res.destination.index) {\r\n\t\t\t\r\n\t\t\tsetDevice(prevDevice => {\r\n\t\t\t\tlet nextDevice = { ...prevDevice, 'states': {} }\r\n\t\t\t\t\r\n\t\t\t\tlet states = Object.keys(prevDevice.states);\r\n\t\t\t\tstates.splice(res.destination.index, 0, states.splice(res.source.index, 1)[0]);\r\n\t\t\t\tstates.forEach(stateKey => {\r\n\t\t\t\t\tnextDevice.states[stateKey] = prevDevice.states[stateKey];\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn nextDevice;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteState = stateKey => {\r\n\t\t\r\n\t\t//props.onStateDelete(device.id, stateKey); // this is wrong here because Device has to be saved first\r\n\t\tsetDevice(prevDevice => {\r\n\t\t\tlet nextDevice = { ...prevDevice }\r\n\t\t\tdelete nextDevice.states[stateKey];\r\n\t\t\treturn nextDevice;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tLog._('DevicesPages', 'RENDER DevicesPage', 'development');\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\tid='DeviceConfiguration'\r\n\t\t\theader={i18n.t('Device Configuration') + ' (' + i18n.t('Device ID') + ': ' + device.id + ')'}\r\n\t\t\tactions={[\r\n\t\t\t\t<Grid key='actions' container>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t\t{device.name && <Inputs.Button key='action->delete' variant=\"text\" onClick={() => _deleteDevice()} color=\"secondary\" startIcon={<DeleteIcon />} label=\"Delete Device\" />}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t\t<Inputs.Button key='action->cancel' className=\"cancel\" variant=\"text\" onClick={() => props.onClose()} color=\"secondary\" label=\"Cancel\" />\r\n\t\t\t\t\t\t<Inputs.Button key='action->save' className=\"apply\" variant=\"text\" onClick={() => _onSave()} color=\"primary\" disabled={Object.keys(errors).length > 0} label=\"Apply\" />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t]}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='lg'\r\n\t\t\tfullWidth={true}\r\n\t\t\t\r\n\t\t\topen={true}\r\n\t\t\tonClose={() => props.onClose()}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label='General'>\r\n\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey=\"device->name\"\r\n\t\t\t\t\t\tid=\"device->name\"\r\n\t\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Device'\r\n\t\t\t\t\t\tval={device.name}\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey=\"device->label\"\r\n\t\t\t\t\t\tid=\"device->label\"\r\n\t\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Label'\r\n\t\t\t\t\t\tval={device.label || ''}\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\tkey=\"device->function\"\r\n\t\t\t\t\t\tid=\"device->function\"\r\n\t\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Function'\r\n\t\t\t\t\t\tval={device.function || 'other'}\r\n\t\t\t\t\t\tselection={\r\n\t\t\t\t\t\t\tObject.keys(FUNCTIONS).map(funcKey => {\r\n\t\t\t\t\t\t\t\tconst func = funcKey !== '_defaults' ? funcKey : 'other';\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t[func]: i18n.t(func),\r\n\t\t\t\t\t\t\t\t\t'icon': FUNCTION_ICONS[funcKey] || null,\r\n\t\t\t\t\t\t\t\t\t'_key': func,\r\n\t\t\t\t\t\t\t\t\t'_translated': true,\r\n\t\t\t\t\t\t\t\t\t'_sort': i18n.t(func)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsortOptionsByKey\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// add default state keys of function (if not added already)\r\n\t\t\t\t\t\t\tif (Object.keys(device.states).length === 0) {\r\n\t\t\t\t\t\t\t\t_addDefaultStates(val);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_onChange(props, val);\r\n\t\t\t\t\t\t\tsetDevice(prevDevice => ({\r\n\t\t\t\t\t\t\t\t...prevDevice,\r\n\t\t\t\t\t\t\t\t'function': val\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey=\"device->icon\"\r\n\t\t\t\t\t\tid=\"device->icon\"\r\n\t\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Icon'\r\n\t\t\t\t\t\tval={device.icon || ''}\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\tkey=\"device->suppressPopup\"\r\n\t\t\t\t\t\tid=\"device->suppressPopup\"\r\n\t\t\t\t\t\twidth={200}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Suppress Popup'\r\n\t\t\t\t\t\tinfo='Do not open the device details in the popup when the device is clicked'\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tval={device.suppressPopup !== undefined ? device.suppressPopup : false}\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label='States'>\r\n\t\t\t\t<DeviceStates\r\n\t\t\t\t\t_onChange={_onChange}\r\n\t\t\t\t\t_addState={_addState}\r\n\t\t\t\t\t_addDefaultStates={_addDefaultStates}\r\n\t\t\t\t\t_renameState={_renameState}\r\n\t\t\t\t\t_moveState={_moveState}\r\n\t\t\t\t\t_deleteState={_deleteState}\r\n\t\t\t\t\terrors={errors}\r\n\t\t\t\t\tdevice={device}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t</Dialog>\r\n\t)\r\n});\r\n\r\nexport default DevicesPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst AddDeviceState = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER AddDeviceState', 'development');\r\n\tconst { device } = props;\r\n\t\r\n\tconst StateAddRef = useRef();\r\n\tconst [error,setError] = useState('');\r\n\t\r\n\tconst onAddState = () => {\r\n\t\tconst newStateKey = StateAddRef.current.value || '';\r\n\t\t\r\n\t\t// empty state key\r\n\t\tif (!newStateKey) {\r\n\t\t\tsetError(i18n.t('Type in a state key / identifier'));\r\n\t\t}\r\n\r\n\t\t// state key exists already\r\n\t\telse if (Object.keys(device.states || {}).indexOf(newStateKey) > -1) {\r\n\t\t\tsetError(i18n.t('State key already used'));\r\n\t\t}\r\n\t\t\r\n\t\t// add state\r\n\t\telse {\r\n\t\t\tsetError('');\r\n\t\t\tprops._setNewStateKey(newStateKey)\r\n\t\t\tprops._addState(newStateKey);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem key='StatesListItemLabel->add' dense divider className=\"DeviceStateAdd\">\r\n\t\t\t<ListItemIcon>\r\n\t\t\t\t<IconButton size=\"small\" disabled>\r\n\t\t\t\t\t<AddIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t\r\n\t\t\t<ListItemText disableTypography style={{ display: 'flex' }}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tid='states->add'\r\n\t\t\t\t\tref={StateAddRef}\r\n\t\t\t\t\tshrink={true}\r\n\t\t\t\t\tlabel='new state key'\r\n\t\t\t\t\tval={props.newStateKey}\r\n\t\t\t\t\tonEnter={onAddState}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<div style={{ display: 'flex', margin: 'auto 0' }}>\r\n\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\tclassName=\"DeviceStateAddButton\"\r\n\t\t\t\t\t\tlabel='add state'\r\n\t\t\t\t\t\tonClick={onAddState}\r\n\t\t\t\t\t\twidth={275}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\tlabel='add default states'\r\n\t\t\t\t\t\tonClick={() => props._addDefaultStates(device.function)}\r\n\t\t\t\t\t\twidth={275}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<span style={{ color: '#900' }}>{error}</span>\r\n\t\t\t</ListItemText>\r\n\t\t</ListItem>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceStates = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER DeviceStates', 'development');\r\n\tconst { device, _moveState } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst newStateKey = useRef('');\r\n\tconst setNewStateKey = val => newStateKey.current = val;\r\n\t\r\n\tconst renderedStates = Object.keys(device.states || {}).map((stateKey, i) => {\r\n\t\tlet state = device.states[stateKey];\r\n\t\tstate = typeof state === 'string' ? { 'state': state } : state;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<DragDeviceState\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={'DeviceState->' + stateKey}\r\n\t\t\t\tindex={i}\r\n\t\t\t\tstate={{ ...state, 'key': stateKey }}\r\n\t\t\t\texpanded={stateKey === newStateKey.current}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t<AddDeviceState newStateKey={newStateKey.current} _setNewStateKey={setNewStateKey} {...props} />\r\n\t\t\t<DragDropContext onDragEnd={_moveState}>\r\n\t\t\t\t<Droppable\r\n\t\t\t\t\tkey='DeviceStates'\r\n\t\t\t\t\tdroppableId='states'\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{renderedStates}\r\n\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Droppable>\r\n\t\t\t</DragDropContext>\r\n\t\t</List>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DragDeviceState = props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\tkey={props.state.key}\r\n\t\t\tdraggableId={'state->' + props.state.key}\r\n\t\t\tindex={props.index}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{(provided, snapshot) => (\r\n\t\t\t<div\r\n\t\t\t\tclassName={clsx(classes.drag, snapshot.isDragging && classes.isDragging)}\r\n\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<DeviceState {...props} />\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Draggable>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceState = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER DeviceState', 'development');\r\n\tconst { state, expanded, _renameState, _deleteState } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst fields = Object.keys(DevicesStates).map(field => <DeviceStateField key={'DeviceStateField->' + state.key + '->' + field} {...props} field={field} />);\r\n\tconst renameState = () => {\r\n\t\tconst stateKey = prompt(i18n.t('Rename State Key'), state.key);\r\n\t\t\r\n\t\tif (stateKey && stateKey !== state.key) {\r\n\t\t\t_renameState(state.key, stateKey);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem\r\n\t\t\tkey={'StatesListItem->' + state.key}\r\n\t\t\tclasses={{ root: clsx(classes.ListItem, 'DeviceState') }}\r\n\t\t\tdense\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t<Collapsible key={'DeviceState->' + state.key} expanded={expanded} className={'DeviceState DeviceState->' + state.key}>\r\n\t\t\t\t\t<CollapsibleSummary>\r\n\t\t\t\t\t\t<Typography classes={{ root: classes.heading }} display=\"inline\">{state.key}</Typography>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={renameState}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={e => {e.stopPropagation();_deleteState(state.key)}}>\r\n\t\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<Icon style={{ fontSize: '1.5em', margin: 'auto 8px' }} icon=\"mdi:drag\" />\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</CollapsibleSummary>\r\n\t\t\t\t\t<CollapsibleDetails>\r\n\t\t\t\t\t\t<Inputs.Fieldset noPadding>\r\n\t\t\t\t\t\t\t{fields}\r\n\t\t\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t\t</CollapsibleDetails>\r\n\t\t\t\t</Collapsible>\r\n\t\t\t</ListItemText>\r\n\t\t</ListItem>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceStateField = React.memo(props => {\r\n\tconst { device, field } = props;\r\n\tconst fieldProps = DevicesStates[field];\r\n\tconst deviceDefaults = _merge(FUNCTIONS['_defaults'], FUNCTIONS[device.function] || {});\r\n\t\r\n\t// JSON\r\n\tif (fieldProps.json === true) {\r\n\t\treturn <DeviceStateFieldJsonEditor {...props} fieldProps={fieldProps} deviceDefaults={deviceDefaults} />\r\n\t}\r\n\t\r\n\t// AutoComplete\r\n\telse if (fieldProps.options !== undefined) {\r\n\t\treturn <DeviceStateFieldAutoComplete {...props} fieldProps={fieldProps} deviceDefaults={deviceDefaults} />\r\n\t}\r\n\t\r\n\t// State Explorer\r\n\telse if (field === 'state' || field === 'action') {\r\n\t\treturn <DeviceStateFieldStateExplorer {...props} fieldProps={fieldProps} deviceDefaults={deviceDefaults} />\r\n\t}\r\n\t\r\n\t// Other\r\n\telse {\r\n\t\treturn <DeviceStateFieldOther {...props} fieldProps={fieldProps} deviceDefaults={deviceDefaults} />\r\n\t}\r\n});\r\n\r\nconst DeviceStateFieldJsonEditor = React.memo(props => {\r\n\tconst { state, field, _onChange } = props;\r\n\t\r\n\t\r\n\tconst value = useRef(state[field] && state[field].node ? state[field].node : (state[field] || ''));\r\n\tconst setValue = val => value.current = val;\r\n\tconst [showJsonEditor,setShowJsonEditor] = useState(false);\r\n\tconst onChange = (props, val) => !props.error && _onChange(props, val);\r\n\t\r\n\t// additional props\r\n\tlet additionalProps = {}\r\n\tadditionalProps.action = () => setShowJsonEditor(true);\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment key={'StatesListItemField->' + state.key + '->' + field}>\r\n\t\t\t<JsonEditorPopup\r\n\t\t\t\topen={showJsonEditor}\r\n\t\t\t\t_onClose={() => setShowJsonEditor(false)}\r\n\t\t\t\tval={value.current}\r\n\t\t\t\theight={500}\r\n\t\t\t\t_onChange={val => {\r\n\t\t\t\t\tonChange({ 'id': 'states->' + state.key + '->' + field }, val);\r\n\t\t\t\t\tsetValue(val);\r\n\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<DeviceStateFieldInput {...props} additionalProps={additionalProps} val={value.current} setVal={setValue} _onChange={onChange} />\r\n\t\t</React.Fragment>\r\n\t);\r\n});\r\n\r\nconst DeviceStateFieldStateExplorer = React.memo(props => {\r\n\tconst { state, field, _onChange } = props;\r\n\t\r\n\t\r\n\tconst [value,setValue] = useState(state[field] && state[field].node ? state[field].node : (state[field] || ''));\r\n\tconst setVal = val => setValue(val);\r\n\tconst [showStateExplorer,setShowStateExplorer] = useState(false);\r\n\t\r\n\t// additional props\r\n\tlet additionalProps = {}\r\n\tadditionalProps.action = () => setShowStateExplorer(true);\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment key={'StatesListItemField->' + state.key + '->' + field}>\r\n\t\t\t\r\n\t\t\t<StateExplorerPopup\r\n\t\t\t\topen={showStateExplorer}\r\n\t\t\t\t_onClose={() => setShowStateExplorer(false)}\r\n\t\t\t\tval={value}\r\n\t\t\t\t_onChange={val => {\r\n\t\t\t\t\t_onChange({ 'id': 'states->' + state.key + '->' + field }, val);\r\n\t\t\t\t\tsetValue(val);\r\n\t\t\t\t\tsetShowStateExplorer(false);\r\n\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<DeviceStateFieldInput {...props} additionalProps={additionalProps} val={value} setVal={setVal} />\r\n\t\t</React.Fragment>\r\n\t);\r\n});\r\n\r\nconst DeviceStateFieldAutoComplete = React.memo(props => {\r\n\tconst { device, deviceDefaults, state, field, fieldProps, _onChange } = props;\r\n\t\r\n\t\r\n\t// components\r\n\tconst components = {\r\n\t\t'screenshot': (option, state) => <Screenshot func={device.function} option={option} selected={state.selected} />,\r\n\t\t'bodyElement': getComponents(device.function, 'body'),\r\n\t\t'actionElement': getComponents(device.function, 'action')\r\n\t}\r\n\t\r\n\tconst [value,setValue] = useState(\r\n\t\t(state[field] && state[field].node !== undefined) || state[field] !== undefined ? // prefer if given but empty (which means user has unselected it)\r\n\t\t\t((state[field] && state[field].node) || state[field] || '') : (\r\n\t\t\t\t(field.indexOf('Element') > -1 && deviceDefaults[state.key.toLowerCase()] && deviceDefaults[state.key.toLowerCase()][field]) ||\r\n\t\t\t\t(field.indexOf('Element') > -1 && deviceDefaults['_any'] && deviceDefaults['_any'][field]) ||\r\n\t\t\t\t''\r\n\t\t\t)\r\n\t);\r\n\t\r\n\tconst setVal = val => setValue(val);\r\n\tconst [componentConfig,setComponentConfig] = useState(null);\r\n\t\r\n\t//\r\n\tconst property = useRef({});\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (value && property.current[value] === undefined) {\r\n\t\t\tlet config = _merge(\r\n\t\t\t\tcomponentsOptions['_defaults'][value] || {},\r\n\t\t\t\t(componentsOptions[props.device.function] && componentsOptions[props.device.function][value]) || {}\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t// apply user specific values\r\n\t\t\tconst userConfig = props.state[value + 'Config'] || {}\r\n\t\t\tObject.keys(userConfig).forEach(c => {\r\n\t\t\t\tconfig[c] = typeof config[c] !== 'object' ? { 'val': config[c] } : config[c];\r\n\t\t\t\tconfig[c].val = userConfig[c];\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tproperty.current[value] = config;\r\n\t\t}\r\n\t\t\r\n\t}, [value, props.device, props.state]);\r\n\t\r\n\t// additional props\r\n\tlet additionalProps = {}\r\n\tif (fieldProps.options !== undefined) {\r\n\t\tadditionalProps.options = typeof fieldProps.options === 'function' ? fieldProps.options(props.device) : components[field];\r\n\t}\r\n\t\r\n\tif (fieldProps.renderOption !== undefined) {\r\n\t\tadditionalProps.renderOption = typeof fieldProps.renderOption === 'function' ? ((option, state) => fieldProps.renderOption(option, state, props.device)) : components['screenshot'];\r\n\t}\r\n\t\r\n\tadditionalProps.action = ((componentsOptions['_defaults'] && componentsOptions['_defaults'][value]) || (componentsOptions[device.function] && componentsOptions[device.function][value])) && (() => setComponentConfig({ 'id': field + 'Config', 'config': property.current[value] }));\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment key={'StatesListItemField->' + state.key + '->' + field}>\r\n\t\t\t\r\n\t\t\t<ComponentConfig\r\n\t\t\t\t_onClose={() => setComponentConfig(null)}\r\n\t\t\t\t_onChange={(props, val) => {\r\n\t\t\t\t\tconst key = props.id.substr(props.id.lastIndexOf('.')+1);\r\n\t\t\t\t\tproperty.current[value][key].val = val;\r\n\t\t\t\t\t_onChange({ ...props, 'id': 'states->' + state.key + '->' + value + 'Config->' + key }, val);\r\n\t\t\t\t}}\r\n\t\t\t\tid={(componentConfig && componentConfig.id) || null}\r\n\t\t\t\tconfig={(componentConfig && componentConfig.config) || {}}\r\n\t\t\t\tdevice={device}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<DeviceStateFieldInput {...props} additionalProps={additionalProps} val={value} setVal={setVal} />\r\n\t\t</React.Fragment>\r\n\t);\r\n});\r\n\r\nconst DeviceStateFieldOther = React.memo(props => {\r\n\tconst { state, field } = props;\r\n\t\r\n\t\r\n\tconst [value,setValue] = useState(state[field] && state[field].node ? state[field].node : (state[field] || ''));\r\n\tconst setVal = val => setValue(val);\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment key={'StatesListItemField->' + state.key + '->' + field}>\r\n\t\t\t<DeviceStateFieldInput {...props} val={value} setVal={setVal} />\r\n\t\t</React.Fragment>\r\n\t);\r\n});\r\n\r\nconst DeviceStateFieldInput = React.memo(props => {\r\n\tconst { deviceDefaults, state, field, fieldProps, additionalProps, setVal, _onChange } = props;\r\n\t\r\n\t\r\n\tconst Input = Inputs[fieldProps.type || 'Text'];\r\n\t\r\n\treturn (\r\n\t\t<Inputs.FieldsetItem className={'field->' + field} columns={4}>\r\n\t\t\t<Input\r\n\t\t\t\t{...fieldProps}\r\n\t\t\t\t{...additionalProps}\r\n\t\t\t\t\r\n\t\t\t\tid={'states->' + state.key + '->' + field}\r\n\t\t\t\tshrink={true}\r\n\t\t\t\tlabel={fieldProps.label || ucFirst(field)}\r\n\t\t\t\tplaceholder={(deviceDefaults[state.key.toLowerCase()] && deviceDefaults[state.key.toLowerCase()][field.replace('Element', '')]) || fieldProps.val || ''}\r\n\t\t\t\twidth={370}\r\n\t\t\t\tval={props.val}\r\n\t\t\t\t\r\n\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\tsetVal(val);\r\n\t\t\t\t\ttypeof fieldProps.onChange === 'function' ? fieldProps.onChange(props, val, _onChange) : _onChange(props, val);\r\n\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t</Inputs.FieldsetItem>\r\n\t);\r\n});\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport ImportIcon from '@material-ui/icons/CloudDownload'\r\nimport CopyIcon from '@material-ui/icons/FileCopy'\r\n\r\nimport Collapsible, { CollapsibleSummary, CollapsibleDetails } from '../../../components/Collapsible'\r\nimport EnhancedTable from '../../../components/EnhancedTable'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\nimport { sortObject } from '../../../helpers/utils'\r\nimport DevicesPage from './DevicesPage'\r\nimport ImportDevicesPage from './ImportDevicesPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '25px'\r\n\t},\r\n\thr: {\r\n\t\tmargin: '10px 2px'\r\n\t},\r\n\theading: {\r\n\t\tmarginRight: theme.spacing()\r\n\t},\r\n\tCustomTextInput: {\r\n\t\twidth: 150\r\n\t},\r\n\tCustomDialogTitle: {\r\n\t\tpadding: 0,\r\n\t\tmarginRight: '50px'\r\n\t},\r\n\tTableCell: {\r\n\t\tverticalAlign: 'top',\r\n\t\tpadding: '5px 0'\r\n\t},\r\n\tdivider: {\r\n\t\tmargin: 'auto',\r\n\t},\r\n\tpaper: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\r\n\t\tmargin: '0 auto',\r\n\t\tposition: 'fixed',\r\n\t\tzIndex: 999,\r\n\t\tright: 0,\r\n\t\tleft: 0,\r\n\t},\r\n\tnewlyCreatedDevice: {\r\n\t\tbackgroundColor: 'rgba(99, 233, 30, 0.08) !important'\r\n\t},\r\n\tListItem: {\r\n\t\tpadding: 0\r\n\t},\r\n\tDeviceList: {\r\n\t\tpaddingTop: '72px'\r\n\t}\r\n}));\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nconst DevicesListPage = React.memo(props => {\r\n\tLog._('DevicesListPage', 'RENDER DevicesListPage', 'development');\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _groupDevices = (groupBy, d) => {\r\n\t\t\r\n\t\tlet g = {}\r\n\t\tfor (let deviceId in d) {\r\n\t\t\tlet device = d[deviceId];\r\n\t\t\t\r\n\t\t\t// by manufacturer\r\n\t\t\tif (groupBy === 'manufacturer') {\r\n\t\t\t\tconst manufacturer = device.attributes && device.attributes.manufacturer ? device.attributes.manufacturer.name : ('(' + i18n.t('no manufacturer') + ')');\r\n\t\t\t\tg[manufacturer] = g[manufacturer] || [];\r\n\t\t\t\tg[manufacturer].push(device);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// by function\r\n\t\t\telse {\r\n\t\t\t\tconst func = i18n.t(device.function);\r\n\t\t\t\tg[func] = g[func] || [];\r\n\t\t\t\tg[func].push(device);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn sortObject(g, false);\r\n\t}\r\n\t\r\n\t\r\n\tconst [selectedDevice,setSelectedDevice] = useState(null);\r\n\tconst [importDevices,setImportDevices] = useState(null);\r\n\t\r\n\tconst devices = useRef(props.devices);\r\n\tconst groupBy = useRef(props.settings.configGroupDevices || 'function');\r\n\tconst lastDeviceAdded = useRef();\r\n\tconst filterBy = useRef();\r\n\tconst filterByTimeout = useRef();\r\n\t\r\n\tconst [groups,setGroups] = useState(_groupDevices(groupBy.current, props.devices));\r\n\tconst [width,setWidth] = useState('100%');\r\n\t\r\n\t\r\n\t// \r\n\tuseEffect(() => {\r\n\t\tdevices.current = props.devices;\r\n\t\tsetGroups(_groupDevices(props.settings.configGroupDevices || 'function', props.devices));\r\n\t\t\r\n\t}, [props.devices, props.settings]);\r\n\t\r\n\t// \r\n\tuseEffect(() => {\r\n\t\tprops._onDevicesChange && props._onDevicesChange(devices.current);\r\n\t\t\r\n\t}, [groups, props]);\r\n\t\r\n\t// \r\n\tuseEffect(() => {\r\n\t\tif (lastDeviceAdded.current) {\r\n\t\t\tdocument.getElementById('DialogContent').scrollTop = (document.getElementById('device-' + lastDeviceAdded.current) && document.getElementById('device-' + lastDeviceAdded.current).offsetTop) || 0;\r\n\t\t}\r\n\t\t\r\n\t}, [groups]);\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _importDevices = importDevices => _saveDevices({ ...devices.current, ...importDevices });\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _saveDevice = saveDevice => {\r\n\t\tlastDeviceAdded.current = saveDevice.id;\r\n\t\t\r\n\t\t// detect state key changes (only for modified devices)\r\n\t\tif (devices.current[saveDevice.id]) {\r\n\t\t\t\r\n\t\t\t// detect state key changes (replacements)\r\n\t\t\tlet prevDeviceStates = Object.keys(devices.current[saveDevice.id].states || {});\r\n\t\t\t\r\n\t\t\tfor (let stateKey in saveDevice.states) {\r\n\t\t\t\tconst state = saveDevice.states[stateKey];\r\n\t\t\t\t\r\n\t\t\t\tif (state._renamed) {\r\n\t\t\t\t\t_deleteInWidgets(saveDevice.id, state._renamed, stateKey);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// detect state key changes (deletions)\r\n\t\t\tprevDeviceStates.forEach(prevStateKey => {\r\n\t\t\t\t\r\n\t\t\t\tif (saveDevice.states[prevStateKey] === undefined) {\r\n\t\t\t\t\t_deleteInWidgets(saveDevice.id, prevStateKey);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t_saveDevices({ ...devices.current, [saveDevice.id]: { ...saveDevice, 'hash': Date.now() } });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _saveDevices = saveDevices => {\r\n\t\tdevices.current = saveDevices;\r\n\t\t_filterBy(filterBy.current, saveDevices);\r\n\t\t\r\n\t\tsetSelectedDevice(null);\r\n\t\tsetImportDevices(null);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _copyDevice = device => {\r\n\t\tconst id = device.id.substr(-6).substr(0,1) === '_' ? device.id.substr(0, device.id.lastIndexOf('_')) + '_' + uuid().substr(0,5) : device.id + '_' + uuid().substr(0,5);\r\n\t\tdevices.current[id] = { ...device, 'name': device.name + ' (' + i18n.t('duplicate') + ')', 'id': id, 'hash': Date.now() }\r\n\t\t\r\n\t\t_saveDevices(devices.current);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteDevice = deviceId => {\r\n\t\t_deleteInWidgets(deviceId);\r\n\t\tdelete devices.current[deviceId];\r\n\t\t\r\n\t\t_saveDevices(devices.current);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteInWidgets = (deviceId, stateKey = null, newStateKey = '') => {\r\n\t\tlet layout = [ ...props.layout ];\r\n\t\t\r\n\t\t// drawer\r\n\t\tfor (let drawerKey of Object.keys(layout)) {\r\n\t\t\tlet drawer = layout[drawerKey];\r\n\t\t\t\r\n\t\t\t// tabs\r\n\t\t\tfor (let tab of drawer.tabs) {\r\n\t\t\t\ttab.columns = tab._fullscreen !== undefined ? [[tab._fullscreen]] : tab.columns;\r\n\t\t\t\t\r\n\t\t\t\t// columns\r\n\t\t\t\tfor (let columnIndex in tab.columns) {\r\n\t\t\t\t\tlet column = tab.columns[columnIndex];\r\n\t\t\t\t\t\r\n\t\t\t\t\t// widgets\r\n\t\t\t\t\tfor (let widget of column) {\r\n\t\t\t\t\t\twidget = widget || { devices: [] }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// device deletion\r\n\t\t\t\t\t\tif (stateKey === null) {\r\n\t\t\t\t\t\t\twidget.devices = widget.devices.filter(d => d.deviceId !== deviceId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state deletion or replacement\r\n\t\t\t\t\t\telse if (stateKey !== null) {\r\n\t\t\t\t\t\t\twidget.devices = widget.devices.map(d => {\r\n\t\t\t\t\t\t\t\tif (d.deviceId === deviceId) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// remove from secondary state keys\r\n\t\t\t\t\t\t\t\t\tif (Array.isArray(d.secondaryStatesKeys) && d.secondaryStatesKeys.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tconst secondaryStatesKeyIndex = d.secondaryStatesKeys.indexOf(stateKey);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (secondaryStatesKeyIndex > -1) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (newStateKey !== '') {\r\n\t\t\t\t\t\t\t\t\t\t\t\td.secondaryStatesKeys.splice(secondaryStatesKeyIndex, 1, newStateKey);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\t\td.secondaryStatesKeys.splice(secondaryStatesKeyIndex, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// remove from primary and body state key\r\n\t\t\t\t\t\t\t\t\td.primaryStateKey = d.primaryStateKey !== stateKey ? d.primaryStateKey : newStateKey;\r\n\t\t\t\t\t\t\t\t\td.bodyStateKey = d.bodyStateKey !== stateKey ? d.bodyStateKey : newStateKey;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tprops._onLayoutsChange(layout);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _groupBy = (p, val) => {\r\n\t\tgroupBy.current = val;\r\n\t\tsetGroups(_groupDevices(val, devices.current));\r\n\t\tprops._onLayoutsChange(null, { 'configGroupDevices': val });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _filterBy = (val = '', d) => {\r\n\t\tfilterBy.current = val;\r\n\t\tval = val.toLowerCase();\r\n\t\t\r\n\t\tclearTimeout(filterByTimeout.current);\r\n\t\tfilterByTimeout.current = setTimeout(() => {\r\n\t\t\t\r\n\t\t\t// get filter params\r\n\t\t\tconst filters = val.match(RegExp(/-(id|name|function|stateId|stateLabel|state|action|manufacturer):[^\\\\-]*/g));\r\n\t\t\tlet labels = []\r\n\t\t\tlet values = {}\r\n\t\t\t\r\n\t\t\tfilters && filters.forEach(filter => {\r\n\t\t\t\tlet [ label, value ] = filter.substr(1).split(':');\r\n\t\t\t\tlabels.push(label.trim());\r\n\t\t\t\tvalues[label.trim()] = value.trim().toLowerCase();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// filter devices\r\n\t\t\tlet result = {}\r\n\t\t\tObject.values(d).forEach(device => {\r\n\t\t\t\t\r\n\t\t\t\t// filter by device\r\n\t\t\t\tif (\r\n\t\t\t\t\t\t((!filters || labels.indexOf('id') > -1) && device.id.toLowerCase().indexOf(values['id'] || val) > -1) ||\r\n\t\t\t\t\t\t((!filters || labels.indexOf('name') > -1) && device.name.toLowerCase().indexOf(values['name'] || val) > -1) ||\r\n\t\t\t\t\t\t((!filters || labels.indexOf('function') > -1) && device.function.toLowerCase().indexOf(values['function'] || val) > -1) ||\r\n\t\t\t\t\t\t((!filters || labels.indexOf('function') > -1) && i18n.t(device.function).toLowerCase().indexOf(values['function'] || val) > -1) ||\r\n\t\t\t\t\t\t((!filters || labels.indexOf('manufacturer') > -1) && device.attributes && device.attributes.manufacturer && device.attributes.manufacturer.name.toLowerCase().indexOf(values['manufacturer'] || val) > -1)\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tresult[device.id] = device;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// filter by device states\r\n\t\t\t\tif (result[device.id] === undefined) {\r\n\t\t\t\t\tdevice.states = device.states || {}\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (let stateKey in device.states) {\r\n\t\t\t\t\t\tlet state = device.states[stateKey]\r\n\t\t\t\t\t\tstate.label = state.label || '';\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t((!filters || labels.indexOf('stateId') > -1) && stateKey.toLowerCase().indexOf(values['stateId'] || val) > -1) ||\r\n\t\t\t\t\t\t\t\t((!filters || labels.indexOf('stateLabel') > -1) && state.label.toLowerCase().indexOf(values['stateLabel'] || val) > -1) ||\r\n\t\t\t\t\t\t\t\t((!filters || labels.indexOf('state') > -1) && state.state && typeof state.state !== 'object' && state.state.toLowerCase().indexOf(values['state'] || val) > -1) ||\r\n\t\t\t\t\t\t\t\t((!filters || labels.indexOf('action') > -1) && state.action && typeof state.action !== 'object' && state.action.toLowerCase().indexOf(values['action'] || val) > -1) ||\r\n\t\t\t\t\t\t\t\t((!filters || labels.indexOf('state') > -1) && state.state && typeof state.state === 'object' && state.state.node.toLowerCase().indexOf(values['state'] || val) > -1) ||\r\n\t\t\t\t\t\t\t\t((!filters || labels.indexOf('action') > -1) && state.action && typeof state.action === 'object' && state.action.node.toLowerCase().indexOf(values['action'] || val) > -1)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tresult[device.id] = device;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tsetGroups(_groupDevices(groupBy.current, result));\r\n\t\t\t\r\n\t\t}, 750);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tlet groupedDevices = [];\r\n\tfor (let key in groups) {\r\n\t\tconst labelId = key.toLowerCase().replace(/ /g, '');\r\n\t\t\r\n\t\tgroupedDevices.push(\r\n\t\t\t<ListItem dense classes={{ root: classes.ListItem }} key={'group-' + labelId}>\r\n\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t<Group\r\n\t\t\t\t\t\tid={labelId}\r\n\t\t\t\t\t\tlabel={key}\r\n\t\t\t\t\t\tdevices={groups[key]}\r\n\t\t\t\t\t\t_selectDevice={device => setSelectedDevice(device.id)}\r\n\t\t\t\t\t\t_copyDevice={_copyDevice}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\t// adjust width\r\n\tconst paperComponent = useCallback(el => {\r\n\t\tif (el !== null) {\r\n\t\t\tconst boxWidth = el.parentNode.offsetWidth-20;\r\n\t\t\tsetWidth(boxWidth);\r\n\t\t}\r\n\t}, []);\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Paper ref={paperComponent} className={clsx(classes.paper, 'DeviceListFilter')} style={{ width: width }}>\r\n\t\t\t\t<Typography classes={{ root: classes.heading }} display=\"inline\" variant=\"h6\">\r\n\t\t\t\t\t{i18n.t('Devices List') + ' (' + Object.keys(devices.current).length + ')'}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Select\r\n\t\t\t\t\tkey=\"groupBy\"\r\n\t\t\t\t\tlabel=\"Group by\"\r\n\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={_groupBy}\r\n\t\t\t\t\tval={groupBy.current}\r\n\t\t\t\t\tselection={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'function': 'Function'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'manufacturer': 'Manufacturer'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey=\"filterBy\"\r\n\t\t\t\t\tid=\"filterBy\"\r\n\t\t\t\t\twidth={400}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlabel=\"Filter\"\r\n\t\t\t\t\tinfo=\"DevicesListPage#filterBy#info\"\r\n\t\t\t\t\tlink=\"https://forum.iobroker.net/post/542452\"\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={(props, val) => _filterBy(val, devices.current)}\r\n\t\t\t\t\tval={filterBy.current}\r\n\t\t\t\t\t//placeholder={i18n.t('Filter') + '..'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Divider\r\n\t\t\t\t\tclasses={{ root: classes.divider }}\r\n\t\t\t\t\torientation=\"vertical\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Button\r\n\t\t\t\t\tkey=\"device-add\"\r\n\t\t\t\t\tclassName=\"deviceAdd\"\r\n\t\t\t\t\tonClick={() => setSelectedDevice('#new')}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tdisabled={selectedDevice !== null || importDevices !== null}\r\n\t\t\t\t\tlabel='add device'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Button\r\n\t\t\t\t\tkey=\"devices-import\"\r\n\t\t\t\t\tclassName=\"deviceImport\"\r\n\t\t\t\t\tonClick={() => setImportDevices(true)}\r\n\t\t\t\t\tstartIcon={<ImportIcon />}\r\n\t\t\t\t\tdisabled={selectedDevice !== null || importDevices !== null}\r\n\t\t\t\t\tlabel='import devices'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t\t\r\n\t\t\t{selectedDevice != null && (\r\n\t\t\t\t<DevicesPage\r\n\t\t\t\t\tdevice={selectedDevice === '#new' ? { 'id': uuid(), 'function': 'other', 'states': {}, 'options': {}, 'attributes': { '_created': Date.now() }} : devices.current[selectedDevice]}\r\n\t\t\t\t\tonSave={_saveDevice}\r\n\t\t\t\t\tonDelete={_deleteDevice}\r\n\t\t\t\t\tonClose={() => setSelectedDevice(null)}\r\n\t\t\t\t\t/>)}\r\n\t\t\t\r\n\t\t\t{importDevices !== null && (\r\n\t\t\t\t<ImportDevicesPage\r\n\t\t\t\t\tdevices={devices.current}\r\n\t\t\t\t\tonImport={_importDevices}\r\n\t\t\t\t\tonClose={() => setImportDevices(null)}\r\n\t\t\t\t\t/>)}\r\n\t\t\t\r\n\t\t\t<List className=\"DeviceList\" classes={{ root: classes.DeviceList }} dense>\r\n\t\t\t\t{groupedDevices}\r\n\t\t\t</List>\r\n\t\t</>\r\n\t)\r\n\r\n}, (prevProps, nextProps) => nextProps.selected !== true); // re-render on false (not equal), only render when selected\r\n\r\nexport default DevicesListPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst Group = props => {\r\n\tconst { id, label, devices } = props;\r\n\t\r\n\treturn (\r\n\t\t<Collapsible key={'DeviceStates-' + id + '-' + devices.length} className=\"Group\">\r\n\t\t\t<CollapsibleSummary>{label + ' (' + devices.length + ')'}</CollapsibleSummary>\r\n\t\t\t<CollapsibleDetails>\r\n\t\t\t\t<DeviceTable {...props} />\r\n\t\t\t</CollapsibleDetails>\r\n\t\t</Collapsible>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceTable = props => {\r\n\tLog._('DevicesListPage', 'RENDER DeviceTable', 'development');\r\n\tconst { devices } = props;\r\n\t\r\n\treturn (\r\n\t\t<EnhancedTable\r\n\t\t\ttoolbar={false}\r\n\t\t\theadCells={[\r\n\t\t\t\t{ id: 'edit', width: '3%', disablePadding: true, label: '' },\r\n\t\t\t\t{ id: 'copy', width: '2%', disablePadding: true, label: '' },\r\n\t\t\t\t{ id: 'name', width: '15%', label: i18n.t('Name') },\r\n\t\t\t\t{ id: 'manufacturer', width: '15%', label: i18n.t('Manufacturer') },\r\n\t\t\t\t{ id: 'function', width: '10%', label: i18n.t('Function') },\r\n\t\t\t\t{ id: 'states', width: '55%', disablePadding: false, label: i18n.t('States') },\r\n\t\t\t\t//{ id: 'options', width: '20%', disablePadding: false, label: i18n.t('Options') },\r\n\t\t\t\t//{ id: 'attributes', width: '15%', disablePadding: false, label: i18n.t('Attributes') }\r\n\t\t\t]}\r\n\t\t\trows={Object.values(devices)}\r\n\t\t\t\r\n\t\t\tdefaultOrderBy=\"name\"\r\n\t\t\tselectable={false}\r\n\t\t\tsortable={true}\r\n\t\t\tstickyHeader\r\n\t\t\t\r\n\t\t\tCustomTableBody={CustomTableProps => <DeviceList {...props} {...CustomTableProps} />}\r\n\t\t\t/>\r\n\t);\r\n\t\r\n}\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceList = props => {\r\n\tLog._('DevicesListPage', 'RENDER DeviceList', 'development');\r\n\tconst classes = useStyles();\r\n\tconst { sortedRows, _selectDevice, _copyDevice } = props;\r\n\t\r\n\treturn (\r\n\t\t<TableBody>\r\n\t\t\r\n\t\t{sortedRows.map((device, index) => {\r\n\t\t\t//let options = Object.keys(device.options || {}).filter(optionKey => (device.options[optionKey] === '' || (Array.isArray(device.options[optionKey]) && device.options[optionKey].length === 0) || (typeof device.options[optionKey] === 'object' && Object.keys(device.options[optionKey]).length === 0)) === false).sort().join(', '); \r\n\t\t\t//let attributes = Object.keys(device.attributes || {}).sort().join(', ');\r\n\t\t\t\r\n\t\t\t// skip\r\n\t\t\tif (device.attributes && device.attributes.ignore === true) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={'TableRow-' + index}\r\n\t\t\t\t\tid={'device-' + device.id}\r\n\t\t\t\t\thover\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tselected={device.attributes && device.attributes._created > Date.now()-24*60*60*1000}\r\n\t\t\t\t\tclasses={{ selected: classes.newlyCreatedDevice, root: \"Device\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<TableCell padding=\"checkbox\" scope=\"row\" align=\"center\">\r\n\t\t\t\t\t\t<IconButton onClick={() => _selectDevice(device)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell padding=\"checkbox\" align=\"center\">\r\n\t\t\t\t\t\t<IconButton onClick={() => _copyDevice(device)}>\r\n\t\t\t\t\t\t\t<CopyIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>{device.name + (device.label ? ' (' + device.label + ')' : '')}</TableCell>\r\n\t\t\t\t\t<TableCell>{(device.attributes && device.attributes.manufacturer && device.attributes.manufacturer.name) || ''}</TableCell>\r\n\t\t\t\t\t<TableCell>{i18n.t(device.function)} (<code>{device.function}</code>)</TableCell>\r\n\t\t\t\t\t<TableCell>{Object.keys(device.states || {}).join(', ')}</TableCell>\r\n\t\t\t\t\t{/*<TableCell>{options.length > 35 ? <Tooltip title={options}><span>{options.substr(0,32) + '...'}</span></Tooltip> : options}</TableCell>*/}\r\n\t\t\t\t\t{/*<TableCell>{attributes.length > 35 ? <Tooltip title={attributes}><span>{attributes.substr(0,32) + '...'}</span></Tooltip> : attributes}</TableCell>*/}\r\n\t\t\t\t</TableRow>\r\n\t\t\t\r\n\t\t\t);\r\n\t\t})}\r\n\t\t\r\n\t\t</TableBody>\r\n\t);\r\n\t\r\n}","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"\n}), 'Edit');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","var map = {\n\t\"./de\": 1358,\n\t\"./de.js\": 1358,\n\t\"./en\": 1359,\n\t\"./en.js\": 1359\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1466;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\"\n}), 'CloudDownload');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z\"\n}), 'FileCopy');\n\nexports.default = _default;"],"sourceRoot":""}