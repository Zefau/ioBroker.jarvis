(this.webpackJsonpjarvis=this.webpackJsonpjarvis||[]).push([[4],{1356:function(e,t,a){"use strict";a.r(t),a.d(t,"CollapsibleSummary",(function(){return y})),a.d(t,"CollapsibleDetails",(function(){return x}));var n=a(24),r=a(523),i=a(522),c=a(146),l=a(524);var o=a(9),d=a(55),s=a(0),u=a.n(s),m=a(2),b=a(248),p=a(57),f=a(1498),v=a(140),g=a(1465),h=a.n(g),E=a(41),O=Object(E.a)((function(e){var t={duration:e.transitions.duration.shortest};return{expanded:{},Collapsible:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}}},CollapsibleSummary:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&$expanded":{minHeight:64}},CollapsibleSummaryContent:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},CollapsibleSummaryExpandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(90deg)"}},CollapsibleDetails:{padding:e.spacing(0,2,2,4)}}})),j=u.a.createContext({}),y=(t.default=u.a.forwardRef((function(e,t){var a,b=e.expanded,p=e.children,g=e.className,h=Object(d.a)(e,["expanded","children","className"]),E=O(),y=Object(s.useState)(void 0!==b&&b),x=Object(o.a)(y,2),k=x[0],C=x[1],_=Object(s.useCallback)((function(e){C(!k)}),[k,C]),I=u.a.Children.toArray(p),R=(a=I,Object(r.a)(a)||Object(i.a)(a)||Object(c.a)(a)||Object(l.a)()),S=R[0],w=R.slice(1),D=Object(s.useMemo)((function(){return{expanded:k,toggle:_}}),[k,_]);return u.a.createElement(v.a,Object.assign({elevation:0,classes:{root:Object(m.a)(E.Collapsible,Object(n.a)({},E.expanded,k),g)},ref:t},h),u.a.createElement(j.Provider,{value:D},S),u.a.createElement(f.a,{in:k,timeout:"auto"},u.a.createElement("div",{"aria-labelledby":S.props.id,id:S.props["aria-controls"],role:"region"},w)))})),u.a.forwardRef((function(e,t){var a=e.children,r=e.className,i=e.expandIcon,c=(e.onBlur,e.onClick),l=(e.onFocusVisible,Object(d.a)(e,["children","className","expandIcon","onBlur","onClick","onFocusVisible"])),o=O(),s=u.a.useContext(j),f=s.expanded,v=s.toggle;return u.a.createElement(b.a,Object.assign({focusRipple:!1,disableRipple:!0,component:"div","aria-expanded":f,className:Object(m.a)(o.CollapsibleSummary,Object(n.a)({},o.expanded,f),r),onClick:function(e){e.stopPropagation(),v&&v(e),c&&c(e)},ref:t},l),u.a.createElement(p.a,{className:Object(m.a)(o.CollapsibleSummaryExpandIcon,Object(n.a)({},o.expanded,f)),component:"div",size:"small",tabIndex:null,role:null,"aria-hidden":!0},i||u.a.createElement(h.a,null)),u.a.createElement("div",{className:Object(m.a)(o.CollapsibleSummaryContent,Object(n.a)({},o.expanded,f))},a))}))),x=u.a.forwardRef((function(e,t){var a=e.className,n=Object(d.a)(e,["className"]),r=O();return u.a.createElement("div",Object.assign({className:Object(m.a)(r.CollapsibleDetails,a),ref:t},n))}))},1386:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var n=a(24),r=a(5),i=a(9),c=a(0),l=a.n(c),o=a(1024),d=a(12),s=a(6),u=a(59),m=a(20),b=a(50),p=a(32),f=a(1504),v=a(1502),g=a(1503),h=a(1346),E=a(101),O=a(243),j=a(70),y=a(245),x=a(110),k=a(244),C=a(61),_=a(517),I=a.n(_),R=a(253),S=a.n(R),w=a(1356),D=a(162),N=a(27),B=a(41),T=Object(B.a)((function(e){return{fullWidth:{width:"100%"},heading:{paddingRight:e.spacing()},transparent:{backgroundColor:"transparent"},ListItem:{display:"flex"},gap:{margin:"0 auto"}}}));function A(e){var t=Object(c.useState)(null),a=Object(i.a)(t,2),b=a[0],p=a[1],f=Object(c.useState)({}),v=Object(i.a)(f,2),g=v[0],h=v[1],O=Object(c.useRef)(!1),j=Object(c.useRef)({filter:"all",adapters:Object.keys(m.default)||[]}),y=Object(c.useRef)({}),x=Object(c.useRef)({_new:{hash:"",name:s.default.t("New Devices"),expanded:!0,devices:[]},_added:{hash:"",name:s.default.t("Devices that have been added already"),devices:[]},_incorrect:{hash:"",name:s.default.t("Devices with incorrect configuration (states not found)"),devices:[]},_ignored:{hash:"",name:s.default.t("Devices marked as ignored"),devices:[]}}),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=x.current._new.devices.findIndex((function(t){return t.id===e.id})),i=x.current._ignored.devices.findIndex((function(t){return t.id===e.id}));e.attributes&&!0===e.attributes.ignore&&a>-1?(x.current._new.devices.splice(a,1),x.current._ignored.devices.push(e),x.current._ignored.hash=Object(o.a)(),x.current._new.hash=Object(o.a)()):e.attributes&&!1===e.attributes.ignore&&i>-1&&(x.current._ignored.devices.splice(i,1),x.current._new.devices.push(e),x.current._ignored.hash=Object(o.a)(),x.current._new.hash=Object(o.a)()),h((function(a){e.attributes=e.attributes||{};var i=Object.keys(a);if(!0===t||null===t&&(-1===i.indexOf(e.id)||!0===e.attributes.ignore||!1===e.attributes.ignore))return e.attributes.ignore=!1===e.attributes.ignore?null:e.attributes.ignore,e.attributes._created=Date.now(),Object(r.a)(Object(r.a)({},a),{},Object(n.a)({},e.id,e));var c=Object(r.a)({},a);return delete c[e.id],c}))},C=function(t){if(!1!==O.current)return!1;y.current={},x.current._new.devices=[],x.current._added.devices=[],x.current._incorrect.devices=[],x.current._ignored.devices=[];var a=e.devices,n={};t.forEach((function(e,t){var r=e.value||e.reason.device;r.attributes=r.attributes||{};var i="_new";"fulfilled"===e.status&&e.value&&e.value.states&&Object.keys(e.value.states).length>0?(void 0!==a[r.id]?(i="_added",a[r.id].attributes&&!0===a[r.id].attributes.ignore&&(i="_ignored")):n[r.id]=r,r.attributes.manufacturer&&r.attributes.manufacturer.namespace&&(y.current[r.attributes.manufacturer.namespace]=y.current[r.attributes.manufacturer.namespace]||[],y.current[r.attributes.manufacturer.namespace].push(r.id))):(i="_incorrect",r.states=null,r.attributes.note=r.attributes.note||e.reason&&e.reason.error&&e.reason.error.message||s.default.t("No correct defined states found. The device may be unknown. Please help the developer to add support for this device and report to Github.")),x.current[i].devices.push(r)})),h(n),p("done")};return l.a.createElement(D.default,{header:s.default.t("Devices Import"),actions:l.a.createElement(l.a.Fragment,null,l.a.createElement(N.default.Button,{width:"auto",id:"action-cancel",onClick:function(){O.current=!0,e.onClose&&e.onClose()},label:"Cancel",variant:"text",color:"secondary"}),l.a.createElement(N.default.Button,{width:"auto",id:"action-read",onClick:function(){p("loading"),"all"===j.current.filter?u.default.importDevices(j.current.adapters).then(C).catch((function(e){d.default._("ImportDevicesPage","IMPORT_DEVICES: "+e.message,"error")})):u.default.importEnums("functions",j.current.adapters).then(C).catch((function(e){d.default._("ImportDevicesPage","IMPORT_ENUMS: "+e.message,"error")}))},label:"Read adapters",variant:"text",disabled:"loading"===b,loading:"loading"===b}),"done"===b&&l.a.createElement(N.default.Button,{width:"auto",id:"action-import",onClick:function(){return e.onImport&&e.onImport(g)},label:s.default.t("Import selected devices")+" ("+Object.values(g).filter((function(e){return!e.attributes||!0!==e.attributes.ignore})).length+")",disabled:0===Object.keys(g).length,variant:"text"})),dense:!0,maxWidth:"md",fullWidth:!0,open:!0,onClose:e.onClose},l.a.createElement(N.default.Fieldset,{label:"Adapters"},l.a.createElement(N.default.FieldsetItem,null,l.a.createElement(V,{loading:b,foundDevicesByManufacturer:y,search:j,_setSearch:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Array.isArray(j.current[e])?"remove"===a||null===a&&j.current[e].indexOf(t)>-1?j.current[e]=j.current[e].filter((function(e){return e!==t})):j.current[e].push(t):j.current[e]=t}}))),null!==b&&l.a.createElement(N.default.Fieldset,{label:"Devices"},l.a.createElement(N.default.FieldsetItem,null,"loading"===b&&l.a.createElement(E.a,null),"done"===b&&Object.keys(x.current).map((function(e){return l.a.createElement(P,Object.assign({key:"Category-"+e},Object(r.a)({id:e},x.current[e]),{_markDeviceToImport:k}))})))))}var P=l.a.memo((function(e){var t=T(),a=e.id,n=e.name,r=e.expanded,i=e.devices;return l.a.createElement(f.a,{classes:{root:t.fullWidth},key:a,defaultExpanded:!0===r},l.a.createElement(v.a,{expandIcon:l.a.createElement(I.a,null)},l.a.createElement(p.a,{className:t.heading},n),l.a.createElement(h.a,{color:"primary",size:"small",label:i.length})),l.a.createElement(g.a,null,l.a.createElement($,e)))}),(function(e,t){return e.hash===t.hash})),$=function(e){var t=T(),a=Object(c.useState)("_new"===e.id),n=Object(i.a)(a,2),r=n[0],o=n[1],d=e.devices.map((function(t){return l.a.createElement(F,{key:"Category-"+e.id+"-Device-"+t.id,allSelected:r,category:e,device:t,_markDeviceToImport:e._markDeviceToImport})}));return l.a.createElement(O.a,{classes:{root:t.fullWidth},dense:!0},"_incorrect"!==e.id&&"_ignored"!==e.id&&l.a.createElement(j.a,{dense:!0,button:!0,divider:!0,onClick:function(){o((function(e){return!1===e}))}},l.a.createElement(y.a,null,l.a.createElement(N.default.Checkbox,{checked:r,tabIndex:-1,disableRipple:!0})),l.a.createElement(x.a,{primary:l.a.createElement("strong",null,s.default.t("(Un)Select all devices"))})),d)},F=l.a.memo((function(e){var t=T(),a=e.category,n=e.device,o=e._markDeviceToImport,d=Object(c.useState)(!!("_new"===a.id||n.attributes&&void 0!==n.attributes.ignore)),s=Object(i.a)(d,2),u=s[0],m=s[1];Object(c.useEffect)((function(){m(e.allSelected),e._markDeviceToImport(e.device,e.allSelected)}),[e]);var b=function(){m((function(e){return!0!==e})),o&&o(n)};return l.a.createElement(j.a,{key:n.id,button:"_incorrect"!==a.id&&"_ignored"!==a.id,dense:!0,divider:!0,onClick:function(){return"_incorrect"!==a.id&&"_ignored"!==a.id&&b()}},l.a.createElement(y.a,null,l.a.createElement(N.default.Checkbox,{id:n.id,checked:u,disabled:"_incorrect"===a.id||"_ignored"===a.id,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":n.id}})),l.a.createElement(x.a,{classes:{root:t.ListItem},disableTypography:!0},l.a.createElement(M,{device:n})),l.a.createElement(k.a,null,"_new"===a.id&&l.a.createElement(N.default.Button,{width:"auto",variant:"text",label:"ignore",onClick:function(e){e.stopPropagation(),n.attributes=Object(r.a)(Object(r.a)({},n.attributes),{},{ignore:!0}),b()}}),"_ignored"===a.id&&l.a.createElement(N.default.Button,{width:"auto",variant:"text",label:"move to new devices",onClick:function(e){e.stopPropagation(),n.attributes=Object(r.a)(Object(r.a)({},n.attributes),{},{ignore:!1}),b()}})))}),(function(e,t){return e.device.attributes.ignore===t.device.attributes.ignore&&e.allSelected===t.allSelected})),M=l.a.memo((function(e){var t=e.device,a=T(),n=t.states?Object.keys(t.states).map((function(e){return l.a.createElement(L,{key:"DeviceState-"+t.id+"-"+e,state:Object(r.a)(Object(r.a)({},t.states[e]),{},{key:e})})})):l.a.createElement(p.a,{display:"block"},t.attributes.note);return l.a.createElement(w.default,{classes:{root:a.transparent},key:"DeviceStates-"+t.id},l.a.createElement(w.CollapsibleSummary,null,l.a.createElement(p.a,{className:a.heading},t.name),t.attributes&&t.attributes.manufacturer&&l.a.createElement(h.a,{color:"secondary",size:"small",label:t.attributes.manufacturer.name})),l.a.createElement(w.CollapsibleDetails,null,l.a.createElement(p.a,{style:{margin:"0 0 8px 0"}},s.default.t("Function"),": ",s.default.t(t.function)," ",l.a.createElement("code",null,t.function)),n))})),L=l.a.memo((function(e){var t=e.state;return l.a.createElement(b.a,{container:!0,spacing:2},l.a.createElement(b.a,{item:!0,xs:12},l.a.createElement(p.a,{display:"block"},l.a.createElement("strong",null,t.key)),l.a.createElement(p.a,{component:"span",variant:"subtitle1"},s.default.t("State"),": "),l.a.createElement("code",null,t.state||"-"),l.a.createElement("br",null),l.a.createElement(p.a,{component:"span",variant:"subtitle1"},s.default.t("Action"),": "),l.a.createElement("code",null,t.action||"-")))})),V=l.a.memo((function(e){var t=e.loading,a=e.foundDevicesByManufacturer,n=e.search,o=e._setSearch,d=T(),u=Object(c.useState)(!0),b=Object(i.a)(u,2),f=b[0],v=b[1],g=0,E=Object.keys(m.default).map((function(t){var i=Object(r.a)(Object(r.a)({},m.default[t]),{},{namespace:t,devices:a.current[t]||[]});return g+=i.devices&&Array.isArray(i.devices)?i.devices.length:0,l.a.createElement(W,Object.assign({},e,{key:"AdapterItem-"+t,adapter:i,selected:n.current.adapters.indexOf(i.namespace)>-1}))}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(N.default.RadioGroup,{onChange:function(e,t){return o("filter",t)},label:"Search the adapter structure for all devices or only devices added to enums",inputs:[{label:"Search adapter structure for all devices",value:"all"},{label:"Search only for devices added to enums",value:"enums"}],required:!0,val:n.current.filter}),l.a.createElement(w.default,{key:"AdapterList-"+t,expanded:"done"!==t},l.a.createElement(w.CollapsibleSummary,null,l.a.createElement(p.a,{style:{margin:"auto 0"}},s.default.t("Adapter List")),l.a.createElement("div",{className:d.gap}),g>0&&l.a.createElement(h.a,{color:"secondary",label:s.default.t("Devices")+": "+g})),l.a.createElement(w.CollapsibleDetails,null,l.a.createElement(O.a,{classes:{root:d.fullWidth},dense:!0},l.a.createElement(j.a,{dense:!0,button:!0,divider:!0,onClick:function(e){n.current.adapters=f?[]:Object.keys(m.default)||[],v((function(e){return!1===e}))}},l.a.createElement(y.a,null,l.a.createElement(N.default.Checkbox,{checked:f,tabIndex:-1,disableRipple:!0})),l.a.createElement(x.a,{primary:l.a.createElement("strong",null,s.default.t("(Un)Select all adapters"))})),E))))})),W=function(e){var t=e.adapter,a=e.selected,n=e._setSearch,r=t.default,o=Object(c.useState)(a),d=Object(i.a)(o,2),u=d[0],m=d[1];Object(c.useEffect)((function(){m(a)}),[a]);return l.a.createElement(j.a,{key:t.namespace,dense:!0,button:!0,divider:!0,onClick:function(){m((function(e){return!0!==e})),n("adapters",t.namespace)}},l.a.createElement(y.a,null,l.a.createElement(N.default.Checkbox,{id:t.namespace,checked:u,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":r}})),l.a.createElement(x.a,{disableTypography:!0},l.a.createElement(p.a,{display:"inline"},r+" "+s.default.t("adapter")),l.a.createElement("span",{style:{marginLeft:2,verticalAlign:"bottom"}},l.a.createElement(C.a,{title:s.default.t("import#warning").replace("{deviceObjectType}",t.deviceObjectType||"device").replace("{devicePattern}",t.devicePattern)},l.a.createElement(S.a,{color:"primary"})))),l.a.createElement(k.a,null,t.devices&&Array.isArray(t.devices)&&t.devices.length>0&&l.a.createElement(h.a,{color:"primary",size:"small",label:s.default.t("Devices")+": "+t.devices.length})))}},1457:function(e,t,a){"use strict";var n=a(0),r=n.createContext({});t.a=r},1465:function(e,t,a){"use strict";var n=a(38),r=a(39);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a(0)),c=(0,n(a(40)).default)(i.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight");t.default=c},1502:function(e,t,a){"use strict";var n=a(1),r=a(4),i=a(0),c=(a(3),a(2)),l=a(248),o=a(57),d=a(8),s=a(1457),u=i.forwardRef((function(e,t){var a=e.children,d=e.classes,u=e.className,m=e.expandIcon,b=e.IconButtonProps,p=e.onBlur,f=e.onClick,v=e.onFocusVisible,g=Object(r.a)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),h=i.useState(!1),E=h[0],O=h[1],j=i.useContext(s.a),y=j.disabled,x=void 0!==y&&y,k=j.expanded,C=j.toggle;return i.createElement(l.a,Object(n.a)({focusRipple:!1,disableRipple:!0,disabled:x,component:"div","aria-expanded":k,className:Object(c.a)(d.root,u,x&&d.disabled,k&&d.expanded,E&&d.focused),onFocusVisible:function(e){O(!0),v&&v(e)},onBlur:function(e){O(!1),p&&p(e)},onClick:function(e){C&&C(e),f&&f(e)},ref:t},g),i.createElement("div",{className:Object(c.a)(d.content,k&&d.expanded)},a),m&&i.createElement(o.a,Object(n.a)({className:Object(c.a)(d.expandIcon,k&&d.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},b),m))}));t.a=Object(d.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(u)},1503:function(e,t,a){"use strict";var n=a(1),r=a(4),i=a(0),c=(a(3),a(2)),l=a(8),o=i.forwardRef((function(e,t){var a=e.classes,l=e.className,o=Object(r.a)(e,["classes","className"]);return i.createElement("div",Object(n.a)({className:Object(c.a)(a.root,l),ref:t},o))}));t.a=Object(l.a)((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(o)},1504:function(e,t,a){"use strict";var n=a(1),r=a(525),i=a(527),c=a(251),l=a(526);var o=a(44),d=a(4),s=a(0),u=(a(165),a(3),a(2)),m=a(1498),b=a(140),p=a(8),f=a(1457),v=a(66),g=s.forwardRef((function(e,t){var a,p=e.children,g=e.classes,h=e.className,E=e.defaultExpanded,O=void 0!==E&&E,j=e.disabled,y=void 0!==j&&j,x=e.expanded,k=e.onChange,C=e.square,_=void 0!==C&&C,I=e.TransitionComponent,R=void 0===I?m.a:I,S=e.TransitionProps,w=Object(d.a)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),D=Object(v.a)({controlled:x,default:O,name:"Accordion",state:"expanded"}),N=Object(o.a)(D,2),B=N[0],T=N[1],A=s.useCallback((function(e){T(!B),k&&k(e,!B)}),[B,k,T]),P=s.Children.toArray(p),$=(a=P,Object(r.a)(a)||Object(i.a)(a)||Object(c.a)(a)||Object(l.a)()),F=$[0],M=$.slice(1),L=s.useMemo((function(){return{expanded:B,disabled:y,toggle:A}}),[B,y,A]);return s.createElement(b.a,Object(n.a)({className:Object(u.a)(g.root,h,B&&g.expanded,y&&g.disabled,!_&&g.rounded),ref:t,square:_},w),s.createElement(f.a.Provider,{value:L},F),s.createElement(R,Object(n.a)({in:B,timeout:"auto"},S),s.createElement("div",{"aria-labelledby":F.props.id,id:F.props["aria-controls"],role:"region"},M)))}));t.a=Object(p.a)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(g)}}]);
//# sourceMappingURL=4.af3e467e.chunk.js.map